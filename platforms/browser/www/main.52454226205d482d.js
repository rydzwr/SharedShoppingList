"use strict";(self.webpackChunkSharedShoppingList=self.webpackChunkSharedShoppingList||[]).push([[179],{58:(ss,kn,Fe)=>{Fe.d(kn,{BH:()=>St,G6:()=>Oi,L:()=>Qe,LL:()=>B,Pz:()=>gt,Sg:()=>_r,UG:()=>K,ZB:()=>Ie,ZR:()=>Y,aH:()=>Vt,b$:()=>yn,eu:()=>F,hl:()=>V,jU:()=>Gt,m9:()=>sa,ne:()=>as,pd:()=>mu,r3:()=>or,ru:()=>Lt,tV:()=>Q,uI:()=>bn,vZ:()=>os,w1:()=>Ni,xO:()=>gu,xb:()=>kr,z$:()=>He,zd:()=>_i});const Me=function(b){const C=[];let A=0;for(let q=0;q<b.length;q++){let P=b.charCodeAt(q);P<128?C[A++]=P:P<2048?(C[A++]=P>>6|192,C[A++]=63&P|128):55296==(64512&P)&&q+1<b.length&&56320==(64512&b.charCodeAt(q+1))?(P=65536+((1023&P)<<10)+(1023&b.charCodeAt(++q)),C[A++]=P>>18|240,C[A++]=P>>12&63|128,C[A++]=P>>6&63|128,C[A++]=63&P|128):(C[A++]=P>>12|224,C[A++]=P>>6&63|128,C[A++]=63&P|128)}return C},zt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(b,C){if(!Array.isArray(b))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=C?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let P=0;P<b.length;P+=3){const W=b[P],Ne=P+1<b.length,ze=Ne?b[P+1]:0,dt=P+2<b.length,Wt=dt?b[P+2]:0;let Bn=(15&ze)<<2|Wt>>6,Tt=63&Wt;dt||(Tt=64,Ne||(Bn=64)),q.push(A[W>>2],A[(3&W)<<4|ze>>4],A[Bn],A[Tt])}return q.join("")},encodeString(b,C){return this.HAS_NATIVE_SUPPORT&&!C?btoa(b):this.encodeByteArray(Me(b),C)},decodeString(b,C){return this.HAS_NATIVE_SUPPORT&&!C?atob(b):function(b){const C=[];let A=0,q=0;for(;A<b.length;){const P=b[A++];if(P<128)C[q++]=String.fromCharCode(P);else if(P>191&&P<224){const W=b[A++];C[q++]=String.fromCharCode((31&P)<<6|63&W)}else if(P>239&&P<365){const dt=((7&P)<<18|(63&b[A++])<<12|(63&b[A++])<<6|63&b[A++])-65536;C[q++]=String.fromCharCode(55296+(dt>>10)),C[q++]=String.fromCharCode(56320+(1023&dt))}else{const W=b[A++],Ne=b[A++];C[q++]=String.fromCharCode((15&P)<<12|(63&W)<<6|63&Ne)}}return C.join("")}(this.decodeStringToByteArray(b,C))},decodeStringToByteArray(b,C){this.init_();const A=C?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let P=0;P<b.length;){const W=A[b.charAt(P++)],ze=P<b.length?A[b.charAt(P)]:0;++P;const Wt=P<b.length?A[b.charAt(P)]:64;++P;const ye=P<b.length?A[b.charAt(P)]:64;if(++P,null==W||null==ze||null==Wt||null==ye)throw new en;q.push(W<<2|ze>>4),64!==Wt&&(q.push(ze<<4&240|Wt>>2),64!==ye&&q.push(Wt<<6&192|ye))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let b=0;b<this.ENCODED_VALS.length;b++)this.byteToCharMap_[b]=this.ENCODED_VALS.charAt(b),this.charToByteMap_[this.byteToCharMap_[b]]=b,this.byteToCharMapWebSafe_[b]=this.ENCODED_VALS_WEBSAFE.charAt(b),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[b]]=b,b>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(b)]=b,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(b)]=b)}}};class en extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Qe=function(b){return function(b){const C=Me(b);return zt.encodeByteArray(C,!0)}(b).replace(/\./g,"")},Q=function(b){try{return zt.decodeString(b,!0)}catch(C){console.error("base64Decode failed: ",C)}return null};function Ie(b,C){if(!(C instanceof Object))return C;switch(C.constructor){case Date:return new Date(C.getTime());case Object:void 0===b&&(b={});break;case Array:b=[];break;default:return C}for(const A in C)!C.hasOwnProperty(A)||!Ke(A)||(b[A]=Ie(b[A],C[A]));return b}function Ke(b){return"__proto__"!==b}const $e=()=>{try{return function lt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const b=process.env.__FIREBASE_DEFAULTS__;return b?JSON.parse(b):void 0})()||(()=>{if(typeof document>"u")return;let b;try{b=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const C=b&&Q(b[1]);return C&&JSON.parse(C)})()}catch(b){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${b}`)}},Vt=()=>{var b;return null===(b=$e())||void 0===b?void 0:b.config},gt=b=>{var C;return null===(C=$e())||void 0===C?void 0:C[`_${b}`]};class St{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((C,A)=>{this.resolve=C,this.reject=A})}wrapCallback(C){return(A,q)=>{A?this.reject(A):this.resolve(q),"function"==typeof C&&(this.promise.catch(()=>{}),1===C.length?C(A):C(A,q))}}}function _r(b,C){if(b.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=C||"demo-project",P=b.iat||0,W=b.sub||b.user_id;if(!W)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ne=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:P,exp:P+3600,auth_time:P,sub:W,user_id:W,firebase:{sign_in_provider:"custom",identities:{}}},b);return[Qe(JSON.stringify({alg:"none",type:"JWT"})),Qe(JSON.stringify(Ne)),""].join(".")}function He(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function bn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function K(){var b;const C=null===(b=$e())||void 0===b?void 0:b.forceEnvironment;if("node"===C)return!0;if("browser"===C)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Gt(){return"object"==typeof self&&self.self===self}function Lt(){const b="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof b&&void 0!==b.id}function yn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ni(){const b=He();return b.indexOf("MSIE ")>=0||b.indexOf("Trident/")>=0}function Oi(){return!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V(){try{return"object"==typeof indexedDB}catch{return!1}}function F(){return new Promise((b,C)=>{try{let A=!0;const q="validate-browser-context-for-indexeddb-analytics-module",P=self.indexedDB.open(q);P.onsuccess=()=>{P.result.close(),A||self.indexedDB.deleteDatabase(q),b(!0)},P.onupgradeneeded=()=>{A=!1},P.onerror=()=>{var W;C((null===(W=P.error)||void 0===W?void 0:W.message)||"")}}catch(A){C(A)}})}class Y extends Error{constructor(C,A,q){super(A),this.code=C,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,Y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,B.prototype.create)}}class B{constructor(C,A,q){this.service=C,this.serviceName=A,this.errors=q}create(C,...A){const q=A[0]||{},P=`${this.service}/${C}`,W=this.errors[C],Ne=W?function fe(b,C){return b.replace(tt,(A,q)=>{const P=C[q];return null!=P?String(P):`<${q}?>`})}(W,q):"Error";return new Y(P,`${this.serviceName}: ${Ne} (${P}).`,q)}}const tt=/\{\$([^}]+)}/g;function or(b,C){return Object.prototype.hasOwnProperty.call(b,C)}function kr(b){for(const C in b)if(Object.prototype.hasOwnProperty.call(b,C))return!1;return!0}function os(b,C){if(b===C)return!0;const A=Object.keys(b),q=Object.keys(C);for(const P of A){if(!q.includes(P))return!1;const W=b[P],Ne=C[P];if(vn(W)&&vn(Ne)){if(!os(W,Ne))return!1}else if(W!==Ne)return!1}for(const P of q)if(!A.includes(P))return!1;return!0}function vn(b){return null!==b&&"object"==typeof b}function gu(b){const C=[];for(const[A,q]of Object.entries(b))Array.isArray(q)?q.forEach(P=>{C.push(encodeURIComponent(A)+"="+encodeURIComponent(P))}):C.push(encodeURIComponent(A)+"="+encodeURIComponent(q));return C.length?"&"+C.join("&"):""}function _i(b){const C={};return b.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[P,W]=q.split("=");C[decodeURIComponent(P)]=decodeURIComponent(W)}}),C}function mu(b){const C=b.indexOf("?");if(!C)return"";const A=b.indexOf("#",C);return b.substring(C,A>0?A:void 0)}function as(b,C){const A=new Rs(b,C);return A.subscribe.bind(A)}class Rs{constructor(C,A){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=A,this.task.then(()=>{C(this)}).catch(q=>{this.error(q)})}next(C){this.forEachObserver(A=>{A.next(C)})}error(C){this.forEachObserver(A=>{A.error(C)}),this.close(C)}complete(){this.forEachObserver(C=>{C.complete()}),this.close()}subscribe(C,A,q){let P;if(void 0===C&&void 0===A&&void 0===q)throw new Error("Missing Observer.");P=function Eo(b,C){if("object"!=typeof b||null===b)return!1;for(const A of C)if(A in b&&"function"==typeof b[A])return!0;return!1}(C,["next","error","complete"])?C:{next:C,error:A,complete:q},void 0===P.next&&(P.next=Ft),void 0===P.error&&(P.error=Ft),void 0===P.complete&&(P.complete=Ft);const W=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?P.error(this.finalError):P.complete()}catch{}}),this.observers.push(P),W}unsubscribeOne(C){void 0===this.observers||void 0===this.observers[C]||(delete this.observers[C],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(C){if(!this.finalized)for(let A=0;A<this.observers.length;A++)this.sendOne(A,C)}sendOne(C,A){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[C])try{A(this.observers[C])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close(C){this.finalized||(this.finalized=!0,void 0!==C&&(this.finalError=C),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ft(){}function sa(b){return b&&b._delegate?b._delegate:b}},246:(ss,kn,Fe)=>{function I(t){return"function"==typeof t}function xe(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const j=xe(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Me(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class ct{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(I(r))try{r()}catch(s){e=s instanceof j?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Vn(s)}catch(o){e=e??[],o instanceof j?e=[...e,...o.errors]:e.push(o)}}if(e)throw new j(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Vn(e);else{if(e instanceof ct){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Me(n,e)}remove(e){const{_finalizers:n}=this;n&&Me(n,e),e instanceof ct&&e._removeParent(this)}}ct.EMPTY=(()=>{const t=new ct;return t.closed=!0,t})();const zt=ct.EMPTY;function en(t){return t instanceof ct||t&&"closed"in t&&I(t.remove)&&I(t.add)&&I(t.unsubscribe)}function Vn(t){I(t)?t():t.unsubscribe()}const Qe={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Q={setTimeout(t,e,...n){const{delegate:r}=Q;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Q;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ie(t){Q.setTimeout(()=>{const{onUnhandledError:e}=Qe;if(!e)throw t;e(t)})}function Ie(){}const Ke=pt("C",void 0,void 0);function pt(t,e,n){return{kind:t,value:e,error:n}}let ke=null;function $e(t){if(Qe.useDeprecatedSynchronousErrorHandling){const e=!ke;if(e&&(ke={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=ke;if(ke=null,n)throw r}}else t()}class Un extends ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,en(e)&&e.add(this)):this.destination=Gt}static create(e,n,r){return new _r(e,n,r)}next(e){this.isStopped?K(function Ln(t){return pt("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?K(function lt(t){return pt("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?K(Ke,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Vt=Function.prototype.bind;function gt(t,e){return Vt.call(t,e)}class St{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){He(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){He(r)}else He(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){He(n)}}}class _r extends Un{constructor(e,n,r){let i;if(super(),I(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Qe.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&gt(e.next,s),error:e.error&&gt(e.error,s),complete:e.complete&&gt(e.complete,s)}):i=e}this.destination=new St(i)}}function He(t){Qe.useDeprecatedSynchronousErrorHandling?function Fn(t){Qe.useDeprecatedSynchronousErrorHandling&&ke&&(ke.errorThrown=!0,ke.error=t)}(t):ie(t)}function K(t,e){const{onStoppedNotification:n}=Qe;n&&Q.setTimeout(()=>n(t,e))}const Gt={closed:!0,next:Ie,error:function bn(t){throw t},complete:Ie},Lt="function"==typeof Symbol&&Symbol.observable||"@@observable";function yn(t){return t}function Ni(t){return 0===t.length?yn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let rt=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function V(t){return t&&t instanceof Un||function Oi(t){return t&&I(t.next)&&I(t.error)&&I(t.complete)}(t)&&en(t)}(n)?n:new _r(n,r,i);return $e(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=vo(r))((i,s)=>{const o=new _r({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Lt](){return this}pipe(...n){return Ni(n)(this)}toPromise(n){return new(n=vo(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function vo(t){var e;return null!==(e=t??Qe.Promise)&&void 0!==e?e:Promise}const F=xe(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let H=(()=>{class t extends rt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new z(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new F}next(n){$e(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){$e(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){$e(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?zt:(this.currentObservers=null,s.push(n),new ct(()=>{this.currentObservers=null,Me(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new rt;return n.source=this,n}}return t.create=(e,n)=>new z(e,n),t})();class z extends H{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:zt}}function Y(t){return I(t?.lift)}function B(t){return e=>{if(Y(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(t,e,n,r,i){return new tt(t,e,n,r,i)}class tt extends Un{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function _e(t,e){return B((n,r)=>{let i=0;n.subscribe(fe(r,s=>{r.next(t.call(e,s,i++))}))})}var we=Fe(582);const st=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function qt(t){return I(t?.then)}function Mt(t){return I(t[Lt])}function Yn(t){return Symbol.asyncIterator&&I(t?.[Symbol.asyncIterator])}function An(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const yr=function or(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function kr(t){return I(t?.[yr])}function pu(t){return(0,we.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,we.qq)(n.read());if(i)return yield(0,we.qq)(void 0);yield yield(0,we.qq)(r)}}finally{n.releaseLock()}})}function os(t){return I(t?.getReader)}function vn(t){if(t instanceof rt)return t;if(null!=t){if(Mt(t))return function ea(t){return new rt(e=>{const n=t[Lt]();if(I(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(st(t))return function gu(t){return new rt(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(qt(t))return function _i(t){return new rt(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ie)})}(t);if(Yn(t))return vr(t);if(kr(t))return function mu(t){return new rt(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(os(t))return function as(t){return vr(pu(t))}(t)}throw An(t)}function vr(t){return new rt(e=>{(function Rs(t,e){var n,r,i,s;return(0,we.mG)(this,void 0,void 0,function*(){try{for(n=(0,we.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Jn(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Ft(t,e,n=1/0){return I(e)?Ft((r,i)=>_e((s,o)=>e(r,s,i,o))(vn(t(r,i))),n):("number"==typeof e&&(n=e),B((r,i)=>function Eo(t,e,n,r,i,s,o,a){const u=[];let d=0,f=0,g=!1;const _=()=>{g&&!u.length&&!d&&e.complete()},y=w=>d<r?E(w):u.push(w),E=w=>{s&&e.next(w),d++;let D=!1;vn(n(w,f++)).subscribe(fe(e,M=>{i?.(M),s?y(M):e.next(M)},()=>{D=!0},void 0,()=>{if(D)try{for(d--;u.length&&d<r;){const M=u.shift();o?Jn(e,o,()=>E(M)):E(M)}_()}catch(M){e.error(M)}}))};return t.subscribe(fe(e,y,()=>{g=!0,_()})),()=>{a?.()}}(r,i,t,n)))}function yi(t=1/0){return Ft(yn,t)}const Sn=new rt(t=>t.complete());function Ps(t){return t[t.length-1]}function na(t){return I(Ps(t))?t.pop():void 0}function xs(t){return function ii(t){return t&&I(t.schedule)}(Ps(t))?t.pop():void 0}function ar(t,e=0){return B((n,r)=>{n.subscribe(fe(r,i=>Jn(r,t,()=>r.next(i),e),()=>Jn(r,t,()=>r.complete(),e),i=>Jn(r,t,()=>r.error(i),e)))})}function Er(t,e=0){return B((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function sa(t,e){if(!t)throw new Error("Iterable cannot be null");return new rt(n=>{Jn(n,e,()=>{const r=t[Symbol.asyncIterator]();Jn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function A(t,e){return e?function C(t,e){if(null!=t){if(Mt(t))return function Ms(t,e){return vn(t).pipe(Er(e),ar(e))}(t,e);if(st(t))return function Qc(t,e){return new rt(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(qt(t))return function ia(t,e){return vn(t).pipe(Er(e),ar(e))}(t,e);if(Yn(t))return sa(t,e);if(kr(t))return function _u(t,e){return new rt(n=>{let r;return Jn(n,e,()=>{r=t[yr](),Jn(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>I(r?.return)&&r.return()})}(t,e);if(os(t))return function b(t,e){return sa(pu(t),e)}(t,e)}throw An(t)}(t,e):vn(t)}function q(...t){const e=xs(t),n=function ra(t,e){return"number"==typeof Ps(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?vn(r[0]):yi(n)(A(r,e)):Sn}class P extends H{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function W(...t){return A(t,xs(t))}function Ne(t={}){const{connector:e=(()=>new H),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,d=0,f=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},y=()=>{_(),o=u=void 0,f=g=!1},E=()=>{const w=o;y(),w?.unsubscribe()};return B((w,D)=>{d++,!g&&!f&&_();const M=u=u??e();D.add(()=>{d--,0===d&&!g&&!f&&(a=ze(E,i))}),M.subscribe(D),!o&&d>0&&(o=new _r({next:R=>M.next(R),error:R=>{g=!0,_(),a=ze(y,n,R),M.error(R)},complete:()=>{f=!0,_(),a=ze(y,r),M.complete()}}),vn(w).subscribe(o))})(s)}}function ze(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new _r({next:()=>{r.unsubscribe(),t()}});return vn(e(...n)).subscribe(r)}function dt(t,e){return B((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(fe(r,u=>{i?.unsubscribe();let d=0;const f=s++;vn(t(u,f)).subscribe(i=fe(r,g=>r.next(e?e(u,g,f,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Wt(t,e=yn){return t=t??Rn,B((n,r)=>{let i,s=!0;n.subscribe(fe(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function Rn(t,e){return t===e}function ye(t){for(let e in t)if(t[e]===ye)return e;throw Error("Could not find renamed property on target object.")}function Bn(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Tt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Tt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function ki(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Yc=ye({__forward_ref__:ye});function O(t){return t.__forward_ref__=O,t.toString=function(){return Tt(this())},t}function S(t){return ne(t)?t():t}function ne(t){return"function"==typeof t&&t.hasOwnProperty(Yc)&&t.__forward_ref__===O}function Te(t){return t&&!!t.\u0275providers}class $ extends Error{constructor(e,n){super(function hn(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Ee(t){return"string"==typeof t?t:null==t?"":String(t)}function yu(t,e){throw new $(-201,!1)}function Ir(t,e){null==t&&function Ae(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Ce(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function wr(t){return{providers:t.providers||[],imports:t.imports||[]}}function vu(t){return Ph(t,Eu)||Ph(t,gm)}function Ph(t,e){return t.hasOwnProperty(e)?t[e]:null}function us(t){return t&&(t.hasOwnProperty(Iu)||t.hasOwnProperty(xh))?t[Iu]:null}const Eu=ye({\u0275prov:ye}),Iu=ye({\u0275inj:ye}),gm=ye({ngInjectableDef:ye}),xh=ye({ngInjectorDef:ye});var Je=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Je||{});let wu;function Xn(t){const e=wu;return wu=t,e}function _m(t,e,n){const r=vu(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Je.Optional?null:void 0!==e?e:void yu(Tt(t))}const _t=globalThis;class ce{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ce({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Lr={},bu="__NG_DI_FLAG__",Xc="ngTempTokenPath",RI=/\n/gm,Tm="__source";let Os;function Li(t){const e=Os;return Os=t,e}function xI(t,e=Je.Default){if(void 0===Os)throw new $(-203,!1);return null===Os?_m(t,void 0,e):Os.get(t,e&Je.Optional?null:void 0,e)}function se(t,e=Je.Default){return(function mm(){return wu}()||xI)(S(t),e)}function pe(t,e=Je.Default){return se(t,tl(e))}function tl(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Oh(t){const e=[];for(let n=0;n<t.length;n++){const r=S(t[n]);if(Array.isArray(r)){if(0===r.length)throw new $(900,!1);let i,s=Je.Default;for(let o=0;o<r.length;o++){const a=r[o],u=US(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(se(i,s))}else e.push(se(r))}return e}function cs(t,e){return t[bu]=e,t.prototype[bu]=e,t}function US(t){return t[bu]}function Tr(t){return{toString:t}.toString()}var ds=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ds||{}),si=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(si||{});const vi={},ot=[],nl=ye({\u0275cmp:ye}),ks=ye({\u0275dir:ye}),Vh=ye({\u0275pipe:ye}),Au=ye({\u0275mod:ye}),Fi=ye({\u0275fac:ye}),aa=ye({__NG_ELEMENT_ID__:ye}),rl=ye({__NG_ENV_ID__:ye});function Fr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function il(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];sl(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Cm(t){return 3===t||4===t||6===t}function sl(t){return 64===t.charCodeAt(0)}function Vs(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Lh(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Lh(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const Fh="ng-template";function MI(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==Fr(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function ol(t){return 4===t.type&&t.value!==Fh}function Uh(t,e,n){return e===(4!==t.type||n?t.value:Fh)}function Bh(t,e,n){let r=4;const i=t.attrs||[],s=function Dm(t){for(let e=0;e<t.length;e++)if(Cm(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Uh(t,u,n)||""===u&&1===e.length){if(Cr(r))return!1;o=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!MI(t.attrs,d,n)){if(Cr(r))return!1;o=!0}continue}const g=jh(8&r?"class":u,i,ol(t),n);if(-1===g){if(Cr(r))return!1;o=!0;continue}if(""!==d){let _;_=g>s?"":i[g+1].toLowerCase();const y=8&r?_:null;if(y&&-1!==Fr(y,d,0)||2&r&&d!==_){if(Cr(r))return!1;o=!0}}}}else{if(!o&&!Cr(r)&&!Cr(u))return!1;if(o&&Cr(u))continue;o=!1,r=u|1&r}}return Cr(r)||o}function Cr(t){return 0==(1&t)}function jh(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function zh(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function $h(t,e,n=!1){for(let r=0;r<e.length;r++)if(Bh(t,e[r],n))return!0;return!1}function ul(t,e){return t?":not("+e.trim()+")":e}function bm(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Cr(o)&&(e+=ul(s,i),i=""),r=o,s=s||!Cr(r);n++}return""!==i&&(e+=ul(s,i)),e}function hs(t){return Tr(()=>{const e=ll(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ds.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||si.Emulated,styles:t.styles||ot,_:null,schemas:t.schemas||null,tView:null,id:""};Sm(n);const r=t.dependencies;return n.directiveDefs=ua(r,!1),n.pipeDefs=ua(r,!0),n.id=function Wh(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function qh(t){return Xe(t)||En(t)}function OI(t){return null!==t}function Dr(t){return Tr(()=>({type:t.type,bootstrap:t.bootstrap||ot,declarations:t.declarations||ot,imports:t.imports||ot,exports:t.exports||ot,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function cl(t,e){if(null==t)return vi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function Pe(t){return Tr(()=>{const e=ll(t);return Sm(e),e})}function jn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Xe(t){return t[nl]||null}function En(t){return t[ks]||null}function ur(t){return t[Vh]||null}function Ur(t,e){const n=t[Au]||null;if(!n&&!0===e)throw new Error(`Type ${Tt(t)} does not have '\u0275mod' property.`);return n}function ll(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||vi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||ot,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:cl(t.inputs,e),outputs:cl(t.outputs)}}function Sm(t){t.features?.forEach(e=>e(t))}function ua(t,e){if(!t)return null;const n=e?ur:qh;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(OI)}const tn=0,le=1,Ue=2,Rt=3,Ei=4,Ru=5,Pn=6,ca=7,cn=8,Ui=9,la=10,Oe=11,Pu=12,dl=13,da=14,Zt=15,xu=16,Fs=17,Bi=18,Io=19,Pm=20,ji=21,fs=22,Mu=23,ha=24,Ze=25,Us=1,Zh=2,$i=7,fa=9,$n=11;function Br(t){return Array.isArray(t)&&"object"==typeof t[Us]}function br(t){return Array.isArray(t)&&!0===t[Us]}function Ou(t){return 0!=(4&t.flags)}function wo(t){return t.componentOffset>-1}function fl(t){return 1==(1&t.flags)}function Hi(t){return!!t.template}function xm(t){return 0!=(512&t[Ue])}function zi(t,e){return t.hasOwnProperty(Fi)?t[Fi]:null}let Hn=null,Bs=!1;function oi(t){const e=Hn;return Hn=t,e}const ln={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function pl(t){if(!$s(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Um(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Fm(t){t.dirty=!0,function Lm(t){if(void 0===t.liveConsumerNode)return;const e=Bs;Bs=!0;try{for(const n of t.liveConsumerNode)n.dirty||Fm(n)}finally{Bs=e}}(t),t.consumerMarkedDirty?.(t)}function Jh(t){return t&&(t.nextProducerIndex=0),oi(t)}function gl(t,e){if(oi(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if($s(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)js(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Um(t){ga(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(pl(n),r!==n.version))return!0}return!1}function Vu(t){if(ga(t),$s(t))for(let e=0;e<t.producerNode.length;e++)js(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function js(t,e){if(function ml(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),ga(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)js(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ga(i),i.producerIndexOfThis[r]=e}}function $s(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ga(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let $m=null;function _l(t){const e=oi(null);try{return t()}finally{oi(e)}}const Gm=()=>{},jI=(()=>({...ln,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Gm}))();class $I{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function jr(){return qm}function qm(t){return t.type.prototype.ngOnChanges&&(t.setInput=zI),HI}function HI(){const t=Wm(this),e=t?.current;if(e){const n=t.previous;if(n===vi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function zI(t,e,n,r){const i=this.declaredInputs[n],s=Wm(t)||function nf(t,e){return t[yl]=e}(t,{previous:vi,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new $I(u&&u.currentValue,e,a===vi),t[r]=e}jr.ngInherit=!0;const yl="__ngSimpleChanges__";function Wm(t){return t[yl]||null}const Gi=function(t,e,n){};function It(t){for(;Array.isArray(t);)t=t[tn];return t}function _a(t,e){return It(e[t])}function xn(t,e){return It(e[t.index])}function El(t,e){return t.data[e]}function $r(t,e){const n=e[t];return Br(n)?n:n[tn]}function Hs(t,e){return null==e?null:t[e]}function Km(t){t[Fs]=0}function cf(t){1024&t[Ue]||(t[Ue]|=1024,Il(t,1))}function Qm(t){1024&t[Ue]&&(t[Ue]&=-1025,Il(t,-1))}function Il(t,e){let n=t[Rt];if(null===n)return;n[Ru]+=e;let r=n;for(n=n[Rt];null!==n&&(1===e&&1===r[Ru]||-1===e&&0===r[Ru]);)n[Ru]+=e,r=n,n=n[Rt]}const Re={lFrame:r_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Tl(){return Re.bindingsEnabled}function J(){return Re.lFrame.lView}function et(){return Re.lFrame.tView}function Hr(t){return Re.lFrame.contextLView=t,t[cn]}function zr(t){return Re.lFrame.contextLView=null,t}function In(){let t=t_();for(;null!==t&&64===t.type;)t=t.parent;return t}function t_(){return Re.lFrame.currentTNode}function ai(t,e){const n=Re.lFrame;n.currentTNode=t,n.isParent=e}function ff(){return Re.lFrame.isParent}function Bu(){Re.lFrame.isParent=!1}function bo(){return Re.lFrame.bindingIndex++}function _f(t,e){const n=Re.lFrame;n.bindingIndex=n.bindingRootIndex=t,yf(e)}function yf(t){Re.lFrame.currentDirectiveIndex=t}function Ef(t){Re.lFrame.currentQueryIndex=t}function JI(t){const e=t[le];return 2===e.type?e.declTNode:1===e.type?t[Pn]:null}function If(t,e,n){if(n&Je.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&Je.Host||(i=JI(s),null===i||(s=s[da],10&i.type))););if(null===i)return!1;e=i,t=s}const r=Re.lFrame=ju();return r.currentTNode=e,r.lView=t,!0}function wf(t){const e=ju(),n=t[le];Re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ju(){const t=Re.lFrame,e=null===t?null:t.child;return null===e?r_(t):e}function r_(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function i_(){const t=Re.lFrame;return Re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const s_=i_;function Tf(){const t=i_();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function cr(){return Re.lFrame.selectedIndex}function Ao(t){Re.lFrame.selectedIndex=t}function Nt(){const t=Re.lFrame;return El(t.tView,t.selectedIndex)}let Cf=!0;function bl(){return Cf}function Gs(t){Cf=t}function Al(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),null!=f&&(t.destroyHooks??=[]).push(n,f)}}function Sl(t,e,n){a_(t,e,3,n)}function va(t,e,n,r){(3&t[Ue])===n&&a_(t,e,n,r)}function $u(t,e){let n=t[Ue];(3&n)===e&&(n&=8191,n+=1,t[Ue]=n)}function a_(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[Fs]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[Fs]+=65536),(a<s||-1==s)&&(ow(t,n,e,u),t[Fs]=(4294901760&t[Fs])+u+2),u++}function Rl(t,e){Gi(4,t,e);const n=oi(null);try{e.call(t)}finally{oi(n),Gi(5,t,e)}}function ow(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[Ue]>>13<t[Fs]>>16&&(3&t[Ue])===e&&(t[Ue]+=8192,Rl(a,s)):Rl(a,s)}const So=-1;class Hu{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function bf(t){return t!==So}function zu(t){return 32767&t}function Gu(t,e){let n=function cw(t){return t>>16}(t),r=e;for(;n>0;)r=r[da],n--;return r}let Af=!0;function qu(t){const e=Af;return Af=t,e}const lw=255,qs=5;let dw=0;const Wi={};function xl(t,e){const n=d_(t,e);if(-1!==n)return n;const r=e[le];r.firstCreatePass&&(t.injectorIndex=e.length,Wu(r.data,t),Wu(e,null),Wu(r.blueprint,null));const i=Ml(t,e),s=t.injectorIndex;if(bf(i)){const o=zu(i),a=Gu(i,e),u=a[le].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|u[o+d]}return e[s+8]=i,s}function Wu(t,e){t.push(0,0,0,0,0,0,0,0,e)}function d_(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ml(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=__(i),null===r)return So;if(n++,i=i[da],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return So}function Zu(t,e,n){!function Sf(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(aa)&&(r=n[aa]),null==r&&(r=n[aa]=dw++);const i=r&lw;e.data[t+(i>>qs)]|=1<<i}(t,e,n)}function h_(t,e,n){if(n&Je.Optional||void 0!==t)return t;yu()}function Nl(t,e,n,r){if(n&Je.Optional&&void 0===r&&(r=null),!(n&(Je.Self|Je.Host))){const i=t[Ui],s=Xn(void 0);try{return i?i.get(e,r,n&Je.Optional):_m(e,r,n&Je.Optional)}finally{Xn(s)}}return h_(r,0,n)}function f_(t,e,n,r=Je.Default,i){if(null!==t){if(2048&e[Ue]&&!(r&Je.Self)){const o=function gw(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[Ue]&&!(512&o[Ue]);){const a=p_(s,o,n,r|Je.Self,Wi);if(a!==Wi)return a;let u=s.parent;if(!u){const d=o[Pm];if(d){const f=d.get(n,Wi,r);if(f!==Wi)return f}u=__(o),o=o[da]}s=u}return i}(t,e,n,r,Wi);if(o!==Wi)return o}const s=p_(t,e,n,r,Wi);if(s!==Wi)return s}return Nl(e,n,r,i)}function p_(t,e,n,r,i){const s=function g_(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(aa)?t[aa]:void 0;return"number"==typeof e?e>=0?e&lw:pw:e}(n);if("function"==typeof s){if(!If(e,t,r))return r&Je.Host?h_(i,0,r):Nl(e,n,r,i);try{let o;if(o=s(r),null!=o||r&Je.Optional)return o;yu()}finally{s_()}}else if("number"==typeof s){let o=null,a=d_(t,e),u=So,d=r&Je.Host?e[Zt][Pn]:null;for((-1===a||r&Je.SkipSelf)&&(u=-1===a?Ml(t,e):e[a+8],u!==So&&m_(r,!1)?(o=e[le],a=zu(u),e=Gu(u,e)):a=-1);-1!==a;){const f=e[le];if(kl(s,a,f.data)){const g=fw(a,e,n,o,r,d);if(g!==Wi)return g}u=e[a+8],u!==So&&m_(r,e[le].data[a+8]===d)&&kl(s,a,e)?(o=f,a=zu(u),e=Gu(u,e)):a=-1}}return i}function fw(t,e,n,r,i,s){const o=e[le],a=o.data[t+8],f=function Ol(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,f=s>>20,_=i?a+f:t.directiveEnd;for(let y=r?a:a+f;y<_;y++){const E=o[y];if(y<u&&n===E||y>=u&&E.type===n)return y}if(i){const y=o[u];if(y&&Hi(y)&&y.type===n)return u}return null}(a,o,n,null==r?wo(a)&&Af:r!=o&&0!=(3&a.type),i&Je.Host&&s===a);return null!==f?Ro(e,o,f,a):Wi}function Ro(t,e,n,r){let i=t[n];const s=e.data;if(function Df(t){return t instanceof Hu}(i)){const o=i;o.resolving&&function oa(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new $(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Ye(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ee(t)}(s[n]));const a=qu(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?Xn(o.injectImpl):null;If(t,r,Je.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function sw(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=qm(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==d&&Xn(d),qu(a),o.resolving=!1,s_()}}return i}function kl(t,e,n){return!!(n[e+(t>>qs)]&1<<t)}function m_(t,e){return!(t&Je.Self||t&Je.Host&&e)}class Gn{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return f_(this._tNode,this._lView,e,tl(r),n)}}function pw(){return new Gn(In(),J())}function qn(t){return Tr(()=>{const e=t.prototype.constructor,n=e[Fi]||Ea(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[Fi]||Ea(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ea(t){return ne(t)?()=>{const e=Ea(S(t));return e&&e()}:zi(t)}function __(t){const e=t[le],n=e.type;return 2===n?e.declTNode:1===n?t[Pn]:null}const Ia="__parameters__";function Zi(t,e,n){return Tr(()=>{const r=function Pf(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,f){const g=u.hasOwnProperty(Ia)?u[Ia]:Object.defineProperty(u,Ia,{value:[]})[Ia];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Ta(t,e){t.forEach(n=>Array.isArray(n)?Ta(n,e):e(n))}function Ll(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ca(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function qr(t,e,n){let r=Da(t,e);return r>=0?t[1|r]=n:(r=~r,function Zs(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function xf(t,e){const n=Da(t,e);if(n>=0)return t[1|n]}function Da(t,e){return function lr(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const Xu=cs(Zi("Optional"),8),Bl=cs(Zi("SkipSelf"),4);function P_(t){return 128==(128&t.flags)}var Aa=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Aa||{});const Zj=/^>|^->|<!--|-->|--!>|<!-$/g,Kj=/(<|>)/g,Qj="\u200b$1\u200b";const Aw=new Map;let Yj=0;const Rw="__ngContext__";function Ar(t,e){Br(e)?(t[Rw]=e[Io],function Xj(t){Aw.set(t[Io],t)}(e)):t[Rw]=e}let Pw;function xw(t,e){return Pw(t,e)}function Ff(t){const e=t[Rt];return br(e)?e[Rt]:e}function bR(t){return SR(t[Pu])}function AR(t){return SR(t[Ei])}function SR(t){for(;null!==t&&!br(t);)t=t[Ei];return t}function zl(t,e,n,r,i){if(null!=r){let s,o=!1;br(r)?s=r:Br(r)&&(o=!0,r=r[tn]);const a=It(r);0===t&&null!==n?null==i?MR(e,n,a):tc(e,n,a,i||null,!0):1===t&&null!==n?tc(e,n,a,i||null,!0):2===t?function L_(t,e,n){const r=k_(t,e);r&&function y$(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function I$(t,e,n,r,i){const s=n[$i];s!==It(n)&&zl(e,t,r,s,i);for(let a=$n;a<n.length;a++){const u=n[a];Bf(u[le],u,t,e,r,s)}}(e,t,s,n,i)}}function Mw(t,e){return t.createComment(function yR(t){return t.replace(Zj,e=>e.replace(Kj,Qj))}(e))}function N_(t,e,n){return t.createElement(e,n)}function PR(t,e){const n=t[fa],r=n.indexOf(e);Qm(e),n.splice(r,1)}function O_(t,e){if(t.length<=$n)return;const n=$n+e,r=t[n];if(r){const i=r[xu];null!==i&&i!==t&&PR(i,r),e>0&&(t[n-1][Ei]=r[Ei]);const s=Ca(t,$n+e);!function l$(t,e){Bf(t,e,e[Oe],2,null,null),e[tn]=null,e[Pn]=null}(r[le],r);const o=s[Bi];null!==o&&o.detachView(s[le]),r[Rt]=null,r[Ei]=null,r[Ue]&=-129}return r}function Nw(t,e){if(!(256&e[Ue])){const n=e[Oe];e[Mu]&&Vu(e[Mu]),e[ha]&&Vu(e[ha]),n.destroyNode&&Bf(t,e,n,3,null,null),function f$(t){let e=t[Pu];if(!e)return Ow(t[le],t);for(;e;){let n=null;if(Br(e))n=e[Pu];else{const r=e[$n];r&&(n=r)}if(!n){for(;e&&!e[Ei]&&e!==t;)Br(e)&&Ow(e[le],e),e=e[Rt];null===e&&(e=t),Br(e)&&Ow(e[le],e),n=e&&e[Ei]}e=n}}(e)}}function Ow(t,e){if(!(256&e[Ue])){e[Ue]&=-129,e[Ue]|=256,function _$(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Hu)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];Gi(4,a,u);try{u.call(a)}finally{Gi(5,a,u)}}else{Gi(4,i,s);try{s.call(i)}finally{Gi(5,i,s)}}}}}(t,e),function m$(t,e){const n=t.cleanup,r=e[ca];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[ca]=null);const i=e[ji];if(null!==i){e[ji]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[le].type&&e[Oe].destroy();const n=e[xu];if(null!==n&&br(e[Rt])){n!==e[Rt]&&PR(n,e);const r=e[Bi];null!==r&&r.detachView(t)}!function e$(t){Aw.delete(t[Io])}(e)}}function kw(t,e,n){return function xR(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[tn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===si.None||s===si.Emulated)return null}return xn(r,n)}}(t,e.parent,n)}function tc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function MR(t,e,n){t.appendChild(e,n)}function NR(t,e,n,r,i){null!==r?tc(t,e,n,r,i):MR(t,e,n)}function k_(t,e){return t.parentNode(e)}let Vw,Bw,VR=function kR(t,e,n){return 40&t.type?xn(t,n):null};function V_(t,e,n,r){const i=kw(t,r,e),s=e[Oe],a=function OR(t,e,n){return VR(t,e,n)}(r.parent||e[Pn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)NR(s,i,n[u],a,!1);else NR(s,i,n,a,!1);void 0!==Vw&&Vw(s,r,e,n,i)}function Uf(t,e){if(null!==e){const n=e.type;if(3&n)return xn(e,t);if(4&n)return Lw(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Uf(t,r);{const i=t[e.index];return br(i)?Lw(-1,i):It(i)}}if(32&n)return xw(e,t)()||It(t[e.index]);{const r=FR(t,e);return null!==r?Array.isArray(r)?r[0]:Uf(Ff(t[Zt]),r):Uf(t,e.next)}}return null}function FR(t,e){return null!==e?t[Zt][Pn].projection[e.projection]:null}function Lw(t,e){const n=$n+t+1;if(n<e.length){const r=e[n],i=r[le].firstChild;if(null!==i)return Uf(r,i)}return e[$i]}function Fw(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Ar(It(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)Fw(t,e,n.child,r,i,s,!1),zl(e,t,i,a,s);else if(32&u){const d=xw(n,r);let f;for(;f=d();)zl(e,t,i,f,s);zl(e,t,i,a,s)}else 16&u?BR(t,e,r,n,i,s):zl(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Bf(t,e,n,r,i,s){Fw(n,r,t.firstChild,e,i,s,!1)}function BR(t,e,n,r,i,s){const o=n[Zt],u=o[Pn].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)zl(e,t,i,u[d],s);else{let d=u;const f=o[Rt];P_(r)&&(d.flags|=128),Fw(t,e,d,f,i,s,!0)}}function jR(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function $R(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&il(t,e,r),null!==i&&jR(t,e,i),null!==s&&function T$(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}class qR{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const zf=new ce("ENVIRONMENT_INITIALIZER"),nP=new ce("INJECTOR",-1),rP=new ce("INJECTOR_DEF_TYPES");class qw{get(e,n=Lr){if(n===Lr){const r=new Error(`NullInjectorError: No provider for ${Tt(e)}!`);throw r.name="NullInjectorError",r}return n}}function Q$(...t){return{\u0275providers:sP(0,t),\u0275fromNgModule:!0}}function sP(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return Ta(e,o=>{const a=o;j_(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&oP(i,s),n}function oP(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];Ww(i,s=>{e(s,r)})}}function j_(t,e,n,r){if(!(t=S(t)))return!1;let i=null,s=us(t);const o=!s&&Xe(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=us(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)j_(d,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{Ta(s.imports,f=>{j_(f,e,n,r)&&(d||=[],d.push(f))})}finally{}void 0!==d&&oP(d,e)}if(!a){const d=zi(i)||(()=>new i);e({provide:i,useFactory:d,deps:ot},i),e({provide:rP,useValue:i,multi:!0},i),e({provide:zf,useValue:()=>se(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const d=t;Ww(u,f=>{e(f,d)})}}}return i!==t&&void 0!==t.providers}function Ww(t,e){for(let n of t)Te(n)&&(n=n.\u0275providers),Array.isArray(n)?Ww(n,e):e(n)}const Y$=ye({provide:String,useValue:ye});function Zw(t){return null!==t&&"object"==typeof t&&Y$ in t}function nc(t){return"function"==typeof t}const Kw=new ce("Set Injector scope."),$_={},X$={};let Qw;function H_(){return void 0===Qw&&(Qw=new qw),Qw}class Ki{}class Zl extends Ki{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Jw(e,o=>this.processProvider(o)),this.records.set(nP,Kl(void 0,this)),i.has("environment")&&this.records.set(Ki,Kl(void 0,this));const s=this.records.get(Kw);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(rP.multi,ot,Je.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Li(this),r=Xn(void 0);try{return e()}finally{Li(n),Xn(r)}}get(e,n=Lr,r=Je.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(rl))return e[rl](this);r=tl(r);const s=Li(this),o=Xn(void 0);try{if(!(r&Je.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function iH(t){return"function"==typeof t||"object"==typeof t&&t instanceof ce}(e)&&vu(e);u=d&&this.injectableDefInScope(d)?Kl(Yw(e),$_):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&Je.Self?H_():this.parent).get(e,n=r&Je.Optional&&n===Lr?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Xc]=a[Xc]||[]).unshift(Tt(e)),s)throw a;return function kh(t,e,n,r){const i=t[Xc];throw e[Tm]&&i.unshift(e[Tm]),t.message=function ls(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Tt(e);if(Array.isArray(e))i=e.map(Tt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Tt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(RI,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Xc]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Xn(o),Li(s)}}resolveInjectorInitializers(){const e=Li(this),n=Xn(void 0);try{const i=this.get(zf.multi,ot,Je.Self);for(const s of i)s()}finally{Li(e),Xn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Tt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(e){let n=nc(e=S(e))?e:S(e&&e.provide);const r=function tH(t){return Zw(t)?Kl(void 0,t.useValue):Kl(cP(t),$_)}(e);if(nc(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Kl(void 0,$_,!0),i.factory=()=>Oh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===$_&&(n.value=X$,n.value=n.factory()),"object"==typeof n.value&&n.value&&function rH(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=S(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Yw(t){const e=vu(t),n=null!==e?e.factory:zi(t);if(null!==n)return n;if(t instanceof ce)throw new $(204,!1);if(t instanceof Function)return function eH(t){const e=t.length;if(e>0)throw function Yu(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new $(204,!1);const n=function AI(t){return t&&(t[Eu]||t[gm])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new $(204,!1)}function cP(t,e,n){let r;if(nc(t)){const i=S(t);return zi(i)||Yw(i)}if(Zw(t))r=()=>S(t.useValue);else if(function uP(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Oh(t.deps||[]));else if(function aP(t){return!(!t||!t.useExisting)}(t))r=()=>se(S(t.useExisting));else{const i=S(t&&(t.useClass||t.provide));if(!function nH(t){return!!t.deps}(t))return zi(i)||Yw(i);r=()=>new i(...Oh(t.deps))}return r}function Kl(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Jw(t,e){for(const n of t)Array.isArray(n)?Jw(n,e):n&&Te(n)?Jw(n.\u0275providers,e):e(n)}const z_=new ce("AppId",{providedIn:"root",factory:()=>sH}),sH="ng",lP=new ce("Platform Initializer"),Mo=new ce("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),dP=new ce("CSP nonce",{providedIn:"root",factory:()=>function ql(){if(void 0!==Bw)return Bw;if(typeof document<"u")return document;throw new $(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let hP=(t,e,n)=>null;function oT(t,e,n=!1){return hP(t,e,n)}class gH{}class gP{}class _H{resolveComponentFactory(e){throw function mH(t){const e=Error(`No component factory found for ${Tt(t)}.`);return e.ngComponent=t,e}(e)}}let Q_=(()=>{class t{static#e=this.NULL=new _H}return t})();function yH(){return Jl(In(),J())}function Jl(t,e){return new wi(xn(t,e))}let wi=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=yH}return t})();class _P{}let No=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function EH(){const t=J(),n=$r(In().index,t);return(Br(n)?n:t)[Oe]}()}return t})(),IH=(()=>{class t{static#e=this.\u0275prov=Ce({token:t,providedIn:"root",factory:()=>null})}return t})();class Xl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const yP=new Xl("16.2.12"),cT={};function wP(t,e=null,n=null,r){const i=TP(t,e,n,r);return i.resolveInjectorInitializers(),i}function TP(t,e=null,n=null,r,i=new Set){const s=[n||ot,Q$(t)];return r=r||("object"==typeof t?void 0:Tt(t)),new Zl(s,e||H_(),r||null,i)}let Ti=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Lr;static#t=this.NULL=new qw;static create(n,r){if(Array.isArray(n))return wP({name:""},r,n,"");{const i=n.name??"";return wP({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Ce({token:t,providedIn:"any",factory:()=>se(nP)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function dT(t){return t.ngOriginalError}class ms{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&dT(e);for(;n&&dT(n);)n=dT(n);return n||null}}function fT(t){return e=>{setTimeout(t,void 0,e)}}const fn=class SH extends H{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=fT(s),i&&(i=fT(i)),o&&(o=fT(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof ct&&e.add(a),a}};function DP(...t){}class wt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fn(!1),this.onMicrotaskEmpty=new fn(!1),this.onStable=new fn(!1),this.onError=new fn(!1),typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function RH(){const t="function"==typeof _t.requestAnimationFrame;let e=_t[t?"requestAnimationFrame":"setTimeout"],n=_t[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function MH(t){const e=()=>{!function xH(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(_t,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,gT(t),t.isCheckStableRunning=!0,pT(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),gT(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function OH(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return bP(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),AP(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return bP(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),AP(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,gT(t),pT(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wt.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(wt.isInAngularZone())throw new $(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,PH,DP,DP);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const PH={};function pT(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function gT(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function bP(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function AP(t){t._nesting--,pT(t)}class NH{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fn,this.onMicrotaskEmpty=new fn,this.onStable=new fn,this.onError=new fn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const SP=new ce("",{providedIn:"root",factory:RP});function RP(){const t=pe(wt);let e=!0;return q(new rt(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new rt(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{wt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{wt.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Ne()))}function Oo(t){return t instanceof Function?t():t}let mT=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Ce({token:t,providedIn:"root",factory:()=>new t})}return t})();function Wf(t){for(;t;){t[Ue]|=64;const e=Ff(t);if(xm(t)&&!e)return t;t=e}return null}const OP=new ce("",{providedIn:"root",factory:()=>!1});let J_=null;function FP(t,e){return t[e]??jP()}function UP(t,e){const n=jP();n.producerNode?.length&&(t[e]=J_,n.lView=t,J_=BP())}const zH={...ln,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Wf(t.lView)},lView:null};function BP(){return Object.create(zH)}function jP(){return J_??=BP(),J_}const je={};function Mn(t){$P(et(),J(),cr()+t,!1)}function $P(t,e,n,r){if(!r)if(3==(3&e[Ue])){const s=t.preOrderCheckHooks;null!==s&&Sl(e,s,n)}else{const s=t.preOrderHooks;null!==s&&va(e,s,0,n)}Ao(n)}function ee(t,e=Je.Default){const n=J();return null===n?se(t,e):f_(In(),n,S(t),e)}function X_(t,e,n,r,i,s,o,a,u,d,f){const g=e.blueprint.slice();return g[tn]=i,g[Ue]=140|r,(null!==d||t&&2048&t[Ue])&&(g[Ue]|=2048),Km(g),g[Rt]=g[da]=t,g[cn]=n,g[la]=o||t&&t[la],g[Oe]=a||t&&t[Oe],g[Ui]=u||t&&t[Ui]||null,g[Pn]=s,g[Io]=function Jj(){return Yj++}(),g[fs]=f,g[Pm]=d,g[Zt]=2==e.type?t[Zt]:g,g}function nd(t,e,n,r,i){let s=t.data[e];if(null===s)s=function _T(t,e,n,r,i){const s=t_(),o=ff(),u=t.data[e]=function JH(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function zs(){return null!==Re.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function QI(){return Re.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Uu(){const t=Re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ai(s,!0),s}function Zf(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function zP(t,e,n,r,i){const s=FP(e,Mu),o=cr(),a=2&r;try{Ao(-1),a&&e.length>Ze&&$P(t,e,Ze,!1),Gi(a?2:0,i);const d=a?s:null,f=Jh(d);try{null!==d&&(d.dirty=!1),n(r,i)}finally{gl(d,f)}}finally{a&&null===e[Mu]&&UP(e,Mu),Ao(o),Gi(a?3:1,i)}}function yT(t,e,n){if(Ou(e)){const r=oi(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{oi(r)}}}function vT(t,e,n){Tl()&&(function s4(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;wo(n)&&function h4(t,e,n){const r=xn(e,t),i=GP(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=ey(t,X_(t,i,null,o,r,e,null,t[la].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||xl(n,e),Ar(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],d=Ro(e,t,a,n);Ar(d,e),null!==o&&f4(0,a-i,d,u,0,o),Hi(u)&&($r(n.index,e)[cn]=Ro(e,t,a,n))}}(t,e,n,xn(n,e)),64==(64&n.flags)&&QP(t,e,n))}function ET(t,e,n=xn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function GP(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=IT(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function IT(t,e,n,r,i,s,o,a,u,d,f){const g=Ze+r,_=g+i,y=function qH(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:je);return n}(g,_),E="function"==typeof d?d():d;return y[le]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:E,incompleteFirstPass:!1,ssrId:f}}let qP=t=>null;function WP(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?ZP(n,e,i,s):r.hasOwnProperty(i)&&ZP(n,e,r[i],s)}return n}function ZP(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function wT(t,e,n,r){if(Tl()){const i=null===r?null:{"":-1},s=function a4(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if($h(e,o.selectors,!1))if(r||(r=[]),Hi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),TT(t,e,a.length)}else r.unshift(o),TT(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&KP(t,e,n,o,i,a),i&&function u4(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new $(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Vs(n.mergedAttrs,n.attrs)}function KP(t,e,n,r,i,s){for(let d=0;d<r.length;d++)Zu(xl(n,e),t,r[d].type);!function l4(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let d=0;d<r.length;d++){const f=r[d];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,u=Zf(t,e,r.length,null);for(let d=0;d<r.length;d++){const f=r[d];n.mergedAttrs=Vs(n.mergedAttrs,f.hostAttrs),d4(t,n,e,u,f),c4(u,f,i),null!==f.contentQueries&&(n.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(n.flags|=64);const g=f.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function XH(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,d=null;for(let f=e.directiveStart;f<i;f++){const g=s[f],_=n?n.get(g):null,E=_?_.outputs:null;u=WP(g.inputs,f,u,_?_.inputs:null),d=WP(g.outputs,f,d,E);const w=null===u||null===o||ol(e)?null:p4(u,f,o);a.push(w)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(t,n,s)}function QP(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function YI(){return Re.lFrame.currentDirectiveIndex}();try{Ao(s);for(let a=r;a<i;a++){const u=t.data[a],d=e[a];yf(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&o4(u,d)}}finally{Ao(-1),yf(o)}}function o4(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function TT(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function c4(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Hi(e)&&(n[""]=t)}}function d4(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=zi(i.type)),o=new Hu(s,Hi(i),ee);t.blueprint[r]=o,n[r]=o,function r4(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function i4(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,Zf(t,n,i.hostVars,je),i)}function Ks(t,e,n,r,i,s){const o=xn(t,e);!function CT(t,e,n,r,i,s,o){if(null==s)t.removeAttribute(e,i,n);else{const a=null==o?Ee(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}(e[Oe],o,s,t.value,n,r,i)}function f4(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)YP(r,n,o[a++],o[a++],o[a++])}function YP(t,e,n,r,i){const s=oi(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{oi(s)}}function p4(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function JP(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function XP(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];Ef(n[r]),o.contentQueries(2,e[s],s)}}}function ey(t,e){return t[Pu]?t[dl][Ei]=e:t[Pu]=e,t[dl]=e,e}function DT(t,e,n){Ef(0);const r=oi(null);try{e(t,n)}finally{oi(r)}}function rx(t,e){const n=t[Ui],r=n?n.get(ms,null):null;r&&r.handleError(e)}function bT(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];YP(t.data[o],e[o],r,a,i)}}function g4(t,e){const n=$r(e,t),r=n[le];!function m4(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[tn];null!==i&&null===n[fs]&&(n[fs]=oT(i,n[Ui])),AT(r,n,n[cn])}function AT(t,e,n){wf(e);try{const r=t.viewQuery;null!==r&&DT(1,r,n);const i=t.template;null!==i&&zP(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&XP(t,e),t.staticViewQueries&&DT(2,t.viewQuery,n);const s=t.components;null!==s&&function _4(t,e){for(let n=0;n<e.length;n++)g4(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Ue]&=-5,Tf()}}let ix=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function BI(t,e,n){const r=Object.create(jI);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>Fm(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Um(r))return;r.hasRun=!0;const o=Jh(r);try{r.cleanupFn(),r.cleanupFn=Gm,r.fn(i)}finally{gl(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ce({token:t,providedIn:"root",factory:()=>new t})}return t})();function ty(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=ki(i,a):2==s&&(r=ki(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Kf(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(It(s)),br(s)&&sx(s,r);const o=n.type;if(8&o)Kf(t,e,n.child,r);else if(32&o){const a=xw(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=FR(e,n);if(Array.isArray(a))r.push(...a);else{const u=Ff(e[Zt]);Kf(u[le],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function sx(t,e){for(let n=$n;n<t.length;n++){const r=t[n],i=r[le].firstChild;null!==i&&Kf(r[le],r,i,e)}t[$i]!==t[tn]&&e.push(t[$i])}function ny(t,e,n,r=!0){const i=e[la],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{ox(t,e,t.template,n)}catch(u){throw r&&rx(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function ox(t,e,n,r){const i=e[Ue];if(256!=(256&i)){e[la].effectManager?.flush(),wf(e);try{Km(e),function gf(t){return Re.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&zP(t,e,n,2,r);const o=3==(3&i);if(o){const d=t.preOrderCheckHooks;null!==d&&Sl(e,d,null)}else{const d=t.preOrderHooks;null!==d&&va(e,d,0,null),$u(e,0)}if(function E4(t){for(let e=bR(t);null!==e;e=AR(e)){if(!e[Zh])continue;const n=e[fa];for(let r=0;r<n.length;r++){cf(n[r])}}}(e),ax(e,2),null!==t.contentQueries&&XP(t,e),o){const d=t.contentCheckHooks;null!==d&&Sl(e,d)}else{const d=t.contentHooks;null!==d&&va(e,d,1),$u(e,1)}!function GH(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=FP(e,ha);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)Ao(~s);else{const o=s,a=n[++i],u=n[++i];_f(a,o),r.dirty=!1;const d=Jh(r);try{u(2,e[o])}finally{gl(r,d)}}}}finally{null===e[ha]&&UP(e,ha),Ao(-1)}}(t,e);const a=t.components;null!==a&&cx(e,a,0);const u=t.viewQuery;if(null!==u&&DT(2,u,r),o){const d=t.viewCheckHooks;null!==d&&Sl(e,d)}else{const d=t.viewHooks;null!==d&&va(e,d,2),$u(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Ue]&=-73,Qm(e)}finally{Tf()}}}function ax(t,e){for(let n=bR(t);null!==n;n=AR(n))for(let r=$n;r<n.length;r++)ux(n[r],e)}function I4(t,e,n){ux($r(e,t),n)}function ux(t,e){if(!function uf(t){return 128==(128&t[Ue])}(t))return;const n=t[le],r=t[Ue];if(80&r&&0===e||1024&r||2===e)ox(n,t,n.template,t[cn]);else if(t[Ru]>0){ax(t,1);const i=n.components;null!==i&&cx(t,i,1)}}function cx(t,e,n){for(let r=0;r<e.length;r++)I4(t,e[r],n)}class Qf{get rootNodes(){const e=this._lView,n=e[le];return Kf(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[cn]}set context(e){this._lView[cn]=e}get destroyed(){return 256==(256&this._lView[Ue])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Rt];if(br(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(O_(e,r),Ca(n,r))}this._attachedToViewContainer=!1}Nw(this._lView[le],this._lView)}onDestroy(e){!function Ym(t,e){if(256==(256&t[Ue]))throw new $(911,!1);null===t[ji]&&(t[ji]=[]),t[ji].push(e)}(this._lView,e)}markForCheck(){Wf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ue]&=-129}reattach(){this._lView[Ue]|=128}detectChanges(){ny(this._lView[le],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function h$(t,e){Bf(t,e,e[Oe],2,null,null)}(this._lView[le],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e}}class w4 extends Qf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;ny(e[le],e,e[cn],!1)}checkNoChanges(){}get context(){return null}}class lx extends Q_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Xe(e);return new Yf(n,this.ngModule)}}function dx(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class C4{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=tl(r);const i=this.injector.get(e,cT,r);return i!==cT||n===cT?i:this.parentInjector.get(e,n,r)}}class Yf extends gP{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=dx(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return dx(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function Gh(t){return t.map(bm).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Ki?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new C4(e,s):e,a=o.get(_P,null);if(null===a)throw new $(407,!1);const g={rendererFactory:a,sanitizer:o.get(IH,null),effectManager:o.get(ix,null),afterRenderEventManager:o.get(mT,null)},_=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",E=r?function WH(t,e,n,r){const s=r.get(OP,!1)||n===si.ShadowDom,o=t.selectRootElement(e,s);return function ZH(t){qP(t)}(o),o}(_,r,this.componentDef.encapsulation,o):N_(_,y,function T4(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),M=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let R=null;null!==E&&(R=oT(E,o,!0));const k=IT(0,null,null,1,0,null,null,null,null,null,null),U=X_(null,k,null,M,null,null,g,_,o,null,R);let te,de;wf(U);try{const Se=this.componentDef;let ut,an=null;Se.findHostDirectiveDefs?(ut=[],an=new Map,Se.findHostDirectiveDefs(Se,ut,an),ut.push(Se)):ut=[Se];const un=function b4(t,e){const n=t[le],r=Ze;return t[r]=e,nd(n,r,2,"#host",null)}(U,E),sr=function A4(t,e,n,r,i,s,o){const a=i[le];!function S4(t,e,n,r){for(const i of t)e.mergedAttrs=Vs(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(ty(e,e.mergedAttrs,!0),null!==n&&$R(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=oT(e,i[Ui]));const d=s.rendererFactory.createRenderer(e,n);let f=16;n.signals?f=4096:n.onPush&&(f=64);const g=X_(i,GP(n),null,f,i[t.index],t,s,d,null,null,u);return a.firstCreatePass&&TT(a,t,r.length-1),ey(i,g),i[t.index]=g}(un,E,Se,ut,U,g,_);de=El(k,Ze),E&&function P4(t,e,n,r){if(r)il(t,n,["ng-version",yP.full]);else{const{attrs:i,classes:s}=function Am(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Cr(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&il(t,n,i),s&&s.length>0&&jR(t,n,s.join(" "))}}(_,Se,E,r),void 0!==n&&function x4(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(de,this.ngContentSelectors,n),te=function R4(t,e,n,r,i,s){const o=In(),a=i[le],u=xn(o,i);KP(a,i,o,n,null,r);for(let f=0;f<n.length;f++)Ar(Ro(i,a,o.directiveStart+f,o),i);QP(a,i,o),u&&Ar(u,i);const d=Ro(i,a,o.directiveStart+o.componentOffset,o);if(t[cn]=i[cn]=d,null!==s)for(const f of s)f(d,e);return yT(a,o,t),d}(sr,Se,ut,an,U,[M4]),AT(k,U,null)}finally{Tf()}return new D4(this.componentType,te,Jl(de,U),U,de)}}class D4 extends gH{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new w4(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;bT(s[le],s,i,e,n),this.previousInputValues.set(e,n),Wf($r(this._tNode.index,s))}}get injector(){return new Gn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function M4(){const t=In();Al(J()[le],t)}function Ct(t){let e=function hx(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Hi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=ry(t.inputs),o.inputTransforms=ry(t.inputTransforms),o.declaredInputs=ry(t.declaredInputs),o.outputs=ry(t.outputs);const a=i.hostBindings;a&&V4(t,a);const u=i.viewQuery,d=i.contentQueries;if(u&&O4(t,u),d&&k4(t,d),Bn(t.inputs,i.inputs),Bn(t.declaredInputs,i.declaredInputs),Bn(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Bn(o.inputTransforms,i.inputTransforms)),Hi(i)&&i.data.animation){const f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===Ct&&(n=!1)}}e=Object.getPrototypeOf(e)}!function N4(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Vs(i.hostAttrs,n=Vs(n,i.hostAttrs))}}(r)}function ry(t){return t===vi?{}:t===ot?[]:t}function O4(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function k4(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function V4(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function iy(t){return!!function ST(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Sr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ys(t,e,n,r){const i=J();return Sr(i,bo(),e)&&(et(),Ks(Nt(),i,t,e,n,r)),Ys}function Js(t,e,n,r,i,s,o,a){const u=J(),d=et(),f=t+Ze,g=d.firstCreatePass?function az(t,e,n,r,i,s,o,a,u){const d=e.consts,f=nd(e,t,4,o||null,Hs(d,a));wT(e,n,f,Hs(d,u)),Al(e,f);const g=f.tView=IT(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}(f,d,u,e,n,r,i,s,o):d.data[f];ai(g,!1);const _=Rx(d,u,g,t);bl()&&V_(d,u,_,g),Ar(_,u),ey(u,u[f]=JP(_,u,_,g)),fl(g)&&vT(d,u,g),null!=o&&ET(u,g,a)}let Rx=function Px(t,e,n,r){return Gs(!0),e[Oe].createComment("")};function ci(t,e,n){const r=J();return Sr(r,bo(),e)&&function Ci(t,e,n,r,i,s,o,a){const u=xn(e,n);let f,d=e.inputs;!a&&null!=d&&(f=d[r])?(bT(t,n,f,r,i),wo(e)&&function t4(t,e){const n=$r(e,t);16&n[Ue]||(n[Ue]|=64)}(n,e.index)):3&e.type&&(r=function e4(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(et(),Nt(),r,t,e,r[Oe],n,!1),ci}function OT(t,e,n,r,i){const o=i?"class":"style";bT(t,n,e.inputs[o],o,r)}function at(t,e,n,r){const i=J(),s=et(),o=Ze+t,a=i[Oe],u=s.firstCreatePass?function hz(t,e,n,r,i,s){const o=e.consts,u=nd(e,t,2,r,Hs(o,i));return wT(e,n,u,Hs(o,s)),null!==u.attrs&&ty(u,u.attrs,!1),null!==u.mergedAttrs&&ty(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],d=xx(s,i,u,a,e,t);i[o]=d;const f=fl(u);return ai(u,!0),$R(a,d,u),32!=(32&u.flags)&&bl()&&V_(s,i,d,u),0===function qI(){return Re.lFrame.elementDepthCount}()&&Ar(d,i),function WI(){Re.lFrame.elementDepthCount++}(),f&&(vT(s,i,u),yT(s,u,i)),null!==r&&ET(i,u),at}function mt(){let t=In();ff()?Bu():(t=t.parent,ai(t,!1));const e=t;(function ZI(t){return Re.skipHydrationRootTNode===t})(e)&&function KI(){Re.skipHydrationRootTNode=null}(),function df(){Re.lFrame.elementDepthCount--}();const n=et();return n.firstCreatePass&&(Al(n,t),Ou(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function l_(t){return 0!=(8&t.flags)}(e)&&OT(n,e,J(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Pl(t){return 0!=(16&t.flags)}(e)&&OT(n,e,J(),e.stylesWithoutHost,!1),mt}function np(t,e,n,r){return at(t,e,n,r),mt(),np}let xx=(t,e,n,r,i,s)=>(Gs(!0),N_(r,i,function o_(){return Re.lFrame.currentNamespace}()));function cy(t,e,n){const r=J(),i=et(),s=t+Ze,o=i.firstCreatePass?function gz(t,e,n,r,i){const s=e.consts,o=Hs(s,r),a=nd(e,t,8,"ng-container",o);return null!==o&&ty(a,o,!0),wT(e,n,a,Hs(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,n):i.data[s];ai(o,!0);const a=Nx(i,r,o,t);return r[s]=a,bl()&&V_(i,r,a,o),Ar(a,r),fl(o)&&(vT(i,r,o),yT(i,o,r)),null!=n&&ET(r,o),cy}function ly(){let t=In();const e=et();return ff()?Bu():(t=t.parent,ai(t,!1)),e.firstCreatePass&&(Al(e,t),Ou(t)&&e.queries.elementEnd(t)),ly}let Nx=(t,e,n,r)=>(Gs(!0),Mw(e[Oe],""));function ic(){return J()}function rp(t){return!!t&&"function"==typeof t.then}function Ox(t){return!!t&&"function"==typeof t.subscribe}function Pt(t,e,n,r){const i=J(),s=et(),o=In();return function Vx(t,e,n,r,i,s,o){const a=fl(r),d=t.firstCreatePass&&function tx(t){return t.cleanup||(t.cleanup=[])}(t),f=e[cn],g=function ex(t){return t[ca]||(t[ca]=[])}(e);let _=!0;if(3&r.type||o){const w=xn(r,e),D=o?o(w):w,M=g.length,R=o?U=>o(It(U[r.index])):r.index;let k=null;if(!o&&a&&(k=function yz(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[ca],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==k)(k.__ngLastListenerFn__||k).__ngNextListenerFn__=s,k.__ngLastListenerFn__=s,_=!1;else{s=Fx(r,e,f,s,!1);const U=n.listen(D,i,s);g.push(s,U),d&&d.push(i,R,M,M+1)}}else s=Fx(r,e,f,s,!1);const y=r.outputs;let E;if(_&&null!==y&&(E=y[i])){const w=E.length;if(w)for(let D=0;D<w;D+=2){const te=e[E[D]][E[D+1]].subscribe(s),de=g.length;g.push(s,te),d&&d.push(i,r.index,de,-(de+1))}}}(s,i,i[Oe],o,t,e,r),Pt}function Lx(t,e,n,r){try{return Gi(6,e,n),!1!==n(r)}catch(i){return rx(t,i),!1}finally{Gi(7,e,n)}}function Fx(t,e,n,r,i){return function s(o){if(o===Function)return r;Wf(t.componentOffset>-1?$r(t.index,e):e);let u=Lx(e,n,r,o),d=s.__ngNextListenerFn__;for(;d;)u=Lx(e,n,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function wn(t=1){return function XI(t){return(Re.lFrame.contextLView=function ew(t,e){for(;t>0;)e=e[da],t--;return e}(t,Re.lFrame.contextLView))[cn]}(t)}function dy(t,e){return t<<17|e<<2}function Ra(t){return t>>17&32767}function VT(t){return 2|t}function sc(t){return(131068&t)>>2}function LT(t,e){return-131069&t|e<<2}function FT(t){return 1|t}function Zx(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?Ra(s):sc(s),u=!1;for(;0!==a&&(!1===u||o);){const f=t[a+1];Az(t[a],e)&&(u=!0,t[a+1]=r?FT(f):VT(f)),a=r?Ra(f):sc(f)}u&&(t[n+1]=r?VT(s):FT(s))}function Az(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Da(t,e)>=0}function ip(t,e){return function _s(t,e,n,r){const i=J(),s=et(),o=function qi(t){const e=Re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function rM(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[cr()],o=function nM(t,e){return e>=t.expandoStartIndex}(t,n);(function aM(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function Vz(t,e,n,r){const i=function vf(t){const e=Re.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=sp(n=UT(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=UT(i,t,e,n,r),null===s){let u=function Lz(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==sc(r))return t[Ra(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=UT(null,t,e,u[1],r),u=sp(u,e.attrs,r),function Fz(t,e,n,r){t[Ra(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function Uz(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=sp(r,t[s].hostAttrs,n);return sp(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function Dz(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ra(o),u=sc(o);t[r]=n;let f,d=!1;if(Array.isArray(n)?(f=n[1],(null===f||Da(n,f)>0)&&(d=!0)):f=n,i)if(0!==u){const _=Ra(t[a+1]);t[r+1]=dy(_,a),0!==_&&(t[_+1]=LT(t[_+1],r)),t[a+1]=function Tz(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=dy(a,0),0!==a&&(t[a+1]=LT(t[a+1],r)),a=r;else t[r+1]=dy(u,0),0===a?a=r:t[u+1]=LT(t[u+1],r),u=r;d&&(t[r+1]=VT(t[r+1])),Zx(t,f,r,!0),Zx(t,f,r,!1),function bz(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Da(s,e)>=0&&(n[r+1]=FT(n[r+1]))}(e,f,t,r,s),o=dy(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==je&&Sr(i,o,e)&&function sM(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,d=u[a+1],f=function Cz(t){return 1==(1&t)}(d)?oM(u,e,n,i,sc(d),o):void 0;hy(f)||(hy(s)||function wz(t){return 2==(2&t)}(d)&&(s=oM(u,null,n,i,a,o)),function w$(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Aa.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Aa.Important),t.setStyle(n,r,i,s))}}(r,o,_a(cr(),n),i,s))}(s,s.data[cr()],i,i[Oe],t,i[o+1]=function Hz(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Tt(function Sa(t){return t instanceof qR?t.changingThisBreaksApplicationSecurity:t}(t)))),t}(e,n),r,o)}(t,e,null,!0),ip}function UT(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=sp(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function sp(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),qr(t,o,!!n||e[++s]))}return void 0===t?null:t}function oM(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],d=Array.isArray(u),f=d?u[1]:u,g=null===f;let _=n[i+1];_===je&&(_=g?ot:void 0);let y=g?xf(_,r):f===r?_:void 0;if(d&&!hy(y)&&(y=xf(u,r)),hy(y)&&(a=y,o))return a;const E=t[i+1];i=o?Ra(E):sc(E)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=xf(u,r))}return a}function hy(t){return void 0!==t}function Kt(t,e=""){const n=J(),r=et(),i=t+Ze,s=r.firstCreatePass?nd(r,i,1,e,null):r.data[i],o=uM(r,n,s,e,t);n[i]=o,bl()&&V_(r,n,o,s),ai(s,!1)}let uM=(t,e,n,r,i)=>(Gs(!0),function M_(t,e){return t.createText(e)}(e[Oe],r));function BT(t){return to("",t,""),BT}function to(t,e,n){const r=J(),i=function id(t,e,n,r){return Sr(t,bo(),n)?e+Ee(n)+r:je}(r,t,e,n);return i!==je&&function ko(t,e,n){const r=_a(e,t);!function RR(t,e,n){t.setValue(e,n)}(t[Oe],r,n)}(r,cr(),i),to}const pd="en-US";let PM=pd;function HT(t,e,n,r,i){if(t=S(t),Array.isArray(t))for(let s=0;s<t.length;s++)HT(t[s],e,n,r,i);else{const s=et(),o=J(),a=In();let u=nc(t)?t:S(t.provide);const d=cP(t),f=1048575&a.providerIndexes,g=a.directiveStart,_=a.providerIndexes>>20;if(nc(t)||!t.multi){const y=new Hu(d,i,ee),E=GT(u,e,i?f:f+_,g);-1===E?(Zu(xl(a,o),s,u),zT(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[E]=y,o[E]=y)}else{const y=GT(u,e,f+_,g),E=GT(u,e,f,f+_),D=E>=0&&n[E];if(i&&!D||!i&&!(y>=0&&n[y])){Zu(xl(a,o),s,u);const M=function lq(t,e,n,r,i){const s=new Hu(t,n,ee);return s.multi=[],s.index=e,s.componentProviders=0,tN(s,i,r&&!n),s}(i?cq:uq,n.length,i,r,d);!i&&D&&(n[E].providerFactory=M),zT(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(M),o.push(M)}else zT(s,t,y>-1?y:E,tN(n[i?E:y],d,!i&&r));!i&&r&&D&&n[E].componentProviders++}}}function zT(t,e,n,r){const i=nc(e),s=function J$(t){return!!t.useClass}(e);if(i||s){const u=(s?S(e.useClass):e).prototype.ngOnDestroy;if(u){const d=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const f=d.indexOf(n);-1===f?d.push(n,[r,u]):d[f+1].push(r,u)}else d.push(n,u)}}}function tN(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function GT(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function uq(t,e,n,r){return qT(this.multi,[])}function cq(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ro(n,n[le],this.providerFactory.index,r);s=a.slice(0,o),qT(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],qT(i,s);return s}function qT(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function rn(t,e=[]){return n=>{n.providersResolver=(r,i)=>function aq(t,e,n){const r=et();if(r.firstCreatePass){const i=Hi(t);HT(n,r.data,r.blueprint,i,!0),HT(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class ac{}class nN{}class WT extends ac{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new lx(this);const i=Ur(e);this._bootstrapComponents=Oo(i.bootstrap),this._r3Injector=TP(e,n,[{provide:ac,useValue:this},{provide:Q_,useValue:this.componentFactoryResolver},...r],Tt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ZT extends nN{constructor(e){super(),this.moduleType=e}create(e){return new WT(this.moduleType,e,[])}}class rN extends ac{constructor(e){super(),this.componentFactoryResolver=new lx(this),this.instance=null;const n=new Zl([...e.providers,{provide:ac,useValue:this},{provide:Q_,useValue:this.componentFactoryResolver}],e.parent||H_(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function KT(t,e,n=null){return new rN({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let fq=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=sP(0,n.type),i=r.length>0?KT([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ce({token:t,providedIn:"environment",factory:()=>new t(se(Ki))})}return t})();function iN(t){t.getStandaloneInjector=e=>e.get(fq).getOrCreateStandaloneInjector(t)}function dN(t,e,n,r,i,s){const o=e+n;return Sr(t,o,i)?function Qs(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function dp(t,e){const n=t[e];return n===je?void 0:n}(t,o+1)}function gd(t,e){const n=et();let r;const i=t+Ze;n.firstCreatePass?(r=function Mq(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=zi(r.type)),a=Xn(ee);try{const u=qu(!1),d=s();return qu(u),function lz(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,J(),i,d),d}finally{Xn(a)}}function md(t,e,n){const r=t+Ze,i=J(),s=function ya(t,e){return t[e]}(i,r);return function hp(t,e){return t[le].data[e].pure}(i,r)?dN(i,function zn(){const t=Re.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,s.transform,n,s):s.transform(n)}function Uq(t,e,n,r=!0){const i=e[le];if(function p$(t,e,n,r){const i=$n+r,s=n.length;r>0&&(n[i-1][Ei]=e),r<s-$n?(e[Ei]=n[i],Ll(n,$n+r,e)):(n.push(e),e[Ei]=null),e[Rt]=n;const o=e[xu];null!==o&&n!==o&&function g$(t,e){const n=t[fa];e[Zt]!==e[Rt][Rt][Zt]&&(t[Zh]=!0),null===n?t[fa]=[e]:n.push(e)}(o,e);const a=e[Bi];null!==a&&a.insertView(t),e[Ue]|=128}(i,e,t,n),r){const s=Lw(n,t),o=e[Oe],a=k_(o,t[$i]);null!==a&&function d$(t,e,n,r,i,s){r[tn]=i,r[Pn]=e,Bf(t,r,n,1,i,s)}(i,t[Pn],o,e,a,s)}}Symbol;let Vo=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=$q}return t})();const Bq=Vo,jq=class extends Bq{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function Fq(t,e,n,r){const i=e.tView,a=X_(t,i,n,4096&t[Ue]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[xu]=t[e.index];const d=t[Bi];return null!==d&&(a[Bi]=d.createEmbeddedView(i)),AT(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new Qf(i)}};function $q(){return function _y(t,e){return 4&t.type?new jq(e,t,Jl(t,e)):null}(In(),J())}let vs=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Zq}return t})();function Zq(){return function wN(t,e){let n;const r=e[t.index];return br(r)?n=r:(n=JP(r,e,null,t),e[t.index]=n,ey(e,n)),TN(n,e,t,r),new EN(n,t,e)}(In(),J())}const Kq=vs,EN=class extends Kq{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Jl(this._hostTNode,this._hostLView)}get injector(){return new Gn(this._hostTNode,this._hostLView)}get parentInjector(){const e=Ml(this._hostTNode,this._hostLView);if(bf(e)){const n=Gu(e,this._hostLView),r=zu(e);return new Gn(n[le].data[r+8],n)}return new Gn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=IN(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-$n}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function Wn(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const w=n||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}const u=o?e:new Yf(Xe(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const D=(o?d:this.parentInjector).get(Ki,null);D&&(s=D)}Xe(u.componentType??{});const y=u.create(d,i,null,s);return this.insertImpl(y.hostView,a,false),y}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function Zm(t){return br(t[Rt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[Rt],f=new EN(d,d[Pn],d[Rt]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return Uq(a,i,o,!r),e.attachToViewContainerRef(),Ll(JT(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=IN(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=O_(this._lContainer,n);r&&(Ca(JT(this._lContainer),n),Nw(r[le],r))}detach(e){const n=this._adjustIndex(e,-1),r=O_(this._lContainer,n);return r&&null!=Ca(JT(this._lContainer),n)?new Qf(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function IN(t){return t[8]}function JT(t){return t[8]||(t[8]=[])}let TN=function CN(t,e,n,r){if(t[$i])return;let i;i=8&n.type?It(r):function Qq(t,e){const n=t[Oe],r=n.createComment(""),i=xn(e,t);return tc(n,k_(n,i),r,function v$(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[$i]=i};const l0=new ce("Application Initializer");let d0=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=pe(l0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(rp(s))n.push(s);else if(Ox(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),KN=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Lo=new ce("LocaleId",{providedIn:"root",factory:()=>pe(Lo,Je.Optional|Je.SkipSelf)||function A3(){return typeof $localize<"u"&&$localize.locale||pd}()});let QN=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new P(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class P3{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let YN=(()=>{class t{compileModuleSync(n){return new ZT(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=Oo(Ur(n).declarations).reduce((o,a)=>{const u=Xe(a);return u&&o.push(new Yf(u)),o},[]);return new P3(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const tO=new ce(""),Iy=new ce("");let m0,p0=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,m0||(function J3(t){m0=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(se(wt),se(g0),se(Iy))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})(),g0=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return m0?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Pa=null;const nO=new ce("AllowMultipleToken"),_0=new ce("PlatformDestroyListeners"),y0=new ce("appBootstrapListener");class iO{constructor(e,n){this.name=e,this.token=n}}function oO(t,e,n=[]){const r=`Platform: ${e}`,i=new ce(r);return(s=[])=>{let o=v0();if(!o||o.injector.get(nO,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function t9(t){if(Pa&&!Pa.get(nO,!1))throw new $(400,!1);(function rO(){!function ma(t){$m=t}(()=>{throw new $(600,!1)})})(),Pa=t;const e=t.get(uO);(function sO(t){t.get(lP,null)?.forEach(n=>n())})(t)}(function aO(t=[],e){return Ti.create({name:e,providers:[{provide:Kw,useValue:"platform"},{provide:_0,useValue:new Set([()=>Pa=null])},...t]})}(a,r))}return function r9(t){const e=v0();if(!e)throw new $(401,!1);return e}()}}function v0(){return Pa?.get(uO)??null}let uO=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function i9(t="zone.js",e){return"noop"===t?new NH:"zone.js"===t?new wt(e):t}(r?.ngZone,function cO(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function hq(t,e,n){return new WT(t,e,n)}(n.moduleType,this.injector,function pO(t){return[{provide:wt,useFactory:t},{provide:zf,multi:!0,useFactory:()=>{const e=pe(o9,{optional:!0});return()=>e.initialize()}},{provide:fO,useFactory:s9},{provide:SP,useFactory:RP}]}(()=>i)),o=s.injector.get(ms,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{wy(this._modules,s),a.unsubscribe()})}),function lO(t,e,n){try{const r=n();return rp(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(d0);return a.runInitializers(),a.donePromise.then(()=>(function xM(t){Ir(t,"Expected localeId to be defined"),"string"==typeof t&&(PM=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Lo,pd)||pd),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=dO({},r);return function X3(t,e,n){const r=new ZT(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(vd);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new $(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(_0,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(se(Ti))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function dO(t,e){return Array.isArray(e)?e.reduce(dO,t):{...t,...e}}let vd=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=pe(fO),this.zoneIsStable=pe(SP),this.componentTypes=[],this.components=[],this.isStable=pe(QN).hasPendingTasks.pipe(dt(n=>n?W(!1):this.zoneIsStable),Wt(),Ne()),this._injector=pe(Ki)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof gP;if(!this._injector.get(d0).done)throw!i&&function Ls(t){const e=Xe(t)||En(t)||ur(t);return null!==e&&e.standalone}(n),new $(405,!1);let o;o=i?n:this._injector.get(Q_).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function e9(t){return t.isBoundToModule}(o)?void 0:this._injector.get(ac),d=o.create(Ti.NULL,[],r||o.selector,a),f=d.location.nativeElement,g=d.injector.get(tO,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),wy(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new $(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;wy(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(y0,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>wy(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new $(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function wy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const fO=new ce("",{providedIn:"root",factory:()=>pe(ms).handleError.bind(void 0)});function s9(){const t=pe(wt),e=pe(ms);return n=>t.runOutsideAngular(()=>e.handleError(n))}let o9=(()=>{class t{constructor(){this.zone=pe(wt),this.applicationRef=pe(vd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let Ty=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=u9}return t})();function u9(t){return function c9(t,e,n){if(wo(t)&&!n){const r=$r(t.index,e);return new Qf(r,r)}return 47&t.type?new Qf(e[Zt],e):null}(In(),J(),16==(16&t))}class vO{constructor(){}supports(e){return iy(e)}create(e){return new g9(e)}}const p9=(t,e)=>e;class g9{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||p9}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<IO(r,i,s)?n:r,a=IO(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const d=a-i,f=u-i;if(d!=f){for(let _=0;_<d;_++){const y=_<s.length?s[_]:s[_]=0,E=y+_;f<=E&&E<d&&(s[_]=y+1)}s[o.previousIndex]=f-d}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!iy(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function H4(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new m9(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new EO),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new EO),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class m9{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _9{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class EO{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new _9,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function IO(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function TO(){return new by([new vO])}let by=(()=>{class t{static#e=this.\u0275prov=Ce({token:t,providedIn:"root",factory:TO});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||TO()),deps:[[t,new Bl,new Xu]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new $(901,!1)}}return t})();const w9=oO(null,"core",[]);let T9=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(se(vd))};static#t=this.\u0275mod=Dr({type:t});static#n=this.\u0275inj=wr({})}return t})();function Ed(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let D0=null;function xa(){return D0}class L9{}const Yi=new ce("DocumentToken");let b0=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:function(){return pe(U9)},providedIn:"platform"})}return t})();const F9=new ce("Location Initialized");let U9=(()=>{class t extends b0{constructor(){super(),this._doc=pe(Yi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xa().getBaseHref(this._doc)}onPopState(n){const r=xa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=xa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function A0(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function NO(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Fo(t){return t&&"?"!==t[0]?"?"+t:t}let cc=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:function(){return pe(kO)},providedIn:"root"})}return t})();const OO=new ce("appBaseHref");let kO=(()=>{class t extends cc{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??pe(Yi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return A0(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Fo(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+Fo(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+Fo(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(se(b0),se(OO,8))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),B9=(()=>{class t extends cc{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=A0(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Fo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Fo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(se(b0),se(OO,8))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})(),S0=(()=>{class t{constructor(n){this._subject=new fn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function H9(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(NO(VO(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Fo(r))}normalize(n){return t.stripTrailingSlash(function $9(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,VO(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Fo(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Fo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=Fo;static#t=this.joinWithSlash=A0;static#n=this.stripTrailingSlash=NO;static#r=this.\u0275fac=function(r){return new(r||t)(se(cc))};static#i=this.\u0275prov=Ce({token:t,factory:function(){return function j9(){return new S0(se(cc))}()},providedIn:"root"})}return t})();function VO(t){return t.replace(/\/index.html$/,"")}class P6{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let WO=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new P6(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),ZO(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{ZO(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(ee(vs),ee(Vo),ee(by))};static#t=this.\u0275dir=Pe({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function ZO(t,e){t.context.$implicit=e.item}let U0=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new x6,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){KO("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){KO("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(ee(vs),ee(Vo))};static#t=this.\u0275dir=Pe({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class x6{constructor(){this.$implicit=null,this.ngIf=null}}function KO(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Tt(e)}'.`)}class O6{createSubscription(e,n){return _l(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){_l(()=>e.unsubscribe())}}class k6{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const V6=new k6,L6=new O6;let $0=(()=>{class t{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(rp(n))return V6;if(Ox(n))return L6;throw function Is(t,e){return new $(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||t)(ee(Ty,16))};static#t=this.\u0275pipe=jn({name:"async",type:t,pure:!1,standalone:!0})}return t})(),t5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Dr({type:t});static#n=this.\u0275inj=wr({})}return t})();function Fy(t){return"server"===t}let s5=(()=>{class t{static#e=this.\u0275prov=Ce({token:t,providedIn:"root",factory:()=>new o5(se(Yi),window)})}return t})();class o5{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function a5(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class x5 extends L9{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class W0 extends x5{static makeCurrent(){!function V9(t){D0||(D0=t)}(new W0)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function M5(){return vp=vp||document.querySelector("base"),vp?vp.getAttribute("href"):null}();return null==n?null:function N5(t){jy=jy||document.createElement("a"),jy.setAttribute("href",t);const e=jy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){vp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function A6(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let jy,vp=null,k5=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();const Z0=new ce("EventManagerPlugins");let rk=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(se(Z0),se(wt))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();class ik{constructor(e){this._doc=e}}const K0="ng-app-id";let sk=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Fy(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${K0}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(K0),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(K0,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(se(Yi),se(z_),se(dP,8),se(Mo))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();const Q0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Y0=/%COMP%/g,U5=new ce("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function ak(t,e){return e.map(n=>n.replace(Y0,t))}let uk=(()=>{class t{constructor(n,r,i,s,o,a,u,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Fy(a),this.defaultRenderer=new J0(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===si.ShadowDom&&(r={...r,encapsulation:si.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof lk?i.applyToHost(n):i instanceof X0&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case si.Emulated:s=new lk(u,d,r,this.appId,f,o,a,g);break;case si.ShadowDom:return new H5(u,d,n,r,o,a,this.nonce,g);default:s=new X0(u,d,r,f,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(se(rk),se(sk),se(z_),se(U5),se(Yi),se(Mo),se(wt),se(dP))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();class J0{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Q0[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(ck(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(ck(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=Q0[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Q0[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Aa.DashCase|Aa.Important)?e.style.setProperty(n,r,i&Aa.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Aa.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=xa().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function ck(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class H5 extends J0{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=ak(i.id,i.styles);for(const f of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class X0 extends J0{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?ak(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class lk extends X0{constructor(e,n,r,i,s,o,a,u){const d=i+"-"+r.id;super(e,n,r,s,o,a,u,d),this.contentAttr=function B5(t){return"_ngcontent-%COMP%".replace(Y0,t)}(d),this.hostAttr=function j5(t){return"_nghost-%COMP%".replace(Y0,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let z5=(()=>{class t extends ik{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(se(Yi))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();const dk=["alt","control","meta","shift"],G5={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},q5={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let W5=(()=>{class t extends ik{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xa().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),dk.forEach(d=>{const f=r.indexOf(d);f>-1&&(r.splice(f,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=G5[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),dk.forEach(o=>{o!==i&&(0,q5[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(se(Yi))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();const fk=[{provide:Mo,useValue:"browser"},{provide:lP,useValue:function Z5(){W0.makeCurrent()},multi:!0},{provide:Yi,useFactory:function Q5(){return function A$(t){Bw=t}(document),document},deps:[]}],Y5=oO(w9,"browser",fk),J5=new ce(""),pk=[{provide:Iy,useClass:class O5{addToWindow(e){_t.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new $(5103,!1);return s},_t.getAllAngularTestabilities=()=>e.getAllTestabilities(),_t.getAllAngularRootElements=()=>e.getAllRootElements(),_t.frameworkStabilizers||(_t.frameworkStabilizers=[]),_t.frameworkStabilizers.push(r=>{const i=_t.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?xa().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:tO,useClass:p0,deps:[wt,g0,Iy]},{provide:p0,useClass:p0,deps:[wt,g0,Iy]}],gk=[{provide:Kw,useValue:"root"},{provide:ms,useFactory:function K5(){return new ms},deps:[]},{provide:Z0,useClass:z5,multi:!0,deps:[Yi,wt,Mo]},{provide:Z0,useClass:W5,multi:!0,deps:[Yi]},uk,sk,rk,{provide:_P,useExisting:uk},{provide:class u5{},useClass:k5,deps:[]},[]];let X5=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:z_,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(se(J5,12))};static#t=this.\u0275mod=Dr({type:t});static#n=this.\u0275inj=wr({providers:[...gk,...pk],imports:[t5,T9]})}return t})(),mk=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(se(Yi))};static#t=this.\u0275prov=Ce({token:t,factory:function(r){let i=null;return i=r?new r:function tW(){return new mk(se(Yi))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;const{isArray:aW}=Array,{getPrototypeOf:uW,prototype:cW,keys:lW}=Object;function Ek(t){if(1===t.length){const e=t[0];if(aW(e))return{args:e,keys:null};if(function dW(t){return t&&"object"==typeof t&&uW(t)===cW}(e)){const n=lW(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:hW}=Array;function Ik(t){return _e(e=>function fW(t,e){return hW(e)?t(...e):t(e)}(t,e))}function wk(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function $y(...t){const e=xs(t),n=na(t),{args:r,keys:i}=Ek(t);if(0===r.length)return A([],e);const s=new rt(function pW(t,e,n=yn){return r=>{Tk(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)Tk(e,()=>{const d=A(t[u],e);let f=!1;d.subscribe(fe(r,g=>{s[u]=g,f||(f=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>wk(i,o):yn));return n?s.pipe(Ik(n)):s}function Tk(t,e,n){t?Jn(n,t,e):e()}const Hy=xe(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function tC(...t){return function gW(){return yi(1)}()(A(t,xs(t)))}function Ck(t){return new rt(e=>{vn(t()).subscribe(e)})}function Ep(t,e){const n=I(t)?t:()=>t,r=i=>i.error(n());return new rt(e?i=>e.schedule(r,0,i):r)}function nC(){return B((t,e)=>{let n=null;t._refCount++;const r=fe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class Dk extends rt{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Y(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ct;const n=this.getSubject();e.add(this.source.subscribe(fe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ct.EMPTY)}return e}refCount(){return nC()(this)}}function Na(t){return t<=0?()=>Sn:B((e,n)=>{let r=0;e.subscribe(fe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function zy(...t){const e=xs(t);return B((n,r)=>{(e?tC(t,n,e):tC(t,n)).subscribe(r)})}function ws(t,e){return B((n,r)=>{let i=0;n.subscribe(fe(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Gy(t){return B((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function bk(t=mW){return B((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function mW(){return new Hy}function Oa(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ws((i,s)=>t(i,s,r)):yn,Na(1),n?Gy(e):bk(()=>new Hy))}function Ip(t,e){return I(e)?Ft(t,e,1):Ft(t,1)}function dr(t,e,n){const r=I(t)||e||n?{next:t,error:e,complete:n}:t;return r?B((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(fe(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):yn}function lc(t){return B((e,n)=>{let s,r=null,i=!1;r=e.subscribe(fe(n,void 0,void 0,o=>{s=vn(t(o,lc(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function qy(t,e){return B(function _W(t,e,n,r,i){return(s,o)=>{let a=n,u=e,d=0;s.subscribe(fe(o,f=>{const g=d++;u=a?t(u,f,g):(a=!0,f),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}function rC(t){return t<=0?()=>Sn:B((e,n)=>{let r=[];e.subscribe(fe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function iC(t){return B((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Ge="primary",wp=Symbol("RouteTitle");class IW{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function wd(t){return new IW(t)}function wW(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function no(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Ak(t[i],e[i]))return!1;return!0}function Ak(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function Sk(t){return t.length>0?t[t.length-1]:null}function ka(t){return function oW(t){return!!t&&(t instanceof rt||I(t.lift)&&I(t.subscribe))}(t)?t:rp(t)?A(Promise.resolve(t)):W(t)}const CW={exact:function xk(t,e,n){if(!dc(t.segments,e.segments)||!Wy(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!xk(t.children[r],e.children[r],n))return!1;return!0},subset:Mk},Rk={exact:function DW(t,e){return no(t,e)},subset:function bW(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ak(t[n],e[n]))},ignored:()=>!0};function Pk(t,e,n){return CW[n.paths](t.root,e.root,n.matrixParams)&&Rk[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Mk(t,e,n){return Nk(t,e,e.segments,n)}function Nk(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!dc(i,n)||e.hasChildren()||!Wy(i,n,r))}if(t.segments.length===n.length){if(!dc(t.segments,n)||!Wy(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!Mk(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(dc(t.segments,i)&&Wy(t.segments,i,r)&&t.children[Ge])&&Nk(t.children[Ge],e,s,r)}}function Wy(t,e,n){return e.every((r,i)=>Rk[n](t[i].parameters,r.parameters))}class Td{constructor(e=new Dt([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wd(this.queryParams)),this._queryParamMap}toString(){return RW.serialize(this)}}class Dt{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zy(this)}}class Tp{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=wd(this.parameters)),this._parameterMap}toString(){return Vk(this)}}function dc(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Cp=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:function(){return new sC},providedIn:"root"})}return t})();class sC{parse(e){const n=new BW(e);return new Td(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Dp(e.root,!0)}`,r=function MW(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${Ky(n)}=${Ky(i)}`).join("&"):`${Ky(n)}=${Ky(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function PW(t){return encodeURI(t)}(e.fragment)}`:""}`}}const RW=new sC;function Zy(t){return t.segments.map(e=>Vk(e)).join("/")}function Dp(t,e){if(!t.hasChildren())return Zy(t);if(e){const n=t.children[Ge]?Dp(t.children[Ge],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==Ge&&r.push(`${i}:${Dp(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function SW(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ge&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ge&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===Ge?[Dp(t.children[Ge],!1)]:[`${i}:${Dp(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Ge]?`${Zy(t)}/${n[0]}`:`${Zy(t)}/(${n.join("//")})`}}function Ok(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ky(t){return Ok(t).replace(/%3B/gi,";")}function oC(t){return Ok(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qy(t){return decodeURIComponent(t)}function kk(t){return Qy(t.replace(/\+/g,"%20"))}function Vk(t){return`${oC(t.path)}${function xW(t){return Object.keys(t).map(e=>`;${oC(e)}=${oC(t[e])}`).join("")}(t.parameters)}`}const NW=/^[^\/()?;#]+/;function aC(t){const e=t.match(NW);return e?e[0]:""}const OW=/^[^\/()?;=#]+/,VW=/^[^=?&#]+/,FW=/^[^&#]+/;class BW{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Dt([],{}):new Dt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ge]=new Dt(e,n)),r}parseSegment(){const e=aC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new Tp(Qy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function kW(t){const e=t.match(OW);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=aC(this.remaining);i&&(r=i,this.capture(r))}e[Qy(n)]=Qy(r)}parseQueryParam(e){const n=function LW(t){const e=t.match(VW);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function UW(t){const e=t.match(FW);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=kk(n),s=kk(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=aC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new $(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ge);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[Ge]:new Dt([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}}function Lk(t){return t.segments.length>0?new Dt([],{[Ge]:t}):t}function Fk(t){const e={};for(const r of Object.keys(t.children)){const s=Fk(t.children[r]);if(r===Ge&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function jW(t){if(1===t.numberOfChildren&&t.children[Ge]){const e=t.children[Ge];return new Dt(t.segments.concat(e.segments),e.children)}return t}(new Dt(t.segments,e))}function hc(t){return t instanceof Td}function Uk(t){let e;const i=Lk(function n(s){const o={};for(const u of s.children){const d=n(u);o[u.outlet]=d}const a=new Dt(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function Bk(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return uC(i,i,i,n,r);const s=function HW(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new $k(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new $k(n,e,r)}(e);if(s.toRoot())return uC(i,i,new Dt([],{}),n,r);const o=function zW(t,e,n){if(t.isAbsolute)return new Jy(e,!0,0);if(!n)return new Jy(e,!1,NaN);if(null===n.parent)return new Jy(n,!0,0);const r=Yy(t.commands[0])?0:1;return function GW(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new Jy(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?Ap(o.segmentGroup,o.index,s.commands):Hk(o.segmentGroup,o.index,s.commands);return uC(i,o.segmentGroup,a,n,r)}function Yy(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function bp(t){return"object"==typeof t&&null!=t&&t.outlets}function uC(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`}),o=t===e?n:jk(t,e,n);const a=Lk(Fk(o));return new Td(a,s,i)}function jk(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:jk(s,e,n)}),new Dt(t.segments,r)}class $k{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Yy(r[0]))throw new $(4003,!1);const i=r.find(bp);if(i&&i!==Sk(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Jy{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function Hk(t,e,n){if(t||(t=new Dt([],{})),0===t.segments.length&&t.hasChildren())return Ap(t,e,n);const r=function WW(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(bp(a))break;const u=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!Gk(u,d,o))return s;r+=2}else{if(!Gk(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Dt(t.segments.slice(0,r.pathIndex),{});return s.children[Ge]=new Dt(t.segments.slice(r.pathIndex),t.children),Ap(s,0,i)}return r.match&&0===i.length?new Dt(t.segments,{}):r.match&&!t.hasChildren()?cC(t,e,n):r.match?Ap(t,0,i):cC(t,e,n)}function Ap(t,e,n){if(0===n.length)return new Dt(t.segments,{});{const r=function qW(t){return bp(t[0])?t[0].outlets:{[Ge]:t}}(n),i={};if(Object.keys(r).some(s=>s!==Ge)&&t.children[Ge]&&1===t.numberOfChildren&&0===t.children[Ge].segments.length){const s=Ap(t.children[Ge],e,n);return new Dt(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=Hk(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Dt(t.segments,i)}}function cC(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(bp(s)){const u=ZW(s.outlets);return new Dt(r,u)}if(0===i&&Yy(n[0])){r.push(new Tp(t.segments[e].path,zk(n[0]))),i++;continue}const o=bp(s)?s.outlets[Ge]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Yy(a)?(r.push(new Tp(o,zk(a))),i+=2):(r.push(new Tp(o,{})),i++)}return new Dt(r,{})}function ZW(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=cC(new Dt([],{}),0,r))}),e}function zk(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Gk(t,e,n){return t==n.path&&no(e,n.parameters)}const Sp="imperative";class ro{constructor(e,n){this.id=e,this.url=n}}class Xy extends ro{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Va extends ro{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Rp extends ro{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Cd extends ro{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class ev extends ro{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qk extends ro{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KW extends ro{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QW extends ro{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class YW extends ro{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JW extends ro{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XW{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class e8{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class t8{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class n8{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class r8{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class i8{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wk{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class lC{}class dC{constructor(e){this.url=e}}class s8{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Pp,this.attachRef=null}}let Pp=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new s8,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Zk{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=hC(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=hC(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=fC(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return fC(e,this._root).map(n=>n.value)}}function hC(t,e){if(t===e.value)return e;for(const n of e.children){const r=hC(t,n);if(r)return r}return null}function fC(t,e){if(t===e.value)return[e];for(const n of e.children){const r=fC(t,n);if(r.length)return r.unshift(e),r}return[]}class jo{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Dd(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class Kk extends Zk{constructor(e,n){super(e),this.snapshot=n,pC(this,e)}toString(){return this.snapshot.toString()}}function Qk(t,e){const n=function o8(t,e){const o=new tv([],{},{},"",{},Ge,e,null,{});return new Jk("",new jo(o,[]))}(0,e),r=new P([new Tp("",{})]),i=new P({}),s=new P({}),o=new P({}),a=new P(""),u=new bd(r,i,o,a,s,Ge,e,n.root);return u.snapshot=n.root,new Kk(new jo(u,[]),n)}class bd{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(_e(d=>d[wp]))??W(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(_e(e=>wd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(_e(e=>wd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yk(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function a8(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class tv{get title(){return this.data?.[wp]}constructor(e,n,r,i,s,o,a,u,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Jk extends Zk{constructor(e,n){super(n),this.url=e,pC(this,n)}toString(){return Xk(this._root)}}function pC(t,e){e.value._routerState=t,e.children.forEach(n=>pC(t,n))}function Xk(t){const e=t.children.length>0?` { ${t.children.map(Xk).join(", ")} } `:"";return`${t.value}${e}`}function gC(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,no(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),no(e.params,n.params)||t.paramsSubject.next(n.params),function TW(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!no(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),no(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function mC(t,e){const n=no(t.params,e.params)&&function AW(t,e){return dc(t,e)&&t.every((n,r)=>no(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||mC(t.parent,e.parent))}let _C=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ge,this.activateEvents=new fn,this.deactivateEvents=new fn,this.attachEvents=new fn,this.detachEvents=new fn,this.parentContexts=pe(Pp),this.location=pe(vs),this.changeDetector=pe(Ty),this.environmentInjector=pe(Ki),this.inputBinder=pe(nv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new u8(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Pe({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[jr]})}return t})();class u8{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===bd?this.route:e===Pp?this.childContexts:this.parent.get(e,n)}}const nv=new ce("");let e1=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=$y([r.queryParams,r.params,r.data]).pipe(dt(([s,o,a],u)=>(a={...s,...o,...a},0===u?W(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function k9(t){const e=Xe(t);if(!e)return null;const n=new Yf(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();function xp(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function l8(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return xp(t,r,i);return xp(t,r)})}(t,e,n);return new jo(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>xp(t,a)),o}}const r=function d8(t){return new bd(new P(t.url),new P(t.params),new P(t.queryParams),new P(t.fragment),new P(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>xp(t,s));return new jo(r,i)}}const yC="ngNavigationCancelingError";function t1(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=hc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=n1(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function n1(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[yC]=!0,r.cancellationCode=e,n&&(r.url=n),r}function r1(t){return t&&t[yC]}let i1=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=hs({type:t,selectors:[["ng-component"]],standalone:!0,features:[iN],decls:1,vars:0,template:function(r,i){1&r&&np(0,"router-outlet")},dependencies:[_C],encapsulation:2})}return t})();function vC(t){const e=t.children&&t.children.map(vC),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ge&&(n.component=i1),n}function Ts(t){return t.outlet||Ge}function Mp(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class v8{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),gC(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Dd(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Dd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Dd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Dd(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new i8(s.value.snapshot))}),e.children.length&&this.forwardEvent(new n8(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(gC(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),gC(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Mp(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class s1{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class rv{constructor(e,n){this.component=e,this.route=n}}function E8(t,e,n){const r=t._root;return Np(r,e?e._root:null,n,[r.value])}function Ad(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function bI(t){return null!==vu(t)}(t)?e.get(t):t:r}function Np(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Dd(e);return t.children.forEach(o=>{(function w8(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function T8(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!dc(t.url,e.url);case"pathParamsOrQueryParamsChange":return!dc(t.url,e.url)||!no(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mC(t,e)||!no(t.queryParams,e.queryParams);default:return!mC(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new s1(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Np(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new rv(a.outlet.component,o))}else o&&Op(e,a,i),i.canActivateChecks.push(new s1(r)),Np(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Op(a,n.getContext(o),i)),i}function Op(t,e,n){const r=Dd(t),i=t.value;Object.entries(r).forEach(([s,o])=>{Op(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new rv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function kp(t){return"function"==typeof t}function o1(t){return t instanceof Hy||"EmptyError"===t?.name}const iv=Symbol("INITIAL_VALUE");function Sd(){return dt(t=>$y(t.map(e=>e.pipe(Na(1),zy(iv)))).pipe(_e(e=>{for(const n of e)if(!0!==n){if(n===iv)return iv;if(!1===n||n instanceof Td)return n}return!0}),ws(e=>e!==iv),Na(1)))}function a1(t){return function Mi(...t){return Ni(t)}(dr(e=>{if(hc(e))throw t1(0,e)}),_e(e=>!0===e))}class sv{constructor(e){this.segmentGroup=e||null}}class u1{constructor(e){this.urlTree=e}}function Rd(t){return Ep(new sv(t))}function c1(t){return Ep(new u1(t))}class H8{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new $(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return W(r);if(i.numberOfChildren>1||!i.children[Ge])return Ep(new $(4e3,!1));i=i.children[Ge]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new Td(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Dt(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const EC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function z8(t,e,n,r,i){const s=IC(t,e,n);return s.matched?(r=function f8(t,e){return t.providers&&!t._injector&&(t._injector=KT(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function B8(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?W(i.map(o=>{const a=Ad(o,t);return ka(function R8(t){return t&&kp(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Sd(),a1()):W(!0)}(r,e,n).pipe(_e(o=>!0===o?s:{...EC}))):W(s)}function IC(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...EC}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||wW)(n,t,e);if(!i)return{...EC};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function l1(t,e,n,r){return n.length>0&&function W8(t,e,n){return n.some(r=>ov(t,e,r)&&Ts(r)!==Ge)}(t,n,r)?{segmentGroup:new Dt(e,q8(r,new Dt(n,t.children))),slicedSegments:[]}:0===n.length&&function Z8(t,e,n){return n.some(r=>ov(t,e,r))}(t,n,r)?{segmentGroup:new Dt(t.segments,G8(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Dt(t.segments,t.children),slicedSegments:n}}function G8(t,e,n,r,i){const s={};for(const o of r)if(ov(t,n,o)&&!i[Ts(o)]){const a=new Dt([],{});s[Ts(o)]=a}return{...i,...s}}function q8(t,e){const n={};n[Ge]=e;for(const r of t)if(""===r.path&&Ts(r)!==Ge){const i=new Dt([],{});n[Ts(r)]=i}return n}function ov(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class J8{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new H8(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,!1)}recognize(){const e=l1(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ge).pipe(lc(n=>{if(n instanceof u1)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof sv?this.noMatchError(n):n}),_e(n=>{const r=new tv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ge,this.rootComponentType,null,{}),i=new jo(r,n),s=new Jk("",i),o=function $W(t,e,n=null,r=null){return Bk(Uk(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ge).pipe(lc(r=>{throw r instanceof sv?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=Yk(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return A(i).pipe(Ip(s=>{const o=r.children[s],a=function _8(t,e){const n=t.filter(r=>Ts(r)===e);return n.push(...t.filter(r=>Ts(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),qy((s,o)=>(s.push(...o),s)),Gy(null),function yW(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ws((i,s)=>t(i,s,r)):yn,rC(1),n?Gy(e):bk(()=>new Hy))}(),Ft(s=>{if(null===s)return Rd(r);const o=d1(s);return function X8(t){t.sort((e,n)=>e.value.outlet===Ge?-1:n.value.outlet===Ge?1:e.value.outlet.localeCompare(n.value.outlet))}(o),W(o)}))}processSegment(e,n,r,i,s,o){return A(n).pipe(Ip(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(lc(u=>{if(u instanceof sv)return W(null);throw u}))),Oa(a=>!!a),lc(a=>{if(o1(a))return function Q8(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?W([]):Rd(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function K8(t,e,n,r){return!!(Ts(t)===r||r!==Ge&&ov(e,n,t))&&("**"===t.path||IC(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Rd(i):Rd(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?c1(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Ft(o=>{const a=new Dt(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:f}=IC(n,i,s);if(!a)return Rd(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,f);return i.redirectTo.startsWith("/")?c1(g):this.applyRedirects.lineralizeSegments(i,g).pipe(Ft(_=>this.processSegment(e,r,n,_.concat(d),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?Sk(i).parameters:{};a=W({snapshot:new tv(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,h1(r),Ts(r),r.component??r._loadedComponent??null,r,f1(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=z8(n,r,i,e).pipe(_e(({matched:u,consumedSegments:d,remainingSegments:f,parameters:g})=>u?{snapshot:new tv(d,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,h1(r),Ts(r),r.component??r._loadedComponent??null,r,f1(r)),consumedSegments:d,remainingSegments:f}:null));return a.pipe(dt(u=>null===u?Rd(n):this.getChildConfig(e=r._injector??e,r,i).pipe(dt(({routes:d})=>{const f=r._loadedInjector??e,{snapshot:g,consumedSegments:_,remainingSegments:y}=u,{segmentGroup:E,slicedSegments:w}=l1(n,_,y,d);if(0===w.length&&E.hasChildren())return this.processChildren(f,d,E).pipe(_e(M=>null===M?null:[new jo(g,M)]));if(0===d.length&&0===w.length)return W([new jo(g,[])]);const D=Ts(r)===s;return this.processSegment(f,d,E,w,D?Ge:s,!0).pipe(_e(M=>[new jo(g,M)]))}))))}getChildConfig(e,n,r){return n.children?W({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?W({routes:n._loadedRoutes,injector:n._loadedInjector}):function U8(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?W(!0):W(i.map(o=>{const a=Ad(o,t);return ka(function D8(t){return t&&kp(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Sd(),a1())}(e,n,r).pipe(Ft(i=>i?this.configLoader.loadChildren(e,n).pipe(dr(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function $8(t){return Ep(n1(!1,3))}())):W({routes:[],injector:e})}}function e7(t){const e=t.value.routeConfig;return e&&""===e.path}function d1(t){const e=[],n=new Set;for(const r of t){if(!e7(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=d1(r.children);e.push(new jo(r.value,i))}return e.filter(r=>!n.has(r))}function h1(t){return t.data||{}}function f1(t){return t.resolve||{}}function p1(t){return"string"==typeof t.title||null===t.title}function wC(t){return dt(e=>{const n=t(e);return n?A(n).pipe(_e(()=>e)):W(e)})}const Pd=new ce("ROUTES");let TC=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=pe(YN)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return W(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=ka(n.loadComponent()).pipe(_e(g1),dr(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),iC(()=>{this.componentLoaders.delete(n)})),i=new Dk(r,()=>new H).pipe(nC());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function a7(t,e,n,r){return ka(t.loadChildren()).pipe(_e(g1),Ft(i=>i instanceof nN||Array.isArray(i)?W(i):A(e.compileModuleAsync(i))),_e(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get(Pd,[],{optional:!0,self:!0}).flat()),{routes:o.map(vC),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(iC(()=>{this.childrenLoaders.delete(r)})),o=new Dk(s,()=>new H).pipe(nC());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function g1(t){return function u7(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let av=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new H,this.transitionAbortSubject=new H,this.configLoader=pe(TC),this.environmentInjector=pe(Ki),this.urlSerializer=pe(Cp),this.rootContexts=pe(Pp),this.inputBindingEnabled=null!==pe(nv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>W(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new e8(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new XW(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new P({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Sp,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ws(s=>0!==s.id),_e(s=>({...s,extractedUrl:n.urlHandlingStrategy.extract(s.rawUrl)})),dt(s=>{this.currentTransition=s;let o=!1,a=!1;return W(s).pipe(dr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),dt(u=>{const d=u.currentBrowserUrl.toString(),f=!n.navigated||u.extractedUrl.toString()!==d||d!==u.currentUrlTree.toString();if(!f&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const _="";return this.events.next(new Cd(u.id,this.urlSerializer.serialize(u.rawUrl),_,0)),u.resolve(null),Sn}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return W(u).pipe(dt(_=>{const y=this.transitions?.getValue();return this.events.next(new Xy(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),y!==this.transitions?.getValue()?Sn:Promise.resolve(_)}),function t7(t,e,n,r,i,s){return Ft(o=>function Y8(t,e,n,r,i,s,o="emptyOnly"){return new J8(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(_e(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),dr(_=>{s.targetSnapshot=_.targetSnapshot,s.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects};const y=new qk(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(y)}));if(f&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:_,extractedUrl:y,source:E,restoredState:w,extras:D}=u,M=new Xy(_,this.urlSerializer.serialize(y),E,w);this.events.next(M);const R=Qk(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:R,urlAfterRedirects:y,extras:{...D,skipLocationChange:!1,replaceUrl:!1}},W(s)}{const _="";return this.events.next(new Cd(u.id,this.urlSerializer.serialize(u.extractedUrl),_,1)),u.resolve(null),Sn}}),dr(u=>{const d=new KW(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),_e(u=>(this.currentTransition=s={...u,guards:E8(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function x8(t,e){return Ft(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?W({...n,guardsResult:!0}):function M8(t,e,n,r){return A(t).pipe(Ft(i=>function F8(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?W(s.map(a=>{const u=Mp(e)??i,d=Ad(a,u);return ka(function S8(t){return t&&kp(t.canDeactivate)}(d)?d.canDeactivate(t,e,n,r):u.runInContext(()=>d(t,e,n,r))).pipe(Oa())})).pipe(Sd()):W(!0)}(i.component,i.route,n,e,r)),Oa(i=>!0!==i,!0))}(o,r,i,t).pipe(Ft(a=>a&&function C8(t){return"boolean"==typeof t}(a)?function N8(t,e,n,r){return A(e).pipe(Ip(i=>tC(function k8(t,e){return null!==t&&e&&e(new t8(t)),W(!0)}(i.route.parent,r),function O8(t,e){return null!==t&&e&&e(new r8(t)),W(!0)}(i.route,r),function L8(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function I8(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Ck(()=>W(o.guards.map(u=>{const d=Mp(o.node)??n,f=Ad(u,d);return ka(function A8(t){return t&&kp(t.canActivateChild)}(f)?f.canActivateChild(r,t):d.runInContext(()=>f(r,t))).pipe(Oa())})).pipe(Sd())));return W(s).pipe(Sd())}(t,i.path,n),function V8(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return W(!0);const i=r.map(s=>Ck(()=>{const o=Mp(e)??n,a=Ad(s,o);return ka(function b8(t){return t&&kp(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(Oa())}));return W(i).pipe(Sd())}(t,i.route,n))),Oa(i=>!0!==i,!0))}(r,s,t,e):W(a)),_e(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),dr(u=>{if(s.guardsResult=u.guardsResult,hc(u.guardsResult))throw t1(0,u.guardsResult);const d=new QW(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),ws(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),wC(u=>{if(u.guards.canActivateChecks.length)return W(u).pipe(dr(d=>{const f=new YW(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),dt(d=>{let f=!1;return W(d).pipe(function n7(t,e){return Ft(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return W(n);let s=0;return A(i).pipe(Ip(o=>function r7(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!p1(i)&&(s[wp]=i.title),function i7(t,e,n,r){const i=function s7(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return W({});const s={};return A(i).pipe(Ft(o=>function o7(t,e,n,r){const i=Mp(e)??r,s=Ad(t,i);return ka(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(Oa(),dr(a=>{s[o]=a}))),rC(1),function vW(t){return _e(()=>t)}(s),lc(o=>o1(o)?Sn:Ep(o)))}(s,t,e,r).pipe(_e(o=>(t._resolvedData=o,t.data=Yk(t,n).resolve,i&&p1(i)&&(t.data[wp]=i.title),null)))}(o.route,r,t,e)),dr(()=>s++),rC(1),Ft(o=>s===i.length?W(n):Sn))})}(n.paramsInheritanceStrategy,this.environmentInjector),dr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",2)}}))}),dr(d=>{const f=new JW(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),wC(u=>{const d=f=>{const g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(dr(_=>{f.component=_}),_e(()=>{})));for(const _ of f.children)g.push(...d(_));return g};return $y(d(u.targetSnapshot.root)).pipe(Gy(),Na(1))}),wC(()=>this.afterPreactivation()),_e(u=>{const d=function c8(t,e,n){const r=xp(t,e._root,n?n._root:void 0);return new Kk(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:d},s}),dr(()=>{this.events.next(new lC)}),((t,e,n,r)=>_e(i=>(new v8(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Na(1),dr({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Va(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function EW(t){return B((e,n)=>{vn(t).subscribe(fe(n,()=>n.complete(),Ie)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(dr(u=>{throw u}))),iC(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),lc(u=>{if(a=!0,r1(u))this.events.next(new Rp(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function h8(t){return r1(t)&&hc(t.url)}(u)?this.events.next(new dC(u.url)):s.resolve(!1);else{this.events.next(new ev(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(d){s.reject(d)}}return Sn}))}))}cancelNavigationTransition(n,r,i){const s=new Rp(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function m1(t){return t!==Sp}let _1=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ge);return r}getResolvedTitleForRoute(n){return n.data[wp]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:function(){return pe(c7)},providedIn:"root"})}return t})(),c7=(()=>{class t extends _1{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(se(mk))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),l7=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:function(){return pe(h7)},providedIn:"root"})}return t})();class d7{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let h7=(()=>{class t extends d7{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=qn(t)))(i||t)}}();static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const uv=new ce("",{providedIn:"root",factory:()=>({})});let f7=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:function(){return pe(p7)},providedIn:"root"})}return t})(),p7=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Vp=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Vp||{});function y1(t,e){t.events.pipe(ws(n=>n instanceof Va||n instanceof Rp||n instanceof ev||n instanceof Cd),_e(n=>n instanceof Va||n instanceof Cd?Vp.COMPLETE:n instanceof Rp&&(0===n.code||1===n.code)?Vp.REDIRECTING:Vp.FAILED),ws(n=>n!==Vp.REDIRECTING),Na(1)).subscribe(()=>{e()})}function g7(t){throw t}function m7(t,e,n){return e.parse("/")}const _7={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},y7={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Qr=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=pe(KN),this.isNgZoneEnabled=!1,this._events=new H,this.options=pe(uv,{optional:!0})||{},this.pendingTasks=pe(QN),this.errorHandler=this.options.errorHandler||g7,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||m7,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=pe(f7),this.routeReuseStrategy=pe(l7),this.titleStrategy=pe(_1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=pe(Pd,{optional:!0})?.flat()??[],this.navigationTransitions=pe(av),this.urlSerializer=pe(Cp),this.location=pe(S0),this.componentInputBindingEnabled=!!pe(nv,{optional:!0}),this.eventsSubscription=new ct,this.isNgZoneEnabled=pe(wt)instanceof wt&&wt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Td,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Qk(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(v1(r)&&this._events.next(r));if(r instanceof Xy)m1(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Cd)this.rawUrlTree=i.rawUrl;else if(r instanceof qk){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof lC)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Rp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof dC){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||m1(i.source)};this.scheduleNavigation(s,Sp,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof ev&&this.restoreHistory(i,!0),r instanceof Va&&(this.navigated=!0),v1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Sp,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(vC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o;let g,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{g=Uk(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return Bk(g,n,f,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=hc(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Sp,null,r)}navigate(n,r={skipLocationChange:!1}){return function v7(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new $(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{..._7}:!1===r?{...y7}:r,hc(n))return Pk(this.currentUrlTree,n,i);const s=this.parseUrl(n);return Pk(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d;o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((g,_)=>{a=g,u=_});const f=this.pendingTasks.add();return y1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function v1(t){return!(t instanceof lC||t instanceof dC)}class E1{}let w7=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ws(n=>n instanceof Va),Ip(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=KT(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return A(i).pipe(yi())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):W(null);const s=i.pipe(Ft(o=>null===o?W(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?A([s,this.loader.loadComponent(r)]).pipe(yi()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(se(Qr),se(YN),se(Ki),se(E1),se(TC))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const DC=new ce("");let I1=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Xy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Va?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Cd&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Wk&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Wk(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function HP(){throw new Error("invalid")}()};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();function $o(t,e){return{\u0275kind:t,\u0275providers:e}}function T1(){const t=pe(Ti);return e=>{const n=t.get(vd);if(e!==n.components[0])return;const r=t.get(Qr),i=t.get(C1);1===t.get(bC)&&r.initialNavigation(),t.get(D1,null,Je.Optional)?.setUpPreloading(),t.get(DC,null,Je.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const C1=new ce("",{factory:()=>new H}),bC=new ce("",{providedIn:"root",factory:()=>1}),D1=new ce("");function b7(t){return $o(0,[{provide:D1,useExisting:w7},{provide:E1,useExisting:t}])}const b1=new ce("ROUTER_FORROOT_GUARD"),S7=[S0,{provide:Cp,useClass:sC},Qr,Pp,{provide:bd,useFactory:function w1(t){return t.routerState.root},deps:[Qr]},TC,[]];function R7(){return new iO("Router",Qr)}let A1=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[S7,[],{provide:Pd,multi:!0,useValue:n},{provide:b1,useFactory:N7,deps:[[Qr,new Xu,new Bl]]},{provide:uv,useValue:r||{}},r?.useHash?{provide:cc,useClass:B9}:{provide:cc,useClass:kO},{provide:DC,useFactory:()=>{const t=pe(s5),e=pe(wt),n=pe(uv),r=pe(av),i=pe(Cp);return n.scrollOffset&&t.setOffset(n.scrollOffset),new I1(i,r,t,e,n)}},r?.preloadingStrategy?b7(r.preloadingStrategy).\u0275providers:[],{provide:iO,multi:!0,useFactory:R7},r?.initialNavigation?O7(r):[],r?.bindToComponentInputs?$o(8,[e1,{provide:nv,useExisting:e1}]).\u0275providers:[],[{provide:S1,useFactory:T1},{provide:y0,multi:!0,useExisting:S1}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Pd,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(se(b1,8))};static#t=this.\u0275mod=Dr({type:t});static#n=this.\u0275inj=wr({})}return t})();function N7(t){return"guarded"}function O7(t){return["disabled"===t.initialNavigation?$o(3,[{provide:l0,multi:!0,useFactory:()=>{const e=pe(Qr);return()=>{e.setUpLocationChangeListener()}}},{provide:bC,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?$o(2,[{provide:bC,useValue:0},{provide:l0,multi:!0,deps:[Ti],useFactory:e=>{const n=e.get(F9,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(Qr),s=e.get(C1);y1(i,()=>{r(!0)}),e.get(av).afterPreactivation=()=>(r(!0),s.closed?W(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const S1=new ce("");var Z=Fe(861),xd=(Fe(956),Fe(534));(0,xd.registerVersion)("firebase","10.6.0","app");class F7 extends ct{constructor(e,n){super()}schedule(e,n=0){return this}}const lv={setInterval(t,e,...n){const{delegate:r}=lv;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=lv;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class R1 extends F7{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return lv.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&lv.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Me(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const AC={now:()=>(AC.delegate||Date).now(),delegate:void 0};class Lp{constructor(e,n=Lp.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Lp.now=AC.now;class P1 extends Lp{constructor(e,n=Lp.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const j7=new class B7 extends P1{}(class U7 extends R1{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),x1=new P1(R1),SC=new Xl("ANGULARFIRE2_VERSION");class M1{constructor(){return((t,e)=>{const n=(0,xd.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(H7)}}const H7="app-check";function Md(){}class N1{zone;delegate;constructor(e,n=j7){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class z7{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Md,{},Md,Md)),n.pipe(dr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let O1=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new N1(Zone.current)),this.insideAngular=n.run(()=>new N1(Zone.current,x1)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(se(wt))};static \u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bi(t){return function q7(t){return function(n){return(n=n.lift(new z7(t.ngZone))).pipe(Er(t.outsideAngular),ar(t.insideAngular))}}(function Nd(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}())(t)}var io=Fe(106);io.Z.registerVersion("firebase","10.6.0","app-compat");const Q7=["ngOnDestroy"];class k1{constructor(e){return e}}const dv=new ce("angularfire2.app.options"),hv=new ce("angularfire2.app.name");function RC(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=io.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>io.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){const a=!!module.hot;X7("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new k1(o)}const X7=(t,...e)=>{},eZ={provide:k1,useFactory:RC,deps:[dv,wt,[new Xu,hv]]};let tZ=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:dv,useValue:n},{provide:hv,useValue:r}]}}constructor(n){io.Z.registerVersion("angularfire",SC.full,"core"),io.Z.registerVersion("angularfire",SC.full,"app-compat"),io.Z.registerVersion("angular",yP.full,n.toString())}static \u0275fac=function(r){return new(r||t)(se(Mo))};static \u0275mod=Dr({type:t});static \u0275inj=wr({providers:[eZ]})}return t})();function V1(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return function nZ(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,o)||(L1("error",`${e} was already initialized on the ${n} Firebase App with different settings.${rZ?" You may need to reload as Firebase is not HMR aware.":""}`),L1("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const rZ=typeof module<"u"&&!!module.hot,L1=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class iZ extends H{constructor(e=1/0,n=1/0,r=AC){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function F1(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,Ne({connector:()=>new iZ(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function U1(t,e){return I(e)?dt(()=>t,e):dt(()=>t)}const B1=new ce("angularfire2.auth.use-emulator"),j1=new ce("angularfire2.auth.settings"),$1=new ce("angularfire2.auth.tenant-id"),H1=new ce("angularfire2.auth.langugage-code"),z1=new ce("angularfire2.auth.use-device-language"),G1=new ce("angularfire.auth.persistence"),q1=(t,e,n,r,i,s,o,a)=>V1(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[d,f]of Object.entries(o))u.settings[d]=f;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let PC=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,d,f,g,_,y){const E=new H,w=W(void 0).pipe(ar(o.outsideAngular),dt(()=>s.runOutsideAngular(()=>Promise.resolve().then(Fe.bind(Fe,956)))),_e(()=>RC(n,s,r)),_e(D=>q1(D,s,a,d,f,g,u,_)),F1({bufferSize:1,refCount:!1}));if(Fy(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=W(null);else{w.pipe(Oa()).subscribe();const D=w.pipe(dt(k=>k.getRedirectResult().then(U=>U,()=>null)),bi,F1({bufferSize:1,refCount:!1})),M=w.pipe(dt(k=>new rt(U=>({unsubscribe:s.runOutsideAngular(()=>k.onAuthStateChanged(te=>U.next(te),te=>U.error(te),()=>U.complete()))})))),R=w.pipe(dt(k=>new rt(U=>({unsubscribe:s.runOutsideAngular(()=>k.onIdTokenChanged(te=>U.next(te),te=>U.error(te),()=>U.complete()))}))));this.authState=D.pipe(U1(M),Er(o.outsideAngular),ar(o.insideAngular)),this.user=D.pipe(U1(R),Er(o.outsideAngular),ar(o.insideAngular)),this.idToken=this.user.pipe(dt(k=>k?A(k.getIdToken()):W(null))),this.idTokenResult=this.user.pipe(dt(k=>k?A(k.getIdTokenResult()):W(null))),this.credential=q(D,E,this.authState.pipe(ws(k=>!k))).pipe(_e(k=>k?.user?k:null),Er(o.outsideAngular),ar(o.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(Q7.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>n.run(()=>d)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,d)=>o.then(f=>{const g=f?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,g),g})})})}))(this,w,s,{spy:{apply:(D,M,R)=>{(D.startsWith("signIn")||D.startsWith("createUser"))&&R.then(k=>E.next(k))}}})}static \u0275fac=function(r){return new(r||t)(se(dv),se(hv,8),se(Mo),se(wt),se(O1),se(B1,8),se(j1,8),se($1,8),se(H1,8),se(z1,8),se(G1,8),se(M1,8))};static \u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function xC(){return B((t,e)=>{let n,r=!1;t.subscribe(fe(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}var he,W1=Fe(537),so=Fe(879),kt=Fe(58),oZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cs={},MC=MC||{},Be=oZ||self;function fv(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Fp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var NC="closure_uid_"+(1e9*Math.random()>>>0),uZ=0;function cZ(t,e,n){return t.call.apply(t.bind,arguments)}function lZ(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Rr(t,e,n){return(Rr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cZ:lZ).apply(null,arguments)}function pv(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function er(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function La(){this.s=this.s,this.o=this.o}La.prototype.s=!1,La.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function aZ(t){Object.prototype.hasOwnProperty.call(t,NC)&&t[NC]||(t[NC]=++uZ)}(this)},La.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Z1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function OC(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function K1(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(fv(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Pr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Pr.prototype.h=function(){this.defaultPrevented=!0};var hZ=function(){if(!Be.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Be.addEventListener("test",()=>{},e),Be.removeEventListener("test",()=>{},e)}catch{}return t}();function Up(t){return/^[\s\xa0]*$/.test(t)}function gv(){var t=Be.navigator;return t&&(t=t.userAgent)?t:""}function oo(t){return-1!=gv().indexOf(t)}function kC(t){return kC[" "](t),t}kC[" "]=function(){};var LC,t,pZ=oo("Opera"),Od=oo("Trident")||oo("MSIE"),Q1=oo("Edge"),VC=Q1||Od,Y1=oo("Gecko")&&!(-1!=gv().toLowerCase().indexOf("webkit")&&!oo("Edge"))&&!(oo("Trident")||oo("MSIE"))&&!oo("Edge"),gZ=-1!=gv().toLowerCase().indexOf("webkit")&&!oo("Edge");function J1(){var t=Be.document;return t?t.documentMode:void 0}e:{var FC="",UC=(t=gv(),Y1?/rv:([^\);]+)(\)|;)/.exec(t):Q1?/Edge\/([\d\.]+)/.exec(t):Od?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):gZ?/WebKit\/(\S+)/.exec(t):pZ?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(UC&&(FC=UC?UC[1]:""),Od){var BC=J1();if(null!=BC&&BC>parseFloat(FC)){LC=String(BC);break e}}LC=FC}var mZ=Be.document&&Od&&(J1()||parseInt(LC,10))||void 0;function Bp(t,e){if(Pr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Y1){e:{try{kC(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:_Z[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Bp.$.h.call(this)}}er(Bp,Pr);var _Z={2:"touch",3:"pen",4:"mouse"};Bp.prototype.h=function(){Bp.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var jp="closure_listenable_"+(1e6*Math.random()|0),yZ=0;function vZ(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++yZ,this.fa=this.ia=!1}function mv(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function $C(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function eV(t){const e={};for(const n in t)e[n]=t[n];return e}const tV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nV(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<tV.length;s++)n=tV[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function _v(t){this.src=t,this.g={},this.h=0}function HC(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=Z1(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(mv(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function zC(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}_v.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=zC(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new vZ(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var GC="closure_lm_"+(1e6*Math.random()|0),qC={};function rV(t,e,n,r,i){if(r&&r.once)return sV(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)rV(t,e[s],n,r,i);return null}return n=QC(n),t&&t[jp]?t.O(e,n,Fp(r)?!!r.capture:!!r,i):iV(t,e,n,!1,r,i)}function iV(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Fp(i)?!!i.capture:!!i,a=ZC(t);if(a||(t[GC]=a=new _v(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function IZ(){const e=wZ;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)hZ||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(aV(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function sV(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)sV(t,e[s],n,r,i);return null}return n=QC(n),t&&t[jp]?t.P(e,n,Fp(r)?!!r.capture:!!r,i):iV(t,e,n,!0,r,i)}function oV(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)oV(t,e[s],n,r,i);else r=Fp(r)?!!r.capture:!!r,n=QC(n),t&&t[jp]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=zC(s=t.g[e],n,r,i))&&(mv(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=ZC(t))&&(e=t.g[e.toString()],t=-1,e&&(t=zC(e,n,r,i)),(n=-1<t?e[t]:null)&&WC(n))}function WC(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[jp])HC(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(aV(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ZC(e))?(HC(n,t),0==n.h&&(n.src=null,e[GC]=null)):mv(t)}}}function aV(t){return t in qC?qC[t]:qC[t]="on"+t}function wZ(t,e){if(t.fa)t=!0;else{e=new Bp(e,this);var n=t.listener,r=t.la||t.src;t.ia&&WC(t),t=n.call(r,e)}return t}function ZC(t){return(t=t[GC])instanceof _v?t:null}var KC="__closure_events_fn_"+(1e9*Math.random()>>>0);function QC(t){return"function"==typeof t?t:(t[KC]||(t[KC]=function(e){return t.handleEvent(e)}),t[KC])}function tr(){La.call(this),this.i=new _v(this),this.S=this,this.J=null}function hr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Pr(e,t);else if(e instanceof Pr)e.target=e.target||t;else{var i=e;nV(e=new Pr(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=yv(o,r,!0,e)&&i}if(i=yv(o=e.g=t,r,!0,e)&&i,i=yv(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=yv(o=e.g=n[s],r,!1,e)&&i}function yv(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&HC(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}er(tr,La),tr.prototype[jp]=!0,tr.prototype.removeEventListener=function(t,e,n,r){oV(this,t,e,n,r)},tr.prototype.N=function(){if(tr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)mv(n[r]);delete t.g[e],t.h--}}this.J=null},tr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},tr.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var YC=Be.JSON.stringify;function CZ(){var t=JC;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var uV=new class TZ{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new bZ,t=>t.reset());class bZ{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function AZ(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function SZ(t){Be.setTimeout(()=>{throw t},0)}let $p,Hp=!1,JC=new class DZ{constructor(){this.h=this.g=null}add(e,n){const r=uV.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},cV=()=>{const t=Be.Promise.resolve(void 0);$p=()=>{t.then(RZ)}};var RZ=()=>{for(var t;t=CZ();){try{t.h.call(t.g)}catch(n){SZ(n)}var e=uV;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Hp=!1};function vv(t,e){tr.call(this),this.h=t||1,this.g=e||Be,this.j=Rr(this.qb,this),this.l=Date.now()}function XC(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function eD(t,e,n){if("function"==typeof t)n&&(t=Rr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Rr(t.handleEvent,t)}return 2147483647<Number(e)?-1:Be.setTimeout(t,e||0)}function lV(t){t.g=eD(()=>{t.g=null,t.i&&(t.i=!1,lV(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}er(vv,tr),(he=vv.prototype).ga=!1,he.T=null,he.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),hr(this,"tick"),this.ga&&(XC(this),this.start()))}},he.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},he.N=function(){vv.$.N.call(this),XC(this),delete this.g};class PZ extends La{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:lV(this)}N(){super.N(),this.g&&(Be.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zp(t){La.call(this),this.h=t,this.g={}}er(zp,La);var dV=[];function hV(t,e,n,r){Array.isArray(n)||(n&&(dV[0]=n.toString()),n=dV);for(var i=0;i<n.length;i++){var s=rV(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function fV(t){$C(t.g,function(e,n){this.g.hasOwnProperty(n)&&WC(e)},t),t.g={}}function Ev(){this.g=!0}function kd(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function OZ(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return YC(n)}catch{return e}}(t,n)+(r?" "+r:"")})}zp.prototype.N=function(){zp.$.N.call(this),fV(this)},zp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ev.prototype.Ea=function(){this.g=!1},Ev.prototype.info=function(){};var pc={},pV=null;function Iv(){return pV=pV||new tr}function gV(t){Pr.call(this,pc.Ta,t)}function Gp(t){const e=Iv();hr(e,new gV(e))}function mV(t,e){Pr.call(this,pc.STAT_EVENT,t),this.stat=e}function Yr(t){const e=Iv();hr(e,new mV(e,t))}function _V(t,e){Pr.call(this,pc.Ua,t),this.size=e}function qp(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Be.setTimeout(function(){t()},e)}pc.Ta="serverreachability",er(gV,Pr),pc.STAT_EVENT="statevent",er(mV,Pr),pc.Ua="timingevent",er(_V,Pr);var wv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},yV={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function tD(){}function EV(){}tD.prototype.h=null;var iD,Wp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function nD(){Pr.call(this,"d")}function rD(){Pr.call(this,"c")}function Tv(){}function Zp(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new zp(this),this.P=kZ,this.V=new vv(t=VC?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new IV}function IV(){this.i=null,this.g="",this.h=!1}er(nD,Pr),er(rD,Pr),er(Tv,tD),Tv.prototype.g=function(){return new XMLHttpRequest},Tv.prototype.i=function(){return{}},iD=new Tv;var kZ=45e3,sD={},Cv={};function oD(t,e,n){t.L=1,t.v=Sv(Ho(e)),t.s=n,t.S=!0,wV(t,null)}function wV(t,e){t.G=Date.now(),Kp(t),t.A=Ho(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),MV(n.i,"t",r),t.C=0,n=t.l.J,t.h=new IV,t.g=nL(t.l,n?e:null,!t.s),0<t.O&&(t.M=new PZ(Rr(t.Pa,t,t.g),t.O)),hV(t.U,t.g,"readystatechange",t.nb),e=t.I?eV(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Gp(),function xZ(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var d=a[u].split("=");if(1<d.length){var f=d[0];d=d[1];var g=f.split("_");o=2<=g.length&&"type"==g[1]?o+(f+"=")+d+"&":o+(f+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.W,t.s)}function TV(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function CV(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=VZ(t,n),i==Cv){4==e&&(t.o=4,Yr(14),r=!1),kd(t.j,t.m,null,"[Incomplete Response]");break}if(i==sD){t.o=4,Yr(15),kd(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}kd(t.j,t.m,i,null),aD(t,i)}TV(t)&&i!=Cv&&i!=sD&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Yr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),pD(e),e.M=!0,Yr(11))):(kd(t.j,t.m,n,"[Invalid Chunked Response]"),gc(t),Qp(t))}function VZ(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Cv:(n=Number(e.substring(n,r)),isNaN(n)?sD:(r+=1)+n>e.length?Cv:(e=e.slice(r,r+n),t.C=r+n,e))}function Kp(t){t.Y=Date.now()+t.P,DV(t,t.P)}function DV(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=qp(Rr(t.lb,t),e)}function Dv(t){t.B&&(Be.clearTimeout(t.B),t.B=null)}function Qp(t){0==t.l.H||t.J||JV(t.l,t)}function gc(t){Dv(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,XC(t.V),fV(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function aD(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||uD(n.i,t)))if(!t.K&&uD(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;Ov(n),Mv(n)}fD(n),Yr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=qp(Rr(n.ib,n),6e3));if(1>=kV(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else _c(n,11)}else if((t.K||n.g==t)&&Ov(n),!Up(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let d=i[e];if(n.V=d[0],d=d[1],2==n.H)if("c"==d[0]){n.K=d[1],n.pa=d[2];const f=d[3];null!=f&&(n.ra=f,n.l.info("VER="+n.ra));const g=d[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const _=d[5];null!=_&&"number"==typeof _&&0<_&&(n.L=r=1.5*_,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const E=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(cD(s,s.h),s.h=null))}if(r.F){const w=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,Qt(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=tL(r,r.J?r.pa:null,r.Y),o.K){VV(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(Dv(a),Kp(a)),r.g=o}else QV(r);0<n.j.length&&Nv(n)}else"stop"!=d[0]&&"close"!=d[0]||_c(n,7);else 3==n.H&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?_c(n,7):hD(n):"noop"!=d[0]&&n.h&&n.h.Aa(d),n.A=0)}Gp()}catch{}}function bV(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(fv(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function FZ(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(fv(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function LZ(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(fv(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(he=Zp.prototype).setTimeout=function(t){this.P=t},he.nb=function(t){t=t.target;const e=this.M;e&&3==ao(t)?e.l():this.Pa(t)},he.Pa=function(t){try{if(t==this.g)e:{const f=ao(this.g);var e=this.g.Ia();if(this.g.da(),!(3>f)&&(3!=f||VC||this.g&&(this.h.h||this.g.ja()||zV(this.g)))){this.J||4!=f||7==e||Gp(),Dv(this);var n=this.g.da();this.ca=n;t:if(TV(this)){var r=zV(this.g);t="";var i=r.length,s=4==ao(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){gc(this),Qp(this);var o="";break t}this.h.i=new Be.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function MZ(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,f,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Up(a)){var d=a;break t}}d=null}if(!(n=d)){this.i=!1,this.o=3,Yr(12),gc(this),Qp(this);break e}kd(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aD(this,n)}this.S?(CV(this,f,o),VC&&this.i&&3==f&&(hV(this.U,this.V,"tick",this.mb),this.V.start())):(kd(this.j,this.m,o,null),aD(this,o)),4==f&&gc(this),this.i&&!this.J&&(4==f?JV(this.l,this):(this.i=!1,Kp(this)))}else(function nK(t){const e={};t=(t.g&&2<=ao(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Up(t[r]))continue;var n=AZ(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function EZ(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Yr(12)):(this.o=0,Yr(13)),gc(this),Qp(this)}}}catch{}},he.mb=function(){if(this.g){var t=ao(this.g),e=this.g.ja();this.C<e.length&&(Dv(this),CV(this,t,e),this.i&&4!=t&&Kp(this))}},he.cancel=function(){this.J=!0,gc(this)},he.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function NZ(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Gp(),Yr(17)),gc(this),this.o=2,Qp(this)):DV(this,this.Y-t)};var AV=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mc(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof mc){this.h=t.h,bv(this,t.j),this.s=t.s,this.g=t.g,Av(this,t.m),this.l=t.l;var e=t.i,n=new Xp;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),SV(this,n),this.o=t.o}else t&&(e=String(t).match(AV))?(this.h=!1,bv(this,e[1]||"",!0),this.s=Yp(e[2]||""),this.g=Yp(e[3]||"",!0),Av(this,e[4]),this.l=Yp(e[5]||"",!0),SV(this,e[6]||"",!0),this.o=Yp(e[7]||"")):(this.h=!1,this.i=new Xp(null,this.h))}function Ho(t){return new mc(t)}function bv(t,e,n){t.j=n?Yp(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Av(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function SV(t,e,n){e instanceof Xp?(t.i=e,function GZ(t,e){e&&!t.j&&(Fa(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(PV(this,r),MV(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Jp(e,HZ)),t.i=new Xp(e,t.h))}function Qt(t,e,n){t.i.set(e,n)}function Sv(t){return Qt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Yp(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Jp(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,BZ),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function BZ(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}mc.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Jp(e,RV,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Jp(e,RV,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Jp(n,"/"==n.charAt(0)?$Z:jZ,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Jp(n,zZ)),t.join("")};var RV=/[#\/\?@]/g,jZ=/[#\?:]/g,$Z=/[#\?]/g,HZ=/[#\?@]/g,zZ=/#/g;function Xp(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Fa(t){t.g||(t.g=new Map,t.h=0,t.i&&function UZ(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function PV(t,e){Fa(t),e=Vd(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function xV(t,e){return Fa(t),e=Vd(t,e),t.g.has(e)}function MV(t,e,n){PV(t,e),0<n.length&&(t.i=null,t.g.set(Vd(t,e),OC(n)),t.h+=n.length)}function Vd(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function NV(t){this.l=t||WZ,t=Be.PerformanceNavigationTiming?0<(t=Be.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Be.g&&Be.g.Ka&&Be.g.Ka()&&Be.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(he=Xp.prototype).add=function(t,e){Fa(this),this.i=null,t=Vd(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},he.forEach=function(t,e){Fa(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},he.ta=function(){Fa(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},he.Z=function(t){Fa(this);let e=[];if("string"==typeof t)xV(this,t)&&(e=e.concat(this.g.get(Vd(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},he.set=function(t,e){return Fa(this),this.i=null,xV(this,t=Vd(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},he.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},he.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var WZ=10;function OV(t){return!!t.h||!!t.g&&t.g.size>=t.j}function kV(t){return t.h?1:t.g?t.g.size:0}function uD(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function cD(t,e){t.g?t.g.add(e):t.h=e}function VV(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function LV(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return OC(t.i)}NV.prototype.cancel=function(){if(this.i=LV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var ZZ=class{stringify(t){return Be.JSON.stringify(t,void 0)}parse(t){return Be.JSON.parse(t,void 0)}};function KZ(){this.g=new ZZ}function QZ(t,e,n){const r=n||"";try{bV(t,function(i,s){let o=i;Fp(i)&&(o=YC(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Rv(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function eg(t){this.l=t.ec||null,this.j=t.ob||!1}function Pv(t,e){tr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=lD,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}er(eg,tD),eg.prototype.g=function(){return new Pv(this.l,this.j)},eg.prototype.i=function(t){return function(){return t}}({}),er(Pv,tr);var lD=0;function FV(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function tg(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ng(t)}function ng(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(he=Pv.prototype).open=function(t,e){if(this.readyState!=lD)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ng(this)},he.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Be).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},he.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tg(this)),this.readyState=lD},he.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ng(this)),this.g&&(this.readyState=3,ng(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Be.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;FV(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},he.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?tg(this):ng(this),3==this.readyState&&FV(this)}},he.Za=function(t){this.g&&(this.response=this.responseText=t,tg(this))},he.Ya=function(t){this.g&&(this.response=t,tg(this))},he.ka=function(){this.g&&tg(this)},he.setRequestHeader=function(t,e){this.v.append(t,e)},he.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},he.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Pv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var JZ=Be.JSON.parse;function gn(t){tr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=UV,this.L=this.M=!1}er(gn,tr);var UV="",XZ=/^https?$/i,eK=["POST","PUT"];function BV(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,jV(t),xv(t)}function jV(t){t.F||(t.F=!0,hr(t,"complete"),hr(t,"error"))}function $V(t){if(t.h&&typeof MC<"u"&&(!t.C[1]||4!=ao(t)||2!=t.da()))if(t.v&&4==ao(t))eD(t.La,0,t);else if(hr(t,"readystatechange"),4==ao(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(AV)[1]||null;!i&&Be.self&&Be.self.location&&(i=Be.self.location.protocol.slice(0,-1)),r=!XZ.test(i?i.toLowerCase():"")}n=r}if(n)hr(t,"complete"),hr(t,"success");else{t.m=6;try{var s=2<ao(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",jV(t)}}finally{xv(t)}}}function xv(t,e){if(t.g){HV(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||hr(t,"ready");try{n.onreadystatechange=r}catch{}}}function HV(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Be.clearTimeout(t.A),t.A=null)}function ao(t){return t.g?t.g.readyState:0}function zV(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case UV:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function GV(t){let e="";return $C(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function dD(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=GV(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Qt(t,e,n))}function rg(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function qV(t){this.Ga=0,this.j=[],this.l=new Ev,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=rg("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=rg("baseRetryDelayMs",5e3,t),this.hb=rg("retryDelaySeedMs",1e4,t),this.eb=rg("forwardChannelMaxRetries",2,t),this.xa=rg("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new NV(t&&t.concurrentRequestLimit),this.Ja=new KZ,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function hD(t){if(WV(t),3==t.H){var e=t.W++,n=Ho(t.I);if(Qt(n,"SID",t.K),Qt(n,"RID",e),Qt(n,"TYPE","terminate"),ig(t,n),(e=new Zp(t,t.l,e)).L=2,e.v=Sv(Ho(n)),n=!1,Be.navigator&&Be.navigator.sendBeacon)try{n=Be.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Be.Image&&((new Image).src=e.v,n=!0),n||(e.g=nL(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Kp(e)}eL(t)}function Mv(t){t.g&&(pD(t),t.g.cancel(),t.g=null)}function WV(t){Mv(t),t.u&&(Be.clearTimeout(t.u),t.u=null),Ov(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Be.clearTimeout(t.m),t.m=null)}function Nv(t){if(!OV(t.i)&&!t.m){t.m=!0;var e=t.Na;$p||cV(),Hp||($p(),Hp=!0),JC.add(e,t),t.C=0}}function ZV(t,e){var n;n=e?e.m:t.W++;const r=Ho(t.I);Qt(r,"SID",t.K),Qt(r,"RID",n),Qt(r,"AID",t.V),ig(t,r),t.o&&t.s&&dD(r,t.o,t.s),n=new Zp(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=KV(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),cD(t.i,n),oD(n,r,e)}function ig(t,e){t.na&&$C(t.na,function(n,r){Qt(e,r,n)}),t.h&&bV({},function(n,r){Qt(e,r,n)})}function KV(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Rr(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let d=i[u].g;const f=i[u].map;if(d-=s,0>d)s=Math.max(0,i[u].g-100),a=!1;else try{QZ(f,o,"req"+d+"_")}catch{r&&r(f)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function QV(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;$p||cV(),Hp||($p(),Hp=!0),JC.add(e,t),t.A=0}}function fD(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=qp(Rr(t.Ma,t),XV(t,t.A)),t.A++,0))}function pD(t){null!=t.B&&(Be.clearTimeout(t.B),t.B=null)}function YV(t){t.g=new Zp(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Ho(t.wa);Qt(e,"RID","rpc"),Qt(e,"SID",t.K),Qt(e,"AID",t.V),Qt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Qt(e,"TO",t.qa),Qt(e,"TYPE","xmlhttp"),ig(t,e),t.o&&t.s&&dD(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Sv(Ho(e)),n.s=null,n.S=!0,wV(n,t)}function Ov(t){null!=t.v&&(Be.clearTimeout(t.v),t.v=null)}function JV(t,e){var n=null;if(t.g==e){Ov(t),pD(t),t.g=null;var r=2}else{if(!uD(t.i,e))return;n=e.F,VV(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;hr(r=Iv(),new _V(r,n)),Nv(t)}else QV(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function rK(t,e){return!(kV(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=qp(Rr(t.Na,t,e),XV(t,t.C)),t.C++,0)))}(t,e)||2==r&&fD(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:_c(t,5);break;case 4:_c(t,10);break;case 3:_c(t,6);break;default:_c(t,2)}}function XV(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function _c(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Rr(t.pb,t);n||(n=new mc("//www.google.com/images/cleardot.gif"),Be.location&&"http"==Be.location.protocol||bv(n,"https"),Sv(n)),function YZ(t,e){const n=new Ev;if(Be.Image){const r=new Image;r.onload=pv(Rv,n,r,"TestLoadImage: loaded",!0,e),r.onerror=pv(Rv,n,r,"TestLoadImage: error",!1,e),r.onabort=pv(Rv,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=pv(Rv,n,r,"TestLoadImage: timeout",!1,e),Be.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Yr(2);t.H=0,t.h&&t.h.za(e),eL(t),WV(t)}function eL(t){if(t.H=0,t.ma=[],t.h){const e=LV(t.i);(0!=e.length||0!=t.j.length)&&(K1(t.ma,e),K1(t.ma,t.j),t.i.i.length=0,OC(t.j),t.j.length=0),t.h.ya()}}function tL(t,e,n){var r=n instanceof mc?Ho(n):new mc(n);if(""!=r.g)e&&(r.g=e+"."+r.g),Av(r,r.m);else{var i=Be.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new mc(null);r&&bv(s,r),e&&(s.g=e),i&&Av(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&Qt(r,n,e),Qt(r,"VER",t.ra),ig(t,r),r}function nL(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new gn(n&&t.Ha&&!t.va?new eg({ob:!0}):t.va)).Oa(t.J),e}function rL(){}function kv(){if(Od&&!(10<=Number(mZ)))throw Error("Environmental error: no available transport.")}function Ai(t,e){tr.call(this),this.g=new qV(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Up(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Up(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Ld(this)}function iL(t){nD.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function sL(){rD.call(this),this.status=1}function Ld(t){this.g=t}function Ds(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function gD(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function bt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(he=gn.prototype).Oa=function(t){this.M=t},he.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():iD.g(),this.C=function vV(t){return t.h||(t.h=t.i())}(this.u?this.u:iD),this.g.onreadystatechange=Rr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void BV(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=Be.FormData&&t instanceof Be.FormData,!(0<=Z1(eK,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{HV(this),0<this.B&&((this.L=function tK(t){return Od&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Rr(this.ua,this)):this.A=eD(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){BV(this,s)}},he.ua=function(){typeof MC<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hr(this,"timeout"),this.abort(8))},he.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,hr(this,"complete"),hr(this,"abort"),xv(this))},he.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xv(this,!0)),gn.$.N.call(this)},he.La=function(){this.s||(this.G||this.v||this.l?$V(this):this.kb())},he.kb=function(){$V(this)},he.isActive=function(){return!!this.g},he.da=function(){try{return 2<ao(this)?this.g.status:-1}catch{return-1}},he.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},he.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),JZ(e)}},he.Ia=function(){return this.m},he.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(he=qV.prototype).ra=8,he.H=1,he.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Zp(this,this.l,t);let s=this.s;if(this.U&&(s?(s=eV(s),nV(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=KV(this,i,e),Qt(n=Ho(this.I),"RID",t),Qt(n,"CVER",22),this.F&&Qt(n,"X-HTTP-Session-Id",this.F),ig(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(GV(s)))+"&"+e:this.o&&dD(n,this.o,s)),cD(this.i,i),this.bb&&Qt(n,"TYPE","init"),this.P?(Qt(n,"$req",e),Qt(n,"SID","null"),i.aa=!0,oD(i,n,null)):oD(i,n,e),this.H=2}}else 3==this.H&&(t?ZV(this,t):0==this.j.length||OV(this.i)||ZV(this))},he.Ma=function(){if(this.u=null,YV(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=qp(Rr(this.jb,this),t)}},he.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Yr(10),Mv(this),YV(this))},he.ib=function(){null!=this.v&&(this.v=null,Mv(this),fD(this),Yr(19))},he.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Yr(2)):(this.l.info("Failed to ping google.com"),Yr(1))},he.isActive=function(){return!!this.h&&this.h.isActive(this)},(he=rL.prototype).Ba=function(){},he.Aa=function(){},he.za=function(){},he.ya=function(){},he.isActive=function(){return!0},he.Va=function(){},kv.prototype.g=function(t,e){return new Ai(t,e)},er(Ai,tr),Ai.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Yr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=tL(t,null,t.Y),Nv(t)},Ai.prototype.close=function(){hD(this.g)},Ai.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=YC(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Nv(e)},Ai.prototype.N=function(){this.g.h=null,delete this.j,hD(this.g),delete this.g,Ai.$.N.call(this)},er(iL,nD),er(sL,rD),er(Ld,rL),Ld.prototype.Ba=function(){hr(this.g,"a")},Ld.prototype.Aa=function(t){hr(this.g,new iL(t))},Ld.prototype.za=function(t){hr(this.g,new sL)},Ld.prototype.ya=function(){hr(this.g,"b")},er(Ds,function iK(){this.blockSize=-1}),Ds.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ds.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)gD(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){gD(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){gD(this,r),i=0;break}}this.h=i,this.i+=e},Ds.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var sK={};function mD(t){return-128<=t&&128>t?function fZ(t,e){var n=sK;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new bt([0|e],0>e?-1:0)}):new bt([0|t],0>t?-1:0)}function uo(t){if(isNaN(t)||!isFinite(t))return Fd;if(0>t)return fr(uo(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=_D;return new bt(e,0)}var _D=4294967296,Fd=mD(0),yD=mD(1),aL=mD(16777216);function zo(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function es(t){return-1==t.h}function fr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new bt(n,~t.h).add(yD)}function Vv(t,e){return t.add(fr(e))}function Lv(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function sg(t,e){this.g=t,this.h=e}function Fv(t,e){if(zo(e))throw Error("division by zero");if(zo(t))return new sg(Fd,Fd);if(es(t))return e=Fv(fr(t),e),new sg(fr(e.g),fr(e.h));if(es(e))return e=Fv(t,fr(e)),new sg(fr(e.g),e.h);if(30<t.g.length){if(es(t)||es(e))throw Error("slowDivide_ only works with positive integers.");for(var n=yD,r=e;0>=r.X(t);)n=uL(n),r=uL(r);var i=Ud(n,1),s=Ud(r,1);for(r=Ud(r,2),n=Ud(n,2);!zo(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ud(r,1),n=Ud(n,1)}return e=Vv(t,i.R(e)),new sg(i,e)}for(i=Fd;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=uo(n)).R(e);es(o)||0<o.X(t);)o=(s=uo(n-=r)).R(e);zo(s)&&(s=yD),i=i.add(s),t=Vv(t,o)}return new sg(i,t)}function uL(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new bt(n,t.h)}function Ud(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new bt(i,t.h)}(he=bt.prototype).ea=function(){if(es(this))return-fr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:_D+r)*e,e*=_D}return t},he.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(zo(this))return"0";if(es(this))return"-"+fr(this).toString(t);for(var e=uo(Math.pow(t,6)),n=this,r="";;){var i=Fv(n,e).g,s=((0<(n=Vv(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(zo(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},he.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},he.X=function(t){return es(t=Vv(this,t))?-1:zo(t)?0:1},he.abs=function(){return es(this)?fr(this):this},he.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new bt(n,-2147483648&n[n.length-1]?-1:0)},he.R=function(t){if(zo(this)||zo(t))return Fd;if(es(this))return es(t)?fr(this).R(fr(t)):fr(fr(this).R(t));if(es(t))return fr(this.R(fr(t)));if(0>this.X(aL)&&0>t.X(aL))return uo(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,Lv(n,2*r+2*i),n[2*r+2*i+1]+=s*u,Lv(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Lv(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Lv(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new bt(n,0)},he.gb=function(t){return Fv(this,t).h},he.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new bt(n,this.h&t.h)},he.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new bt(n,this.h|t.h)},he.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new bt(n,this.h^t.h)},kv.prototype.createWebChannel=kv.prototype.g,Ai.prototype.send=Ai.prototype.u,Ai.prototype.open=Ai.prototype.m,Ai.prototype.close=Ai.prototype.close,wv.NO_ERROR=0,wv.TIMEOUT=8,wv.HTTP_ERROR=6,yV.COMPLETE="complete",EV.EventType=Wp,Wp.OPEN="a",Wp.CLOSE="b",Wp.ERROR="c",Wp.MESSAGE="d",tr.prototype.listen=tr.prototype.O,gn.prototype.listenOnce=gn.prototype.P,gn.prototype.getLastError=gn.prototype.Sa,gn.prototype.getLastErrorCode=gn.prototype.Ia,gn.prototype.getStatus=gn.prototype.da,gn.prototype.getResponseJson=gn.prototype.Wa,gn.prototype.getResponseText=gn.prototype.ja,gn.prototype.send=gn.prototype.ha,gn.prototype.setWithCredentials=gn.prototype.Oa,Ds.prototype.digest=Ds.prototype.l,Ds.prototype.reset=Ds.prototype.reset,Ds.prototype.update=Ds.prototype.j,bt.prototype.add=bt.prototype.add,bt.prototype.multiply=bt.prototype.R,bt.prototype.modulo=bt.prototype.gb,bt.prototype.compare=bt.prototype.X,bt.prototype.toNumber=bt.prototype.ea,bt.prototype.toString=bt.prototype.toString,bt.prototype.getBits=bt.prototype.D,bt.fromNumber=uo,bt.fromString=function oL(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return fr(oL(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=uo(Math.pow(e,8)),r=Fd,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=uo(Math.pow(e,s)),r=r.R(s).add(uo(o))):r=(r=r.R(n)).add(uo(o))}return r};var oK=Cs.createWebChannelTransport=function(){return new kv},aK=Cs.getStatEventTarget=function(){return Iv()},vD=Cs.ErrorCode=wv,uK=Cs.EventType=yV,cK=Cs.Event=pc,cL=Cs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},lK=Cs.FetchXmlHttpFactory=eg,Uv=Cs.WebChannel=EV,dK=Cs.XhrIo=gn,hK=Cs.Md5=Ds,Bd=Cs.Integer=bt;const lL="@firebase/firestore";class nr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nr.UNAUTHENTICATED=new nr(null),nr.GOOGLE_CREDENTIALS=new nr("google-credentials-uid"),nr.FIRST_PARTY=new nr("first-party-uid"),nr.MOCK_USER=new nr("mock-user");let jd="10.5.2";const Ua=new so.Yd("@firebase/firestore");function $d(){return Ua.logLevel}function re(t,...e){if(Ua.logLevel<=so.in.DEBUG){const n=e.map(ED);Ua.debug(`Firestore (${jd}): ${t}`,...n)}}function Cn(t,...e){if(Ua.logLevel<=so.in.ERROR){const n=e.map(ED);Ua.error(`Firestore (${jd}): ${t}`,...n)}}function hi(t,...e){if(Ua.logLevel<=so.in.WARN){const n=e.map(ED);Ua.warn(`Firestore (${jd}): ${t}`,...n)}}function ED(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function me(t="Unexpected state"){const e=`FIRESTORE (${jd}) INTERNAL ASSERTION FAILED: `+t;throw Cn(e),new Error(e)}function De(t,e){t||me()}function oe(t,e){return t}const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends kt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Kn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class dL{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nr.UNAUTHENTICATED))}shutdown(){}}class mK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _K{constructor(e){this.t=e,this.currentUser=nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Kn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Kn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,Z.Z)(function*(){yield d.promise,yield s(r.currentUser)}))},u=d=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Kn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De("string"==typeof r.accessToken),new dL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return De(null===e||"string"==typeof e),new nr(e)}}class yK{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=nr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vK{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yK(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EK{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De("string"==typeof n.token),this.R=n.token,new hL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function IK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class fL{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=IK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Le(t,e){return t<e?-1:t>e?1:0}function Hd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function pL(t){return t+"\0"}class sn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return sn.fromMillis(Date.now())}static fromDate(e){return sn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new sn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new sn(0,0))}static max(){return new be(new sn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class og{constructor(e,n,r){void 0===n?n=0:n>e.length&&me(),void 0===r?r=e.length-n:r>e.length-n&&me(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===og.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof og?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ht extends og{construct(e,n,r){return new ht(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ht(n)}static emptyPath(){return new ht([])}}const wK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends og{construct(e,n,r){return new Yt(e,n,r)}static isValidIdentifier(e){return wK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new X(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new X(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new X(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new X(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(n)}static emptyPath(){return new Yt([])}}class ue{constructor(e){this.path=e}static fromPath(e){return new ue(ht.fromString(e))}static fromName(e){return new ue(ht.fromString(e).popFirst(5))}static empty(){return new ue(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ht.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new ht(e.slice()))}}class zd{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function ID(t){return t.fields.find(e=>2===e.kind)}function yc(t){return t.fields.filter(e=>2!==e.kind)}zd.UNKNOWN_ID=-1;class vc{constructor(e,n){this.fieldPath=e,this.kind=n}}class Gd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Gd(0,Si.min())}}function gL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=be.fromTimestamp(1e9===r?new sn(n+1,0):new sn(n,r));return new Si(i,ue.empty(),e)}function mL(t){return new Si(t.readTime,t.key,-1)}class Si{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Si(be.min(),ue.empty(),-1)}static max(){return new Si(be.max(),ue.empty(),-1)}}function wD(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ue.comparator(t.documentKey,e.documentKey),0!==n?n:Le(t.largestBatchId,e.largestBatchId))}const _L="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ba(t){return TD.apply(this,arguments)}function TD(){return TD=(0,Z.Z)(function*(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==_L)throw t;re("LocalStore","Unexpectedly lost primary lease")}),TD.apply(this,arguments)}class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(i=>i?N.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new N((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new N((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class Bv{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Kn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ag(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=CD(r.target.error);this.V.reject(new ag(e,i))}}static open(e,n,r,i){try{return new Bv(n,e.transaction(i,r))}catch(s){throw new ag(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new bK(n)}}class bs{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===bs.S((0,kt.z$)())&&Cn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return re("SimpleDb","Removing database:",e),Ec(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,kt.hl)())return!1;if(bs.C())return!0;const e=(0,kt.z$)(),n=bs.S(e),r=0<n&&n<10,i=bs.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,Z.Z)(function*(){return n.db||(re("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new ag(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new X(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new X(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new ag(e,a))},s.onupgradeneeded=o=>{re("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.p.N(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{re("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,Z.Z)(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.O(e);const u=Bv.open(s.db,e,o?"readonly":"readwrite",r),d=i(u).next(f=>(u.g(),f)).catch(f=>(u.abort(f),N.reject(f))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,f="FirebaseError"!==d.name&&a<3;if(re("SimpleDb","Transaction failed with error:",d.message,"Retrying:",f),s.close(),!f)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class DK{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ec(this.k.delete())}}class ag extends X{constructor(e,n){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ja(t){return"IndexedDbTransactionError"===t.name}class bK{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(re("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ec(r)}add(e){return re("SimpleDb","ADD",this.store.name,e,e),Ec(this.store.add(e))}get(e){return Ec(this.store.get(e)).next(n=>(void 0===n&&(n=null),re("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return re("SimpleDb","DELETE",this.store.name,e),Ec(this.store.delete(e))}count(){return re("SimpleDb","COUNT",this.store.name),Ec(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new N((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new N((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new N((r,i)=>{n.onerror=s=>{const o=CD(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new N((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new DK(a),d=n(a.primaryKey,a.value,u);if(d instanceof N){const f=d.catch(g=>(u.done(),N.reject(g)));r.push(f)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>N.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ec(t){return new N((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=CD(r.target.error);n(i)}})}let vL=!1;function CD(t){const e=bs.S((0,kt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new X("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vL||(vL=!0,setTimeout(()=>{throw r},0)),r}}return t}class AK{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;re("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Z.Z)(function*(){n.task=null;try{re("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){ja(r)?re("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ba(r)}yield n.ee(6e4)}))}}class SK{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,Z.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,s=!0;return N.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return re("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(re("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=mL(s);wD(o,r)>0&&(r=o)}),new Si(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Ri=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function ug(t){return null==t}function cg(t){return 0===t&&1/t==-1/0}function EL(t){return"number"==typeof t&&Number.isInteger(t)&&!cg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function xr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=IL(e)),e=RK(t.get(n),e);return IL(e)}function RK(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function IL(t){return t+"\x01\x01"}function co(t){const e=t.length;if(De(e>=2),2===e)return De("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ht.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&me(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:me()}s=o+2}return new ht(r)}const wL=["userId","batchId"];function jv(t,e){return[t,xr(e)]}function TL(t,e,n){return[t,xr(e),n]}const PK={},xK=["prefixPath","collectionGroup","readTime","documentId"],MK=["prefixPath","collectionGroup","documentId"],NK=["collectionGroup","readTime","prefixPath","documentId"],OK=["canonicalId","targetId"],kK=["targetId","path"],VK=["path","targetId"],LK=["collectionId","parent"],FK=["indexId","uid"],UK=["uid","sequenceNumber"],BK=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jK=["indexId","uid","orderedDocumentKey"],$K=["userId","collectionPath","documentId"],HK=["userId","collectionPath","largestBatchId"],zK=["userId","collectionGroup","largestBatchId"],CL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],GK=[...CL,"documentOverlays"],DL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bL=DL,qK=[...bL,"indexConfiguration","indexState","indexEntries"];class DD extends yL{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function rr(t,e){const n=oe(t);return bs.M(n.ae,e)}function AL(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $a(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class $t{constructor(e,n){this.comparator=e,this.root=n||pr.EMPTY}insert(e,n){return new $t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pr.BLACK,null,null))}remove(e){return new $t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $v(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $v(this.root,e,this.comparator,!1)}getReverseIterator(){return new $v(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $v(this.root,e,this.comparator,!0)}}class $v{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??pr.RED,this.left=i??pr.EMPTY,this.right=s??pr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new pr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return pr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw me();const e=this.left.check();if(e!==this.right.check())throw me();return e+(this.isRed()?0:1)}}pr.EMPTY=null,pr.RED=!0,pr.BLACK=!1,pr.EMPTY=new class{constructor(){this.size=0}get key(){throw me()}get value(){throw me()}get color(){throw me()}get left(){throw me()}get right(){throw me()}copy(e,n,r,i,s){return this}insert(e,n,r){return new pr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xt{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new RL(this.data.getIterator())}getIteratorFrom(e){return new RL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class RL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qd(t){return t.hasNext()?t.getNext():void 0}class fi{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new fi([])}unionWith(e){let n=new xt(Yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new fi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Hd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class PL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new PL("Invalid base64 string: "+s):s}}(e);return new Qn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Qn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qn.EMPTY_BYTE_STRING=new Qn("");const ZK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ha(t){if(De(!!t),"string"==typeof t){let e=0;const n=ZK.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mn(t.seconds),nanos:mn(t.nanos)}}function mn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Go(t){return"string"==typeof t?Qn.fromBase64String(t):Qn.fromUint8Array(t)}function Hv(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function zv(t){const e=t.mapValue.fields.__previous_value__;return Hv(e)?zv(e):e}function lg(t){const e=Ha(t.mapValue.fields.__local_write_time__.timestampValue);return new sn(e.seconds,e.nanos)}class KK{constructor(e,n,r,i,s,o,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class za{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new za("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof za&&e.projectId===this.projectId&&e.database===this.database}}const Ga={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gv={nullValue:"NULL_VALUE"};function qa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hv(t)?4:OL(t)?9007199254740991:10:me()}function lo(t,e){if(t===e)return!0;const n=qa(t);if(n!==qa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lg(t).isEqual(lg(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ha(i.timestampValue),a=Ha(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,Go(t.bytesValue).isEqual(Go(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return mn(i.geoPointValue.latitude)===mn(s.geoPointValue.latitude)&&mn(i.geoPointValue.longitude)===mn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return mn(i.integerValue)===mn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=mn(i.doubleValue),a=mn(s.doubleValue);return o===a?cg(o)===cg(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Hd(t.arrayValue.values||[],e.arrayValue.values||[],lo);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(AL(o)!==AL(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!lo(o[u],a[u])))return!1;return!0}(t,e);default:return me()}var s}function dg(t,e){return void 0!==(t.values||[]).find(n=>lo(n,e))}function Wa(t,e){if(t===e)return 0;const n=qa(t),r=qa(e);if(n!==r)return Le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=mn(s.integerValue||s.doubleValue),u=mn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return xL(t.timestampValue,e.timestampValue);case 4:return xL(lg(t),lg(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Go(s),u=Go(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const f=Le(a[d],u[d]);if(0!==f)return f}return Le(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Le(mn(s.latitude),mn(o.latitude));return 0!==a?a:Le(mn(s.longitude),mn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let d=0;d<a.length&&d<u.length;++d){const f=Wa(a[d],u[d]);if(f)return f}return Le(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ga.mapValue&&o===Ga.mapValue)return 0;if(s===Ga.mapValue)return 1;if(o===Ga.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const _=Le(u[g],f[g]);if(0!==_)return _;const y=Wa(a[u[g]],d[f[g]]);if(0!==y)return y}return Le(u.length,f.length)}(t.mapValue,e.mapValue);default:throw me()}}function xL(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Le(t,e);const n=Ha(t),r=Ha(e),i=Le(n.seconds,r.seconds);return 0!==i?i:Le(n.nanos,r.nanos)}function Wd(t){return bD(t)}function bD(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ha(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Go(t.bytesValue).toBase64():"referenceValue"in t?ue.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=bD(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${bD(n.fields[o])}`;return i+"}"}(t.mapValue):me()}function Ic(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function AD(t){return!!t&&"integerValue"in t}function hg(t){return!!t&&"arrayValue"in t}function ML(t){return!!t&&"nullValue"in t}function NL(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wv(t){return!!t&&"mapValue"in t}function fg(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return $a(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fg(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fg(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OL(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function QK(t){return"nullValue"in t?Gv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ic(za.empty(),ue.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:me()}function YK(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ic(za.empty(),ue.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ga:me()}function kL(t,e){const n=Wa(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function VL(t,e){const n=Wa(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class gr{constructor(e){this.value=e}static empty(){return new gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fg(n)}setAll(e){let n=Yt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=fg(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Wv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return lo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Wv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){$a(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new gr(fg(this.value))}}function LL(t){const e=[];return $a(t.fields,(n,r)=>{const i=new Yt([n]);if(Wv(r)){const s=LL(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new fi(e)}class Jt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Jt(e,0,be.min(),be.min(),be.min(),gr.empty(),0)}static newFoundDocument(e,n,r,i){return new Jt(e,1,n,be.min(),r,i,0)}static newNoDocument(e,n){return new Jt(e,2,n,be.min(),be.min(),gr.empty(),0)}static newUnknownDocument(e,n){return new Jt(e,3,n,be.min(),be.min(),gr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Za{constructor(e,n){this.position=e,this.inclusive=n}}function FL(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?ue.comparator(ue.fromName(o.referenceValue),n.key):Wa(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function UL(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!lo(t.position[n],e.position[n]))return!1;return!0}class pg{constructor(e,n="asc"){this.field=e,this.dir=n}}function JK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class BL{}class it extends BL{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new XK(e,n,r):"array-contains"===n?new nQ(e,r):"in"===n?new qL(e,r):"not-in"===n?new rQ(e,r):"array-contains-any"===n?new iQ(e,r):new it(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new eQ(e,r):new tQ(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Wa(n,this.value)):null!==n&&qa(this.value)===qa(n)&&this.matchesComparison(Wa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class At extends BL{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new At(e,n)}matches(e){return Zd(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Zd(t){return"and"===t.op}function SD(t){return"or"===t.op}function RD(t){return jL(t)&&Zd(t)}function jL(t){for(const e of t.filters)if(e instanceof At)return!1;return!0}function PD(t){if(t instanceof it)return t.field.canonicalString()+t.op.toString()+Wd(t.value);if(RD(t))return t.filters.map(e=>PD(e)).join(",");{const e=t.filters.map(n=>PD(n)).join(",");return`${t.op}(${e})`}}function $L(t,e){return t instanceof it?(r=t,(i=e)instanceof it&&r.op===i.op&&r.field.isEqual(i.field)&&lo(r.value,i.value)):t instanceof At?function(r,i){return i instanceof At&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&$L(o,i.filters[a]),!0)}(t,e):void me();var r,i}function HL(t,e){const n=t.filters.concat(e);return At.create(n,t.op)}function zL(t){return t instanceof it?`${(n=t).field.canonicalString()} ${n.op} ${Wd(n.value)}`:t instanceof At?function(n){return n.op.toString()+" {"+n.getFilters().map(zL).join(" ,")+"}"}(t):"Filter";var n}class XK extends it{constructor(e,n,r){super(e,n,r),this.key=ue.fromName(r.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class eQ extends it{constructor(e,n){super(e,"in",n),this.keys=GL(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class tQ extends it{constructor(e,n){super(e,"not-in",n),this.keys=GL(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function GL(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>ue.fromName(r.referenceValue))}class nQ extends it{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hg(n)&&dg(n.arrayValue,this.value)}}class qL extends it{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&dg(this.value.arrayValue,n)}}class rQ extends it{constructor(e,n){super(e,"not-in",n)}matches(e){if(dg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!dg(this.value.arrayValue,n)}}class iQ extends it{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>dg(this.value.arrayValue,r))}}class sQ{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function xD(t,e=null,n=[],r=[],i=null,s=null,o=null){return new sQ(t,e,n,r,i,s,o)}function wc(t){const e=oe(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>PD(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),ug(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Wd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Wd(r)).join(",")),e.ce=n}return e.ce}function gg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!JK(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$L(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!UL(t.startAt,e.startAt)&&UL(t.endAt,e.endAt)}function Zv(t){return ue.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Kv(t,e){return t.filters.filter(n=>n instanceof it&&n.field.isEqual(e))}function WL(t,e,n){let r=Gv,i=!0;for(const s of Kv(t,e)){let o=Gv,a=!0;switch(s.op){case"<":case"<=":o=QK(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Gv}kL({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];kL({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function ZL(t,e,n){let r=Ga,i=!0;for(const s of Kv(t,e)){let o=Ga,a=!0;switch(s.op){case">=":case">":o=YK(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ga}VL({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];VL({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class qo{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function KL(t,e,n,r,i,s,o,a){return new qo(t,e,n,r,i,s,o,a)}function Kd(t){return new qo(t)}function QL(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function MD(t){return null!==t.collectionGroup}function Qd(t){const e=oe(t);if(null===e.le){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new xt(Yt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new pg(s,r))}),n.has(Yt.keyField().canonicalString())||e.le.push(new pg(Yt.keyField(),r))}return e.le}function Jr(t){const e=oe(t);return e.he||(e.he=function YL(t,e){if("F"===t.limitType)return xD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new pg(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Za(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Za(t.startAt.position,t.startAt.inclusive):null;return xD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Qd(t))),e.he}function ND(t,e){const n=t.filters.concat([e]);return new qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Qv(t,e,n){return new qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mg(t,e){return gg(Jr(t),Jr(e))&&t.limitType===e.limitType}function JL(t){return`${wc(Jr(t))}|lt:${t.limitType}`}function Yd(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>zL(i)).join(", ")}]`),ug(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Wd(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Wd(i)).join(",")),`Target(${r})`}(Jr(t))}; limitType=${t.limitType})`}function _g(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ue.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Qd(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const d=FL(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,Qd(r),i)||r.endAt&&!function(o,a,u){const d=FL(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,Qd(r),i)));var r,i}function XL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function eF(t){return(e,n)=>{let r=!1;for(const i of Qd(t)){const s=oQ(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function oQ(t,e,n){const r=t.field.isKeyField()?ue.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return null!==u&&null!==d?Wa(u,d):me()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return me()}}class Wo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$a(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return SL(this.inner)}size(){return this.innerSize}}const aQ=new $t(ue.comparator);function pi(){return aQ}const tF=new $t(ue.comparator);function yg(...t){let e=tF;for(const n of t)e=e.insert(n.key,n);return e}function nF(t){let e=tF;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ho(){return vg()}function rF(){return vg()}function vg(){return new Wo(t=>t.toString(),(t,e)=>t.isEqual(e))}const uQ=new $t(ue.comparator),cQ=new xt(ue.comparator);function qe(...t){let e=cQ;for(const n of t)e=e.add(n);return e}const lQ=new xt(Le);function OD(){return lQ}function iF(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cg(e)?"-0":e}}function sF(t){return{integerValue:""+t}}function oF(t,e){return EL(e)?sF(e):iF(t,e)}class Yv{constructor(){this._=void 0}}function dQ(t,e,n){return t instanceof Jd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Hv(s)&&(s=zv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Tc?uF(t,e):t instanceof Cc?cF(t,e):function(i,s){const o=aF(i,s),a=lF(o)+lF(i.Ie);return AD(o)&&AD(i.Ie)?sF(a):iF(i.serializer,a)}(t,e)}function hQ(t,e,n){return t instanceof Tc?uF(t,e):t instanceof Cc?cF(t,e):n}function aF(t,e){return t instanceof Xd?AD(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Jd extends Yv{}class Tc extends Yv{constructor(e){super(),this.elements=e}}function uF(t,e){const n=dF(e);for(const r of t.elements)n.some(i=>lo(i,r))||n.push(r);return{arrayValue:{values:n}}}class Cc extends Yv{constructor(e){super(),this.elements=e}}function cF(t,e){let n=dF(e);for(const r of t.elements)n=n.filter(i=>!lo(i,r));return{arrayValue:{values:n}}}class Xd extends Yv{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function lF(t){return mn(t.integerValue||t.doubleValue)}function dF(t){return hg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Eg{constructor(e,n){this.field=e,this.transform=n}}class pQ{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jv(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Xv{}function hF(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new th(t.key,on.none()):new eh(t.key,t.data,on.none());{const n=t.data,r=gr.empty();let i=new xt(Yt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Zo(t.key,r,new fi(i.toArray()),on.none())}}function gQ(t,e,n){t instanceof eh?function(i,s,o){const a=i.value.clone(),u=gF(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Zo?function(i,s,o){if(!Jv(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=gF(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(pF(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Ig(t,e,n,r){return t instanceof eh?function(s,o,a,u){if(!Jv(s.precondition,o))return a;const d=s.value.clone(),f=mF(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zo?function(s,o,a,u){if(!Jv(s.precondition,o))return a;const d=mF(s.fieldTransforms,u,o),f=o.data;return f.setAll(pF(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,Jv(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function mQ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=aF(r.transform,i||null);null!=s&&(null===n&&(n=gr.empty()),n.set(r.field,s))}return n||null}function fF(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Hd(r,i,(s,o)=>function fQ(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Tc&&i instanceof Tc||r instanceof Cc&&i instanceof Cc?Hd(r.elements,i.elements,lo):r instanceof Xd&&i instanceof Xd?lo(r.Ie,i.Ie):r instanceof Jd&&i instanceof Jd);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class eh extends Xv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zo extends Xv{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pF(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function gF(t,e,n){const r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,hQ(o,a,n[i]))}return r}function mF(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,dQ(s,o,e))}return r}class th extends Xv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kD extends Xv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class VD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&gQ(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ig(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ig(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=rF();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=hF(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),qe())}isEqual(e){return this.batchId===e.batchId&&Hd(this.mutations,e.mutations,(n,r)=>fF(n,r))&&Hd(this.baseMutations,e.baseMutations,(n,r)=>fF(n,r))}}class LD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length);let i=uQ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new LD(e,n,r,i)}}class FD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class yQ{constructor(e,n){this.count=e,this.unchangedNames=n}}var On,ft;function _F(t){switch(t){default:return me();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function yF(t){if(void 0===t)return Cn("GRPC error has no .code"),L.UNKNOWN;switch(t){case On.OK:return L.OK;case On.CANCELLED:return L.CANCELLED;case On.UNKNOWN:return L.UNKNOWN;case On.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case On.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case On.INTERNAL:return L.INTERNAL;case On.UNAVAILABLE:return L.UNAVAILABLE;case On.UNAUTHENTICATED:return L.UNAUTHENTICATED;case On.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case On.NOT_FOUND:return L.NOT_FOUND;case On.ALREADY_EXISTS:return L.ALREADY_EXISTS;case On.PERMISSION_DENIED:return L.PERMISSION_DENIED;case On.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case On.ABORTED:return L.ABORTED;case On.OUT_OF_RANGE:return L.OUT_OF_RANGE;case On.UNIMPLEMENTED:return L.UNIMPLEMENTED;case On.DATA_LOSS:return L.DATA_LOSS;default:return me()}}(ft=On||(On={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";function vF(){return new TextEncoder}const vQ=new Bd([4294967295,4294967295],0);function EF(t){const e=vF().encode(t),n=new hK;return n.update(e),new Uint8Array(n.digest())}function IF(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Bd([n,r],0),new Bd([i,s],0)]}class UD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wg(`Invalid padding: ${n}`);if(r<0)throw new wg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new wg(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new wg(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Bd.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Bd.fromNumber(r)));return 1===i.compare(vQ)&&(i=new Bd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=EF(e),[r,i]=IF(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new UD(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const n=EF(e),[r,i]=IF(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class wg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tg{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Cg.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Tg(be.min(),i,new $t(Le),pi(),qe())}}class Cg{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cg(r,n,qe(),qe(),qe())}}class tE{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class wF{constructor(e,n){this.targetId=e,this.fe=n}}class TF{constructor(e,n,r=Qn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class CF{constructor(){this.ge=0,this.pe=bF(),this.ye=Qn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=qe(),n=qe(),r=qe();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:me()}}),new Cg(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=bF()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class EQ{constructor(e){this.Le=e,this.ke=new Map,this.qe=pi(),this.Qe=DF(),this.Ke=new $t(Le)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:me()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(Zv(s))if(0===r){const o=new ue(s.path);this.We(n,o,Jt.newNoDocument(o,be.min()))}else De(1===r);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Go(r).toUint8Array()}catch(u){if(u instanceof PL)return hi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new UD(o,i,s)}catch(u){return hi(u instanceof wg?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Zv(a.target)){const u=new ue(a.target.path);null!==this.qe.get(u)||this.st(o,u)||this.We(o,u,Jt.newNoDocument(u,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=qe();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Ye(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new Tg(e,n,this.Ke,this.qe,r);return this.qe=pi(),this.Qe=DF(),this.Ke=new $t(Le),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new CF,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new xt(Le),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||re("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new CF),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function DF(){return new $t(ue.comparator)}function bF(){return new $t(ue.comparator)}const IQ={asc:"ASCENDING",desc:"DESCENDING"},wQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TQ={and:"AND",or:"OR"};class CQ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function BD(t,e){return t.useProto3Json||ug(e)?e:{value:e}}function nh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function DQ(t,e){return nh(t,e.toTimestamp())}function Dn(t){return De(!!t),be.fromTimestamp(function(n){const r=Ha(n);return new sn(r.seconds,r.nanos)}(t))}function jD(t,e){return(r=t,new ht(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function SF(t){const e=ht.fromString(t);return De(LF(e)),e}function Dg(t,e){return jD(t.databaseId,e.path)}function fo(t,e){const n=SF(e);if(n.get(1)!==t.databaseId.projectId)throw new X(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(PF(n))}function $D(t,e){return jD(t.databaseId,e)}function RF(t){const e=SF(t);return 4===e.length?ht.emptyPath():PF(e)}function bg(t){return new ht(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PF(t){return De(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function xF(t,e,n){return{name:Dg(t,e),fields:n.value.mapValue.fields}}function MF(t,e,n){const r=fo(t,e.name),i=Dn(e.updateTime),s=e.createTime?Dn(e.createTime):be.min(),o=new gr({mapValue:{fields:e.fields}}),a=Jt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ag(t,e){let n;if(e instanceof eh)n={update:xF(t,e.key,e.value)};else if(e instanceof th)n={delete:Dg(t,e.key)};else if(e instanceof Zo)n={update:xF(t,e.key,e.data),updateMask:NQ(e.fieldMask)};else{if(!(e instanceof kD))return me();n={verify:Dg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Jd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Tc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xd)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw me()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:DQ(t,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:me()),n;var s}function HD(t,e){const n=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?on.updateTime(Dn(s.updateTime)):void 0!==s.exists?on.exists(s.exists):on.none():on.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(De("REQUEST_TIME"===a.setToServerValue),u=new Jd):"appendMissingElements"in a?u=new Tc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Cc(a.removeAllFromArray.values||[]):"increment"in a?u=new Xd(o,a.increment):me();const d=Yt.fromServerFormat(a.fieldPath);return new Eg(d,u)}(t,i)):[];var s;if(e.update){const i=fo(t,e.update.name),s=new gr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new fi((e.updateMask.fieldPaths||[]).map(f=>Yt.fromServerFormat(f)));return new Zo(i,s,o,n,r)}return new eh(i,s,n,r)}if(e.delete){const i=fo(t,e.delete);return new th(i,n)}if(e.verify){const i=fo(t,e.verify);return new kD(i,n)}return me()}function NF(t,e){return{documents:[$D(t,e.path)]}}function zD(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=$D(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=$D(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return VF(At.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(d=>{return{field:Ka((g=d).field),direction:PQ(g.dir)};var g})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=BD(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function OF(t){let e=RF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){De(1===r);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(g){const _=kF(g);return _ instanceof At&&RD(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(_=>{return new pg(rh((E=_).field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;n.limit&&(a=function(g){let _;return _="object"==typeof g?g.value:g,ug(_)?null:_}(n.limit));let u=null;var g;n.startAt&&(u=new Za((g=n.startAt).values||[],!!g.before));let d=null;return n.endAt&&(d=function(g){return new Za(g.values||[],!g.before)}(n.endAt)),KL(e,i,o,s,a,"F",u,d)}function kF(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=rh(n.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=rh(n.unaryFilter.field);return it.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=rh(n.unaryFilter.field);return it.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=rh(n.unaryFilter.field);return it.create(o,"!=",{nullValue:"NULL_VALUE"});default:return me()}}(t):void 0!==t.fieldFilter?it.create(rh((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return me()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return At.create(n.compositeFilter.filters.map(r=>kF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me()}}(n.compositeFilter.op))}(t):me();var n}function PQ(t){return IQ[t]}function xQ(t){return wQ[t]}function MQ(t){return TQ[t]}function Ka(t){return{fieldPath:t.canonicalString()}}function rh(t){return Yt.fromServerFormat(t.fieldPath)}function VF(t){return t instanceof it?function(n){if("=="===n.op){if(NL(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NAN"}};if(ML(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(NL(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NAN"}};if(ML(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(n.field),op:xQ(n.op),value:n.value}}}(t):t instanceof At?function(n){const r=n.getFilters().map(i=>VF(i));return 1===r.length?r[0]:{compositeFilter:{op:MQ(n.op),filters:r}}}(t):me()}function NQ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LF(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Ko{constructor(e,n,r,i,s=be.min(),o=be.min(),a=Qn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ko(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class FF{constructor(e){this.ut=e}}function UF(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:nE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Dg(s=t.ut,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:nh(s,o.version.toTimestamp()),createTime:nh(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Dc(e.version)};else{if(!e.isUnknownDocument())return me();r.unknownDocument={path:n.path.toArray(),version:Dc(e.version)}}var s,o;return r}function nE(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Dc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bc(t){const e=new sn(t.seconds,t.nanoseconds);return be.fromTimestamp(e)}function Ac(t,e){const n=(e.baseMutations||[]).map(s=>HD(t.ut,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>HD(t.ut,s)),i=sn.fromMillis(e.localWriteTimeMs);return new VD(e.batchId,i,n,r)}function Sg(t){const e=bc(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?bc(t.lastLimboFreeSnapshotVersion):be.min();let r;return r=void 0!==t.query.documents?(De(1===(s=t.query).documents.length),Jr(Kd(RF(s.documents[0])))):function(s){return Jr(OF(s))}(t.query),new Ko(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Qn.fromBase64String(t.resumeToken));var s}function BF(t,e){const n=Dc(e.snapshotVersion),r=Dc(e.lastLimboFreeSnapshotVersion);let i;i=Zv(e.target)?NF(t.ut,e.target):zD(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wc(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function GD(t){const e=OF({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Qv(e,e.limit,"L"):e}function qD(t,e){return new FD(e.largestBatchId,HD(t.ut,e.overlayMutation))}function jF(t,e){const n=e.path.lastSegment();return[t,xr(e.path.popLast()),n]}function $F(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Dc(r.readTime),documentKey:xr(r.documentKey.path),largestBatchId:r.largestBatchId}}class kQ{getBundleMetadata(e,n){return HF(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:bc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return HF(e).put({bundleId:(i=n).id,createTime:Dc(Dn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return zF(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:GD(s.bundledQuery),readTime:bc(s.readTime)};var s})}saveNamedQuery(e,n){return zF(e).put({name:(i=n).name,readTime:Dc(Dn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function HF(t){return rr(t,"bundles")}function zF(t){return rr(t,"namedQueries")}class rE{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new rE(e,n.uid||"")}getOverlay(e,n){return Rg(e).get(jF(this.userId,n)).next(r=>r?qD(this.serializer,r):null)}getOverlays(e,n){const r=ho();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new FD(n,o);i.push(this.lt(e,a))}),N.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(xr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Rg(e).H("collectionPathOverlayIndex",a))}),N.waitFor(s)}getOverlaysForCollection(e,n,r){const i=ho(),s=xr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Rg(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=qD(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=ho();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Rg(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,d,f)=>{const g=qD(this.serializer,d);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):f.done()}).next(()=>s)}lt(e,n){return Rg(e).put(function(i,s,o){const[a,u,d]=jF(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ag(i.ut,o.mutation)}}(this.serializer,this.userId,n))}}function Rg(t){return rr(t,"documentOverlays")}class Sc{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(mn(e.integerValue));else if("doubleValue"in e){const r=mn(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),cg(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Go(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?OL(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):me()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),ue.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function VQ(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function GF(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=VQ(255&r[s]);if(i+=o,8!==o)break}return i}(t);return Math.ceil(e/8)}Sc.St=new Sc;class LQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=GF(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=GF(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class FQ{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class UQ{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Pg{constructor(){this.Wt=new LQ,this.Gt=new FQ(this.Wt),this.zt=new UQ(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Rc{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Rc(this.indexId,this.documentKey,this.arrayValue,r)}}function Qa(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=qF(t.arrayValue,e.arrayValue),0!==n?n:(n=qF(t.directionalValue,e.directionalValue),0!==n?n:ue.comparator(t.documentKey,e.documentKey)))}function qF(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class WF{constructor(e){this.Jt=new xt((n,r)=>Yt.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(De(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=ID(e);if(void 0!==n&&!this.tn(n))return!1;const r=yc(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.nn(a,u)||!this.rn(this.Yt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Yt.length||!this.rn(this.Yt[o++],r[s]))return!1;return!0}sn(){if(this.Xt)return null;let e=new xt(Yt.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new vc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new vc(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new vc(r.field,"asc"===r.dir?0:1)));return new zd(zd.UNKNOWN_ID,this.collectionId,n,Gd.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function ZF(t){var e,n;if(De(t instanceof it||t instanceof At),t instanceof it){if(t instanceof qL){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>it.create(t.field,"==",s)))||[];return At.create(i,"or")}return t}const r=t.filters.map(i=>ZF(i));return At.create(r,t.op)}function BQ(t){if(0===t.getFilters().length)return[];const e=KD(ZF(t));return De(KF(e)),WD(e)||ZD(e)?[e]:e.getFilters()}function WD(t){return t instanceof it}function ZD(t){return t instanceof At&&RD(t)}function KF(t){return WD(t)||ZD(t)||function(n){if(n instanceof At&&SD(n)){for(const r of n.getFilters())if(!WD(r)&&!ZD(r))return!1;return!0}return!1}(t)}function KD(t){if(De(t instanceof it||t instanceof At),t instanceof it)return t;if(1===t.filters.length)return KD(t.filters[0]);const e=t.filters.map(r=>KD(r));let n=At.create(e,t.op);return n=iE(n),KF(n)?n:(De(n instanceof At),De(Zd(n)),De(n.filters.length>1),n.filters.reduce((r,i)=>QD(r,i)))}function QD(t,e){let n;return De(t instanceof it||t instanceof At),De(e instanceof it||e instanceof At),n=t instanceof it?e instanceof it?At.create([t,e],"and"):QF(t,e):e instanceof it?QF(e,t):function(i,s){if(De(i.filters.length>0&&s.filters.length>0),Zd(i)&&Zd(s))return HL(i,s.getFilters());const o=SD(i)?i:s,a=SD(i)?s:i,u=o.filters.map(d=>QD(d,a));return At.create(u,"or")}(t,e),iE(n)}function QF(t,e){if(Zd(e))return HL(e,t.getFilters());{const n=e.filters.map(r=>QD(t,r));return At.create(n,"or")}}function iE(t){if(De(t instanceof it||t instanceof At),t instanceof it)return t;const e=t.getFilters();if(1===e.length)return iE(e[0]);if(jL(t))return t;const n=e.map(i=>iE(i)),r=[];return n.forEach(i=>{i instanceof it?r.push(i):i instanceof At&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:At.create(r,t.op)}class jQ{constructor(){this.on=new YD}addToCollectionParentIndex(e,n){return this.on.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(Si.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class YD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new xt(ht.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xt(ht.comparator)).toArray()}}const sE=new Uint8Array(0);class $Q{constructor(e,n){this.user=e,this.databaseId=n,this._n=new YD,this.an=new Wo(r=>wc(r),(r,i)=>gg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:r,parent:xr(i)};return YF(e).put(s)}return N.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[pL(n),""],!1,!0);return YF(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(co(o.parent))}return r})}addFieldIndex(e,n){const r=xg(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(n.indexState){const o=sh(e);return s.next(a=>{o.put($F(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=xg(e),i=sh(e),s=ih(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=xg(e),r=ih(e),i=sh(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return N.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new WF(r).sn();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=ih(e);let i=!0;const s=new Map;return N.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=qe();const a=[];return N.forEach(s,(u,d)=>{var k;re("IndexedDbIndexManager",`Using index ${k=u,`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map(U=>`${U.fieldPath}:${U.kind}`).join(",")}`} to execute ${wc(n)}`);const f=function(k,U){const te=ID(U);if(void 0===te)return null;for(const de of Kv(k,te.fieldPath))switch(de.op){case"array-contains-any":return de.value.arrayValue.values||[];case"array-contains":return[de.value]}return null}(d,u),g=function(k,U){const te=new Map;for(const de of yc(U))for(const Se of Kv(k,de.fieldPath))switch(Se.op){case"==":case"in":te.set(de.fieldPath.canonicalString(),Se.value);break;case"not-in":case"!=":return te.set(de.fieldPath.canonicalString(),Se.value),Array.from(te.values())}return null}(d,u),_=function(k,U){const te=[];let de=!0;for(const Se of yc(U)){const ut=0===Se.kind?WL(k,Se.fieldPath,k.startAt):ZL(k,Se.fieldPath,k.startAt);te.push(ut.value),de&&(de=ut.inclusive)}return new Za(te,de)}(d,u),y=function(k,U){const te=[];let de=!0;for(const Se of yc(U)){const ut=0===Se.kind?ZL(k,Se.fieldPath,k.endAt):WL(k,Se.fieldPath,k.endAt);te.push(ut.value),de&&(de=ut.inclusive)}return new Za(te,de)}(d,u),E=this.ln(u,d,_),w=this.ln(u,d,y),D=this.hn(u,d,g),M=this.Pn(u.indexId,f,E,_.inclusive,w,y.inclusive,D);return N.forEach(M,R=>r.j(R,n.limit).next(k=>{k.forEach(U=>{const te=ue.fromSegments(U.documentKey);o.has(te)||(o=o.add(te),a.push(te))})}))}).next(()=>a)}return N.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:BQ(At.create(e.filters,"and")).map(r=>xD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){const u=(null!=n?n.length:1)*Math.max(r.length,s.length),d=u/(null!=n?n.length:1),f=[];for(let g=0;g<u;++g){const _=n?this.In(n[g/d]):sE,y=this.Tn(e,_,r[g%d],i),E=this.En(e,_,s[g%d],o),w=a.map(D=>this.Tn(e,_,D,!0));f.push(...this.createRange(y,E,w))}return f}Tn(e,n,r,i){const s=new Rc(e,ue.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){const s=new Rc(e,ue.empty(),n,r);return i?s.Ht():s}cn(e,n){const r=new WF(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.un(n);return N.forEach(i,s=>this.cn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new xt(Yt.comparator),f=!1;for(const g of u.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?f=!0:d=d.add(_.field));for(const g of u.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new Pg;for(const i of yc(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.jt(i.kind);Sc.St.ht(s,o)}return r.Ut()}In(e){const n=new Pg;return Sc.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new Pg;return Sc.St.ht(Ic(this.databaseId,n),r.jt(function(s){const o=yc(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new Pg);let s=0;for(const o of yc(e)){const a=r[s++];for(const u of i)if(this.Rn(n,o.fieldPath)&&hg(a))i=this.Vn(i,o,a);else{const d=u.jt(o.kind);Sc.St.ht(a,d)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Pg;u.seed(a.Ut()),Sc.St.ht(o,u.jt(n.kind)),s.push(u)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof it&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=xg(e),i=sh(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return N.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(f,g){const _=g?new Gd(g.sequenceNumber,new Si(bc(g.readTime),new ue(co(g.documentKey)),g.largestBatchId)):Gd.empty(),y=f.fields.map(([E,w])=>new vc(Yt.fromServerFormat(E),w));return new zd(f.indexId,f.collectionGroup,y,_)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Le(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=xg(e),s=sh(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>N.forEach(a,u=>s.put($F(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return N.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?N.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),N.forEach(a,u=>this.gn(e,i,u).next(d=>{const f=this.pn(s,u);return d.isEqual(f)?N.resolve():this.yn(e,s,u,d,f)}))))})}wn(e,n,r,i){return ih(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return ih(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=ih(e);let s=new xt(Qa);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new Rc(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new xt(Qa);const i=this.dn(n,e);if(null==i)return r;const s=ID(n);if(null!=s){const o=e.data.field(s.fieldPath);if(hg(o))for(const a of o.arrayValue.values||[])r=r.add(new Rc(n.indexId,e.key,this.In(a),i))}else r=r.add(new Rc(n.indexId,e.key,sE,i));return r}yn(e,n,r,i,s){re("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,d,f,g,_){const y=u.getIterator(),E=d.getIterator();let w=qd(y),D=qd(E);for(;w||D;){let M=!1,R=!1;if(w&&D){const k=f(w,D);k<0?R=!0:k>0&&(M=!0)}else null!=w?R=!0:M=!0;M?(g(D),D=qd(E)):R?(_(w),w=qd(y)):(w=qd(y),D=qd(E))}}(i,s,Qa,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),N.waitFor(o)}fn(e){let n=1;return sh(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Qa(o,a)).filter((o,a,u)=>!a||0!==Qa(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Qa(o,e),u=Qa(o,n);if(0===a)i[0]=e.Ht();else if(a>0&&u<0)i.push(o),i.push(o.Ht());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,sE,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,sE,[]]))}return s}bn(e,n){return Qa(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(JF)}getMinOffset(e,n){return N.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||me())).next(JF)}}function YF(t){return rr(t,"collectionParents")}function ih(t){return rr(t,"indexEntries")}function xg(t){return rr(t,"indexConfiguration")}function sh(t){return rr(t,"indexState")}function JF(t){De(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;wD(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Si(e.readTime,e.documentKey,n)}const XF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Mr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Mr(e,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function e2(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:o},(f,g,_)=>(a++,_.delete()));s.push(u.next(()=>{De(1===a)}));const d=[];for(const f of n.mutations){const g=TL(e,f.key.path,n.batchId);s.push(i.delete(g)),d.push(f.key)}return N.waitFor(s).next(()=>d)}function oE(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw me();e=t.noDocument}return JSON.stringify(e).length}Mr.DEFAULT_COLLECTION_PERCENTILE=10,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mr.DEFAULT=new Mr(41943040,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mr.DISABLED=new Mr(-1,0,0);class aE{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){De(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new aE(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ya(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=oh(e),o=Ya(e);return o.add({}).next(a=>{De("number"==typeof a);const u=new VD(a,n,r,i),d=function(y,E,w){const D=w.baseMutations.map(R=>Ag(y.ut,R)),M=w.mutations.map(R=>Ag(y.ut,R));return{userId:E,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:D,mutations:M}}(this.serializer,this.userId,u),f=[];let g=new xt((_,y)=>Le(_.canonicalString(),y.canonicalString()));for(const _ of i){const y=TL(this.userId,_.key.path,a);g=g.add(_.key.path.popLast()),f.push(o.put(d)),f.push(s.put(y,PK))}return g.forEach(_=>{f.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),N.waitFor(f).next(()=>u)})}lookupMutationBatch(e,n){return Ya(e).get(n).next(r=>r?(De(r.userId===this.userId),Ac(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?N.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ya(e).Y({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(De(a.batchId>=r),s=Ac(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ya(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ya(e).W("userMutationsIndex",n).next(r=>r.map(i=>Ac(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=jv(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return oh(e).Y({range:i},(o,a,u)=>{const[d,f,g]=o,_=co(f);if(d===this.userId&&n.path.isEqual(_))return Ya(e).get(g).next(y=>{if(!y)throw me();De(y.userId===this.userId),s.push(Ac(this.serializer,y))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(Le);const i=[];return n.forEach(s=>{const o=jv(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=oh(e).Y({range:a},(d,f,g)=>{const[_,y,E]=d,w=co(y);_===this.userId&&s.path.isEqual(w)?r=r.add(E):g.done()});i.push(u)}),N.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=jv(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new xt(Le);return oh(e).Y({range:o},(u,d,f)=>{const[g,_,y]=u,E=co(_);g===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(y)):f.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Ya(e).get(s).next(o=>{if(null===o)throw me();De(o.userId===this.userId),r.push(Ac(this.serializer,o))}))}),N.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return e2(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),N.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return N.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return oh(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=co(s[1]);i.push(u)}else a.done()}).next(()=>{De(0===i.length)})})}containsKey(e,n){return t2(e,this.userId,n)}Mn(e){return n2(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function t2(t,e,n){const r=jv(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return oh(t).Y({range:s,J:!0},(a,u,d)=>{const[f,g,_]=a;f===e&&g===i&&(o=!0),d.done()}).next(()=>o)}function Ya(t){return rr(t,"mutations")}function oh(t){return rr(t,"documentMutations")}function n2(t){return rr(t,"mutationQueues")}class Pc{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Pc(0)}static Nn(){return new Pc(-1)}}class HQ{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new Pc(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>be.fromTimestamp(new sn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ah(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(De(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return ah(e).Y((o,a)=>{const u=Sg(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>N.waitFor(s)).next(()=>i)}forEachTarget(e,n){return ah(e).Y((r,i)=>{const s=Sg(i);n(s)})}Bn(e){return r2(e).get("targetGlobalKey").next(n=>(De(null!==n),n))}Ln(e,n){return r2(e).put("targetGlobalKey",n)}kn(e,n){return ah(e).put(BF(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=wc(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ah(e).Y({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const d=Sg(a);gg(n,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ja(e);return n.forEach(o=>{const a=xr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),N.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ja(e);return N.forEach(n,s=>{const o=xr(s.path);return N.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ja(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ja(e);let s=qe();return i.Y({range:r,J:!0},(o,a,u)=>{const d=co(o[1]),f=new ue(d);s=s.add(f)}).next(()=>s)}containsKey(e,n){const r=xr(n.path),i=IDBKeyRange.bound([r],[pL(r)],!1,!0);let s=0;return Ja(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],u,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}_t(e,n){return ah(e).get(n).next(r=>r?Sg(r):null)}}function ah(t){return rr(t,"targets")}function r2(t){return rr(t,"targetGlobal")}function Ja(t){return rr(t,"targetDocuments")}function i2([t,e],[n,r]){const i=Le(t,n);return 0===i?Le(e,r):i}class zQ{constructor(e){this.Qn=e,this.buffer=new xt(i2),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();i2(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class s2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Z.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){ja(r)?re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ba(r)}yield n.Gn(3e5)}))}}class GQ{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return N.resolve(Ri._e);const r=new zQ(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(XF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XF):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),$d()<=so.in.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(d-u)+`ms\nTotal Duration: ${d-f}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class qQ{constructor(e,n){this.db=e,this.garbageCollector=function o2(t,e){return new GQ(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return uE(e,r)}removeReference(e,n,r){return uE(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return uE(e,n)}Xn(e,n){return function(i,s){let o=!1;return n2(i).Z(a=>t2(i,a,s).next(u=>(u&&(o=!0),N.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=n){const u=this.Xn(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,be.min()),Ja(e).delete([0,xr(o.path)])))});i.push(u)}}).next(()=>N.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return uE(e,n)}Zn(e,n){const r=Ja(e);let i,s=Ri._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{0===o?(s!==Ri._e&&n(new ue(co(i)),s),s=d,i=u):s=Ri._e}).next(()=>{s!==Ri._e&&n(new ue(co(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uE(t,e){return Ja(t).put((i=t.currentSequenceNumber,{targetId:0,path:xr(e.path),sequenceNumber:i}));var i}class a2{constructor(){this.changes=new Wo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class WQ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return xc(e).put(r)}removeEntry(e,n,r){return xc(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],nE(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=Jt.newInvalidDocument(n);return xc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Mg(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:Jt.newInvalidDocument(n)};return xc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Mg(n))},(i,s)=>{r={document:this.tr(n,s),size:oE(s)}}).next(()=>r)}getEntries(e,n){let r=pi();return this.rr(e,n,(i,s)=>{const o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=pi(),i=new $t(ue.comparator);return this.rr(e,n,(s,o)=>{const a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,oE(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return N.resolve();let i=new xt(d2);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Mg(i.first()),Mg(i.last())),o=i.getIterator();let a=o.getNext();return xc(e).Y({index:"documentKeyIndex",range:s},(u,d,f)=>{const g=ue.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&d2(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?f.U(Mg(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),nE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xc(e).W(IDBKeyRange.bound(a,u,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let f=pi();for(const g of d){const _=this.tr(ue.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(_g(n,_)||i.has(_.key))&&(f=f.insert(_.key,_))}return f})}getAllFromCollectionGroup(e,n,r,i){let s=pi();const o=l2(n,r),a=l2(n,Si.max());return xc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,f)=>{const g=this.tr(ue.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(g.key,g),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new ZQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return c2(e).get("remoteDocumentGlobalKey").next(n=>(De(!!n),n))}er(e,n){return c2(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function OQ(t,e){let n;if(e.document)n=MF(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ue.fromSegments(e.noDocument.path),i=bc(e.noDocument.readTime);n=Jt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return me();{const r=ue.fromSegments(e.unknownDocument.path),i=bc(e.unknownDocument.version);n=Jt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new sn(i[0],i[1]);return be.fromTimestamp(s)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(be.min()))return r}return Jt.newInvalidDocument(e)}}function u2(t){return new WQ(t)}class ZQ extends a2{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Wo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new xt((s,o)=>Le(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=UF(this._r.serializer,o);i=i.add(s.path.popLast());const d=oE(u);r+=d-a.size,n.push(this._r.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=UF(this._r.serializer,o.convertToNoDocument(be.min()));n.push(this._r.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),N.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function c2(t){return rr(t,"remoteDocumentGlobal")}function xc(t){return rr(t,"remoteDocumentsV14")}function Mg(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function l2(t,e){const n=e.documentKey.path.toArray();return[t,nE(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function d2(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Le(n[s],r[s]),i)return i;return i=Le(n.length,r.length),i||(i=Le(n[n.length-2],r[r.length-2]),i||Le(n[n.length-1],r[r.length-1]))}class KQ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class h2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Ig(r.mutation,i,fi.empty(),sn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,qe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=qe()){const i=ho();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=yg();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ho();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,qe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=pi();const o=vg(),a=vg();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(void 0===f||f.mutation instanceof Zo)?s=s.insert(d.key,d):void 0!==f?(o.set(d.key,f.mutation.getFieldMask()),Ig(f.mutation,d,f.mutation.getFieldMask(),sn.now())):o.set(d.key,fi.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var g;return a.set(d,new KQ(f,null!==(g=o.get(d))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=vg();let i=new $t((o,a)=>o-a),s=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=n.get(u);if(null===d)return;let f=r.get(u)||fi.empty();f=a.applyToLocalView(d,f),r.set(u,f);const g=(i.get(a.batchId)||qe()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,f=u.value,g=rF();f.forEach(_=>{if(!s.has(_)){const y=hF(n.get(_),r.get(_));null!==y&&g.set(_,y),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return ue.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):MD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):N.resolve(ho());let a=-1,u=s;return o.next(d=>N.forEach(d,(f,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(f)?N.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,qe())).next(f=>({batchId:a,changes:nF(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(r=>{let i=yg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=yg();return this.indexManager.getCollectionParents(e,s).next(a=>N.forEach(a,u=>{const d=(g=n,_=u.child(s),new qo(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const f=d.getKey();null===o.get(f)&&(o=o.insert(f,Jt.newInvalidDocument(f)))});let a=yg();return o.forEach((u,d)=>{const f=s.get(u);void 0!==f&&Ig(f.mutation,d,fi.empty(),sn.now()),_g(n,d)&&(a=a.insert(u,d))}),a})}}class QQ{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return N.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:Dn(i.createTime)}),N.resolve();var i}getNamedQuery(e,n){return N.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:GD(i.bundledQuery),readTime:Dn(i.readTime)}),N.resolve();var i}}class YQ{constructor(){this.overlays=new $t(ue.comparator),this.lr=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ho();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const i=ho(),s=n.length+1,o=new ue(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return N.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new $t((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);null===f&&(f=ho(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=ho(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=i)););return N.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new FD(n,r));let s=this.lr.get(n);void 0===s&&(s=qe(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}class JD{constructor(){this.hr=new xt(ir.Pr),this.Ir=new xt(ir.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new ir(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new ir(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new ue(new ht([])),r=new ir(n,e),i=new ir(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new ue(new ht([])),r=new ir(n,e),i=new ir(n,e+1);let s=qe();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ir(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class ir{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return ue.comparator(e.key,n.key)||Le(e.gr,n.gr)}static Tr(e,n){return Le(e.gr,n.gr)||ue.comparator(e.key,n.key)}}class JQ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new xt(ir.Pr)}checkEmpty(e){return N.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++;const o=new VD(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new ir(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),s=i<0?0:i;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ir(n,0),i=new ir(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(Le);return n.forEach(i=>{const s=new ir(i,0),o=new ir(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),N.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ue.isDocumentKey(s)||(s=s.child(""));const o=new ir(new ue(s),0);let a=new xt(Le);return this.yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.gr)),!0)},o),N.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){De(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return N.forEach(n.mutations,i=>{const s=new ir(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new ir(n,0),i=this.yr.firstAfterOrEqual(r);return N.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return N.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class XQ{constructor(e){this.Cr=e,this.docs=new $t(ue.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let r=pi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Jt.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=pi();const o=n.path,a=new ue(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||wD(mL(f),r)<=0||(i.has(f.key)||_g(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,n,r,i){me()}vr(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new eY(this)}getSize(e){return N.resolve(this.size)}}class eY extends a2{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class tY{constructor(e){this.persistence=e,this.Fr=new Wo(n=>wc(n),gg),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Mr=0,this.Or=new JD,this.targetCount=0,this.Nr=Pc.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),N.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Pc(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.kn(n),N.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(s).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.Or.containsKey(n))}}class XD{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Ri(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new tY(this),this.indexManager=new jQ,this.remoteDocumentCache=new XQ(r=>this.referenceDelegate.Qr(r)),this.serializer=new FF(n),this.Kr=new QQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new YQ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new JQ(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const i=new nY(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return N.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class nY extends yL{constructor(e){super(),this.currentSequenceNumber=e}}class cE{constructor(e){this.persistence=e,this.Gr=new JD,this.zr=null}static jr(e){return new cE(e)}get Hr(){if(this.zr)return this.zr;throw me()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),N.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Hr,r=>{const i=ue.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,be.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return N.or([()=>N.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class rY{constructor(e){this.serializer=e}N(e,n,r,i){const s=new Bv("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wL,{unique:!0}),u.createObjectStore("documentMutations"),f2(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=N.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),f2(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,d){return d.store("mutations").W().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wL,{unique:!0});const g=d.store("mutations"),_=f.map(y=>g.put(y));return N.waitFor(_)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:$K});d.createIndex("collectionPathOverlayIndex",HK,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",zK,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:xK});d.createIndex("documentKeyIndex",MK),d.createIndex("collectionGroupIndex",NK)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:FK}).createIndex("sequenceNumberIndex",UK,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:BK}).createIndex("documentKeyIndex",jK,{unique:!1})}(e))),o}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=oE(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>N.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>N.forEach(a,u=>{De(u.userId===s.userId);const d=Ac(this.serializer,u);return e2(e,s.userId,d).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const u=new ht(o),d=[0,xr(u)];s.push(n.get(d).next(f=>f?N.resolve():n.put({targetId:0,path:xr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>N.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:LK});const r=n.store("collectionParents"),i=new YD,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:xr(u)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const u=new ht(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,u],d)=>{const f=co(a);return s(f.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const s=Sg(i),o=BF(this.serializer,s);return n.put(o)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(g=o,g.document?new ue(ht.fromString(g.document.name).popFirst(5)):g.noDocument?ue.fromSegments(g.noDocument.path):g.unknownDocument?ue.fromSegments(g.unknownDocument.path):me()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(d))}).next(()=>N.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=u2(this.serializer),s=new XD(cE.jr,this.serializer.ut);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var d;let f=null!==(d=a.get(u.userId))&&void 0!==d?d:qe();Ac(this.serializer,u).keys().forEach(g=>f=f.add(g)),a.set(u.userId,f)}),N.forEach(a,(u,d)=>{const f=new nr(d),g=rE.ct(this.serializer,f),_=s.getIndexManager(f),y=aE.ct(f,this.serializer,_,s.referenceDelegate);return new h2(i,y,g,_).recalculateAndSaveOverlaysForDocumentKeys(new DD(n,Ri._e),u).next()})})}}function f2(t){t.createObjectStore("targetDocuments",{keyPath:kK}).createIndex("documentTargetsIndex",VK,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",OK,{unique:!0}),t.createObjectStore("targetGlobal")}const eb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class tb{constructor(e,n,r,i,s,o,a,u,d,f,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=d,this._i=f,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=_=>Promise.resolve(),!tb.D())throw new X(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qQ(this,i),this.Ii=n+"main",this.serializer=new FF(u),this.Ti=new bs(this.Ii,this.ai,new rY(this.serializer)),this.qr=new HQ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=u2(this.serializer),this.Kr=new kQ,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===f&&Cn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new X(L.FAILED_PRECONDITION,eb);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Ri(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,Z.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,Z.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,Z.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(ja(e))return re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Ng(e).get("owner").next(n=>N.resolve(this.wi(n)))}Si(e){return dE(e).delete(this.clientId)}bi(){var e=this;return(0,Z.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=rr(r,"clientMetadata");return i.W().next(s=>{const o=e.Ci(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return N.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?N.resolve(!0):Ng(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new X(L.FAILED_PRECONDITION,eb);return!1}}return!(!this.networkEnabled||!this.inForeground)||dE(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&re("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Z.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new DD(n,Ri._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>dE(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return aE.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $Q(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return rE.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){re("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=15===(u=this.ai)?qK:14===u?bL:13===u?DL:12===u?GK:11===u?CL:void me();var u;let o;return this.Ti.runTransaction(e,i,s,a=>(o=new DD(a,this.Lr?this.Lr.next():Ri._e),"readwrite-primary"===n?this.fi(o).next(u=>!!u||this.gi(o)).next(u=>{if(!u)throw Cn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new X(L.FAILED_PRECONDITION,_L);return r(o)}).next(u=>this.yi(o).next(()=>u)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return Ng(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new X(L.FAILED_PRECONDITION,eb)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ng(e).put("owner",n)}static D(){return bs.D()}pi(e){const n=Ng(e);return n.get("owner").next(r=>this.wi(r)?(re("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):N.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(Cn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,kt.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Cn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Cn("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ng(t){return rr(t,"owner")}function dE(t){return rr(t,"clientMetadata")}function nb(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class rb{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=qe(),i=qe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new rb(e,n.fromCache,r,i)}}class iY{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class p2{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new iY;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?($d()<=so.in.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Yd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),N.resolve()):($d()<=so.in.DEBUG&&re("QueryEngine","Query:",Yd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?($d()<=so.in.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Yd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jr(n))):N.resolve())}zi(e,n){if(QL(n))return N.resolve(null);let r=Jr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Qv(n,null,"F"),r=Jr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=qe(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Yi(n,a);return this.Zi(n,d,o,u.readTime)?this.zi(e,Qv(n,null,"F")):this.Xi(e,d,n,u)}))})))}ji(e,n,r,i){return QL(n)||i.isEqual(be.min())?N.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?N.resolve(null):($d()<=so.in.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Yd(n)),this.Xi(e,o,n,gL(i,-1)).next(a=>a))})}Yi(e,n){let r=new xt(eF(e));return n.forEach((i,s)=>{_g(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return $d()<=so.in.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Yd(n)),this.Gi.getDocumentsMatchingQuery(e,n,Si.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class sY{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new $t(Le),this.ns=new Wo(s=>wc(s),gg),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new h2(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function g2(t,e,n,r){return new sY(t,e,n,r)}function m2(t,e){return ib.apply(this,arguments)}function ib(){return ib=(0,Z.Z)(function*(t,e){const n=oe(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=qe();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({_s:d,removedBatchIds:o,addedBatchIds:a}))})})}),ib.apply(this,arguments)}function _2(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function y2(t,e,n){let r=qe(),i=qe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=pi();return n.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(be.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):re("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{us:o,cs:i}})}function uY(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uh(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,N.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new Ko(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function ch(t,e,n){return sb.apply(this,arguments)}function sb(){return sb=(0,Z.Z)(function*(t,e,n){const r=oe(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ja(o))throw o;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),sb.apply(this,arguments)}function hE(t,e,n){const r=oe(t);let i=be.min(),s=qe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const g=oe(u),_=g.ns.get(f);return void 0!==_?N.resolve(g.ts.get(_)):g.qr.getTargetData(d,f)}(r,o,Jr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:be.min(),n?s:qe())).next(a=>(I2(r,XL(e),a),{documents:a,ls:s})))}function v2(t,e){const n=oe(t),r=oe(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function E2(t,e){const n=oe(t),r=n.rs.get(e)||be.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,gL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(I2(n,e,i),i))}function I2(t,e,n){let r=t.rs.get(e)||be.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}function ob(){return ob=(0,Z.Z)(function*(t,e,n,r){const i=oe(t);let s=qe(),o=pi();for(const d of n){const f=e.hs(d.metadata.name);d.document&&(s=s.add(f));const g=e.Ps(d);g.setReadTime(e.Is(d.metadata.readTime)),o=o.insert(f,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield uh(i,(f=r,Jr(Kd(ht.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>y2(d,a,o).next(f=>(a.apply(d),f)).next(f=>i.qr.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.qr.addMatchingKeys(d,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,f.us,f.cs)).next(()=>f.us)))}),ob.apply(this,arguments)}function lY(t,e){return ab.apply(this,arguments)}function ab(){return ab=(0,Z.Z)(function*(t,e,n=qe()){const r=yield uh(t,Jr(GD(e.bundledQuery))),i=oe(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Dn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(s,e);const a=r.withResumeToken(Qn.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(s,a).next(()=>i.qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(s,e))})}),ab.apply(this,arguments)}function w2(t,e){return`firestore_clients_${t}_${e}`}function T2(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ub(t,e){return`firestore_targets_${t}_${e}`}class fE{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new X(i.error.code,i.error.message))),o?new fE(e,n,i.state,s):(Cn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Og{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new X(r.error.code,r.error.message))),s?new Og(e,r.state,i):(Cn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pE{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=OD();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=EL(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new pE(e,s):(Cn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class cb{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new cb(n.clientId,n.onlineState):(Cn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lb{constructor(){this.activeTargetIds=OD()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class db{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new $t(Le),this.started=!1,this.ps=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=w2(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new lb),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Z.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const s=e.getItem(w2(e.persistenceKey,i));if(s){const o=pE.Ts(i,s);o&&(e.gs=e.gs.insert(o.clientId,o))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ub(this.persistenceKey,e));if(r){const i=Og.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ub(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return re("SharedClientState","READ",e,n),n}setItem(e,n){re("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void Cn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,Z.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(o){let a=Ri._e;if(null!=o)try{const u=JSON.parse(o);De("number"==typeof u),a=u}catch(u){Cn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Ri._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Js(s)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new fE(this.currentUser,e,n,r),s=T2(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){const n=T2(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=ub(this.persistenceKey,e),s=new Og(e,n,r);this.setItem(i,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return pE.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return fE.Ts(new nr(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return Og.Ts(i,n)}Ms(e){return cb.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,Z.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=OD();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class C2{constructor(){this.eo=new lb,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new lb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class dY{ro(e){}shutdown(){}}class D2{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let gE=null;function hb(){return null===gE?gE=268435456+Math.round(2147483648*Math.random()):gE++,"0x"+gE.toString(16)}const hY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fY{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Nr="WebChannelConnection";class pY extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=hb(),u=this.So(n,r);re("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(d,s,o),this.Do(n,u,d,i).then(f=>(re("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw hi("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+jd,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){return`${this.mo}/v1/${r}:${hY[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const s=hb();return new Promise((o,a)=>{const u=new dK;u.setWithCredentials(!0),u.listenOnce(uK.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case vD.NO_ERROR:const f=u.getResponseJson();re(Nr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case vD.TIMEOUT:re(Nr,`RPC '${e}' ${s} timed out`),a(new X(L.DEADLINE_EXCEEDED,"Request time out"));break;case vD.HTTP_ERROR:const g=u.getStatus();if(re(Nr,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const y=_?.error;if(y&&y.status&&y.message){const E=function(D){const M=D.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(M)>=0?M:L.UNKNOWN}(y.status);a(new X(E,y.message))}else a(new X(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new X(L.UNAVAILABLE,"Connection failed."));break;default:me()}}finally{re(Nr,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);re(Nr,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}vo(e,n,r){const i=hb(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=oK(),a=aK(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new lK({})),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");re(Nr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const g=o.createWebChannel(f,u);let _=!1,y=!1;const E=new fY({co:D=>{y?re(Nr,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(_||(re(Nr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),re(Nr,`RPC '${e}' stream ${i} sending:`,D),g.send(D))},lo:()=>g.close()}),w=(D,M,R)=>{D.listen(M,k=>{try{R(k)}catch(U){setTimeout(()=>{throw U},0)}})};return w(g,Uv.EventType.OPEN,()=>{y||re(Nr,`RPC '${e}' stream ${i} transport opened.`)}),w(g,Uv.EventType.CLOSE,()=>{y||(y=!0,re(Nr,`RPC '${e}' stream ${i} transport closed`),E.Ro())}),w(g,Uv.EventType.ERROR,D=>{y||(y=!0,hi(Nr,`RPC '${e}' stream ${i} transport errored:`,D),E.Ro(new X(L.UNAVAILABLE,"The operation could not be completed")))}),w(g,Uv.EventType.MESSAGE,D=>{var M;if(!y){const R=D.data[0];De(!!R);const U=R.error||(null===(M=R[0])||void 0===M?void 0:M.error);if(U){re(Nr,`RPC '${e}' stream ${i} received error:`,U);const te=U.status;let de=function(an){const un=On[an];if(void 0!==un)return yF(un)}(te),Se=U.message;void 0===de&&(de=L.INTERNAL,Se="Unknown error status: "+te+" with message "+U.message),y=!0,E.Ro(new X(de,Se)),g.close()}else re(Nr,`RPC '${e}' stream ${i} received:`,R),E.Vo(R)}}),w(a,cK.STAT_EVENT,D=>{D.stat===cL.PROXY?re(Nr,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===cL.NOPROXY&&re(Nr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Ao()},0),E}}function b2(){return typeof window<"u"?window:null}function mE(){return typeof document<"u"?document:null}function kg(t){return new CQ(t,!0)}class fb{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class A2{constructor(e,n,r,i,s,o,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new fb(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Z.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Z.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,Z.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Cn(n.toString()),Cn("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===L.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new X(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Z.Z)(function*(){e.state=0,e.start()}))}o_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gY extends A2{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function AQ(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:me(),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(De(void 0===f||"string"==typeof f),Qn.fromBase64String(f||"")):(De(void 0===f||f instanceof Uint8Array),Qn.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const f=void 0===d.code?L.UNKNOWN:yF(d.code);return new X(f,d.message||"")}(o);n=new TF(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=fo(t,r.document.name),s=Dn(r.document.updateTime),o=r.document.createTime?Dn(r.document.createTime):be.min(),a=new gr({mapValue:{fields:r.document.fields}}),u=Jt.newFoundDocument(i,s,o,a);n=new tE(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=fo(t,r.document),s=r.readTime?Dn(r.readTime):be.min(),o=Jt.newNoDocument(i,s);n=new tE([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=fo(t,r.document);n=new tE([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return me();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new yQ(i,s);n=new wF(r.targetId,o)}}var d;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return be.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?be.min():o.readTime?Dn(o.readTime):be.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=bg(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Zv(u)?{documents:NF(s,u)}:{query:zD(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=AF(s,o.resumeToken);const d=BD(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(be.min())>0){a.readTime=nh(s,o.snapshotVersion.toTimestamp());const d=BD(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function RQ(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=bg(this.serializer),n.removeTarget=e,this.e_(n)}}class mY extends A2{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function SQ(t,e){return t&&t.length>0?(De(void 0!==e),t.map(n=>function(i,s){let o=Dn(i.updateTime?i.updateTime:s);return o.isEqual(be.min())&&(o=Dn(s)),new pQ(o,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Dn(e.commitTime);return this.listener.I_(r,n)}return De(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=bg(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ag(this.serializer,r))};this.e_(n)}}class _Y extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new X(L.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(L.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(L.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class vY{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Cn(n),this.f_=!1):re("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class EY{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{r.enqueueAndForget((0,Z.Z)(function*(){var u;Xa(o)&&(re("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,Z.Z)(function*(f){const g=oe(f);g.C_.add(4),yield lh(g),g.M_.set("Unknown"),g.C_.delete(4),yield Vg(g)}),function d(f){return u.apply(this,arguments)})(o))}))}),this.M_=new vY(r,i)}}function Vg(t){return gb.apply(this,arguments)}function gb(){return gb=(0,Z.Z)(function*(t){if(Xa(t))for(const e of t.v_)yield e(!0)}),gb.apply(this,arguments)}function lh(t){return mb.apply(this,arguments)}function mb(){return mb=(0,Z.Z)(function*(t){for(const e of t.v_)yield e(!1)}),mb.apply(this,arguments)}function _E(t,e){const n=oe(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),vb(n)?yb(n):hh(n).Ho()&&_b(n,e))}function Lg(t,e){const n=oe(t),r=hh(n);n.D_.delete(e),r.Ho()&&S2(n,e),0===n.D_.size&&(r.Ho()?r.Zo():Xa(n)&&n.M_.set("Unknown"))}function _b(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hh(t).u_(e)}function S2(t,e){t.x_.Oe(e),hh(t).c_(e)}function yb(t){t.x_=new EQ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),hh(t).start(),t.M_.g_()}function vb(t){return Xa(t)&&!hh(t).jo()&&t.D_.size>0}function Xa(t){return 0===oe(t).C_.size}function R2(t){t.x_=void 0}function IY(t){return Eb.apply(this,arguments)}function Eb(){return Eb=(0,Z.Z)(function*(t){t.D_.forEach((e,n)=>{_b(t,e)})}),Eb.apply(this,arguments)}function wY(t,e){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,Z.Z)(function*(t,e){R2(t),vb(t)?(t.M_.w_(e),yb(t)):t.M_.set("Unknown")}),Ib.apply(this,arguments)}function TY(t,e,n){return wb.apply(this,arguments)}function wb(){return wb=(0,Z.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof TF&&2===e.state&&e.cause)try{yield(r=(0,Z.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.D_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.D_.delete(u),s.x_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield yE(t,r)}else if(e instanceof tE?t.x_.$e(e):e instanceof wF?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(be.min()))try{const r=yield _2(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.D_.get(d);f&&s.D_.set(d,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const f=s.D_.get(u);if(!f)return;s.D_.set(u,f.withResumeToken(Qn.EMPTY_BYTE_STRING,f.snapshotVersion)),S2(s,u);const g=new Ko(f.target,u,d,f.sequenceNumber);_b(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){re("RemoteStore","Failed to raise snapshot:",r),yield yE(t,r)}var r}),wb.apply(this,arguments)}function yE(t,e,n){return Tb.apply(this,arguments)}function Tb(){return Tb=(0,Z.Z)(function*(t,e,n){if(!ja(e))throw e;t.C_.add(1),yield lh(t),t.M_.set("Offline"),n||(n=()=>_2(t.localStore)),t.asyncQueue.enqueueRetryable((0,Z.Z)(function*(){re("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Vg(t)}))}),Tb.apply(this,arguments)}function P2(t,e){return e().catch(n=>yE(t,n,e))}function dh(t){return Cb.apply(this,arguments)}function Cb(){return Cb=(0,Z.Z)(function*(t){const e=oe(t),n=eu(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;CY(e);)try{const i=yield uY(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,DY(e,i)}catch(i){yield yE(e,i)}x2(e)&&M2(e)}),Cb.apply(this,arguments)}function CY(t){return Xa(t)&&t.b_.length<10}function DY(t,e){t.b_.push(e);const n=eu(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function x2(t){return Xa(t)&&!eu(t).jo()&&t.b_.length>0}function M2(t){eu(t).start()}function bY(t){return Db.apply(this,arguments)}function Db(){return Db=(0,Z.Z)(function*(t){eu(t).E_()}),Db.apply(this,arguments)}function AY(t){return bb.apply(this,arguments)}function bb(){return bb=(0,Z.Z)(function*(t){const e=eu(t);for(const n of t.b_)e.P_(n.mutations)}),bb.apply(this,arguments)}function SY(t,e,n){return Ab.apply(this,arguments)}function Ab(){return Ab=(0,Z.Z)(function*(t,e,n){const r=t.b_.shift(),i=LD.from(r,e,n);yield P2(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield dh(t)}),Ab.apply(this,arguments)}function RY(t,e){return Sb.apply(this,arguments)}function Sb(){return Sb=(0,Z.Z)(function*(t,e){var n;e&&eu(t).h_&&(yield(n=(0,Z.Z)(function*(i,s){if(_F(a=s.code)&&a!==L.ABORTED){const o=i.b_.shift();eu(i).Yo(),yield P2(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield dh(i)}var a}),function r(i,s){return n.apply(this,arguments)})(t,e)),x2(t)&&M2(t)}),Sb.apply(this,arguments)}function N2(t,e){return Rb.apply(this,arguments)}function Rb(){return Rb=(0,Z.Z)(function*(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const r=Xa(n);n.C_.add(3),yield lh(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Vg(n)}),Rb.apply(this,arguments)}function Pb(t,e){return xb.apply(this,arguments)}function xb(){return xb=(0,Z.Z)(function*(t,e){const n=oe(t);e?(n.C_.delete(2),yield Vg(n)):e||(n.C_.add(2),yield lh(n),n.M_.set("Unknown"))}),xb.apply(this,arguments)}function hh(t){return t.O_||(t.O_=function(n,r,i){const s=oe(n);return s.A_(),new gY(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:IY.bind(null,t),Io:wY.bind(null,t),a_:TY.bind(null,t)}),t.v_.push(function(){var e=(0,Z.Z)(function*(n){n?(t.O_.Yo(),vb(t)?yb(t):t.M_.set("Unknown")):(yield t.O_.stop(),R2(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function eu(t){return t.N_||(t.N_=function(n,r,i){const s=oe(n);return s.A_(),new mY(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:bY.bind(null,t),Io:RY.bind(null,t),T_:AY.bind(null,t),I_:SY.bind(null,t)}),t.v_.push(function(){var e=(0,Z.Z)(function*(n){n?(t.N_.Yo(),yield dh(t)):(yield t.N_.stop(),t.b_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class Mb{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Mb(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new X(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fh(t,e){if(Cn("AsyncQueue",`${e}: ${t}`),ja(t))return new X(L.UNAVAILABLE,`${e}: ${t}`);throw t}class ph{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ue.comparator(n.key,r.key):(n,r)=>ue.comparator(n.key,r.key),this.keyedMap=yg(),this.sortedSet=new $t(this.comparator)}static emptySet(e){return new ph(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ph)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new ph;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class O2{constructor(){this.B_=new $t(ue.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):me():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class gh{constructor(e,n,r,i,s,o,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new gh(e,n,ph.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class PY{constructor(){this.k_=void 0,this.listeners=[]}}class xY{constructor(){this.queries=new Wo(e=>JL(e),mg),this.onlineState="Unknown",this.q_=new Set}}function Nb(t,e){return Ob.apply(this,arguments)}function Ob(){return Ob=(0,Z.Z)(function*(t,e){const n=oe(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new PY),i)try{s.k_=yield n.onListen(r)}catch(o){const a=fh(o,`Initialization of query '${Yd(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&Lb(n)}),Ob.apply(this,arguments)}function kb(t,e){return Vb.apply(this,arguments)}function Vb(){return Vb=(0,Z.Z)(function*(t,e){const n=oe(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),Vb.apply(this,arguments)}function MY(t,e){const n=oe(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&Lb(n)}function NY(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function Lb(t){t.q_.forEach(e=>{e.next()})}class Fb{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new gh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=gh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class OY{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class k2{constructor(e){this.serializer=e}hs(e){return fo(this.serializer,e)}Ps(e){return e.metadata.exists?MF(this.serializer,e.document,!1):Jt.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Dn(e)}}class kY{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=V2(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=ht.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new k2(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.hs(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||qe()).add(s);n.set(o,a)}}return n}complete(){var e=this;return(0,Z.Z)(function*(){const n=yield function cY(t,e,n,r){return ob.apply(this,arguments)}(e.localStore,new k2(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield lY(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function V2(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class L2{constructor(e){this.key=e}}class F2{constructor(e){this.key=e}}class U2{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=qe(),this.mutatedKeys=qe(),this._a=eF(e),this.aa=new ph(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new O2,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{const _=i.get(f),y=_g(this.query,g)?g:null,E=!!_&&this.mutatedKeys.has(_.key),w=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let D=!1;_&&y?_.data.isEqual(y.data)?E!==w&&(r.track({type:3,doc:y}),D=!0):this.ha(_,y)||(r.track({type:2,doc:y}),D=!0,(u&&this._a(y,u)>0||d&&this._a(y,d)<0)&&(a=!0)):!_&&y?(r.track({type:0,doc:y}),D=!0):_&&!y&&(r.track({type:1,doc:_}),D=!0,(u||d)&&(a=!0)),D&&(y?(o=o.add(y),s=w?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort((d,f)=>function(_,y){const E=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me()}};return E(_)-E(y)}(d.type,f.type)||this._a(d.doc,f.doc)),this.Pa(r);const o=n?this.Ia():[],a=0===this.oa.size&&this.current?1:0,u=a!==this.sa;return this.sa=a,0!==s.length||u?{snapshot:new gh(this.query,e.aa,i,s,e.mutatedKeys,0===a,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new O2,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=qe(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new F2(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new L2(r))}),n}da(e){this.ia=e.ls,this.oa=qe();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return gh.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class VY{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class LY{constructor(e){this.key=e,this.Ra=!1}}class FY{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Wo(a=>JL(a),mg),this.fa=new Map,this.ga=new Set,this.pa=new $t(ue.comparator),this.ya=new Map,this.wa=new JD,this.Sa={},this.ba=new Map,this.Da=Pc.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function UY(t,e){return Ub.apply(this,arguments)}function Ub(){return Ub=(0,Z.Z)(function*(t,e){const n=uA(t);let r,i;const s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=yield uh(n.localStore,Jr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield Bb(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&_E(n.remoteStore,o)}return i}),Ub.apply(this,arguments)}function Bb(t,e,n,r,i){return jb.apply(this,arguments)}function jb(){return jb=(0,Z.Z)(function*(t,e,n,r,i){t.va=(g,_,y)=>{return(E=(0,Z.Z)(function*(D,M,R,k){let U=M.view.ca(R);U.Zi&&(U=yield hE(D.localStore,M.query,!1).then(({documents:Se})=>M.view.ca(Se,U)));const te=k&&k.targetChanges.get(M.targetId),de=M.view.applyChanges(U,D.isPrimaryClient,te);return Yb(D,M.targetId,de.Ta),de.snapshot}),function w(D,M,R,k){return E.apply(this,arguments)})(t,g,_,y);var E};const s=yield hE(t.localStore,e,!0),o=new U2(e,s.ls),a=o.ca(s.documents),u=Cg.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),d=o.applyChanges(a,t.isPrimaryClient,u);Yb(t,n,d.Ta);const f=new VY(e,n,o);return t.ma.set(e,f),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),d.snapshot}),jb.apply(this,arguments)}function BY(t,e){return $b.apply(this,arguments)}function $b(){return $b=(0,Z.Z)(function*(t,e){const n=oe(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!mg(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ch(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Lg(n.remoteStore,r.targetId),mh(n,r.targetId)}).catch(Ba))):(mh(n,r.targetId),yield ch(n.localStore,r.targetId,!0))}),$b.apply(this,arguments)}function Hb(){return Hb=(0,Z.Z)(function*(t,e,n){const r=cA(t);try{const i=yield function(o,a){const u=oe(o),d=sn.now(),f=a.reduce((y,E)=>y.add(E.key),qe());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=pi(),w=qe();return u.ss.getEntries(y,f).next(D=>{E=D,E.forEach((M,R)=>{R.isValidDocument()||(w=w.add(M))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,E)).next(D=>{g=D;const M=[];for(const R of a){const k=mQ(R,g.get(R.key).overlayedDocument);null!=k&&M.push(new Zo(R.key,k,LL(k.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,M,a)}).next(D=>{_=D;const M=D.applyToLocalDocumentSet(g,w);return u.documentOverlayCache.saveOverlays(y,D.batchId,M)})}).then(()=>({batchId:_.batchId,changes:nF(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.Sa[o.currentUser.toKey()];d||(d=new $t(Le)),d=d.insert(a,u),o.Sa[o.currentUser.toKey()]=d}(r,i.batchId,n),yield Qo(r,i.changes),yield dh(r.remoteStore)}catch(i){const s=fh(i,"Failed to persist write");n.reject(s)}}),Hb.apply(this,arguments)}function B2(t,e){return zb.apply(this,arguments)}function zb(){return zb=(0,Z.Z)(function*(t,e){const n=oe(t);try{const r=yield function aY(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((f,g)=>{const _=i.get(g);if(!_)return;a.push(n.qr.removeMatchingKeys(s,f.removedDocuments,g).next(()=>n.qr.addMatchingKeys(s,f.addedDocuments,g)));let y=_.withSequenceNumber(s.currentSequenceNumber);var w,D,M;null!==e.targetMismatches.get(g)?y=y.withResumeToken(Qn.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(g,y),D=y,M=f,(0===(w=_).resumeToken.approximateByteSize()||D.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8||M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(s,y))});let u=pi(),d=qe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(y2(s,o,e.documentUpdates).next(f=>{u=f.us,d=f.cs})),!r.isEqual(be.min())){const f=n.qr.getLastRemoteSnapshotVersion(s).next(g=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return N.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.ts=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?De(o.Ra):i.removedDocuments.size>0&&(De(o.Ra),o.Ra=!1))}),yield Qo(n,r,e)}catch(r){yield Ba(r)}}),zb.apply(this,arguments)}function j2(t,e,n){const r=oe(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=oe(o);u.onlineState=a;let d=!1;u.queries.forEach((f,g)=>{for(const _ of g.listeners)_.Q_(a)&&(d=!0)}),d&&Lb(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function $Y(t,e,n){return Gb.apply(this,arguments)}function Gb(){return Gb=(0,Z.Z)(function*(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new $t(ue.comparator);o=o.insert(s,Jt.newNoDocument(s,be.min()));const a=qe().add(s),u=new Tg(be.min(),new Map,new $t(Le),o,a);yield B2(r,u),r.pa=r.pa.remove(s),r.ya.delete(e),Jb(r)}else yield ch(r.localStore,e,!1).then(()=>mh(r,e,n)).catch(Ba)}),Gb.apply(this,arguments)}function HY(t,e){return qb.apply(this,arguments)}function qb(){return qb=(0,Z.Z)(function*(t,e){const n=oe(t),r=e.batch.batchId;try{const i=yield function oY(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,d,f){const g=d.batch,_=g.keys();let y=N.resolve();return _.forEach(E=>{y=y.next(()=>f.getEntry(u,E)).next(w=>{const D=d.docVersions.get(E);De(null!==D),w.version.compareTo(D)<0&&(g.applyToRemoteDocument(w,d),w.isValidDocument()&&(w.setReadTime(d.commitVersion),f.addEntry(w)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=qe();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);Qb(n,r,null),Kb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Qo(n,i)}catch(i){yield Ba(i)}}),qb.apply(this,arguments)}function zY(t,e,n){return Wb.apply(this,arguments)}function Wb(){return Wb=(0,Z.Z)(function*(t,e,n){const r=oe(t);try{const i=yield function(o,a){const u=oe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,a).next(g=>(De(null!==g),f=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);Qb(r,e,n),Kb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Qo(r,i)}catch(i){yield Ba(i)}}),Wb.apply(this,arguments)}function Zb(){return Zb=(0,Z.Z)(function*(t,e){const n=oe(t);Xa(n.remoteStore)||re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=oe(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=fh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Zb.apply(this,arguments)}function Kb(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function Qb(t,e,n){const r=oe(t);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function mh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||$2(t,r)})}function $2(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(Lg(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),Jb(t))}function Yb(t,e,n){for(const r of n)r instanceof L2?(t.wa.addReference(r.key,e),qY(t,r)):r instanceof F2?(re("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||$2(t,r.key)):me()}function qY(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(re("SyncEngine","New document in limbo: "+n),t.ga.add(r),Jb(t))}function Jb(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new ue(ht.fromString(e)),r=t.Da.next();t.ya.set(r,new LY(n)),t.pa=t.pa.insert(n,r),_E(t.remoteStore,new Ko(Jr(Kd(n.path)),r,"TargetPurposeLimboResolution",Ri._e))}}function Qo(t,e,n){return Xb.apply(this,arguments)}function Xb(){return Xb=(0,Z.Z)(function*(t,e,n){const r=oe(t),i=[],s=[],o=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,u)=>{o.push(r.va(u,e,n).then(d=>{if((d||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,d?.fromCache?"not-current":"current"),d){i.push(d);const f=rb.Qi(u.targetId,d);s.push(f)}}))}),yield Promise.all(o),r.Va.a_(i),yield(a=(0,Z.Z)(function*(d,f){const g=oe(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>N.forEach(f,y=>N.forEach(y.ki,E=>g.persistence.referenceDelegate.addReference(_,y.targetId,E)).next(()=>N.forEach(y.qi,E=>g.persistence.referenceDelegate.removeReference(_,y.targetId,E)))))}catch(_){if(!ja(_))throw _;re("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of f){const y=_.targetId;if(!_.fromCache){const E=g.ts.get(y),D=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);g.ts=g.ts.insert(y,D)}}}),function u(d,f){return a.apply(this,arguments)})(r.localStore,s))}),Xb.apply(this,arguments)}function WY(t,e){return eA.apply(this,arguments)}function eA(){return eA=(0,Z.Z)(function*(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const r=yield m2(n.localStore,e);n.currentUser=e,(s=n).ba.forEach(a=>{a.forEach(u=>{u.reject(new X(L.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qo(n,r._s)}var s}),eA.apply(this,arguments)}function ZY(t,e){const n=oe(t),r=n.ya.get(e);if(r&&r.Ra)return qe().add(r.key);{let i=qe();const s=n.fa.get(e);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function KY(t,e){return tA.apply(this,arguments)}function tA(){return tA=(0,Z.Z)(function*(t,e){const n=oe(t),r=yield hE(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&Yb(n,e.targetId,i.Ta),i}),tA.apply(this,arguments)}function QY(t,e){return nA.apply(this,arguments)}function nA(){return nA=(0,Z.Z)(function*(t,e){const n=oe(t);return E2(n.localStore,e).then(r=>Qo(n,r))}),nA.apply(this,arguments)}function YY(t,e,n,r){return rA.apply(this,arguments)}function rA(){return rA=(0,Z.Z)(function*(t,e,n,r){const i=oe(t),s=yield function(a,u){const d=oe(a),f=oe(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>f.Cn(g,u).next(_=>_?d.localDocuments.getDocuments(g,_):N.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===n?yield dh(i.remoteStore):"acknowledged"===n||"rejected"===n?(Qb(i,e,r||null),Kb(i,e),u=e,oe(oe(i.localStore).mutationQueue).Fn(u)):me(),yield Qo(i,s)):re("SyncEngine","Cannot apply mutation batch with id: "+e)}),rA.apply(this,arguments)}function iA(){return iA=(0,Z.Z)(function*(t,e){const n=oe(t);if(uA(n),cA(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield H2(n,r.toArray());n.Ca=!0,yield Pb(n.remoteStore,!0);for(const s of i)_E(n.remoteStore,s)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(mh(n,o),ch(n.localStore,o,!0))),Lg(n.remoteStore,o)}),yield i,yield H2(n,r),function(o){const a=oe(o);a.ya.forEach((u,d)=>{Lg(a.remoteStore,d)}),a.wa.Vr(),a.ya=new Map,a.pa=new $t(ue.comparator)}(n),n.Ca=!1,yield Pb(n.remoteStore,!1)}}),iA.apply(this,arguments)}function H2(t,e,n){return sA.apply(this,arguments)}function sA(){return sA=(0,Z.Z)(function*(t,e,n){const r=oe(t),i=[],s=[];for(const o of e){let a;const u=r.fa.get(o);if(u&&0!==u.length){a=yield uh(r.localStore,Jr(u[0]));for(const d of u){const f=r.ma.get(d),g=yield KY(r,f);g.snapshot&&s.push(g.snapshot)}}else{const d=yield v2(r.localStore,o);a=yield uh(r.localStore,d),yield Bb(r,z2(d),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i}),sA.apply(this,arguments)}function z2(t){return KL(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function XY(t){return n=oe(t).localStore,oe(oe(n).persistence).Bi();var n}function eJ(t,e,n,r){return oA.apply(this,arguments)}function oA(){return oA=(0,Z.Z)(function*(t,e,n,r){const i=oe(t);if(i.Ca)return void re("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield E2(i.localStore,XL(s[0])),a=Tg.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Qn.EMPTY_BYTE_STRING);yield Qo(i,o,a);break}case"rejected":yield ch(i.localStore,e,!0),mh(i,e,r);break;default:me()}}),oA.apply(this,arguments)}function tJ(t,e,n){return aA.apply(this,arguments)}function aA(){return aA=(0,Z.Z)(function*(t,e,n){const r=uA(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){re("SyncEngine","Adding an already active target "+i);continue}const s=yield v2(r.localStore,i),o=yield uh(r.localStore,s);yield Bb(r,z2(s),o.targetId,!1,o.resumeToken),_E(r.remoteStore,o)}for(const i of n)r.fa.has(i)&&(yield ch(r.localStore,i,!1).then(()=>{Lg(r.remoteStore,i),mh(r,i)}).catch(Ba))}}),aA.apply(this,arguments)}function uA(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=B2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$Y.bind(null,e),e.Va.a_=MY.bind(null,e.eventManager),e.Va.Fa=NY.bind(null,e.eventManager),e}function cA(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zY.bind(null,e),e}class Fg{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Z.Z)(function*(){n.serializer=kg(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return g2(this.persistence,new p2,e.initialUser,this.serializer)}createPersistence(e){return new XD(cE.jr,this.serializer)}createSharedClientState(e){return new C2}terminate(){var e=this;return(0,Z.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class lA extends Fg{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,Z.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield cA(r.xa.syncEngine),yield dh(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return g2(this.persistence,new p2,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new s2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new SK(n,this.persistence);return new AK(e.asyncQueue,r)}createPersistence(e){const n=nb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Mr.withCacheSize(this.cacheSizeBytes):Mr.DEFAULT;return new tb(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,b2(),mE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new C2}}class G2 extends lA{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,Z.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof db&&(r.sharedClientState.syncEngine={Ys:YY.bind(null,i),Zs:eJ.bind(null,i),Xs:tJ.bind(null,i),Bi:XY.bind(null,i),Js:QY.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var s=(0,Z.Z)(function*(o){yield function JY(t,e){return iA.apply(this,arguments)}(r.xa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const n=b2();if(!db.D(n))throw new X(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=nb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new db(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class _h{initialize(e,n){var r=this;return(0,Z.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>j2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=WY.bind(null,r.syncEngine),yield Pb(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new xY}createDatastore(e){const n=kg(e.databaseInfo.databaseId),r=new pY(e.databaseInfo);return new _Y(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>j2(this.syncEngine,n,0),a=D2.D()?new D2:new dY,new EY(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,d,f){const g=new FY(i,s,o,a,u,d);return f&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,Z.Z)(function*(r){const i=oe(r);re("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield lh(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function q2(t,e=10240){let n=0;return{read:()=>(0,Z.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,Z.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class vE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Cn("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class iJ{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Kn,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,Z.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,Z.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,Z.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const s=yield e.Ka(i);return new OY(JSON.parse(s),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,Z.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,Z.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,Z.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class sJ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Z.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new X(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Z.Z)(function*(o,a){const u=oe(o),d=bg(u.serializer)+"/documents",f={documents:a.map(E=>Dg(u.serializer,E))},g=yield u.Co("BatchGetDocuments",d,f,a.length),_=new Map;g.forEach(E=>{const w=function bQ(t,e){return"found"in e?function(r,i){De(!!i.found);const s=fo(r,i.found.name),o=Dn(i.found.updateTime),a=i.found.createTime?Dn(i.found.createTime):be.min(),u=new gr({mapValue:{fields:i.found.fields}});return Jt.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){De(!!i.missing),De(!!i.readTime);const s=fo(r,i.missing),o=Dn(i.readTime);return Jt.newNoDocument(s,o)}(t,e):me()}(u.serializer,E);_.set(w.key.toString(),w)});const y=[];return a.forEach(E=>{const w=_.get(E.toString());De(!!w),y.push(w)}),y}),function s(o,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new th(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Z.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=ue.fromPath(i);e.mutations.push(new kD(s,e.precondition(s)))}),yield(r=(0,Z.Z)(function*(s,o){const a=oe(s),u=bg(a.serializer)+"/documents",d={writes:o.map(f=>Ag(a.serializer,f))};yield a.wo("Commit",u,d)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw me();n=be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new X(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(be.min())?on.exists(!1):on.updateTime(n):on.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(be.min()))throw new X(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return on.updateTime(n)}return on.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class oJ{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new fb(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,Z.Z)(function*(){const n=new sJ(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.ja(s)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!ug(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!_F(n)}return!1}}class aJ{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=nr.UNAUTHENTICATED,this.clientId=fL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,Z.Z)(function*(a){re("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(re("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,Z.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new X(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Z.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=fh(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function EE(t,e){return dA.apply(this,arguments)}function dA(){return dA=(0,Z.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,Z.Z)(function*(s){r.isEqual(s)||(yield m2(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),dA.apply(this,arguments)}function hA(t,e){return fA.apply(this,arguments)}function fA(){return fA=(0,Z.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield pA(t);re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>N2(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>N2(e.remoteStore,s)),t._onlineComponents=e}),fA.apply(this,arguments)}function W2(t){return"FirebaseError"===t.name?t.code===L.FAILED_PRECONDITION||t.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function pA(t){return gA.apply(this,arguments)}function gA(){return gA=(0,Z.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{yield EE(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!W2(n))throw n;hi("Error using user provided cache. Falling back to memory cache: "+n),yield EE(t,new Fg)}}else re("FirestoreClient","Using default OfflineComponentProvider"),yield EE(t,new Fg);return t._offlineComponents}),gA.apply(this,arguments)}function IE(t){return mA.apply(this,arguments)}function mA(){return mA=(0,Z.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),yield hA(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),yield hA(t,new _h))),t._onlineComponents}),mA.apply(this,arguments)}function Z2(t){return pA(t).then(e=>e.persistence)}function yh(t){return pA(t).then(e=>e.localStore)}function K2(t){return IE(t).then(e=>e.remoteStore)}function _A(t){return IE(t).then(e=>e.syncEngine)}function vh(t){return yA.apply(this,arguments)}function yA(){return yA=(0,Z.Z)(function*(t){const e=yield IE(t),n=e.eventManager;return n.onListen=UY.bind(null,e.syncEngine),n.onUnlisten=BY.bind(null,e.syncEngine),n}),yA.apply(this,arguments)}function Y2(t,e,n={}){const r=new Kn;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function(s,o,a,u,d){const f=new vE({next:_=>{o.enqueueAndForget(()=>kb(s,g));const y=_.docs.has(a);!y&&_.fromCache?d.reject(new X(L.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&_.fromCache&&u&&"server"===u.source?d.reject(new X(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new Fb(Kd(a.path),f,{includeMetadataChanges:!0,J_:!0});return Nb(s,g)}(yield vh(t),t.asyncQueue,e,n,r)})),r.promise}function J2(t,e,n={}){const r=new Kn;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function(s,o,a,u,d){const f=new vE({next:_=>{o.enqueueAndForget(()=>kb(s,g)),_.fromCache&&"server"===u.source?d.reject(new X(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new Fb(a,f,{includeMetadataChanges:!0,J_:!0});return Nb(s,g)}(yield vh(t),t.asyncQueue,e,n,r)})),r.promise}function X2(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const eU=new Map;function vA(t,e,n){if(!n)throw new X(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tU(t,e,n,r){if(!0===e&&!0===r)throw new X(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function nU(t){if(!ue.isDocumentKey(t))throw new X(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rU(t){if(ue.isDocumentKey(t))throw new X(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wE(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":me()}function nt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wE(t);throw new X(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function iU(t,e){if(e<=0)throw new X(L.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class sU{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new X(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new X(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=X2(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new X(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new X(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new X(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ug{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new X(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new X(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sU(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new gK;switch(r.type){case"firstParty":return new vK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=eU.get(n);r&&(re("ComponentProvider","Removing Datastore"),eU.delete(n),r.terminate())}(this),Promise.resolve()}}class mr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mr(this.firestore,e,this._query)}}class Xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new po(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xt(this.firestore,e,this._key)}}class po extends mr{constructor(e,n,r){super(e,n,Kd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new ue(e))}withConverter(e){return new po(this.firestore,e,this._path)}}function aU(t,e,...n){if(t=(0,kt.m9)(t),vA("collection","path",e),t instanceof Ug){const r=ht.fromString(e,...n);return rU(r),new po(t,null,r)}{if(!(t instanceof Xt||t instanceof po))throw new X(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ht.fromString(e,...n));return rU(r),new po(t.firestore,null,r)}}function TE(t,e,...n){if(t=(0,kt.m9)(t),1===arguments.length&&(e=fL.newId()),vA("doc","path",e),t instanceof Ug){const r=ht.fromString(e,...n);return nU(r),new Xt(t,null,new ue(r))}{if(!(t instanceof Xt||t instanceof po))throw new X(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ht.fromString(e,...n));return nU(r),new Xt(t.firestore,t instanceof po?t.converter:null,new ue(r))}}function uU(t,e){return t=(0,kt.m9)(t),e=(0,kt.m9)(e),(t instanceof Xt||t instanceof po)&&(e instanceof Xt||e instanceof po)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function EA(t,e){return t=(0,kt.m9)(t),e=(0,kt.m9)(e),t instanceof mr&&e instanceof mr&&t.firestore===e.firestore&&mg(t._query,e._query)&&t.converter===e.converter}class vJ{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new fb(this,"async_queue_retry"),this.iu=()=>{const n=mE();n&&re("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=mE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=mE();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Kn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Z.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!ja(n))throw n;re("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,Cn("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=Mb.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&me()}verifyOperationInProgress(){}uu(){var e=this;return(0,Z.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function IA(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class EJ{constructor(){this._progressObserver={},this._taskCompletionResolver=new Kn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ht extends Ug{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new vJ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||cU(this),this._firestoreClient.terminate()}}function _n(t){return t._firestoreClient||cU(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function cU(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new KK(t._databaseId,u,t._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,X2(f.experimentalLongPollingOptions),f.useFetchStreams));var u,f;t._firestoreClient=new aJ(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function lU(t,e,n){const r=new Kn;return t.asyncQueue.enqueue((0,Z.Z)(function*(){try{yield EE(t,n),yield hA(t,e),r.resolve()}catch(i){const s=i;if(!W2(s))throw s;hi("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function dU(t){if(t._initialized||t._terminated)throw new X(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class go{constructor(e){this._byteString=e}static fromBase64String(e){try{return new go(Qn.fromBase64String(e))}catch(n){throw new X(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new go(Qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Yo{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new X(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Mc{constructor(e){this._methodName=e}}class CE{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}const xJ=/^__.*__$/;class MJ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Zo(e,this.data,this.fieldMask,n,this.fieldTransforms):new eh(e,this.data,n,this.fieldTransforms)}}class hU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fU(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me()}}class DE{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new DE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return SE(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(fU(this.Iu)&&xJ.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class NJ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kg(e)}pu(e,n,r,i=!1){return new DE({Iu:e,methodName:n,gu:r,path:Yt.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nc(t){const e=t._freezeSettings(),n=kg(t._databaseId);return new NJ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bE(t,e,n,r,i,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);DA("Data must be an object, but it was:",o,r);const a=mU(r,o);let u,d;if(s.merge)u=new fi(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const g of s.mergeFields){const _=$g(e,g,n);if(!o.contains(_))throw new X(L.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);yU(f,_)||f.push(_)}u=new fi(f),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new MJ(new gr(a),u,d)}class jg extends Mc{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jg}}function pU(t,e,n){return new DE({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class wA extends Mc{_toFieldTransform(e){return new Eg(e.path,new Jd)}isEqual(e){return e instanceof wA}}class OJ extends Mc{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=pU(this,e,!0),r=this.yu.map(s=>Oc(s,n)),i=new Tc(r);return new Eg(e.path,i)}isEqual(e){return this===e}}class kJ extends Mc{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=pU(this,e,!0),r=this.yu.map(s=>Oc(s,n)),i=new Cc(r);return new Eg(e.path,i)}isEqual(e){return this===e}}class VJ extends Mc{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new Xd(e.serializer,oF(e.serializer,this.wu));return new Eg(e.path,n)}isEqual(e){return this===e}}function TA(t,e,n,r){const i=t.pu(1,e,n);DA("Data must be an object, but it was:",i,r);const s=[],o=gr.empty();$a(r,(u,d)=>{const f=AE(e,u,n);d=(0,kt.m9)(d);const g=i.Ru(f);if(d instanceof jg)s.push(f);else{const _=Oc(d,g);null!=_&&(s.push(f),o.set(f,_))}});const a=new fi(s);return new hU(o,a,i.fieldTransforms)}function CA(t,e,n,r,i,s){const o=t.pu(1,e,n),a=[$g(e,r,n)],u=[i];if(s.length%2!=0)throw new X(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push($g(e,s[_])),u.push(s[_+1]);const d=[],f=gr.empty();for(let _=a.length-1;_>=0;--_)if(!yU(d,a[_])){const y=a[_];let E=u[_];E=(0,kt.m9)(E);const w=o.Ru(y);if(E instanceof jg)d.push(y);else{const D=Oc(E,w);null!=D&&(d.push(y),f.set(y,D))}}const g=new fi(d);return new hU(f,g,o.fieldTransforms)}function gU(t,e,n,r=!1){return Oc(n,t.pu(r?4:3,e))}function Oc(t,e){if(_U(t=(0,kt.m9)(t)))return DA("Unsupported field value:",e,t),mU(t,e);if(t instanceof Mc)return function(r,i){if(!fU(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Oc(a,i.Vu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if(null===(r=(0,kt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return oF(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=sn.fromDate(r);return{timestampValue:nh(i.serializer,s)}}if(r instanceof sn){const s=new sn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nh(i.serializer,s)}}if(r instanceof CE)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof go)return{bytesValue:AF(i.serializer,r._byteString)};if(r instanceof Xt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:jD(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${wE(r)}`)}(t,e)}function mU(t,e){const n={};return SL(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$a(t,(r,i)=>{const s=Oc(i,e.Eu(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function _U(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof sn||t instanceof CE||t instanceof go||t instanceof Xt||t instanceof Mc)}function DA(t,e,n){if(!_U(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=wE(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function $g(t,e,n){if((e=(0,kt.m9)(e))instanceof Yo)return e._internalPath;if("string"==typeof e)return AE(t,e);throw SE("Field path arguments must be of type string or ",t,!1,void 0,n)}const LJ=new RegExp("[~\\*/\\[\\]]");function AE(t,e,n){if(e.search(LJ)>=0)throw SE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yo(...e.split("."))._internalPath}catch{throw SE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function SE(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new X(L.INVALID_ARGUMENT,a+t+u)}function yU(t,e){return t.some(n=>n.isEqual(e))}class Hg{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new FJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(RE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class FJ extends Hg{data(){return super.data()}}function RE(t,e){return"string"==typeof e?AE(t,e):e instanceof Yo?e._internalPath:e._delegate._internalPath}function vU(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new X(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bA{}class zg extends bA{}function tu(t,e,...n){let r=[];e instanceof bA&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Eh).length,a=s.filter(u=>u instanceof Gg).length;if(o>1||o>0&&a>0)throw new X(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Gg extends zg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Gg(e,n,r)}_apply(e){const n=this._parse(e);return TU(e._query,n),new mr(e.firestore,e.converter,ND(e._query,n))}_parse(e){const n=Nc(e.firestore);return function(s,o,a,u,d,f,g){let _;if(d.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new X(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){wU(g,f);const y=[];for(const E of g)y.push(IU(u,s,E));_={arrayValue:{values:y}}}else _=IU(u,s,g)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||wU(g,f),_=gU(a,"where",g,"in"===f||"not-in"===f);return it.create(d,f,_)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Eh extends bA{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Eh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:At.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)TU(o,u),o=ND(o,u)}(e._query,n),new mr(e.firestore,e.converter,ND(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class AA extends zg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new AA(e,n)}_apply(e){const n=function(i,s,o){if(null!==i.startAt)throw new X(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new X(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pg(s,o)}(e._query,this._field,this._direction);return new mr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new qo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class PE extends zg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new PE(e,n,r)}_apply(e){return new mr(e.firestore,e.converter,Qv(e._query,this._limit,this._limitType))}}class xE extends zg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new xE(e,n,r)}_apply(e){const n=EU(e,this.type,this._docOrFields,this._inclusive);return new mr(e.firestore,e.converter,(s=n,new qo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class ME extends zg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new ME(e,n,r)}_apply(e){const n=EU(e,this.type,this._docOrFields,this._inclusive);return new mr(e.firestore,e.converter,(s=n,new qo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function EU(t,e,n,r){if(n[0]=(0,kt.m9)(n[0]),n[0]instanceof Hg)return function(s,o,a,u,d){if(!u)throw new X(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const g of Qd(s))if(g.field.isKeyField())f.push(Ic(o,u.key));else{const _=u.data.field(g.field);if(Hv(_))throw new X(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const y=g.field.canonicalString();throw new X(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(_)}return new Za(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Nc(t.firestore);return function(o,a,u,d,f,g){const _=o.explicitOrderBy;if(f.length>_.length)throw new X(L.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let E=0;E<f.length;E++){const w=f[E];if(_[E].field.isKeyField()){if("string"!=typeof w)throw new X(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof w}`);if(!MD(o)&&-1!==w.indexOf("/"))throw new X(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${w}' contains a slash.`);const D=o.path.child(ht.fromString(w));if(!ue.isDocumentKey(D))throw new X(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);const M=new ue(D);y.push(Ic(a,M))}else{const D=gU(u,d,w);y.push(D)}}return new Za(y,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function IU(t,e,n){if("string"==typeof(n=(0,kt.m9)(n))){if(""===n)throw new X(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MD(e)&&-1!==n.indexOf("/"))throw new X(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ht.fromString(n));if(!ue.isDocumentKey(r))throw new X(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ic(t,new ue(r))}if(n instanceof Xt)return Ic(t,n._key);throw new X(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wE(n)}.`)}function wU(t,e){if(!Array.isArray(t)||0===t.length)throw new X(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TU(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new X(L.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class SA{convertValue(e,n="none"){switch(qa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw me()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $a(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new CE(mn(e.latitude),mn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zv(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(lg(e));default:return null}}convertTimestamp(e){const n=Ha(e);return new sn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ht.fromString(e);De(LF(r));const i=new za(r.get(1),r.get(3)),s=new ue(r.popFirst(5));return i.isEqual(n)||Cn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function NE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class WJ extends SA{constructor(e){super(),this.firestore=e}convertBytes(e){return new go(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}}class kc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jo extends Hg{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(RE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class qg extends Jo{data(e={}){return super.data(e)}}class nu{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new kc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qg(this._firestore,this._userDataWriter,r.key,r,new kc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new qg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new kc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new qg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new kc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:KJ(a.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function KJ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me()}}function DU(t,e){return t instanceof Jo&&e instanceof Jo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof nu&&e instanceof nu&&t._firestore===e._firestore&&EA(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class ru extends SA{constructor(e){super(),this.firestore=e}convertBytes(e){return new go(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}}function bU(t,e,n){t=nt(t,Xt);const r=nt(t.firestore,Ht),i=NE(t.converter,e,n);return Ih(r,[bE(Nc(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,on.none())])}function AU(t,e,n,...r){t=nt(t,Xt);const i=nt(t.firestore,Ht),s=Nc(i);let o;return o="string"==typeof(e=(0,kt.m9)(e))||e instanceof Yo?CA(s,"updateDoc",t._key,e,n,r):TA(s,"updateDoc",t._key,e),Ih(i,[o.toMutation(t._key,on.exists(!0))])}function SU(t,...e){var n,r,i;t=(0,kt.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||IA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(IA(e[o])){const g=e[o];e[o]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,d,f;if(t instanceof Xt)d=nt(t.firestore,Ht),f=Kd(t._key.path),u={next:g=>{e[o]&&e[o](RA(d,t,g))},error:e[o+1],complete:e[o+2]};else{const g=nt(t,mr);d=nt(g.firestore,Ht),f=g._query;const _=new ru(d);u={next:y=>{e[o]&&e[o](new nu(d,_,g,y))},error:e[o+1],complete:e[o+2]},vU(t._query)}return function(_,y,E,w){const D=new vE(w),M=new Fb(y,D,E);return _.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return Nb(yield vh(_),M)})),()=>{D.Na(),_.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return kb(yield vh(_),M)}))}}(_n(d),f,a,u)}function Ih(t,e){return function(r,i){const s=new Kn;return r.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function jY(t,e,n){return Hb.apply(this,arguments)}(yield _A(r),i,s)})),s.promise}(_n(t),e)}function RA(t,e,n){const r=n.docs.get(e._key),i=new ru(t);return new Jo(t,i,e._key,r,new kc(n.hasPendingWrites,n.fromCache),e.converter)}const fX={maxAttempts:5};class RU{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Nc(e)}set(e,n,r){this._verifyNotCommitted();const i=iu(e,this._firestore),s=NE(i.converter,n,r),o=bE(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,on.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=iu(e,this._firestore);let o;return o="string"==typeof(n=(0,kt.m9)(n))||n instanceof Yo?CA(this._dataReader,"WriteBatch.update",s._key,n,r,i):TA(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=iu(e,this._firestore);return this._mutations=this._mutations.concat(new th(n._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new X(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function iu(t,e){if((t=(0,kt.m9)(t)).firestore!==e)throw new X(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class pX extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Nc(n)}get(n){const r=iu(n,this._firestore),i=new WJ(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return me();const o=s[0];if(o.isFoundDocument())return new Hg(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Hg(this._firestore,i,r._key,null,r.converter);throw me()})}set(n,r,i){const s=iu(n,this._firestore),o=NE(s.converter,r,i),a=bE(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=iu(n,this._firestore);let a;return a="string"==typeof(r=(0,kt.m9)(r))||r instanceof Yo?CA(this._dataReader,"Transaction.update",o._key,r,i,s):TA(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=iu(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=iu(e,this._firestore),r=new ru(this._firestore);return super.get(e).then(i=>new Jo(this._firestore,r,n._key,i._document,new kc(!1,!1),n.converter))}}function xA(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new X("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function NU(){if(typeof Uint8Array>"u")throw new X("unimplemented","Uint8Arrays are not available in this environment.")}function OU(){if(!function WK(){return typeof atob<"u"}())throw new X("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){jd=xd.SDK_VERSION,(0,xd._registerComponent)(new W1.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ht(new _K(r.getProvider("auth-internal")),new EK(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new X(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new za(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,xd.registerVersion)(lL,"4.3.2",e),(0,xd.registerVersion)(lL,"4.3.2","esm2017")}();class Wg{constructor(e){this._delegate=e}static fromBase64String(e){return OU(),new Wg(go.fromBase64String(e))}static fromUint8Array(e){return NU(),new Wg(go.fromUint8Array(e))}toBase64(){return OU(),this._delegate.toBase64()}toUint8Array(){return NU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function MA(t){return function CX(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class DX{enableIndexedDbPersistence(e,n){return function wJ(t,e){dU(t=nt(t,Ht));const n=_n(t);if(n._uninitializedComponentsProvider)throw new X(L.FAILED_PRECONDITION,"SDK cache is already specified.");hi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new _h;return lU(n,i,new lA(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function TJ(t){dU(t=nt(t,Ht));const e=_n(t);if(e._uninitializedComponentsProvider)throw new X(L.FAILED_PRECONDITION,"SDK cache is already specified.");hi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new _h;return lU(e,r,new G2(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function CJ(t){if(t._initialized&&!t._terminated)throw new X(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Kn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,Z.Z)(function*(){try{yield(n=(0,Z.Z)(function*(i){if(!bs.D())return Promise.resolve();const s=i+"main";yield bs.delete(s)}),function r(i){return n.apply(this,arguments)})(nb(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class kU{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof za||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&hi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function oU(t,e,n,r={}){var i;const s=(t=nt(t,Ug))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&hi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=nr.MOCK_USER;else{a=(0,kt.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new X(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new nr(d)}t._authCredentials=new mK(new dL(a,u))}}(this._delegate,e,n,r)}enableNetwork(){return function bJ(t){return function uJ(t){return t.asyncQueue.enqueue((0,Z.Z)(function*(){const e=yield Z2(t),n=yield K2(t);return e.setNetworkEnabled(!0),function(i){const s=oe(i);return s.C_.delete(0),Vg(s)}(n)}))}(_n(t=nt(t,Ht)))}(this._delegate)}disableNetwork(){return function AJ(t){return function cJ(t){return t.asyncQueue.enqueue((0,Z.Z)(function*(){const e=yield Z2(t),n=yield K2(t);return e.setNetworkEnabled(!1),(r=(0,Z.Z)(function*(s){const o=oe(s);o.C_.add(0),yield lh(o),o.M_.set("Offline")}),function i(s){return r.apply(this,arguments)})(n);var r}))}(_n(t=nt(t,Ht)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,tU("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function DJ(t){return function(n){const r=new Kn;return n.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function GY(t,e){return Zb.apply(this,arguments)}(yield _A(n),r)})),r.promise}(_n(t=nt(t,Ht)))}(this._delegate)}onSnapshotsInSync(e){return function iX(t,e){return function hJ(t,e){const n=new vE(e);return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return i=yield vh(t),s=n,oe(i).q_.add(s),void s.next();var i,s})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return i=yield vh(t),s=n,void oe(i).q_.delete(s);var i,s}))}}(_n(t=nt(t,Ht)),IA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new X("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new wh(this,aU(this._delegate,e))}catch(n){throw Xr(n,"collection()","Firestore.collection()")}}doc(e){try{return new ts(this,TE(this._delegate,e))}catch(n){throw Xr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ei(this,function yJ(t,e){if(t=nt(t,Ug),vA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new X(L.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new mr(t,null,(r=e,new qo(ht.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw Xr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function gX(t,e,n){t=nt(t,Ht);const r=Object.assign(Object.assign({},fX),n);return function(s){if(s.maxAttempts<1)throw new X(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new Kn;return s.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){const d=yield function Q2(t){return IE(t).then(e=>e.datastore)}(s);new oJ(s.asyncQueue,d,a,o,u).run()})),u.promise}(_n(t),i=>e(new pX(t,i)),r)}(this._delegate,n=>e(new VU(this,n)))}batch(){return _n(this._delegate),new LU(new RU(this._delegate,e=>Ih(this._delegate,e)))}loadBundle(e){return function SJ(t,e){const n=_n(t=nt(t,Ht)),r=new EJ;return function fJ(t,e,n,r){const i=function(o,a){let u;return u="string"==typeof o?vF().encode(o):o,f=function(f,g){if(f instanceof Uint8Array)return q2(f,g);if(f instanceof ArrayBuffer)return q2(new Uint8Array(f),g);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new iJ(f,a);var f}(n,kg(e));t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){!function nJ(t,e,n){const r=oe(t);var i;(i=(0,Z.Z)(function*(o,a,u){try{const d=yield a.getMetadata();if(yield function(E,w){const D=oe(E),M=Dn(w.createTime);return D.persistence.runTransaction("hasNewerBundle","readonly",R=>D.Kr.getBundleMetadata(R,w.id)).then(R=>!!R&&R.createTime.compareTo(M)>=0)}(o.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(E=d).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);u._updateProgress(V2(d));const f=new kY(d,o.localStore,a.serializer);let g=yield a.Ma();for(;g;){const y=yield f.ea(g);y&&u._updateProgress(y),g=yield a.Ma()}const _=yield f.complete();return yield Qo(o,_.ra,void 0),yield function(E,w){const D=oe(E);return D.persistence.runTransaction("Save bundle","readwrite",M=>D.Kr.saveBundleMetadata(M,w))}(o.localStore,d),u._completeWith(_.progress),Promise.resolve(_.na)}catch(d){return hi("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var E}),function s(o,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield _A(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function RJ(t,e){return function pJ(t,e){return t.asyncQueue.enqueue((0,Z.Z)(function*(){return function(r,i){const s=oe(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield yh(t),e)}))}(_n(t=nt(t,Ht)),e).then(n=>n?new mr(t,null,n.query):null)}(this._delegate,e).then(n=>n?new ei(this,n):null)}}class kE extends SA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wg(new go(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return ts.forKey(n,this.firestore,null)}}class VU{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new kE(e)}get(e){const n=Lc(e);return this._delegate.get(n).then(r=>new Zg(this._firestore,new Jo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Lc(e);return r?(xA("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Lc(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Lc(e);return this._delegate.delete(n),this}}class LU{constructor(e){this._delegate=e}set(e,n,r){const i=Lc(e);return r?(xA("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Lc(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Lc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Vc{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new qg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Kg(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Vc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Vc(e,new kE(e),n),i.set(n,s)),s}}Vc.INSTANCES=new WeakMap;class ts{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new kE(e)}static forPath(e,n,r){if(e.length%2!=0)throw new X("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ts(n,new Xt(n._delegate,r,new ue(e)))}static forKey(e,n,r){return new ts(n,new Xt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new wh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new wh(this.firestore,aU(this._delegate,e))}catch(n){throw Xr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,kt.m9)(e))instanceof Xt&&uU(this._delegate,e)}set(e,n){n=xA("DocumentReference.set",n);try{return n?bU(this._delegate,e,n):bU(this._delegate,e)}catch(r){throw Xr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?AU(this._delegate,e):AU(this._delegate,e,n,...r)}catch(i){throw Xr(i,"updateDoc()","DocumentReference.update()")}}delete(){return function nX(t){return Ih(nt(t.firestore,Ht),[new th(t._key,on.none())])}(this._delegate)}onSnapshot(...e){const n=FU(e),r=UU(e,i=>new Zg(this.firestore,new Jo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return SU(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function YJ(t){t=nt(t,Xt);const e=nt(t.firestore,Ht),n=_n(e),r=new ru(e);return function lJ(t,e){const n=new Kn;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return(r=(0,Z.Z)(function*(s,o,a){try{const u=yield function(f,g){const _=oe(f);return _.persistence.runTransaction("read document","readonly",y=>_.localDocuments.getDocument(y,g))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new X(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=fh(u,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield yh(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Jo(e,r,t._key,i,new kc(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function JJ(t){t=nt(t,Xt);const e=nt(t.firestore,Ht);return Y2(_n(e),t._key,{source:"server"}).then(n=>RA(e,t,n))}(this._delegate):function QJ(t){t=nt(t,Xt);const e=nt(t.firestore,Ht);return Y2(_n(e),t._key).then(n=>RA(e,t,n))}(this._delegate),n.then(r=>new Zg(this.firestore,new Jo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ts(this.firestore,this._delegate.withConverter(e?Vc.getInstance(this.firestore,e):null))}}function Xr(t,e,n){return t.message=t.message.replace(e,n),t}function FU(t){for(const e of t)if("object"==typeof e&&!MA(e))return e;return{}}function UU(t,e){var n,r;let i;return i=MA(t[0])?t[0]:MA(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Zg{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new ts(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return DU(this._delegate,e._delegate)}}class Kg extends Zg{data(e){const n=this._delegate.data(e);return this._delegate._converter||function pK(t,e){t||me()}(void 0!==n),n}}class ei{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new kE(e)}where(e,n,r){try{return new ei(this.firestore,tu(this._delegate,function UJ(t,e,n){const r=e,i=RE("where",t);return Gg._create(i,r,n)}(e,n,r)))}catch(i){throw Xr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new ei(this.firestore,tu(this._delegate,function BJ(t,e="asc"){const n=e,r=RE("orderBy",t);return AA._create(r,n)}(e,n)))}catch(r){throw Xr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ei(this.firestore,tu(this._delegate,function jJ(t){return iU("limit",t),PE._create("limit",t,"F")}(e)))}catch(n){throw Xr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new ei(this.firestore,tu(this._delegate,function $J(t){return iU("limitToLast",t),PE._create("limitToLast",t,"L")}(e)))}catch(n){throw Xr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ei(this.firestore,tu(this._delegate,function HJ(...t){return xE._create("startAt",t,!0)}(...e)))}catch(n){throw Xr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ei(this.firestore,tu(this._delegate,function zJ(...t){return xE._create("startAfter",t,!1)}(...e)))}catch(n){throw Xr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ei(this.firestore,tu(this._delegate,function GJ(...t){return ME._create("endBefore",t,!1)}(...e)))}catch(n){throw Xr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ei(this.firestore,tu(this._delegate,function qJ(...t){return ME._create("endAt",t,!0)}(...e)))}catch(n){throw Xr(n,"endAt()","Query.endAt()")}}isEqual(e){return EA(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function eX(t){t=nt(t,mr);const e=nt(t.firestore,Ht),n=_n(e),r=new ru(e);return function dJ(t,e){const n=new Kn;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return(r=(0,Z.Z)(function*(s,o,a){try{const u=yield hE(s,o,!0),d=new U2(o,u.ls),f=d.ca(u.documents),g=d.applyChanges(f,!1);a.resolve(g.snapshot)}catch(u){const d=fh(u,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield yh(t),e,n);var r})),n.promise}(n,t._query).then(i=>new nu(e,r,t,i))}(this._delegate):"server"===e?.source?function tX(t){t=nt(t,mr);const e=nt(t.firestore,Ht),n=_n(e),r=new ru(e);return J2(n,t._query,{source:"server"}).then(i=>new nu(e,r,t,i))}(this._delegate):function XJ(t){t=nt(t,mr);const e=nt(t.firestore,Ht),n=_n(e),r=new ru(e);return vU(t._query),J2(n,t._query).then(i=>new nu(e,r,t,i))}(this._delegate),n.then(r=>new NA(this.firestore,new nu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=FU(e),r=UU(e,i=>new NA(this.firestore,new nu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return SU(this._delegate,n,r)}withConverter(e){return new ei(this.firestore,this._delegate.withConverter(e?Vc.getInstance(this.firestore,e):null))}}class AX{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Kg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class NA{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new ei(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Kg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new AX(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Kg(this._firestore,r))})}isEqual(e){return DU(this._delegate,e._delegate)}}class wh extends ei{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ts(this.firestore,e):null}doc(e){try{return new ts(this.firestore,void 0===e?TE(this._delegate):TE(this._delegate,e))}catch(n){throw Xr(n,"doc()","CollectionReference.doc()")}}add(e){return function rX(t,e){const n=nt(t.firestore,Ht),r=TE(t),i=NE(t.converter,e);return Ih(n,[bE(Nc(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new ts(this.firestore,n))}isEqual(e){return uU(this._delegate,e._delegate)}withConverter(e){return new wh(this.firestore,this._delegate.withConverter(e?Vc.getInstance(this.firestore,e):null))}}function Lc(t){return nt(t,Xt)}class OA{constructor(...e){this._delegate=new Yo(...e)}static documentId(){return new OA(Yt.keyField().canonicalString())}isEqual(e){return(e=(0,kt.m9)(e))instanceof Yo&&this._delegate._internalPath.isEqual(e._internalPath)}}class Fc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function _X(){return new wA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Fc(e)}static delete(){const e=function mX(){return new jg("deleteField")}();return e._methodName="FieldValue.delete",new Fc(e)}static arrayUnion(...e){const n=function yX(...t){return new OJ("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new Fc(n)}static arrayRemove(...e){const n=function vX(...t){return new kJ("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new Fc(n)}static increment(e){const n=function EX(t){return new VJ("increment",t)}(e);return n._methodName="FieldValue.increment",new Fc(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const SX={Firestore:kU,GeoPoint:CE,Timestamp:sn,Blob:Wg,Transaction:VU,WriteBatch:LU,DocumentReference:ts,DocumentSnapshot:Zg,Query:ei,QueryDocumentSnapshot:Kg,QuerySnapshot:NA,CollectionReference:wh,FieldPath:OA,FieldValue:Fc,setLogLevel:function bX(t){!function fK(t){Ua.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function BU(t,e){return function xX(t,e=x1){return new rt(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function kA(t,e){return BU(t,e).pipe(_e(n=>({payload:n,type:"query"})))}!function PX(t){(function RX(t,e){t.INTERNAL.registerComponent(new W1.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},SX)))})(t,(e,n)=>new kU(e,n,new DX)),t.registerVersion("@firebase/firestore-compat","0.3.22")}(io.Z);class jU{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=WU(r,n);return new zU(i,s,this.afs)}snapshotChanges(){return function MX(t,e){return BU(t,e).pipe(zy(void 0),xC(),_e(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(bi)}valueChanges(e={}){return this.snapshotChanges().pipe(_e(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return A(this.ref.get(e)).pipe(bi)}}function VE(t,e){return kA(t,e).pipe(zy(void 0),xC(),_e(n=>{const[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=s.find(g=>g.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function $U(t,e,n){return VE(t,n).pipe(qy((r,i)=>function NX(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function OX(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return VA(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return VA(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return VA(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),Wt(),_e(r=>r.map(i=>({type:i.type,payload:i}))))}function VA(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function HU(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class zU{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=VE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(_e(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(zy(void 0),xC(),ws(([r,i])=>i.length>0||!r),_e(([,r])=>r),bi)}auditTrail(e){return this.stateChanges(e).pipe(qy((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=HU(e);return $U(this.query,n,this.afs.schedulers.outsideAngular).pipe(bi)}valueChanges(e={}){return kA(this.query,this.afs.schedulers.outsideAngular).pipe(_e(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),bi)}get(e){return A(this.query.get(e)).pipe(bi)}add(e){return this.ref.add(e)}doc(e){return new jU(this.ref.doc(e),this.afs)}}class kX{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?VE(this.query,this.afs.schedulers.outsideAngular).pipe(_e(n=>n.filter(r=>e.indexOf(r.type)>-1)),ws(n=>n.length>0),bi):VE(this.query,this.afs.schedulers.outsideAngular).pipe(bi)}auditTrail(e){return this.stateChanges(e).pipe(qy((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=HU(e);return $U(this.query,n,this.afs.schedulers.outsideAngular).pipe(bi)}valueChanges(e={}){return kA(this.query,this.afs.schedulers.outsideAngular).pipe(_e(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),bi)}get(e){return A(this.query.get(e)).pipe(bi)}}const GU=new ce("angularfire2.enableFirestorePersistence"),qU=new ce("angularfire2.firestore.persistenceSettings"),VX=new ce("angularfire2.firestore.settings"),LX=new ce("angularfire2.firestore.use-emulator");function WU(t,e=(n=>n)){return{query:e(t),ref:t}}let LE=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,d,f,g,_,y,E,w,D,M,R){this.schedulers=u;const k=RC(n,a,r),U=f;g&&q1(k,a,_,E,w,D,y,M),[this.firestore,this.persistenceEnabled$]=V1(`${k.name}.firestore`,"AngularFirestore",k.name,()=>{const te=a.runOutsideAngular(()=>k.firestore());if(s&&te.settings(s),U&&te.useEmulator(...U),i&&!Fy(o)){const de=()=>{try{return A(te.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(Se){return typeof console<"u"&&console.warn(Se),W(!1)}};return[te,a.runOutsideAngular(de)]}return[te,W(!1)]},[s,U,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=WU(i,r),a=this.schedulers.ngZone.run(()=>s);return new zU(a,o,this)}collectionGroup(n,r){const i=r||(o=>o),s=this.firestore.collectionGroup(n);return new kX(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new jU(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(se(dv),se(hv,8),se(GU,8),se(VX,8),se(Mo),se(wt),se(O1),se(qU,8),se(LX,8),se(PC,8),se(B1,8),se(j1,8),se($1,8),se(H1,8),se(z1,8),se(G1,8),se(M1,8))};static \u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),ZU=(()=>{class t{constructor(){io.Z.registerVersion("angularfire",SC.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:GU,useValue:!0},{provide:qU,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Dr({type:t});static \u0275inj=wr({providers:[LE]})}return t})(),FE=(()=>{class t{constructor(n,r){this.afAuth=n,this.firestore=r,this.currentUserSubject=new P(null),this.currentUser$=this.currentUserSubject.asObservable(),this.initializeUserFromLocalStorage()}mapFirebaseUserToCustomUser(n){return{uid:n.uid,name:n.displayName||"Nan"}}initializeUserFromLocalStorage(){const n=localStorage.getItem("userUid"),r=localStorage.getItem("userName");n&&r?this.getUserByUid(n).subscribe(i=>{i&&this.currentUserSubject.next(i)}):this.currentUserSubject.next(null)}isLoggedIn(){return this.currentUser$.pipe(_e(n=>!!n))}signInAnonymously(n){var r=this;return(0,Z.Z)(function*(){try{const i=yield r.afAuth.signInAnonymously();i.user?(localStorage.setItem("userUid",i.user.uid),localStorage.setItem("userName",n),r.currentUserSubject.next(r.mapFirebaseUserToCustomUser(i.user)),r.updateUserData(i.user,n)):console.error("Failed to sign in anonymously")}catch(i){throw console.error("Error during anonymous sign-in:",i),new Error("Error during anonymous sign-in")}})()}getUserByUid(n){return this.firestore.collection("users").doc(n).valueChanges().pipe(_e(r=>r?this.mapFirebaseUserToCustomUser(r):null))}updateUserData(n,r){n&&this.firestore.collection("users").doc(n.uid).set({uid:n.uid,name:r},{merge:!0})}static#e=this.\u0275fac=function(r){return new(r||t)(se(PC),se(LE))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),KU=(()=>{class t{constructor(){}isValidInput(n){return!(!n||0===n.length||n.length>20||/[^a-zA-Z0-9\-_ ]/.test(n))}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),QU=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(ee(No),ee(wi))};static#t=this.\u0275dir=Pe({type:t})}return t})(),Uc=(()=>{class t extends QU{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=qn(t)))(i||t)}}();static#t=this.\u0275dir=Pe({type:t,features:[Ct]})}return t})();const mo=new ce("NgValueAccessor"),BX={provide:mo,useExisting:O(()=>Qg),multi:!0},$X=new ce("CompositionEventMode");let Qg=(()=>{class t extends QU{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function jX(){const t=xa()?xa().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ee(No),ee(wi),ee($X,8))};static#t=this.\u0275dir=Pe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Pt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[rn([BX]),Ct]})}return t})();const Or=new ce("NgValidators"),ou=new ce("NgAsyncValidators");function tB(t){return function su(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}(t.value)?{required:!0}:null}function UE(t){return null}function aB(t){return null!=t}function uB(t){return rp(t)?A(t):t}function cB(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function lB(t,e){return e.map(n=>n(t))}function dB(t){return t.map(e=>function zX(t){return!t.validate}(e)?e:n=>e.validate(n))}function LA(t){return null!=t?function hB(t){if(!t)return null;const e=t.filter(aB);return 0==e.length?null:function(n){return cB(lB(n,e))}}(dB(t)):null}function FA(t){return null!=t?function fB(t){if(!t)return null;const e=t.filter(aB);return 0==e.length?null:function(n){return function FX(...t){const e=na(t),{args:n,keys:r}=Ek(t),i=new rt(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,d=o;for(let f=0;f<o;f++){let g=!1;vn(n[f]).subscribe(fe(s,_=>{g||(g=!0,d--),a[f]=_},()=>u--,void 0,()=>{(!u||!g)&&(d||s.next(r?wk(r,a):a),s.complete())}))}});return e?i.pipe(Ik(e)):i}(lB(n,e).map(uB)).pipe(_e(cB))}}(dB(t)):null}function pB(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function UA(t){return t?Array.isArray(t)?t:[t]:[]}function BE(t,e){return Array.isArray(t)?t.includes(e):t===e}function _B(t,e){const n=UA(e);return UA(t).forEach(i=>{BE(n,i)||n.push(i)}),n}function yB(t,e){return UA(e).filter(n=>!BE(t,n))}class vB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=LA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=FA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class ti extends vB{get formDirective(){return null}get path(){return null}}class au extends vB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class EB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let BA=(()=>{class t extends EB{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ee(au,2))};static#t=this.\u0275dir=Pe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&ip("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ct]})}return t})(),IB=(()=>{class t extends EB{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ee(ti,10))};static#t=this.\u0275dir=Pe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&ip("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Ct]})}return t})();const Yg="VALID",$E="INVALID",Th="PENDING",Jg="DISABLED";function HA(t){return(HE(t)?t.validators:t)||null}function zA(t,e){return(HE(e)?e.asyncValidators:t)||null}function HE(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class DB{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Yg}get invalid(){return this.status===$E}get pending(){return this.status==Th}get disabled(){return this.status===Jg}get enabled(){return this.status!==Jg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(_B(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_B(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(yB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(yB(e,this._rawAsyncValidators))}hasValidator(e){return BE(this._rawValidators,e)}hasAsyncValidator(e){return BE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Th,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Jg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Yg,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yg||this.status===Th)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jg:Yg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Th,this._hasOwnPendingAsyncValidator=!0;const n=uB(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new fn,this.statusChanges=new fn}_calculateStatus(){return this._allControlsDisabled()?Jg:this.errors?$E:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Th)?Th:this._anyControlsHaveStatus($E)?$E:Yg}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){HE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function ZX(t){return Array.isArray(t)?LA(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function KX(t){return Array.isArray(t)?FA(t):t||null}(this._rawAsyncValidators)}}class GA extends DB{constructor(e,n,r){super(HA(n),zA(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function CB(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new $(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function TB(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[n])throw new $(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Ch=new ce("CallSetDisabledState",{providedIn:"root",factory:()=>zE}),zE="always";function Xg(t,e,n=zE){qA(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function JX(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&bB(t,e)})}(t,e),function eee(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function XX(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&bB(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function YX(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function WE(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function qA(t,e){const n=function gB(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(pB(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function mB(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(pB(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();WE(e._rawValidators,i),WE(e._rawAsyncValidators,i)}function bB(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const see={provide:ti,useExisting:O(()=>KE)},em=(()=>Promise.resolve())();let KE=(()=>{class t extends ti{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new fn,this.form=new GA({},LA(n),FA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){em.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Xg(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){em.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){em.then(()=>{const r=this._findContainer(n.path),i=new GA({});(function AB(t,e){qA(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){em.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){em.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function SB(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(r){return new(r||t)(ee(Or,10),ee(ou,10),ee(Ch,8))};static#t=this.\u0275dir=Pe({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Pt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[rn([see]),Ct]})}return t})();function RB(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function PB(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const xB=class extends DB{constructor(e=null,n,r){super(HA(n),zA(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),HE(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=PB(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){RB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){RB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){PB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},uee={provide:au,useExisting:O(()=>QE)},OB=(()=>Promise.resolve())();let QE=(()=>{class t extends au{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new xB,this._registered=!1,this.name="",this.update=new fn,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function KA(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Qg?n=s:function ree(t){return Object.getPrototypeOf(t.constructor)===Uc}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function ZA(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Xg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){OB.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&Ed(r);OB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function GE(t,e){return[...e.path,t]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||t)(ee(ti,9),ee(Or,10),ee(ou,10),ee(mo,10),ee(Ty,8),ee(Ch,8))};static#t=this.\u0275dir=Pe({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[rn([uee]),Ct,jr]})}return t})(),kB=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Pe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})();const cee={provide:mo,useExisting:O(()=>QA),multi:!0};let QA=(()=>{class t extends Uc{writeValue(n){this.setProperty("value",n??"")}registerOnChange(n){this.onChange=r=>{n(""==r?null:parseFloat(r))}}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=qn(t)))(i||t)}}();static#t=this.\u0275dir=Pe({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&Pt("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[rn([cee]),Ct]})}return t})(),VB=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Dr({type:t});static#n=this.\u0275inj=wr({})}return t})(),Bc=(()=>{class t{constructor(){this._validator=UE}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):UE,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Pe({type:t,features:[jr]})}return t})();const bee={provide:Or,useExisting:O(()=>YE),multi:!0};let YE=(()=>{class t extends Bc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ed,this.createValidator=n=>tB}enabled(n){return n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=qn(t)))(i||t)}}();static#t=this.\u0275dir=Pe({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Ys("required",i._enabled?"":null)},inputs:{required:"required"},features:[rn([bee]),Ct]})}return t})(),Mee=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Dr({type:t});static#n=this.\u0275inj=wr({imports:[VB]})}return t})(),Oee=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Ch,useValue:n.callSetDisabledState??zE}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Dr({type:t});static#n=this.\u0275inj=wr({imports:[Mee]})}return t})(),ej=(()=>{class t{constructor(n,r,i){this.loginService=n,this.validator=r,this.router=i,this.userName=""}signIn(n){if(!this.validator.isValidInput(n))throw new Error("Invalid Input Data");this.loginService.signInAnonymously(n).then(r=>{this.router.navigate(["/home"])}).catch(r=>{throw console.error("Error signing in",r),new Error("Error signing in")})}static#e=this.\u0275fac=function(r){return new(r||t)(ee(FE),ee(KU),ee(Qr))};static#t=this.\u0275cmp=hs({type:t,selectors:[["app-login"]],decls:7,vars:1,consts:[[1,"bg-gray-800","h-screen","flex","flex-col"],[1,"text-white","text-4xl","font-bold","mt-20","mb-4","text-center"],[1,"flex","flex-col","items-center","justify-center","flex-grow","mt-4"],["type","text","placeholder","Enter your name",1,"mb-4","p-2","rounded-full","shadow-lg","text-lg",3,"ngModel","ngModelChange"],[1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded-full","shadow-lg","text-lg","transition","duration-300","ease-in-out","transform","hover:-translate-y-1","hover:scale-110",3,"click"]],template:function(r,i){1&r&&(at(0,"div",0)(1,"h1",1),Kt(2," Shared Shopping List "),mt(),at(3,"div",2)(4,"input",3),Pt("ngModelChange",function(o){return i.userName=o}),mt(),at(5,"button",4),Pt("click",function(){return i.signIn(i.userName)}),Kt(6," Sign In "),mt()()()),2&r&&(Mn(4),ci("ngModel",i.userName))},dependencies:[Qg,BA,QE]})}return t})(),Vee=(()=>{class t{constructor(n){this.firestore=n}addProduct(n){return this.firestore.collection("products").add(n)}getProductsByUserAndGroup(n,r){return this.firestore.collection("products",i=>i.where("user","==",n).where("group","==",r)).snapshotChanges().pipe(_e(i=>i.map(s=>{const o=s.payload.doc.data();return{uid:s.payload.doc.id,...o}})))}removeProduct(n){return this.firestore.collection("products").doc(n).delete()}updateProduct(n){return this.firestore.collection("products").doc(n.uid).update({bought:n.bought})}static#e=this.\u0275fac=function(r){return new(r||t)(se(LE))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Lee=(()=>{class t{constructor(n,r){this.firestore=n,this.firestoreModule=r,this.userGroupsSubject=new P([]),this.userGroups$=this.userGroupsSubject.asObservable(),this.selectedGroupSubject=new P(null),this.selectedGroup$=this.selectedGroupSubject.asObservable(),this.groupUsersSubject=new P([]),this.groupUsers$=this.groupUsersSubject.asObservable()}fetchUserGroups(n){this.firestore.collection("groups",r=>r.where("users","array-contains",n)).snapshotChanges().pipe(_e(r=>r.map(i=>{const s=i.payload.doc.data();return{uid:i.payload.doc.id,...s}}))).subscribe(r=>{this.userGroupsSubject.next(r)})}selectGroup(n){this.selectedGroupSubject.next(n),this.fetchGroupUsers(n.users)}fetchGroupUsers(n){const r=[];n.forEach(i=>{this.firestore.collection("users").doc(i).valueChanges().subscribe(s=>{s&&r.push(s),this.groupUsersSubject.next(r)})})}createNewGroup(n,r){return new Promise((i,s)=>{const o={name:n,inviteCode:Math.floor(1e5+9e5*Math.random()).toString(),users:[r]};this.firestore.collection("groups").add(o).then(a=>{const u=a.id;this.fetchUserGroups(r),i(u)}).catch(a=>{s(a)})})}removeUserFromGroup(n,r){this.firestore.collection("groups").doc(n).update({users:io.Z.firestore.FieldValue.arrayRemove(r)}).then(()=>{this.groupUsers$.pipe(Na(1)).subscribe(i=>{1===i.length&&this.firestore.collection("groups").doc(n).delete().catch(s=>{throw console.error("Error deleting group:",s),new Error("Error deleting group")})}),this.fetchUserGroups(r)}).catch(i=>{throw console.error("Error removing user from group:",i),new Error("Error removing user from group")})}joinGroup(n,r,i){return new Promise((s,o)=>{this.firestore.collection("groups",a=>a.where("inviteCode","==",r).where("name","==",n)).snapshotChanges().pipe(Na(1),_e(a=>a.map(u=>{const d=u.payload.doc.data();return{uid:u.payload.doc.id,...d}}))).subscribe({next:a=>{if(a.length>0){const u=a[0];this.firestore.collection("groups").doc(u.uid).update({users:io.Z.firestore.FieldValue.arrayUnion(i)}).then(()=>{this.fetchUserGroups(i),s()}).catch(d=>o(d))}else o("Group not found or invite code incorrect")},error:a=>o(a)})})}static#e=this.\u0275fac=function(r){return new(r||t)(se(LE),se(ZU))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Fee=(()=>{class t{constructor(n,r){this.loginService=n,this.router=r,this.localStorage=localStorage}navigateToHome(){this.router.navigate(["/home"])}static#e=this.\u0275fac=function(r){return new(r||t)(ee(FE),ee(Qr))};static#t=this.\u0275cmp=hs({type:t,selectors:[["app-header"]],decls:8,vars:1,consts:[[1,"bg-gray-900","shadow-md","fixed","top-0","left-0","w-full","z-10"],[1,"container","mx-auto","px-6","py-3","flex","justify-between","items-center"],[1,"bg-purple-800","hover:bg-purple-700","text-gray-200","font-bold","py-2","px-4","rounded",3,"click"],[1,"flex-grow","text-center"],[1,"text-gray-200","font-bold","text-lg"]],template:function(r,i){1&r&&(at(0,"header",0)(1,"nav",1)(2,"div")(3,"button",2),Pt("click",function(){return i.navigateToHome()}),Kt(4," Home "),mt()(),at(5,"div",3)(6,"p",4),Kt(7),mt()()()()),2&r&&(Mn(7),to("Welcome, ",i.localStorage.getItem("userName"),""))}})}return t})();function Uee(t,e){if(1&t&&(at(0,"span"),Kt(1),mt()),2&t){const n=wn().$implicit;Mn(1),to("- ",n.count,"")}}function Bee(t,e){if(1&t){const n=ic();at(0,"li",22),Pt("click",function(){const s=Hr(n).$implicit;return zr(wn(4).toggleProductBought(s))}),at(1,"span"),Kt(2),Js(3,Uee,2,1,"span",23),mt()()}if(2&t){const n=e.$implicit;ip("line-through",n.bought),Mn(2),to(" ",n.name," "),Mn(1),ci("ngIf",n.count>0)}}function jee(t,e){if(1&t&&(at(0,"tr",18)(1,"td",19)(2,"ul",20),Js(3,Bee,4,4,"li",21),gd(4,"async"),mt()()()),2&t){const n=wn().$implicit,r=wn(2);let i;Mn(3),ci("ngForOf",null==(i=md(4,1,r.usersProducts$))?null:i.get(n.uid))}}function $ee(t,e){if(1&t){const n=ic();cy(0),at(1,"tr",13),Pt("click",function(){const s=Hr(n).$implicit;return zr(wn(2).toggleProductsVisibility(s.uid))}),at(2,"td",14),Kt(3),mt(),at(4,"td",15),Kt(5),mt(),at(6,"td",16)(7,"button",9),Pt("click",function(i){const o=Hr(n).$implicit;return wn(2).clearBoughtProducts(o.uid),zr(i.stopPropagation())}),Kt(8," Clear "),mt()()(),Js(9,jee,5,3,"tr",17),ly()}if(2&t){const n=e.$implicit,r=wn(2);Mn(3),to(" ",n.name," "),Mn(2),to(" Total Products: ",r.getTotalProductCount(n.uid)," "),Mn(4),ci("ngIf",r.isProductsVisible(n.uid))}}function Hee(t,e){if(1&t){const n=ic();at(0,"div",6)(1,"div",7)(2,"button",8),Pt("click",function(){return Hr(n),zr(wn().showInviteModal=!0)}),Kt(3," Invite "),mt(),at(4,"span"),Kt(5),mt(),at(6,"button",9),Pt("click",function(){return Hr(n),zr(wn().showModal=!0)}),Kt(7," Leave "),mt()(),at(8,"div",10)(9,"table",11)(10,"tbody"),Js(11,$ee,10,3,"ng-container",12),gd(12,"async"),mt()()()()}if(2&t){const n=e.ngIf,r=wn();Mn(5),BT(n.name),Mn(6),ci("ngForOf",md(12,2,r.groupService.groupUsers$))}}function zee(t,e){if(1&t){const n=ic();at(0,"div",24)(1,"div",25)(2,"form",26,27),Pt("ngSubmit",function(){return Hr(n),zr(wn().addProduct())}),at(4,"input",28),Pt("ngModelChange",function(i){return Hr(n),zr(wn().productData.name=i)}),mt(),at(5,"input",29),Pt("ngModelChange",function(i){return Hr(n),zr(wn().productData.count=i)}),mt(),at(6,"button",30),Kt(7," Add Product "),mt()(),at(8,"button",31),Pt("click",function(){return Hr(n),zr(wn().showProductForm=!1)}),Kt(9," Cancel "),mt()()()}if(2&t){const n=wn();Mn(4),ci("ngModel",n.productData.name),Mn(1),ci("ngModel",n.productData.count)}}function Gee(t,e){if(1&t){const n=ic();at(0,"div",32)(1,"div",33)(2,"h2",34),Kt(3,"Leave Group Confirmation"),mt(),at(4,"p",35),Kt(5,"Are you sure you want to leave this group?"),mt(),at(6,"div",36)(7,"button",37),Pt("click",function(){Hr(n);const i=wn();return i.leaveGroup(),zr(i.showModal=!1)}),Kt(8,"Yes, Leave"),mt(),at(9,"button",38),Pt("click",function(){return Hr(n),zr(wn().showModal=!1)}),Kt(10,"No, Stay"),mt()()()()}}function qee(t,e){if(1&t){const n=ic();at(0,"div",32)(1,"div",33)(2,"h2",34),Kt(3,"Invite to Group"),mt(),at(4,"p",35),Kt(5,"Invite someone to join this group."),mt(),at(6,"p",39),Kt(7),mt(),at(8,"div",40)(9,"button",38),Pt("click",function(){return Hr(n),zr(wn().showInviteModal=!1)}),Kt(10,"OK"),mt()()()()}if(2&t){const n=wn();Mn(7),to("Invite Code: ",null==n.currentGroup?null:n.currentGroup.inviteCode,"")}}const Wee=[{path:"login",component:ej},{path:"group/:groupId",component:(()=>{class t{constructor(n,r,i,s,o){this.productService=n,this.groupService=r,this.loginService=i,this.validator=s,this.router=o,this.usersProducts$=new P(new Map),this.visibleProductsMap=new Map,this.productData={name:"",count:0,bought:!1,user:"",group:""},this.showProductForm=!1,this.showInviteModal=!1,this.showModal=!1,this.loginService.currentUser$.subscribe(a=>{this.currentUser=a}),this.groupService.selectedGroup$.subscribe(a=>{this.currentGroup=a})}ngOnInit(){this.groupService.groupUsers$.pipe(dt(n=>n.length?$y(n.map(r=>this.productService.getProductsByUserAndGroup(r.uid,this.currentGroup?.uid).pipe(_e(i=>({userId:r.uid,products:i}))))):[])).subscribe(n=>{const r=new Map(this.usersProducts$.getValue());n.forEach(({userId:i,products:s})=>{r.set(i,s)}),this.usersProducts$.next(r)})}addProduct(){if(!this.currentUser||!this.currentGroup)throw console.error("User or group data is not available."),new Error("User or group data is not available");if(this.productData.user=this.currentUser.uid||"NaN",this.productData.group=this.currentGroup.uid||"NaN",!this.validator.isValidInput(this.productData.name))throw new Error("Invalid Input Data");if(!this.productData.name)throw console.error("Product name is not defined."),new Error("Product name is not defined");this.productService.addProduct(this.productData).then(()=>{this.showProductForm=!1,this.productData={name:"",count:0,bought:!1,user:"",group:""}}).catch(n=>{throw console.error("Error adding product:",n),new Error("Error adding product")})}toggleProductsVisibility(n){const r=this.visibleProductsMap.get(n)||!1;this.visibleProductsMap.set(n,!r)}isProductsVisible(n){return!!this.visibleProductsMap.get(n)}getTotalProductCount(n){return(this.usersProducts$.getValue().get(n)||[]).length}toggleProductBought(n){n.bought=!n.bought,this.productService.updateProduct(n).catch(r=>{throw console.error("Error updating product:",r),new Error("Error updating product")})}clearBoughtProducts(n){(this.usersProducts$.getValue().get(n)||[]).filter(s=>s.bought).forEach(s=>{s.uid&&this.productService.removeProduct(s.uid).catch(o=>{throw console.error("Error removing product:",o),new Error("Error removing product")})})}leaveGroup(){this.currentUser&&this.currentGroup&&(this.groupService.removeUserFromGroup(this.currentGroup.uid,this.currentUser.uid),this.router.navigate(["/home"]))}static#e=this.\u0275fac=function(r){return new(r||t)(ee(Vee),ee(Lee),ee(FE),ee(KU),ee(Qr))};static#t=this.\u0275cmp=hs({type:t,selectors:[["app-group"]],decls:10,vars:6,consts:[["class","pt-[6rem] flex flex-col items-center mx-4 lg:mx-8",4,"ngIf"],[1,"fixed","bottom-10","left-0","right-0","p-4"],[1,"flex","items-center","justify-center"],[1,"bg-gray-900","hover:bg-gray-700","text-white","font-bold","text-4xl","py-4","px-8","rounded-lg","transition","ease-in-out","duration-150",3,"click"],["class","fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center bg-gray-900 bg-opacity-90",4,"ngIf"],["class","fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center z-50",4,"ngIf"],[1,"pt-[6rem]","flex","flex-col","items-center","mx-4","lg:mx-8"],[1,"bg-gray-900","text-white","text-lg","font-bold","text-center","p-5","w-full","max-w-md","mx-auto","rounded-lg","flex","justify-between","items-center"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-1","px-2","rounded",3,"click"],[1,"bg-red-500","hover:bg-red-700","text-white","font-bold","py-1","px-2","rounded",3,"click"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg","w-full","min-w-max","max-w-6xl","mt-4"],[1,"w-full","text-sm","text-left","text-gray-400","bg-gray-800","border-2","border-gray-950"],[4,"ngFor","ngForOf"],[1,"bg-gray-900","cursor-pointer",3,"click"],[1,"px-6","py-4","text-gray-200","font-bold"],[1,"px-6","py-4","text-gray-200","font-bold","text-right"],[1,"px-6","py-4","text-right"],["class","bg-gray-800",4,"ngIf"],[1,"bg-gray-800"],["colspan","3",1,"px-6","py-4"],[1,"mr-auto"],["class","odd:bg-gray-700 text-lg leading-loose border-b border-gray-600 cursor-pointer",3,"line-through","click",4,"ngFor","ngForOf"],[1,"odd:bg-gray-700","text-lg","leading-loose","border-b","border-gray-600","cursor-pointer",3,"click"],[4,"ngIf"],[1,"fixed","top-0","left-0","right-0","bottom-0","flex","items-center","justify-center","bg-gray-900","bg-opacity-90"],[1,"bg-gray-950","p-8","rounded-lg","shadow-lg","w-full","sm:max-w-md","mx-auto"],[3,"ngSubmit"],["productForm","ngForm"],["type","text","name","name","placeholder","Product Name","required","",1,"text-center","w-full","px-3","py-2","mt-4","placeholder-gray-500","border","border-gray-300","rounded-md","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","focus:outline-none","focus:ring-2","focus:ring-offset-2",3,"ngModel","ngModelChange"],["type","number","name","count","placeholder","Product Count","required","",1,"text-center","w-full","px-3","py-2","mt-4","placeholder-gray-500","border","border-gray-300","rounded-md","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","focus:outline-none","focus:ring-2","focus:ring-offset-2",3,"ngModel","ngModelChange"],["type","submit",1,"w-full","mt-6","bg-indigo-600","hover:bg-indigo-700","text-white","font-bold","py-2","px-4","rounded-lg","transition","ease-in-out","duration-150","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500"],[1,"w-full","mt-6","bg-gray-300","hover:bg-gray-400","text-gray-700","font-bold","py-2","px-4","rounded-lg","transition","ease-in-out","duration-150","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"],[1,"fixed","inset-0","bg-gray-800","bg-opacity-50","flex","justify-center","items-center","z-50"],[1,"bg-gray-950","p-6","rounded-lg","shadow-lg","text-center"],[1,"text-lg","text-gray-200","font-bold","mb-4"],[1,"text-gray-200"],[1,"flex","justify-around","mt-4"],[1,"bg-red-500","hover:bg-red-700","text-white","font-bold","py-2","px-4","rounded",3,"click"],[1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded",3,"click"],[1,"text-gray-200","font-bold"],[1,"flex","justify-center","mt-4"]],template:function(r,i){1&r&&(np(0,"app-header"),Js(1,Hee,13,4,"div",0),gd(2,"async"),at(3,"div",1)(4,"div",2)(5,"button",3),Pt("click",function(){return i.showProductForm=!0}),Kt(6," + "),mt()()(),Js(7,zee,10,2,"div",4),Js(8,Gee,11,0,"div",5),Js(9,qee,11,1,"div",5)),2&r&&(Mn(1),ci("ngIf",md(2,4,i.groupService.selectedGroup$)),Mn(6),ci("ngIf",i.showProductForm),Mn(1),ci("ngIf",i.showModal),Mn(1),ci("ngIf",i.showInviteModal))},dependencies:[WO,U0,kB,Qg,QA,BA,IB,YE,QE,KE,Fee,$0]})}return t})(),canActivate:[(t,e)=>pe(FE).isLoggedIn()]},{path:"",pathMatch:"full",component:ej},{path:"**",redirectTo:""}];let Zee=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Dr({type:t});static#n=this.\u0275inj=wr({imports:[A1.forRoot(Wee),A1]})}return t})();var Kee=function(){function t(e,n){void 0===n&&(n=[]),this._eventType=e,this._eventFunctions=n}return t.prototype.init=function(){var e=this;this._eventFunctions.forEach(function(n){typeof window<"u"&&window.addEventListener(e._eventType,n)})},t}();const Qee=Kee;var Yee=function(){function t(){this._instances={Accordion:{},Carousel:{},Collapse:{},Dial:{},Dismiss:{},Drawer:{},Dropdown:{},Modal:{},Popover:{},Tabs:{},Tooltip:{}}}return t.prototype.addInstance=function(e,n,r,i){if(void 0===i&&(i=!1),!this._instances[e])return console.warn("Flowbite: Component ".concat(e," does not exist.")),!1;!this._instances[e][r]||i?(i&&this._instances[e][r]&&this._instances[e][r].destroyAndRemoveInstance(),this._instances[e][r||this._generateRandomId()]=n):console.warn("Flowbite: Instance with ID ".concat(r," already exists."))},t.prototype.getAllInstances=function(){return this._instances},t.prototype.getInstances=function(e){return this._instances[e]?this._instances[e]:(console.warn("Flowbite: Component ".concat(e," does not exist.")),!1)},t.prototype.getInstance=function(e,n){if(this._componentAndInstanceCheck(e,n))return this._instances[e][n]?this._instances[e][n]:void console.warn("Flowbite: Instance with ID ".concat(n," does not exist."))},t.prototype.destroyAndRemoveInstance=function(e,n){this._componentAndInstanceCheck(e,n)&&(this.destroyInstanceObject(e,n),this.removeInstance(e,n))},t.prototype.removeInstance=function(e,n){this._componentAndInstanceCheck(e,n)&&delete this._instances[e][n]},t.prototype.destroyInstanceObject=function(e,n){this._componentAndInstanceCheck(e,n)&&this._instances[e][n].destroy()},t.prototype.instanceExists=function(e,n){return!(!this._instances[e]||!this._instances[e][n])},t.prototype._generateRandomId=function(){return Math.random().toString(36).substr(2,9)},t.prototype._componentAndInstanceCheck=function(e,n){return this._instances[e]?!!this._instances[e][n]||(console.warn("Flowbite: Instance with ID ".concat(n," does not exist.")),!1):(console.warn("Flowbite: Component ".concat(e," does not exist.")),!1)},t}(),tj=new Yee;const Et=tj;typeof window<"u"&&(window.FlowbiteInstances=tj);var JE=function(){return JE=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},JE.apply(this,arguments)},XE={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},Jee={id:null,override:!0},nj=function(){function t(e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=XE),void 0===i&&(i=Jee),this._instanceId=i.id?i.id:e.id,this._accordionEl=e,this._items=n,this._options=JE(JE({},XE),r),this._initialized=!1,this.init(),Et.addInstance("Accordion",this,this._instanceId,i.override)}return t.prototype.init=function(){var e=this;this._items.length&&!this._initialized&&(this._items.forEach(function(n){n.active&&e.open(n.id);var r=function(){e.toggle(n.id)};n.triggerEl.addEventListener("click",r),n.clickHandler=r}),this._initialized=!0)},t.prototype.destroy=function(){this._items.length&&this._initialized&&(this._items.forEach(function(e){e.triggerEl.removeEventListener("click",e.clickHandler),delete e.clickHandler}),this._initialized=!1)},t.prototype.removeInstance=function(){Et.removeInstance("Accordion",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getItem=function(e){return this._items.filter(function(n){return n.id===e})[0]},t.prototype.open=function(e){var n,r,i=this,s=this.getItem(e);this._options.alwaysOpen||this._items.map(function(o){var a,u;o!==s&&((a=o.triggerEl.classList).remove.apply(a,i._options.activeClasses.split(" ")),(u=o.triggerEl.classList).add.apply(u,i._options.inactiveClasses.split(" ")),o.targetEl.classList.add("hidden"),o.triggerEl.setAttribute("aria-expanded","false"),o.active=!1,o.iconEl&&o.iconEl.classList.remove("rotate-180"))}),(n=s.triggerEl.classList).add.apply(n,this._options.activeClasses.split(" ")),(r=s.triggerEl.classList).remove.apply(r,this._options.inactiveClasses.split(" ")),s.triggerEl.setAttribute("aria-expanded","true"),s.targetEl.classList.remove("hidden"),s.active=!0,s.iconEl&&s.iconEl.classList.add("rotate-180"),this._options.onOpen(this,s)},t.prototype.toggle=function(e){var n=this.getItem(e);n.active?this.close(e):this.open(e),this._options.onToggle(this,n)},t.prototype.close=function(e){var n,r,i=this.getItem(e);(n=i.triggerEl.classList).remove.apply(n,this._options.activeClasses.split(" ")),(r=i.triggerEl.classList).add.apply(r,this._options.inactiveClasses.split(" ")),i.targetEl.classList.add("hidden"),i.triggerEl.setAttribute("aria-expanded","false"),i.active=!1,i.iconEl&&i.iconEl.classList.remove("rotate-180"),this._options.onClose(this,i)},t}();function nS(){document.querySelectorAll("[data-accordion]").forEach(function(t){var e=t.getAttribute("data-accordion"),n=t.getAttribute("data-active-classes"),r=t.getAttribute("data-inactive-classes"),i=[];t.querySelectorAll("[data-accordion-target]").forEach(function(s){if(s.closest("[data-accordion]")===t){var o={id:s.getAttribute("data-accordion-target"),triggerEl:s,targetEl:document.querySelector(s.getAttribute("data-accordion-target")),iconEl:s.querySelector("[data-accordion-icon]"),active:"true"===s.getAttribute("aria-expanded")};i.push(o)}}),new nj(t,i,{alwaysOpen:"open"===e,activeClasses:n||XE.activeClasses,inactiveClasses:r||XE.inactiveClasses})})}typeof window<"u"&&(window.Accordion=nj,window.initAccordions=nS);var eI=function(){return eI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},eI.apply(this,arguments)},rj={onCollapse:function(){},onExpand:function(){},onToggle:function(){}},Xee={id:null,override:!0},rS=function(){function t(e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=rj),void 0===i&&(i=Xee),this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._triggerEl=n,this._options=eI(eI({},rj),r),this._visible=!1,this._initialized=!1,this.init(),Et.addInstance("Collapse",this,this._instanceId,i.override)}return t.prototype.init=function(){var e=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._visible=this._triggerEl.hasAttribute("aria-expanded")?"true"===this._triggerEl.getAttribute("aria-expanded"):!this._targetEl.classList.contains("hidden"),this._clickHandler=function(){e.toggle()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},t.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},t.prototype.removeInstance=function(){Et.removeInstance("Collapse",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.collapse=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)},t.prototype.expand=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)},t.prototype.toggle=function(){this._visible?this.collapse():this.expand(),this._options.onToggle(this)},t}();function iS(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(t){var e=t.getAttribute("data-collapse-toggle"),n=document.getElementById(e);n?Et.instanceExists("Collapse",n.getAttribute("id"))?new rS(n,t,{},{id:n.getAttribute("id")+"_"+Et._generateRandomId()}):new rS(n,t):console.error('The target element with id "'.concat(e,'" does not exist. Please check the data-collapse-toggle attribute.'))})}typeof window<"u"&&(window.Collapse=rS,window.initCollapses=iS);var jc=function(){return jc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},jc.apply(this,arguments)},tI={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},ete={id:null,override:!0},ij=function(){function t(e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=tI),void 0===i&&(i=ete),this._instanceId=i.id?i.id:e.id,this._carouselEl=e,this._items=n,this._options=jc(jc(jc({},tI),r),{indicators:jc(jc({},tI.indicators),r.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._initialized=!1,this.init(),Et.addInstance("Carousel",this,this._instanceId,i.override)}return t.prototype.init=function(){var e=this;this._items.length&&!this._initialized&&(this._items.map(function(n){n.el.classList.add("absolute","inset-0","transition-transform","transform")}),this._getActiveItem()?this.slideTo(this._getActiveItem().position):this.slideTo(0),this._indicators.map(function(n,r){n.el.addEventListener("click",function(){e.slideTo(r)})}),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},t.prototype.removeInstance=function(){Et.removeInstance("Carousel",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getItem=function(e){return this._items[e]},t.prototype.slideTo=function(e){var n=this._items[e];this._rotate({left:0===n.position?this._items[this._items.length-1]:this._items[n.position-1],middle:n,right:n.position===this._items.length-1?this._items[0]:this._items[n.position+1]}),this._setActiveItem(n),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)},t.prototype.next=function(){var e=this._getActiveItem();this.slideTo((e.position===this._items.length-1?this._items[0]:this._items[e.position+1]).position),this._options.onNext(this)},t.prototype.prev=function(){var e=this._getActiveItem();this.slideTo((0===e.position?this._items[this._items.length-1]:this._items[e.position-1]).position),this._options.onPrev(this)},t.prototype._rotate=function(e){this._items.map(function(n){n.el.classList.add("hidden")}),e.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),e.left.el.classList.add("-translate-x-full","z-10"),e.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),e.middle.el.classList.add("translate-x-0","z-20"),e.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),e.right.el.classList.add("translate-x-full","z-10")},t.prototype.cycle=function(){var e=this;typeof window<"u"&&(this._intervalInstance=window.setInterval(function(){e.next()},this._intervalDuration))},t.prototype.pause=function(){clearInterval(this._intervalInstance)},t.prototype._getActiveItem=function(){return this._activeItem},t.prototype._setActiveItem=function(e){var n,r,i=this;this._activeItem=e;var s=e.position;this._indicators.length&&(this._indicators.map(function(o){var a,u;o.el.setAttribute("aria-current","false"),(a=o.el.classList).remove.apply(a,i._options.indicators.activeClasses.split(" ")),(u=o.el.classList).add.apply(u,i._options.indicators.inactiveClasses.split(" "))}),(n=this._indicators[s].el.classList).add.apply(n,this._options.indicators.activeClasses.split(" ")),(r=this._indicators[s].el.classList).remove.apply(r,this._options.indicators.inactiveClasses.split(" ")),this._indicators[s].el.setAttribute("aria-current","true"))},t}();function sS(){document.querySelectorAll("[data-carousel]").forEach(function(t){var e=t.getAttribute("data-carousel-interval"),n="slide"===t.getAttribute("data-carousel"),r=[],i=0;t.querySelectorAll("[data-carousel-item]").length&&Array.from(t.querySelectorAll("[data-carousel-item]")).map(function(d,f){r.push({position:f,el:d}),"active"===d.getAttribute("data-carousel-item")&&(i=f)});var s=[];t.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(t.querySelectorAll("[data-carousel-slide-to]")).map(function(d){s.push({position:parseInt(d.getAttribute("data-carousel-slide-to")),el:d})});var o=new ij(t,r,{defaultPosition:i,indicators:{items:s},interval:e||tI.interval});n&&o.cycle();var a=t.querySelector("[data-carousel-next]"),u=t.querySelector("[data-carousel-prev]");a&&a.addEventListener("click",function(){o.next()}),u&&u.addEventListener("click",function(){o.prev()})})}typeof window<"u"&&(window.Carousel=ij,window.initCarousels=sS);var nI=function(){return nI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},nI.apply(this,arguments)},sj={transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},tte={id:null,override:!0},oj=function(){function t(e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=sj),void 0===i&&(i=tte),this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._triggerEl=n,this._options=nI(nI({},sj),r),this._initialized=!1,this.init(),Et.addInstance("Dismiss",this,this._instanceId,i.override)}return t.prototype.init=function(){var e=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._clickHandler=function(){e.hide()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},t.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},t.prototype.removeInstance=function(){Et.removeInstance("Dismiss",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.hide=function(){var e=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){e._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)},t}();function oS(){document.querySelectorAll("[data-dismiss-target]").forEach(function(t){var e=t.getAttribute("data-dismiss-target"),n=document.querySelector(e);n?new oj(n,t):console.error('The dismiss element with id "'.concat(e,'" does not exist. Please check the data-dismiss-target attribute.'))})}function Pi(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function $c(t){return t instanceof Pi(t).Element||t instanceof Element}function ns(t){return t instanceof Pi(t).HTMLElement||t instanceof HTMLElement}function aS(t){return!(typeof ShadowRoot>"u")&&(t instanceof Pi(t).ShadowRoot||t instanceof ShadowRoot)}typeof window<"u"&&(window.Dismiss=oj,window.initDismisses=oS);var Hc=Math.max,rI=Math.min,Dh=Math.round;function uS(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function aj(){return!/^((?!chrome|android).)*safari/i.test(uS())}function bh(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&ns(t)&&(i=t.offsetWidth>0&&Dh(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Dh(r.height)/t.offsetHeight||1);var a=($c(t)?Pi(t):window).visualViewport,u=!aj()&&n,d=(r.left+(u&&a?a.offsetLeft:0))/i,f=(r.top+(u&&a?a.offsetTop:0))/s,g=r.width/i,_=r.height/s;return{width:g,height:_,top:f,right:d+g,bottom:f+_,left:d,x:d,y:f}}function cS(t){var e=Pi(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function _o(t){return t?(t.nodeName||"").toLowerCase():null}function uu(t){return(($c(t)?t.ownerDocument:t.document)||window.document).documentElement}function lS(t){return bh(uu(t)).left+cS(t).scrollLeft}function Xo(t){return Pi(t).getComputedStyle(t)}function dS(t){var e=Xo(t);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function ste(t,e,n){void 0===n&&(n=!1);var r=ns(e),i=ns(e)&&function ite(t){var e=t.getBoundingClientRect(),n=Dh(e.width)/t.offsetWidth||1,r=Dh(e.height)/t.offsetHeight||1;return 1!==n||1!==r}(e),s=uu(e),o=bh(t,i,n),a={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&(("body"!==_o(e)||dS(s))&&(a=function rte(t){return t!==Pi(t)&&ns(t)?function nte(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}(t):cS(t)}(e)),ns(e)?((u=bh(e,!0)).x+=e.clientLeft,u.y+=e.clientTop):s&&(u.x=lS(s))),{x:o.left+a.scrollLeft-u.x,y:o.top+a.scrollTop-u.y,width:o.width,height:o.height}}function hS(t){var e=bh(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function iI(t){return"html"===_o(t)?t:t.assignedSlot||t.parentNode||(aS(t)?t.host:null)||uu(t)}function uj(t){return["html","body","#document"].indexOf(_o(t))>=0?t.ownerDocument.body:ns(t)&&dS(t)?t:uj(iI(t))}function tm(t,e){var n;void 0===e&&(e=[]);var r=uj(t),i=r===(null==(n=t.ownerDocument)?void 0:n.body),s=Pi(r),o=i?[s].concat(s.visualViewport||[],dS(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(tm(iI(o)))}function ote(t){return["table","td","th"].indexOf(_o(t))>=0}function cj(t){return ns(t)&&"fixed"!==Xo(t).position?t.offsetParent:null}function nm(t){for(var e=Pi(t),n=cj(t);n&&ote(n)&&"static"===Xo(n).position;)n=cj(n);return n&&("html"===_o(n)||"body"===_o(n)&&"static"===Xo(n).position)?e:n||function ate(t){var e=/firefox/i.test(uS());if(/Trident/i.test(uS())&&ns(t)&&"fixed"===Xo(t).position)return null;var i=iI(t);for(aS(i)&&(i=i.host);ns(i)&&["html","body"].indexOf(_o(i))<0;){var s=Xo(i);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||e&&"filter"===s.willChange||e&&s.filter&&"none"!==s.filter)return i;i=i.parentNode}return null}(t)||e}var gi="top",rs="bottom",is="right",mi="left",fS="auto",rm=[gi,rs,is,mi],Ah="start",im="end",lj="viewport",sm="popper",dj=rm.reduce(function(t,e){return t.concat([e+"-"+Ah,e+"-"+im])},[]),hj=[].concat(rm,[fS]).reduce(function(t,e){return t.concat([e,e+"-"+Ah,e+"-"+im])},[]),vte=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Ete(t){var e=new Map,n=new Set,r=[];function i(s){n.add(s.name),[].concat(s.requires||[],s.requiresIfExists||[]).forEach(function(a){if(!n.has(a)){var u=e.get(a);u&&i(u)}}),r.push(s)}return t.forEach(function(s){e.set(s.name,s)}),t.forEach(function(s){n.has(s.name)||i(s)}),r}function wte(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}var fj={placement:"bottom",modifiers:[],strategy:"absolute"};function pj(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&"function"==typeof r.getBoundingClientRect)})}function Cte(t){void 0===t&&(t={});var n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,s=void 0===i?fj:i;return function(a,u,d){void 0===d&&(d=s);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},fj,s),modifiersData:{},elements:{reference:a,popper:u},attributes:{},styles:{}},g=[],_=!1,y={state:f,setOptions:function(M){var R="function"==typeof M?M(f.options):M;w(),f.options=Object.assign({},s,f.options,R),f.scrollParents={reference:$c(a)?tm(a):a.contextElement?tm(a.contextElement):[],popper:tm(u)};var k=function Ite(t){var e=Ete(t);return vte.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}(function Tte(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}([].concat(r,f.options.modifiers)));return f.orderedModifiers=k.filter(function(U){return U.enabled}),function E(){f.orderedModifiers.forEach(function(D){var R=D.options,U=D.effect;if("function"==typeof U){var te=U({state:f,name:D.name,instance:y,options:void 0===R?{}:R});g.push(te||function(){})}})}(),y.update()},forceUpdate:function(){if(!_){var M=f.elements,R=M.reference,k=M.popper;if(pj(R,k)){f.rects={reference:ste(R,nm(k),"fixed"===f.options.strategy),popper:hS(k)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(un){return f.modifiersData[un.name]=Object.assign({},un.data)});for(var U=0;U<f.orderedModifiers.length;U++)if(!0!==f.reset){var te=f.orderedModifiers[U],de=te.fn,Se=te.options;"function"==typeof de&&(f=de({state:f,options:void 0===Se?{}:Se,name:te.name,instance:y})||f)}else f.reset=!1,U=-1}}},update:wte(function(){return new Promise(function(D){y.forceUpdate(),D(f)})}),destroy:function(){w(),_=!0}};if(!pj(a,u))return y;function w(){g.forEach(function(D){return D()}),g=[]}return y.setOptions(d).then(function(D){!_&&d.onFirstUpdate&&d.onFirstUpdate(D)}),y}}var sI={passive:!0};const bte={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function Dte(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=void 0===i||i,o=r.resize,a=void 0===o||o,u=Pi(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&d.forEach(function(f){f.addEventListener("scroll",n.update,sI)}),a&&u.addEventListener("resize",n.update,sI),function(){s&&d.forEach(function(f){f.removeEventListener("scroll",n.update,sI)}),a&&u.removeEventListener("resize",n.update,sI)}},data:{}};function yo(t){return t.split("-")[0]}function Sh(t){return t.split("-")[1]}function pS(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function gj(t){var u,e=t.reference,n=t.element,r=t.placement,i=r?yo(r):null,s=r?Sh(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2;switch(i){case gi:u={x:o,y:e.y-n.height};break;case rs:u={x:o,y:e.y+e.height};break;case is:u={x:e.x+e.width,y:a};break;case mi:u={x:e.x-n.width,y:a};break;default:u={x:e.x,y:e.y}}var d=i?pS(i):null;if(null!=d){var f="y"===d?"height":"width";switch(s){case Ah:u[d]=u[d]-(e[f]/2-n[f]/2);break;case im:u[d]=u[d]+(e[f]/2-n[f]/2)}}return u}const Ste={name:"popperOffsets",enabled:!0,phase:"read",fn:function Ate(t){var e=t.state;e.modifiersData[t.name]=gj({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};var Rte={top:"auto",right:"auto",bottom:"auto",left:"auto"};function mj(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,u=t.gpuAcceleration,d=t.adaptive,f=t.roundOffsets,g=t.isFixed,_=o.x,y=void 0===_?0:_,E=o.y,w=void 0===E?0:E,D="function"==typeof f?f({x:y,y:w}):{x:y,y:w};y=D.x,w=D.y;var M=o.hasOwnProperty("x"),R=o.hasOwnProperty("y"),k=mi,U=gi,te=window;if(d){var de=nm(n),Se="clientHeight",ut="clientWidth";de===Pi(n)&&"static"!==Xo(de=uu(n)).position&&"absolute"===a&&(Se="scrollHeight",ut="scrollWidth"),(i===gi||(i===mi||i===is)&&s===im)&&(U=rs,w-=(g&&de===te&&te.visualViewport?te.visualViewport.height:de[Se])-r.height,w*=u?1:-1),i!==mi&&(i!==gi&&i!==rs||s!==im)||(k=is,y-=(g&&de===te&&te.visualViewport?te.visualViewport.width:de[ut])-r.width,y*=u?1:-1)}var ni,sr=Object.assign({position:a},d&&Rte),As=!0===f?function Pte(t,e){var r=t.y,i=e.devicePixelRatio||1;return{x:Dh(t.x*i)/i||0,y:Dh(r*i)/i||0}}({x:y,y:w},Pi(n)):{x:y,y:w};return y=As.x,w=As.y,Object.assign({},sr,u?((ni={})[U]=R?"0":"",ni[k]=M?"0":"",ni.transform=(te.devicePixelRatio||1)<=1?"translate("+y+"px, "+w+"px)":"translate3d("+y+"px, "+w+"px, 0)",ni):((e={})[U]=R?w+"px":"",e[k]=M?y+"px":"",e.transform="",e))}const Mte={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function xte(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,u=void 0===a||a,d={placement:yo(e.placement),variation:Sh(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,mj(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:u})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,mj(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},kte={name:"applyStyles",enabled:!0,phase:"write",fn:function Nte(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!ns(s)||!_o(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];!1===a?s.removeAttribute(o):s.setAttribute(o,!0===a?"":a)}))})},effect:function Ote(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]).reduce(function(u,d){return u[d]="",u},{});!ns(i)||!_o(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(u){i.removeAttribute(u)}))})}},requires:["computeStyles"]},Fte={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function Lte(t){var e=t.state,r=t.name,i=t.options.offset,s=void 0===i?[0,0]:i,o=hj.reduce(function(f,g){return f[g]=function Vte(t,e,n){var r=yo(t),i=[mi,gi].indexOf(r)>=0?-1:1,s="function"==typeof n?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[mi,is].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}(g,e.rects,s),f},{}),a=o[e.placement],d=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=a.x,e.modifiersData.popperOffsets.y+=d),e.modifiersData[r]=o}};var Ute={left:"right",right:"left",bottom:"top",top:"bottom"};function oI(t){return t.replace(/left|right|bottom|top/g,function(e){return Ute[e]})}var Bte={start:"end",end:"start"};function _j(t){return t.replace(/start|end/g,function(e){return Bte[e]})}function yj(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&aS(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function gS(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function vj(t,e,n){return e===lj?gS(function jte(t,e){var n=Pi(t),r=uu(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;var d=aj();(d||!d&&"fixed"===e)&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a+lS(t),y:u}}(t,n)):$c(e)?function Hte(t,e){var n=bh(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):gS(function $te(t){var e,n=uu(t),r=cS(t),i=null==(e=t.ownerDocument)?void 0:e.body,s=Hc(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Hc(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+lS(t),u=-r.scrollTop;return"rtl"===Xo(i||n).direction&&(a+=Hc(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:u}}(uu(t)))}function Ij(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function wj(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}function om(t,e){void 0===e&&(e={});var r=e.placement,i=void 0===r?t.placement:r,s=e.strategy,o=void 0===s?t.strategy:s,a=e.boundary,u=void 0===a?"clippingParents":a,d=e.rootBoundary,f=void 0===d?lj:d,g=e.elementContext,_=void 0===g?sm:g,y=e.altBoundary,E=void 0!==y&&y,w=e.padding,D=void 0===w?0:w,M=Ij("number"!=typeof D?D:wj(D,rm)),k=t.rects.popper,U=t.elements[E?_===sm?"reference":sm:_],te=function Gte(t,e,n,r){var i="clippingParents"===e?function zte(t){var e=tm(iI(t)),r=["absolute","fixed"].indexOf(Xo(t).position)>=0&&ns(t)?nm(t):t;return $c(r)?e.filter(function(i){return $c(i)&&yj(i,r)&&"body"!==_o(i)}):[]}(t):[].concat(e),s=[].concat(i,[n]),a=s.reduce(function(u,d){var f=vj(t,d,r);return u.top=Hc(f.top,u.top),u.right=rI(f.right,u.right),u.bottom=rI(f.bottom,u.bottom),u.left=Hc(f.left,u.left),u},vj(t,s[0],r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}($c(U)?U:U.contextElement||uu(t.elements.popper),u,f,o),de=bh(t.elements.reference),Se=gj({reference:de,element:k,strategy:"absolute",placement:i}),ut=gS(Object.assign({},k,Se)),an=_===sm?ut:de,un={top:te.top-an.top+M.top,bottom:an.bottom-te.bottom+M.bottom,left:te.left-an.left+M.left,right:an.right-te.right+M.right},sr=t.modifiersData.offset;if(_===sm&&sr){var As=sr[i];Object.keys(un).forEach(function(ni){var Gc=[is,rs].indexOf(ni)>=0?1:-1,qc=[gi,rs].indexOf(ni)>=0?"y":"x";un[ni]+=As[qc]*Gc})}return un}const Kte={name:"flip",enabled:!0,phase:"main",fn:function Zte(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0===o||o,u=n.fallbackPlacements,d=n.padding,f=n.boundary,g=n.rootBoundary,_=n.altBoundary,y=n.flipVariations,E=void 0===y||y,w=n.allowedAutoPlacements,D=e.options.placement,M=yo(D),k=u||(M!==D&&E?function Wte(t){if(yo(t)===fS)return[];var e=oI(t);return[_j(t),e,_j(e)]}(D):[oI(D)]),U=[D].concat(k).reduce(function(Rh,fu){return Rh.concat(yo(fu)===fS?function qte(t,e){void 0===e&&(e={});var i=e.boundary,s=e.rootBoundary,o=e.padding,a=e.flipVariations,u=e.allowedAutoPlacements,d=void 0===u?hj:u,f=Sh(e.placement),g=f?a?dj:dj.filter(function(E){return Sh(E)===f}):rm,_=g.filter(function(E){return d.indexOf(E)>=0});0===_.length&&(_=g);var y=_.reduce(function(E,w){return E[w]=om(t,{placement:w,boundary:i,rootBoundary:s,padding:o})[yo(w)],E},{});return Object.keys(y).sort(function(E,w){return y[E]-y[w]})}(e,{placement:fu,boundary:f,rootBoundary:g,padding:d,flipVariations:E,allowedAutoPlacements:w}):fu)},[]),te=e.rects.reference,de=e.rects.popper,Se=new Map,ut=!0,an=U[0],un=0;un<U.length;un++){var sr=U[un],As=yo(sr),ni=Sh(sr)===Ah,Gc=[gi,rs].indexOf(As)>=0,qc=Gc?"width":"height",xi=om(e,{placement:sr,boundary:f,rootBoundary:g,altBoundary:_,padding:d}),Ss=Gc?ni?is:mi:ni?rs:gi;te[qc]>de[qc]&&(Ss=oI(Ss));var mI=oI(Ss),Wc=[];if(s&&Wc.push(xi[As]<=0),a&&Wc.push(xi[Ss]<=0,xi[mI]<=0),Wc.every(function(Rh){return Rh})){an=sr,ut=!1;break}Se.set(sr,Wc)}if(ut)for(var DS=function(fu){var lm=U.find(function(vI){var Zc=Se.get(vI);if(Zc)return Zc.slice(0,fu).every(function(bS){return bS})});if(lm)return an=lm,"break"},cm=E?3:1;cm>0&&"break"!==DS(cm);cm--);e.placement!==an&&(e.modifiersData[r]._skip=!0,e.placement=an,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function am(t,e,n){return Hc(t,rI(e,n))}const Xte={name:"preventOverflow",enabled:!0,phase:"main",fn:function Jte(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0!==o&&o,_=n.tether,y=void 0===_||_,E=n.tetherOffset,w=void 0===E?0:E,D=om(e,{boundary:n.boundary,rootBoundary:n.rootBoundary,padding:n.padding,altBoundary:n.altBoundary}),M=yo(e.placement),R=Sh(e.placement),k=!R,U=pS(M),te=function Qte(t){return"x"===t?"y":"x"}(U),de=e.modifiersData.popperOffsets,Se=e.rects.reference,ut=e.rects.popper,an="function"==typeof w?w(Object.assign({},e.rects,{placement:e.placement})):w,un="number"==typeof an?{mainAxis:an,altAxis:an}:Object.assign({mainAxis:0,altAxis:0},an),sr=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,As={x:0,y:0};if(de){if(s){var ni,Gc="y"===U?gi:mi,qc="y"===U?rs:is,xi="y"===U?"height":"width",Ss=de[U],mI=Ss+D[Gc],Wc=Ss-D[qc],_I=y?-ut[xi]/2:0,DS=R===Ah?Se[xi]:ut[xi],cm=R===Ah?-ut[xi]:-Se[xi],yI=e.elements.arrow,Rh=y&&yI?hS(yI):{width:0,height:0},fu=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},lm=fu[Gc],vI=fu[qc],Zc=am(0,Se[xi],Rh[xi]),bS=k?Se[xi]/2-_I-Zc-lm-un.mainAxis:DS-Zc-lm-un.mainAxis,Ene=k?-Se[xi]/2+_I+Zc+vI+un.mainAxis:cm+Zc+vI+un.mainAxis,AS=e.elements.arrow&&nm(e.elements.arrow),Ine=AS?"y"===U?AS.clientTop||0:AS.clientLeft||0:0,Oj=null!=(ni=sr?.[U])?ni:0,Tne=Ss+Ene-Oj,kj=am(y?rI(mI,Ss+bS-Oj-Ine):mI,Ss,y?Hc(Wc,Tne):Wc);de[U]=kj,As[U]=kj-Ss}if(a){var Vj,Kc=de[te],EI="y"===te?"height":"width",Lj=Kc+D["x"===U?gi:mi],Fj=Kc-D["x"===U?rs:is],SS=-1!==[gi,mi].indexOf(M),Uj=null!=(Vj=sr?.[te])?Vj:0,Bj=SS?Lj:Kc-Se[EI]-ut[EI]-Uj+un.altAxis,jj=SS?Kc+Se[EI]+ut[EI]-Uj-un.altAxis:Fj,$j=y&&SS?function Yte(t,e,n){var r=am(t,e,n);return r>n?n:r}(Bj,Kc,jj):am(y?Bj:Lj,Kc,y?jj:Fj);de[te]=$j,As[te]=$j-Kc}e.modifiersData[r]=As}},requiresIfExists:["offset"]},rne={name:"arrow",enabled:!0,phase:"main",fn:function tne(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=yo(n.placement),u=pS(a),f=[mi,is].indexOf(a)>=0?"height":"width";if(s&&o){var g=function(e,n){return Ij("number"!=typeof(e="function"==typeof e?e(Object.assign({},n.rects,{placement:n.placement})):e)?e:wj(e,rm))}(i.padding,n),_=hS(s),y="y"===u?gi:mi,E="y"===u?rs:is,w=n.rects.reference[f]+n.rects.reference[u]-o[u]-n.rects.popper[f],D=o[u]-n.rects.reference[u],M=nm(s),R=M?"y"===u?M.clientHeight||0:M.clientWidth||0:0,de=R/2-_[f]/2+(w/2-D/2),Se=am(g[y],de,R-_[f]-g[E]);n.modifiersData[r]=((e={})[u]=Se,e.centerOffset=Se-de,e)}},effect:function nne(t){var e=t.state,r=t.options.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"==typeof i&&!(i=e.elements.popper.querySelector(i))||yj(e.elements.popper,i)&&(e.elements.arrow=i))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Tj(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Cj(t){return[gi,is,rs,mi].some(function(e){return t[e]>=0})}var sne=[bte,Ste,Mte,kte,Fte,Kte,Xte,rne,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function ine(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=om(e,{elementContext:"reference"}),a=om(e,{altBoundary:!0}),u=Tj(o,r),d=Tj(a,i,s),f=Cj(u),g=Cj(d);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:d,isReferenceHidden:f,hasPopperEscaped:g},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":g})}}],mS=Cte({defaultModifiers:sne}),cu=function(){return cu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},cu.apply(this,arguments)},aI=function(t,e,n){if(n||2===arguments.length)for(var s,r=0,i=e.length;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},lu={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1,onShow:function(){},onHide:function(){},onToggle:function(){}},one={id:null,override:!0},Dj=function(){function t(e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=lu),void 0===i&&(i=one),this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._triggerEl=n,this._options=cu(cu({},lu),r),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Et.addInstance("Dropdown",this,this._instanceId,i.override)}return t.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._popperInstance=this._createPopperInstance(),this._setupEventListeners(),this._initialized=!0)},t.prototype.destroy=function(){var e=this,n=this._getTriggerEvents();"click"===this._options.triggerType&&n.showEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._clickHandler)}),"hover"===this._options.triggerType&&(n.showEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._hoverShowTriggerElHandler),e._targetEl.removeEventListener(r,e._hoverShowTargetElHandler)}),n.hideEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._hoverHideHandler),e._targetEl.removeEventListener(r,e._hoverHideHandler)})),this._popperInstance.destroy(),this._initialized=!1},t.prototype.removeInstance=function(){Et.removeInstance("Dropdown",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._setupEventListeners=function(){var e=this,n=this._getTriggerEvents();this._clickHandler=function(){e.toggle()},"click"===this._options.triggerType&&n.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._clickHandler)}),this._hoverShowTriggerElHandler=function(r){"click"===r.type?e.toggle():setTimeout(function(){e.show()},e._options.delay)},this._hoverShowTargetElHandler=function(){e.show()},this._hoverHideHandler=function(){setTimeout(function(){e._targetEl.matches(":hover")||e.hide()},e._options.delay)},"hover"===this._options.triggerType&&(n.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._hoverShowTriggerElHandler),e._targetEl.addEventListener(r,e._hoverShowTargetElHandler)}),n.hideEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._hoverHideHandler),e._targetEl.addEventListener(r,e._hoverHideHandler)}))},t.prototype._createPopperInstance=function(){return mS(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[this._options.offsetSkidding,this._options.offsetDistance]}}]})},t.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(n){e._handleClickOutside(n,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._handleClickOutside=function(e,n){var r=e.target,i=this._options.ignoreClickOutsideClass,s=!1;i&&document.querySelectorAll(".".concat(i)).forEach(function(a){a.contains(r)&&(s=!0)}),r!==n&&!n.contains(r)&&!this._triggerEl.contains(r)&&!s&&this.isVisible()&&this.hide()},t.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","click"],hideEvents:["mouseleave"]};case"click":default:return{showEvents:["click"],hideEvents:[]};case"none":return{showEvents:[],hideEvents:[]}}},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},t.prototype.isVisible=function(){return this._visible},t.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._popperInstance.setOptions(function(e){return cu(cu({},e),{modifiers:aI(aI([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},t.prototype.hide=function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._popperInstance.setOptions(function(e){return cu(cu({},e),{modifiers:aI(aI([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._visible=!1,this._removeClickOutsideListener(),this._options.onHide(this)},t}();function _S(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(t){var e=t.getAttribute("data-dropdown-toggle"),n=document.getElementById(e);if(n){var r=t.getAttribute("data-dropdown-placement"),i=t.getAttribute("data-dropdown-offset-skidding"),s=t.getAttribute("data-dropdown-offset-distance"),o=t.getAttribute("data-dropdown-trigger"),a=t.getAttribute("data-dropdown-delay"),u=t.getAttribute("data-dropdown-ignore-click-outside-class");new Dj(n,t,{placement:r||lu.placement,triggerType:o||lu.triggerType,offsetSkidding:i?parseInt(i):lu.offsetSkidding,offsetDistance:s?parseInt(s):lu.offsetDistance,delay:a?parseInt(a):lu.delay,ignoreClickOutsideClass:u||lu.ignoreClickOutsideClass})}else console.error('The dropdown element with id "'.concat(e,'" does not exist. Please check the data-dropdown-toggle attribute.'))})}typeof window<"u"&&(window.Dropdown=Dj,window.initDropdowns=_S);var uI=function(){return uI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},uI.apply(this,arguments)},cI={placement:"center",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40",backdrop:"dynamic",closable:!0,onHide:function(){},onShow:function(){},onToggle:function(){}},ane={id:null,override:!0},bj=function(){function t(e,n,r){void 0===e&&(e=null),void 0===n&&(n=cI),void 0===r&&(r=ane),this._eventListenerInstances=[],this._instanceId=r.id?r.id:e.id,this._targetEl=e,this._options=uI(uI({},cI),n),this._isHidden=!0,this._backdropEl=null,this._initialized=!1,this.init(),Et.addInstance("Modal",this,this._instanceId,r.override)}return t.prototype.init=function(){var e=this;this._targetEl&&!this._initialized&&(this._getPlacementClasses().map(function(n){e._targetEl.classList.add(n)}),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),this._initialized=!1)},t.prototype.removeInstance=function(){Et.removeInstance("Modal",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._createBackdrop=function(){var e;if(this._isHidden){var n=document.createElement("div");n.setAttribute("modal-backdrop",""),(e=n.classList).add.apply(e,this._options.backdropClasses.split(" ")),document.querySelector("body").append(n),this._backdropEl=n}},t.prototype._destroyBackdropEl=function(){this._isHidden||document.querySelector("[modal-backdrop]").remove()},t.prototype._setupModalCloseEventListeners=function(){var e=this;"dynamic"===this._options.backdrop&&(this._clickOutsideEventListener=function(n){e._handleOutsideClick(n.target)},this._targetEl.addEventListener("click",this._clickOutsideEventListener,!0)),this._keydownEventListener=function(n){"Escape"===n.key&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},t.prototype._removeModalCloseEventListeners=function(){"dynamic"===this._options.backdrop&&this._targetEl.removeEventListener("click",this._clickOutsideEventListener,!0),document.body.removeEventListener("keydown",this._keydownEventListener,!0)},t.prototype._handleOutsideClick=function(e){(e===this._targetEl||e===this._backdropEl&&this.isVisible())&&this.hide()},t.prototype._getPlacementClasses=function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":default:return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"]}},t.prototype.toggle=function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)},t.prototype.show=function(){this.isHidden&&(this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,this._options.closable&&this._setupModalCloseEventListeners(),document.body.classList.add("overflow-hidden"),this._options.onShow(this))},t.prototype.hide=function(){this.isVisible&&(this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.closable&&this._removeModalCloseEventListeners(),this._options.onHide(this))},t.prototype.isVisible=function(){return!this._isHidden},t.prototype.isHidden=function(){return this._isHidden},t.prototype.addEventListenerInstance=function(e,n,r){this._eventListenerInstances.push({element:e,type:n,handler:r})},t.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(e){e.element.removeEventListener(e.type,e.handler)}),this._eventListenerInstances=[]},t.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},t}();function yS(){document.querySelectorAll("[data-modal-target]").forEach(function(t){var e=t.getAttribute("data-modal-target"),n=document.getElementById(e);if(n){var r=n.getAttribute("data-modal-placement"),i=n.getAttribute("data-modal-backdrop");new bj(n,{placement:r||cI.placement,backdrop:i||cI.backdrop})}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-target attribute points to the correct modal id?."))}),document.querySelectorAll("[data-modal-toggle]").forEach(function(t){var e=t.getAttribute("data-modal-toggle");if(document.getElementById(e)){var r=Et.getInstance("Modal",e);if(r){var i=function(){r.toggle()};t.addEventListener("click",i),r.addEventListenerInstance(t,"click",i)}else console.error("Modal with id ".concat(e," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-toggle attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-show]").forEach(function(t){var e=t.getAttribute("data-modal-show");if(document.getElementById(e)){var r=Et.getInstance("Modal",e);if(r){var i=function(){r.show()};t.addEventListener("click",i),r.addEventListenerInstance(t,"click",i)}else console.error("Modal with id ".concat(e," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-show attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-hide]").forEach(function(t){var e=t.getAttribute("data-modal-hide");if(document.getElementById(e)){var r=Et.getInstance("Modal",e);if(r){var i=function(){r.hide()};t.addEventListener("click",i),r.addEventListenerInstance(t,"click",i)}else console.error("Modal with id ".concat(e," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-hide attribute points to the correct modal id?"))})}typeof window<"u"&&(window.Modal=bj,window.initModals=yS);var lI=function(){return lI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},lI.apply(this,arguments)},zc={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},une={id:null,override:!0},Aj=function(){function t(e,n,r){void 0===e&&(e=null),void 0===n&&(n=zc),void 0===r&&(r=une),this._eventListenerInstances=[],this._instanceId=r.id?r.id:e.id,this._targetEl=e,this._options=lI(lI({},zc),n),this._visible=!1,this._initialized=!1,this.init(),Et.addInstance("Drawer",this,this._instanceId,r.override)}return t.prototype.init=function(){var e=this;this._targetEl&&!this._initialized&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform"),this._getPlacementClasses(this._options.placement).base.map(function(n){e._targetEl.classList.add(n)}),this._handleEscapeKey=function(n){"Escape"===n.key&&e.isVisible()&&e.hide()},document.addEventListener("keydown",this._handleEscapeKey),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),document.removeEventListener("keydown",this._handleEscapeKey),this._initialized=!1)},t.prototype.removeInstance=function(){Et.removeInstance("Drawer",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.hide=function(){var e=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(n){e._targetEl.classList.remove(n)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(n){e._targetEl.classList.add(n)})):(this._getPlacementClasses(this._options.placement).active.map(function(n){e._targetEl.classList.remove(n)}),this._getPlacementClasses(this._options.placement).inactive.map(function(n){e._targetEl.classList.add(n)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)},t.prototype.show=function(){var e=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(n){e._targetEl.classList.add(n)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(n){e._targetEl.classList.remove(n)})):(this._getPlacementClasses(this._options.placement).active.map(function(n){e._targetEl.classList.add(n)}),this._getPlacementClasses(this._options.placement).inactive.map(function(n){e._targetEl.classList.remove(n)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},t.prototype._createBackdrop=function(){var e,n=this;if(!this._visible){var r=document.createElement("div");r.setAttribute("drawer-backdrop",""),(e=r.classList).add.apply(e,this._options.backdropClasses.split(" ")),document.querySelector("body").append(r),r.addEventListener("click",function(){n.hide()})}},t.prototype._destroyBackdropEl=function(){this._visible&&document.querySelector("[drawer-backdrop]").remove()},t.prototype._getPlacementClasses=function(e){switch(e){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]}}},t.prototype.isHidden=function(){return!this._visible},t.prototype.isVisible=function(){return this._visible},t.prototype.addEventListenerInstance=function(e,n,r){this._eventListenerInstances.push({element:e,type:n,handler:r})},t.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(e){e.element.removeEventListener(e.type,e.handler)}),this._eventListenerInstances=[]},t.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},t}();function vS(){document.querySelectorAll("[data-drawer-target]").forEach(function(t){var e=t.getAttribute("data-drawer-target"),n=document.getElementById(e);if(n){var r=t.getAttribute("data-drawer-placement"),i=t.getAttribute("data-drawer-body-scrolling"),s=t.getAttribute("data-drawer-backdrop"),o=t.getAttribute("data-drawer-edge"),a=t.getAttribute("data-drawer-edge-offset");new Aj(n,{placement:r||zc.placement,bodyScrolling:i?"true"===i:zc.bodyScrolling,backdrop:s?"true"===s:zc.backdrop,edge:o?"true"===o:zc.edge,edgeOffset:a||zc.edgeOffset})}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(t){var e=t.getAttribute("data-drawer-toggle");if(document.getElementById(e)){var r=Et.getInstance("Drawer",e);if(r){var i=function(){r.toggle()};t.addEventListener("click",i),r.addEventListenerInstance(t,"click",i)}else console.error("Drawer with id ".concat(e," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-dismiss], [data-drawer-hide]").forEach(function(t){var e=t.getAttribute("data-drawer-dismiss")?t.getAttribute("data-drawer-dismiss"):t.getAttribute("data-drawer-hide");if(document.getElementById(e)){var r=Et.getInstance("Drawer",e);if(r){var i=function(){r.hide()};t.addEventListener("click",i),r.addEventListenerInstance(t,"click",i)}else console.error("Drawer with id ".concat(e," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id"))}),document.querySelectorAll("[data-drawer-show]").forEach(function(t){var e=t.getAttribute("data-drawer-show");if(document.getElementById(e)){var r=Et.getInstance("Drawer",e);if(r){var i=function(){r.show()};t.addEventListener("click",i),r.addEventListenerInstance(t,"click",i)}else console.error("Drawer with id ".concat(e," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))})}typeof window<"u"&&(window.Drawer=Aj,window.initDrawers=vS);var dI=function(){return dI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},dI.apply(this,arguments)},Sj={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},cne={id:null,override:!0},Rj=function(){function t(e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=Sj),void 0===i&&(i=cne),this._instanceId=i.id?i.id:e.id,this._tabsEl=e,this._items=n,this._activeTab=r?this.getTab(r.defaultTabId):null,this._options=dI(dI({},Sj),r),this._initialized=!1,this.init(),Et.addInstance("Tabs",this,this._tabsEl.id,!0),Et.addInstance("Tabs",this,this._instanceId,i.override)}return t.prototype.init=function(){var e=this;this._items.length&&!this._initialized&&(this._activeTab||this.setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(n){n.triggerEl.addEventListener("click",function(){e.show(n.id)})}))},t.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},t.prototype.removeInstance=function(){this.destroy(),Et.removeInstance("Tabs",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getActiveTab=function(){return this._activeTab},t.prototype.setActiveTab=function(e){this._activeTab=e},t.prototype.getTab=function(e){return this._items.filter(function(n){return n.id===e})[0]},t.prototype.show=function(e,n){var r,i,s=this;void 0===n&&(n=!1);var o=this.getTab(e);o===this._activeTab&&!n||(this._items.map(function(a){var u,d;a!==o&&((u=a.triggerEl.classList).remove.apply(u,s._options.activeClasses.split(" ")),(d=a.triggerEl.classList).add.apply(d,s._options.inactiveClasses.split(" ")),a.targetEl.classList.add("hidden"),a.triggerEl.setAttribute("aria-selected","false"))}),(r=o.triggerEl.classList).add.apply(r,this._options.activeClasses.split(" ")),(i=o.triggerEl.classList).remove.apply(i,this._options.inactiveClasses.split(" ")),o.triggerEl.setAttribute("aria-selected","true"),o.targetEl.classList.remove("hidden"),this.setActiveTab(o),this._options.onShow(this,o))},t}();function ES(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(t){var e=[],n=null;t.querySelectorAll('[role="tab"]').forEach(function(r){var i="true"===r.getAttribute("aria-selected"),s={id:r.getAttribute("data-tabs-target"),triggerEl:r,targetEl:document.querySelector(r.getAttribute("data-tabs-target"))};e.push(s),i&&(n=s.id)}),new Rj(t,e,{defaultTabId:n})})}typeof window<"u"&&(window.Tabs=Rj,window.initTabs=ES);var du=function(){return du=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},du.apply(this,arguments)},hI=function(t,e,n){if(n||2===arguments.length)for(var s,r=0,i=e.length;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},fI={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},lne={id:null,override:!0},Pj=function(){function t(e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=fI),void 0===i&&(i=lne),this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._triggerEl=n,this._options=du(du({},fI),r),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Et.addInstance("Tooltip",this,this._instanceId,i.override)}return t.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},t.prototype.destroy=function(){var e=this;if(this._initialized){var n=this._getTriggerEvents();n.showEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._showHandler)}),n.hideEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},t.prototype.removeInstance=function(){Et.removeInstance("Tooltip",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._setupEventListeners=function(){var e=this,n=this._getTriggerEvents();this._showHandler=function(){e.show()},this._hideHandler=function(){e.hide()},n.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._showHandler)}),n.hideEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._hideHandler)})},t.prototype._createPopperInstance=function(){return mS(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},t.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},t.prototype._setupKeydownListener=function(){var e=this;this._keydownEventListener=function(n){"Escape"===n.key&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},t.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},t.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(n){e._handleClickOutside(n,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._handleClickOutside=function(e,n){var r=e.target;r!==n&&!n.contains(r)&&!this._triggerEl.contains(r)&&this.isVisible()&&this.hide()},t.prototype.isVisible=function(){return this._visible},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},t.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(e){return du(du({},e),{modifiers:hI(hI([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},t.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(e){return du(du({},e),{modifiers:hI(hI([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},t}();function IS(){document.querySelectorAll("[data-tooltip-target]").forEach(function(t){var e=t.getAttribute("data-tooltip-target"),n=document.getElementById(e);if(n){var r=t.getAttribute("data-tooltip-trigger"),i=t.getAttribute("data-tooltip-placement");new Pj(n,t,{placement:i||fI.placement,triggerType:r||fI.triggerType})}else console.error('The tooltip element with id "'.concat(e,'" does not exist. Please check the data-tooltip-target attribute.'))})}typeof window<"u"&&(window.Tooltip=Pj,window.initTooltips=IS);var hu=function(){return hu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},hu.apply(this,arguments)},pI=function(t,e,n){if(n||2===arguments.length)for(var s,r=0,i=e.length;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},um={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},dne={id:null,override:!0},xj=function(){function t(e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=um),void 0===i&&(i=dne),this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._triggerEl=n,this._options=hu(hu({},um),r),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Et.addInstance("Popover",this,i.id?i.id:this._targetEl.id,i.override)}return t.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},t.prototype.destroy=function(){var e=this;if(this._initialized){var n=this._getTriggerEvents();n.showEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._showHandler),e._targetEl.removeEventListener(r,e._showHandler)}),n.hideEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._hideHandler),e._targetEl.removeEventListener(r,e._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},t.prototype.removeInstance=function(){Et.removeInstance("Popover",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._setupEventListeners=function(){var e=this,n=this._getTriggerEvents();this._showHandler=function(){e.show()},this._hideHandler=function(){setTimeout(function(){e._targetEl.matches(":hover")||e.hide()},100)},n.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._showHandler),e._targetEl.addEventListener(r,e._showHandler)}),n.hideEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._hideHandler),e._targetEl.addEventListener(r,e._hideHandler)})},t.prototype._createPopperInstance=function(){return mS(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})},t.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},t.prototype._setupKeydownListener=function(){var e=this;this._keydownEventListener=function(n){"Escape"===n.key&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},t.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},t.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(n){e._handleClickOutside(n,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._handleClickOutside=function(e,n){var r=e.target;r!==n&&!n.contains(r)&&!this._triggerEl.contains(r)&&this.isVisible()&&this.hide()},t.prototype.isVisible=function(){return this._visible},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},t.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(e){return hu(hu({},e),{modifiers:pI(pI([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},t.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(e){return hu(hu({},e),{modifiers:pI(pI([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},t}();function wS(){document.querySelectorAll("[data-popover-target]").forEach(function(t){var e=t.getAttribute("data-popover-target"),n=document.getElementById(e);if(n){var r=t.getAttribute("data-popover-trigger"),i=t.getAttribute("data-popover-placement"),s=t.getAttribute("data-popover-offset");new xj(n,t,{placement:i||um.placement,offset:s?parseInt(s):um.offset,triggerType:r||um.triggerType})}else console.error('The popover element with id "'.concat(e,'" does not exist. Please check the data-popover-target attribute.'))})}typeof window<"u"&&(window.Popover=xj,window.initPopovers=wS);var gI=function(){return gI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},gI.apply(this,arguments)},TS={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},hne={id:null,override:!0},Mj=function(){function t(e,n,r,i,s){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=TS),void 0===s&&(s=hne),this._instanceId=s.id?s.id:r.id,this._parentEl=e,this._triggerEl=n,this._targetEl=r,this._options=gI(gI({},TS),i),this._visible=!1,this._initialized=!1,this.init(),Et.addInstance("Dial",this,this._instanceId,s.override)}return t.prototype.init=function(){var e=this;if(this._triggerEl&&this._targetEl&&!this._initialized){var n=this._getTriggerEventTypes(this._options.triggerType);this._showEventHandler=function(){e.show()},n.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._showEventHandler),e._targetEl.addEventListener(r,e._showEventHandler)}),this._hideEventHandler=function(){e._parentEl.matches(":hover")||e.hide()},n.hideEvents.forEach(function(r){e._parentEl.addEventListener(r,e._hideEventHandler)}),this._initialized=!0}},t.prototype.destroy=function(){var e=this;if(this._initialized){var n=this._getTriggerEventTypes(this._options.triggerType);n.showEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._showEventHandler),e._targetEl.removeEventListener(r,e._showEventHandler)}),n.hideEvents.forEach(function(r){e._parentEl.removeEventListener(r,e._hideEventHandler)}),this._initialized=!1}},t.prototype.removeInstance=function(){Et.removeInstance("Dial",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.hide=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)},t.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)},t.prototype.toggle=function(){this._visible?this.hide():this.show()},t.prototype.isHidden=function(){return!this._visible},t.prototype.isVisible=function(){return this._visible},t.prototype._getTriggerEventTypes=function(e){switch(e){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},t}();function CS(){document.querySelectorAll("[data-dial-init]").forEach(function(t){var e=t.querySelector("[data-dial-toggle]");if(e){var n=e.getAttribute("data-dial-toggle"),r=document.getElementById(n);if(r){var i=e.getAttribute("data-dial-trigger");new Mj(t,e,r,{triggerType:i||TS.triggerType})}else console.error("Dial with id ".concat(n," does not exist. Are you sure that the data-dial-toggle attribute points to the correct modal id?"))}else console.error("Dial with id ".concat(t.id," does not have a trigger element. Are you sure that the data-dial-toggle attribute exists?"))})}function Nj(){nS(),iS(),sS(),oS(),_S(),yS(),vS(),ES(),IS(),wS(),CS()}function pne(t,e){if(1&t&&(at(0,"div",1)(1,"div",2)(2,"div",3),Kt(3),gd(4,"async"),mt()()()),2&t){const n=wn();let r;Mn(3),to(" ",null==(r=md(4,1,n.myErrorHandler.error$))?null:r.message," ")}}typeof window<"u"&&(window.Dial=Mj,window.initDials=CS),typeof window<"u"&&(window.initFlowbite=Nj),new Qee("load",[nS,iS,sS,oS,_S,yS,vS,ES,IS,wS,CS]).init();let gne=(()=>{class t{get myErrorHandler(){return this.errorHandler}constructor(n){this.errorHandler=n,this.errorVisible=!1,this.myErrorHandler.error$.subscribe(r=>{r&&(this.errorVisible=!0,setTimeout(()=>this.errorVisible=!1,2e3))})}static#e=this.\u0275fac=function(r){return new(r||t)(ee(ms))};static#t=this.\u0275cmp=hs({type:t,selectors:[["app-error-popup"]],decls:2,vars:3,consts:[["class","fixed top-20 right-10 z-50",4,"ngIf"],[1,"fixed","top-20","right-10","z-50"],[1,"bg-red-800","text-white","py-5","px-10","rounded","shadow-md",2,"font-size","10em"],[1,"text-sm","md:text-lg","text-gray-200"]],template:function(r,i){if(1&r&&(Js(0,pne,5,3,"div",0),gd(1,"async")),2&r){let s;ci("ngIf",i.errorVisible&&!(null==(s=md(1,1,i.myErrorHandler.error$))||!s.message))}},dependencies:[U0,$0],styles:[".hidden[_ngcontent-%COMP%]{display:none}"]})}return t})(),mne=(()=>{class t{constructor(){}ngOnInit(){Nj()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=hs({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(r,i){1&r&&np(0,"app-error-popup")(1,"router-outlet")},dependencies:[_C,gne]})}return t})();const _ne_firebaseConfig={apiKey:"AIzaSyCmxBk7v-Xmu3lDbO3ATSeIR6CouNXmQ5M",authDomain:"sharedshoppinglist-e4962.firebaseapp.com",projectId:"sharedshoppinglist-e4962",storageBucket:"sharedshoppinglist-e4962.appspot.com",messagingSenderId:"372226477733",appId:"1:372226477733:web:2e74fc78479fce35c4474c",measurementId:"G-34V9RTT3CM"};let yne=(()=>{class t{constructor(){this.errorSubject=new P(null),this.error$=this.errorSubject.asObservable()}handleError(n){this.errorSubject.next(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})(),vne=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Dr({type:t,bootstrap:[mne]});static#n=this.\u0275inj=wr({providers:[{provide:ms,useClass:yne}],imports:[X5,tZ.initializeApp(_ne_firebaseConfig),ZU,Zee,Oee]})}return t})();Y5().bootstrapModule(vne).catch(t=>console.error(t))},106:(ss,kn,Fe)=>{Fe.d(kn,{Z:()=>Ln});var I=Fe(58),xe=Fe(537),j=Fe(534),Me=Fe(879);class ct{constructor(ke,$e){this._delegate=ke,this.firebase=$e,(0,j._addComponent)(ke,new xe.wA("app-compat",()=>this,"PUBLIC")),this.container=ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ke){this._delegate.automaticDataCollectionEnabled=ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ke=>{this._delegate.checkDestroyed(),ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(ke,$e=j._DEFAULT_ENTRY_NAME){var Fn;this._delegate.checkDestroyed();const Un=this._delegate.container.getProvider(ke);return!Un.isInitialized()&&"EXPLICIT"===(null===(Fn=Un.getComponent())||void 0===Fn?void 0:Fn.instantiationMode)&&Un.initialize(),Un.getImmediate({identifier:$e})}_removeServiceInstance(ke,$e=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ke).clearInstance($e)}_addComponent(ke){(0,j._addComponent)(this._delegate,ke)}_addOrOverwriteComponent(ke){(0,j._addOrOverwriteComponent)(this._delegate,ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const en=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function Qe(){const pt=function Vn(pt){const ke={},$e={__esModule:!0,initializeApp:function Vt(He,bn={}){const K=j.initializeApp(He,bn);if((0,I.r3)(ke,K.name))return ke[K.name];const Gt=new pt(K,$e);return ke[K.name]=Gt,Gt},app:Un,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function St(He){const bn=He.name,K=bn.replace("-compat","");if(j._registerComponent(He)&&"PUBLIC"===He.type){const Gt=(Lt=Un())=>{if("function"!=typeof Lt[K])throw en.create("invalid-app-argument",{appName:bn});return Lt[K]()};void 0!==He.serviceProps&&(0,I.ZB)(Gt,He.serviceProps),$e[K]=Gt,pt.prototype[K]=function(...Lt){return this._getService.bind(this,bn).apply(this,He.multipleInstances?Lt:[])}}return"PUBLIC"===He.type?$e[K]:null},removeApp:function Fn(He){delete ke[He]},useAsService:function _r(He,bn){return"serverAuth"===bn?null:bn},modularAPIs:j}};function Un(He){if(!(0,I.r3)(ke,He=He||j._DEFAULT_ENTRY_NAME))throw en.create("no-app",{appName:He});return ke[He]}return $e.default=$e,Object.defineProperty($e,"apps",{get:function gt(){return Object.keys(ke).map(He=>ke[He])}}),Un.App=pt,$e}(ct);return pt.INTERNAL=Object.assign(Object.assign({},pt.INTERNAL),{createFirebaseNamespace:Qe,extendNamespace:function ke($e){(0,I.ZB)(pt,$e)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),pt}(),ie=new Me.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const pt=self.firebase.SDK_VERSION;pt&&pt.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ln=Q;!function lt(pt){(0,j.registerVersion)("@firebase/app-compat","0.2.23",pt)}()},534:(ss,kn,Fe)=>{Fe.r(kn),Fe.d(kn,{FirebaseError:()=>Me.ZR,SDK_VERSION:()=>Ps,_DEFAULT_ENTRY_NAME:()=>_i,_addComponent:()=>Rs,_addOrOverwriteComponent:()=>Jn,_apps:()=>vr,_clearComponents:()=>Sn,_components:()=>as,_getProvider:()=>Ft,_registerComponent:()=>Eo,_removeServiceInstance:()=>yi,deleteApp:()=>ar,getApp:()=>xs,getApps:()=>ra,initializeApp:()=>na,onLog:()=>ia,registerVersion:()=>Ms,setLogLevel:()=>Qc});var I=Fe(861),xe=Fe(537),j=Fe(879),Me=Fe(58);const ct=(O,S)=>S.some(ne=>O instanceof ne);let zt,en;const Q=new WeakMap,ie=new WeakMap,Ie=new WeakMap,Ke=new WeakMap,lt=new WeakMap;let ke={get(O,S,ne){if(O instanceof IDBTransaction){if("done"===S)return ie.get(O);if("objectStoreNames"===S)return O.objectStoreNames||Ie.get(O);if("store"===S)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return Vt(O[S])},set:(O,S,ne)=>(O[S]=ne,!0),has:(O,S)=>O instanceof IDBTransaction&&("done"===S||"store"===S)||S in O};function Un(O){return"function"==typeof O?function Fn(O){return O!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Qe(){return en||(en=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(O)?function(...S){return O.apply(gt(this),S),Vt(Q.get(this))}:function(...S){return Vt(O.apply(gt(this),S))}:function(S,...ne){const Te=O.call(gt(this),S,...ne);return Ie.set(Te,S.sort?S.sort():[S]),Vt(Te)}}(O):(O instanceof IDBTransaction&&function pt(O){if(ie.has(O))return;const S=new Promise((ne,Te)=>{const Ve=()=>{O.removeEventListener("complete",We),O.removeEventListener("error",$),O.removeEventListener("abort",$)},We=()=>{ne(),Ve()},$=()=>{Te(O.error||new DOMException("AbortError","AbortError")),Ve()};O.addEventListener("complete",We),O.addEventListener("error",$),O.addEventListener("abort",$)});ie.set(O,S)}(O),ct(O,function Vn(){return zt||(zt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(O,ke):O)}function Vt(O){if(O instanceof IDBRequest)return function Ln(O){const S=new Promise((ne,Te)=>{const Ve=()=>{O.removeEventListener("success",We),O.removeEventListener("error",$)},We=()=>{ne(Vt(O.result)),Ve()},$=()=>{Te(O.error),Ve()};O.addEventListener("success",We),O.addEventListener("error",$)});return S.then(ne=>{ne instanceof IDBCursor&&Q.set(ne,O)}).catch(()=>{}),lt.set(S,O),S}(O);if(Ke.has(O))return Ke.get(O);const S=Un(O);return S!==O&&(Ke.set(O,S),lt.set(S,O)),S}const gt=O=>lt.get(O),He=["get","getKey","getAll","getAllKeys","count"],bn=["put","add","delete","clear"],K=new Map;function Gt(O,S){if(!(O instanceof IDBDatabase)||S in O||"string"!=typeof S)return;if(K.get(S))return K.get(S);const ne=S.replace(/FromIndex$/,""),Te=S!==ne,Ve=bn.includes(ne);if(!(ne in(Te?IDBIndex:IDBObjectStore).prototype)||!Ve&&!He.includes(ne))return;const We=function(){var $=(0,I.Z)(function*(hn,...Ee){const Ye=this.transaction(hn,Ve?"readwrite":"readonly");let oa=Ye.store;return Te&&(oa=oa.index(Ee.shift())),(yield Promise.all([oa[ne](...Ee),Ve&&Ye.done]))[0]});return function(Ee){return $.apply(this,arguments)}}();return K.set(S,We),We}!function $e(O){ke=O(ke)}(O=>({...O,get:(S,ne,Te)=>Gt(S,ne)||O.get(S,ne,Te),has:(S,ne)=>!!Gt(S,ne)||O.has(S,ne)}));class Lt{constructor(S){this.container=S}getPlatformInfoString(){return this.container.getProviders().map(ne=>{if(function yn(O){const S=O.getComponent();return"VERSION"===S?.type}(ne)){const Te=ne.getImmediate();return`${Te.library}/${Te.version}`}return null}).filter(ne=>ne).join(" ")}}const Mi="@firebase/app",rt=new j.Yd("@firebase/app"),_i="[DEFAULT]",mu={[Mi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vr=new Map,as=new Map;function Rs(O,S){try{O.container.addComponent(S)}catch(ne){rt.debug(`Component ${S.name} failed to register with FirebaseApp ${O.name}`,ne)}}function Jn(O,S){O.container.addOrOverwriteComponent(S)}function Eo(O){const S=O.name;if(as.has(S))return rt.debug(`There were multiple attempts to register component ${S}.`),!1;as.set(S,O);for(const ne of vr.values())Rs(ne,O);return!0}function Ft(O,S){const ne=O.container.getProvider("heartbeat").getImmediate({optional:!0});return ne&&ne.triggerHeartbeat(),O.container.getProvider(S)}function yi(O,S,ne=_i){Ft(O,S).clearInstance(ne)}function Sn(){as.clear()}const ri=new Me.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ii{constructor(S,ne,Te){this._isDeleted=!1,this._options=Object.assign({},S),this._config=Object.assign({},ne),this._name=ne.name,this._automaticDataCollectionEnabled=ne.automaticDataCollectionEnabled,this._container=Te,this.container.addComponent(new xe.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(S){this.checkDestroyed(),this._automaticDataCollectionEnabled=S}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(S){this._isDeleted=S}checkDestroyed(){if(this.isDeleted)throw ri.create("app-deleted",{appName:this._name})}}const Ps="10.6.0";function na(O,S={}){let ne=O;"object"!=typeof S&&(S={name:S});const Te=Object.assign({name:_i,automaticDataCollectionEnabled:!1},S),Ve=Te.name;if("string"!=typeof Ve||!Ve)throw ri.create("bad-app-name",{appName:String(Ve)});if(ne||(ne=(0,Me.aH)()),!ne)throw ri.create("no-options");const We=vr.get(Ve);if(We){if((0,Me.vZ)(ne,We.options)&&(0,Me.vZ)(Te,We.config))return We;throw ri.create("duplicate-app",{appName:Ve})}const $=new xe.H0(Ve);for(const Ee of as.values())$.addComponent(Ee);const hn=new ii(ne,Te,$);return vr.set(Ve,hn),hn}function xs(O=_i){const S=vr.get(O);if(!S&&O===_i&&(0,Me.aH)())return na();if(!S)throw ri.create("no-app",{appName:O});return S}function ra(){return Array.from(vr.values())}function ar(O){return Er.apply(this,arguments)}function Er(){return(Er=(0,I.Z)(function*(O){const S=O.name;vr.has(S)&&(vr.delete(S),yield Promise.all(O.container.getProviders().map(ne=>ne.delete())),O.isDeleted=!0)})).apply(this,arguments)}function Ms(O,S,ne){var Te;let Ve=null!==(Te=mu[O])&&void 0!==Te?Te:O;ne&&(Ve+=`-${ne}`);const We=Ve.match(/\s|\//),$=S.match(/\s|\//);if(We||$){const hn=[`Unable to register library "${Ve}" with version "${S}":`];return We&&hn.push(`library name "${Ve}" contains illegal characters (whitespace or "/")`),We&&$&&hn.push("and"),$&&hn.push(`version name "${S}" contains illegal characters (whitespace or "/")`),void rt.warn(hn.join(" "))}Eo(new xe.wA(`${Ve}-version`,()=>({library:Ve,version:S}),"VERSION"))}function ia(O,S){if(null!==O&&"function"!=typeof O)throw ri.create("invalid-log-argument");(0,j.Am)(O,S)}function Qc(O){(0,j.Ub)(O)}const _u="firebase-heartbeat-database",sa=1,b="firebase-heartbeat-store";let C=null;function A(){return C||(C=function St(O,S,{blocked:ne,upgrade:Te,blocking:Ve,terminated:We}={}){const $=indexedDB.open(O,S),hn=Vt($);return Te&&$.addEventListener("upgradeneeded",Ee=>{Te(Vt($.result),Ee.oldVersion,Ee.newVersion,Vt($.transaction),Ee)}),ne&&$.addEventListener("blocked",Ee=>ne(Ee.oldVersion,Ee.newVersion,Ee)),hn.then(Ee=>{We&&Ee.addEventListener("close",()=>We()),Ve&&Ee.addEventListener("versionchange",Ye=>Ve(Ye.oldVersion,Ye.newVersion,Ye))}).catch(()=>{}),hn}(_u,sa,{upgrade:(O,S)=>{0===S&&O.createObjectStore(b)}}).catch(O=>{throw ri.create("idb-open",{originalErrorMessage:O.message})})),C}function P(){return(P=(0,I.Z)(function*(O){try{return yield(yield A()).transaction(b).objectStore(b).get(ze(O))}catch(S){if(S instanceof Me.ZR)rt.warn(S.message);else{const ne=ri.create("idb-get",{originalErrorMessage:S?.message});rt.warn(ne.message)}}})).apply(this,arguments)}function W(O,S){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,I.Z)(function*(O,S){try{const Te=(yield A()).transaction(b,"readwrite");yield Te.objectStore(b).put(S,ze(O)),yield Te.done}catch(ne){if(ne instanceof Me.ZR)rt.warn(ne.message);else{const Te=ri.create("idb-set",{originalErrorMessage:ne?.message});rt.warn(Te.message)}}})).apply(this,arguments)}function ze(O){return`${O.name}!${O.options.appId}`}class Rn{constructor(S){this.container=S,this._heartbeatsCache=null;const ne=this.container.getProvider("app").getImmediate();this._storage=new Tt(ne),this._heartbeatsCachePromise=this._storage.read().then(Te=>(this._heartbeatsCache=Te,Te))}triggerHeartbeat(){var S=this;return(0,I.Z)(function*(){var ne;const Ve=S.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),We=ye();if(null==(null===(ne=S._heartbeatsCache)||void 0===ne?void 0:ne.heartbeats)&&(S._heartbeatsCache=yield S._heartbeatsCachePromise),S._heartbeatsCache.lastSentHeartbeatDate!==We&&!S._heartbeatsCache.heartbeats.some($=>$.date===We))return S._heartbeatsCache.heartbeats.push({date:We,agent:Ve}),S._heartbeatsCache.heartbeats=S._heartbeatsCache.heartbeats.filter($=>{const hn=new Date($.date).valueOf();return Date.now()-hn<=2592e6}),S._storage.overwrite(S._heartbeatsCache)})()}getHeartbeatsHeader(){var S=this;return(0,I.Z)(function*(){var ne;if(null===S._heartbeatsCache&&(yield S._heartbeatsCachePromise),null==(null===(ne=S._heartbeatsCache)||void 0===ne?void 0:ne.heartbeats)||0===S._heartbeatsCache.heartbeats.length)return"";const Te=ye(),{heartbeatsToSend:Ve,unsentEntries:We}=function Bn(O,S=1024){const ne=[];let Te=O.slice();for(const Ve of O){const We=ne.find($=>$.agent===Ve.agent);if(We){if(We.dates.push(Ve.date),ki(ne)>S){We.dates.pop();break}}else if(ne.push({agent:Ve.agent,dates:[Ve.date]}),ki(ne)>S){ne.pop();break}Te=Te.slice(1)}return{heartbeatsToSend:ne,unsentEntries:Te}}(S._heartbeatsCache.heartbeats),$=(0,Me.L)(JSON.stringify({version:2,heartbeats:Ve}));return S._heartbeatsCache.lastSentHeartbeatDate=Te,We.length>0?(S._heartbeatsCache.heartbeats=We,yield S._storage.overwrite(S._heartbeatsCache)):(S._heartbeatsCache.heartbeats=[],S._storage.overwrite(S._heartbeatsCache)),$})()}}function ye(){return(new Date).toISOString().substring(0,10)}class Tt{constructor(S){this.app=S,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,Me.hl)()&&(0,Me.eu)().then(()=>!0).catch(()=>!1)})()}read(){var S=this;return(0,I.Z)(function*(){return(yield S._canUseIndexedDBPromise)&&(yield function q(O){return P.apply(this,arguments)}(S.app))||{heartbeats:[]}})()}overwrite(S){var ne=this;return(0,I.Z)(function*(){var Te;if(yield ne._canUseIndexedDBPromise){const We=yield ne.read();return W(ne.app,{lastSentHeartbeatDate:null!==(Te=S.lastSentHeartbeatDate)&&void 0!==Te?Te:We.lastSentHeartbeatDate,heartbeats:S.heartbeats})}})()}add(S){var ne=this;return(0,I.Z)(function*(){var Te;if(yield ne._canUseIndexedDBPromise){const We=yield ne.read();return W(ne.app,{lastSentHeartbeatDate:null!==(Te=S.lastSentHeartbeatDate)&&void 0!==Te?Te:We.lastSentHeartbeatDate,heartbeats:[...We.heartbeats,...S.heartbeats]})}})()}}function ki(O){return(0,Me.L)(JSON.stringify({version:2,heartbeats:O})).length}!function Yc(O){Eo(new xe.wA("platform-logger",S=>new Lt(S),"PRIVATE")),Eo(new xe.wA("heartbeat",S=>new Rn(S),"PRIVATE")),Ms(Mi,"0.9.23",O),Ms(Mi,"0.9.23","esm2017"),Ms("fire-js","")}("")},537:(ss,kn,Fe)=>{Fe.d(kn,{H0:()=>Vn,wA:()=>j});var I=Fe(861),xe=Fe(58);class j{constructor(Q,ie,Ie){this.name=Q,this.instanceFactory=ie,this.type=Ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const Me="[DEFAULT]";class ct{constructor(Q,ie){this.name=Q,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const ie=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(ie)){const Ie=new xe.BH;if(this.instancesDeferred.set(ie,Ie),this.isInitialized(ie)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:ie});Ke&&Ie.resolve(Ke)}catch{}}return this.instancesDeferred.get(ie).promise}getImmediate(Q){var ie;const Ie=this.normalizeInstanceIdentifier(Q?.identifier),Ke=null!==(ie=Q?.optional)&&void 0!==ie&&ie;if(!this.isInitialized(Ie)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ie})}catch(lt){if(Ke)return null;throw lt}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if(function en(Qe){return"EAGER"===Qe.instantiationMode}(Q))try{this.getOrInitializeService({instanceIdentifier:Me})}catch{}for(const[ie,Ie]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(ie);try{const lt=this.getOrInitializeService({instanceIdentifier:Ke});Ie.resolve(lt)}catch{}}}}clearInstance(Q=Me){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,I.Z)(function*(){const ie=Array.from(Q.instances.values());yield Promise.all([...ie.filter(Ie=>"INTERNAL"in Ie).map(Ie=>Ie.INTERNAL.delete()),...ie.filter(Ie=>"_delete"in Ie).map(Ie=>Ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=Me){return this.instances.has(Q)}getOptions(Q=Me){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:ie={}}=Q,Ie=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(Ie))throw Error(`${this.name}(${Ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:Ie,options:ie});for(const[lt,Ln]of this.instancesDeferred.entries())Ie===this.normalizeInstanceIdentifier(lt)&&Ln.resolve(Ke);return Ke}onInit(Q,ie){var Ie;const Ke=this.normalizeInstanceIdentifier(ie),lt=null!==(Ie=this.onInitCallbacks.get(Ke))&&void 0!==Ie?Ie:new Set;lt.add(Q),this.onInitCallbacks.set(Ke,lt);const Ln=this.instances.get(Ke);return Ln&&Q(Ln,Ke),()=>{lt.delete(Q)}}invokeOnInitCallbacks(Q,ie){const Ie=this.onInitCallbacks.get(ie);if(Ie)for(const Ke of Ie)try{Ke(Q,ie)}catch{}}getOrInitializeService({instanceIdentifier:Q,options:ie={}}){let Ie=this.instances.get(Q);if(!Ie&&this.component&&(Ie=this.component.instanceFactory(this.container,{instanceIdentifier:(Qe=Q,Qe===Me?void 0:Qe),options:ie}),this.instances.set(Q,Ie),this.instancesOptions.set(Q,ie),this.invokeOnInitCallbacks(Ie,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,Ie)}catch{}var Qe;return Ie||null}normalizeInstanceIdentifier(Q=Me){return this.component?this.component.multipleInstances?Q:Me:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Vn{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const ie=this.getProvider(Q.name);if(ie.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);ie.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const ie=new ct(Q,this);return this.providers.set(Q,ie),ie}getProviders(){return Array.from(this.providers.values())}}},879:(ss,kn,Fe)=>{Fe.d(kn,{Am:()=>Qe,Ub:()=>Vn,Yd:()=>en,in:()=>xe});const I=[];var xe=function(Q){return Q[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",Q}(xe||{});const j={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},Me=xe.INFO,ct={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},zt=(Q,ie,...Ie)=>{if(ie<Q.logLevel)return;const Ke=(new Date).toISOString(),lt=ct[ie];if(!lt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[lt](`[${Ke}]  ${Q.name}:`,...Ie)};class en{constructor(ie){this.name=ie,this._logLevel=Me,this._logHandler=zt,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in xe))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?j[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...ie),this._logHandler(this,xe.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...ie),this._logHandler(this,xe.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...ie),this._logHandler(this,xe.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...ie),this._logHandler(this,xe.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...ie),this._logHandler(this,xe.ERROR,...ie)}}function Vn(Q){I.forEach(ie=>{ie.setLogLevel(Q)})}function Qe(Q,ie){for(const Ie of I){let Ke=null;ie&&ie.level&&(Ke=j[ie.level]),Ie.userLogHandler=null===Q?null:(lt,Ln,...pt)=>{const ke=pt.map($e=>{if(null==$e)return null;if("string"==typeof $e)return $e;if("number"==typeof $e||"boolean"==typeof $e)return $e.toString();if($e instanceof Error)return $e.message;try{return JSON.stringify($e)}catch{return null}}).filter($e=>$e).join(" ");Ln>=(Ke??lt.logLevel)&&Q({level:xe[Ln].toLowerCase(),message:ke,args:pt,type:lt.name})}}}},956:(ss,kn,Fe)=>{Fe.r(kn);var I=Fe(861),xe=Fe(106),j=Fe(58),Me=Fe(534),ct=Fe(879),zt=Fe(582),en=Fe(537);const Qe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Ln=function Ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},pt=function lt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ke=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fn=new ct.Yd("@firebase/auth");function Vt(h,...c){Fn.logLevel<=ct.in.ERROR&&Fn.error(`Auth (${Me.SDK_VERSION}): ${h}`,...c)}function gt(h,...c){throw bn(h,...c)}function St(h,...c){return bn(h,...c)}function _r(h,c,l){const p=Object.assign(Object.assign({},pt()),{[c]:l});return new j.LL("auth","Firebase",p).create(c,{appName:h.name})}function He(h,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&gt(h,"argument-error"),_r(h,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bn(h,...c){if("string"!=typeof h){const l=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=h.name),h._errorFactory.create(l,...p)}return ke.create(h,...c)}function K(h,c,...l){if(!h)throw bn(c,...l)}function Gt(h){const c="INTERNAL ASSERTION FAILED: "+h;throw Vt(c),new Error(c)}function Lt(h,c){h||Gt(c)}function yn(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function Mi(){return"http:"===Ni()||"https:"===Ni()}function Ni(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}class Oi{constructor(c,l){this.shortDelay=c,this.longDelay=l,Lt(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function rt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Mi()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function V(h,c){Lt(h.emulator,"Emulator should always be set here");const{url:l}=h.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class F{static initialize(c,l,p){this.fetchImpl=c,l&&(this.headersImpl=l),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Gt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Gt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Gt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const H={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},z=new Oi(3e4,6e4);function Y(h,c){return h.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:h.tenantId}):c}function B(h,c,l,p){return fe.apply(this,arguments)}function fe(){return(fe=(0,I.Z)(function*(h,c,l,p,m={}){return tt(h,m,(0,I.Z)(function*(){let v={},T={};p&&("GET"===c?T=p:v={body:JSON.stringify(p)});const x=(0,j.xO)(Object.assign({key:h.config.apiKey},T)).slice(1),G=yield h._getAdditionalHeaders();return G["Content-Type"]="application/json",h.languageCode&&(G["X-Firebase-Locale"]=h.languageCode),F.fetch()(qt(h,h.config.apiHost,l,x),Object.assign({method:c,headers:G,referrerPolicy:"no-referrer"},v))}))})).apply(this,arguments)}function tt(h,c,l){return _e.apply(this,arguments)}function _e(){return(_e=(0,I.Z)(function*(h,c,l){h._canInitEmulator=!1;const p=Object.assign(Object.assign({},H),c);try{const m=new Yn(h),v=yield Promise.race([l(),m.promise]);m.clearNetworkTimeout();const T=yield v.json();if("needConfirmation"in T)throw An(h,"account-exists-with-different-credential",T);if(v.ok&&!("errorMessage"in T))return T;{const x=v.ok?T.errorMessage:T.error.message,[G,ae]=x.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===G)throw An(h,"credential-already-in-use",T);if("EMAIL_EXISTS"===G)throw An(h,"email-already-in-use",T);if("USER_DISABLED"===G)throw An(h,"user-disabled",T);const ge=p[G]||G.toLowerCase().replace(/[_\s]+/g,"-");if(ae)throw _r(h,ge,ae);gt(h,ge)}}catch(m){if(m instanceof j.ZR)throw m;gt(h,"network-request-failed",{message:String(m)})}})).apply(this,arguments)}function we(h,c,l,p){return st.apply(this,arguments)}function st(){return(st=(0,I.Z)(function*(h,c,l,p,m={}){const v=yield B(h,c,l,p,m);return"mfaPendingCredential"in v&&gt(h,"multi-factor-auth-required",{_serverResponse:v}),v})).apply(this,arguments)}function qt(h,c,l,p){const m=`${c}${l}?${p}`;return h.config.emulator?V(h.config,m):`${h.config.apiScheme}://${m}`}function Mt(h){switch(h){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Yn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,p)=>{this.timer=setTimeout(()=>p(St(this.auth,"network-request-failed")),z.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function An(h,c,l){const p={appName:h.name};l.email&&(p.email=l.email),l.phoneNumber&&(p.phoneNumber=l.phoneNumber);const m=St(h,c,p);return m.customData._tokenResponse=l,m}function or(h){return void 0!==h&&void 0!==h.getResponse}function yr(h){return void 0!==h&&void 0!==h.enterprise}class kr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return Mt(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function os(){return(os=(0,I.Z)(function*(h){return(yield B(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function vn(h,c){return ea.apply(this,arguments)}function ea(){return(ea=(0,I.Z)(function*(h,c){return B(h,"GET","/v2/recaptchaConfig",Y(h,c))})).apply(this,arguments)}function _i(){return(_i=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function vr(){return(vr=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Rs(){return(Rs=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Jn(h){if(h)try{const c=new Date(Number(h));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function yi(){return(yi=(0,I.Z)(function*(h,c=!1){const l=(0,j.m9)(h),p=yield l.getIdToken(c),m=ta(p);K(m&&m.exp&&m.auth_time&&m.iat,l.auth,"internal-error");const v="object"==typeof m.firebase?m.firebase:void 0,T=v?.sign_in_provider;return{claims:m,token:p,authTime:Jn(Sn(m.auth_time)),issuedAtTime:Jn(Sn(m.iat)),expirationTime:Jn(Sn(m.exp)),signInProvider:T||null,signInSecondFactor:v?.sign_in_second_factor||null}})).apply(this,arguments)}function Sn(h){return 1e3*Number(h)}function ta(h){const[c,l,p]=h.split(".");if(void 0===c||void 0===l||void 0===p)return Vt("JWT malformed, contained fewer than 3 sections"),null;try{const m=(0,j.tV)(l);return m?JSON.parse(m):(Vt("Failed to decode base64 JWT payload"),null)}catch(m){return Vt("Caught error parsing JWT payload as JSON",m?.toString()),null}}function ii(h,c){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,I.Z)(function*(h,c,l=!1){if(l)return c;try{return yield c}catch(p){throw p instanceof j.ZR&&function na({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(p)&&h.auth.currentUser===h&&(yield h.auth.signOut()),p}})).apply(this,arguments)}class xs{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const m=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,m)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,I.Z)(function*(){yield l.iteration()}),p)}iteration(){var c=this;return(0,I.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class ra{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jn(this.lastLoginAt),this.creationTime=Jn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ar(h){return Er.apply(this,arguments)}function Er(){return Er=(0,I.Z)(function*(h){var c;const l=h.auth,p=yield h.getIdToken(),m=yield ii(h,function as(h,c){return Rs.apply(this,arguments)}(l,{idToken:p}));K(m?.users.length,l,"internal-error");const v=m.users[0];h._notifyReloadListener(v);const T=null!==(c=v.providerUserInfo)&&void 0!==c&&c.length?function _u(h){return h.map(c=>{var{providerId:l}=c,p=(0,zt._T)(c,["providerId"]);return{providerId:l,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(v.providerUserInfo):[],x=function Qc(h,c){return[...h.filter(p=>!c.some(m=>m.providerId===p.providerId)),...c]}(h.providerData,T),ge=!!h.isAnonymous&&!(h.email&&v.passwordHash||x?.length),ve={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:x,metadata:new ra(v.createdAt,v.lastLoginAt),isAnonymous:ge};Object.assign(h,ve)}),Er.apply(this,arguments)}function ia(){return(ia=(0,I.Z)(function*(h){const c=(0,j.m9)(h);yield ar(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function b(){return(b=(0,I.Z)(function*(h,c){const l=yield tt(h,{},(0,I.Z)(function*(){const p=(0,j.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:m,apiKey:v}=h.config,T=qt(h,m,"/v1/token",`key=${v}`),x=yield h._getAdditionalHeaders();return x["Content-Type"]="application/x-www-form-urlencoded",F.fetch()(T,{method:"POST",headers:x,body:p})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function A(){return(A=(0,I.Z)(function*(h,c){return B(h,"POST","/v2/accounts:revokeToken",Y(h,c))})).apply(this,arguments)}class q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){K(c.idToken,"internal-error"),K(typeof c.idToken<"u","internal-error"),K(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function ri(h){const c=ta(h);return K(c,"internal-error"),K(typeof c.exp<"u","internal-error"),K(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}getToken(c,l=!1){var p=this;return(0,I.Z)(function*(){return K(!p.accessToken||p.refreshToken,c,"user-token-expired"),l||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var p=this;return(0,I.Z)(function*(){const{accessToken:m,refreshToken:v,expiresIn:T}=yield function sa(h,c){return b.apply(this,arguments)}(c,l);p.updateTokensAndExpiration(m,v,Number(T))})()}updateTokensAndExpiration(c,l,p){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,l){const{refreshToken:p,accessToken:m,expirationTime:v}=l,T=new q;return p&&(K("string"==typeof p,"internal-error",{appName:c}),T.refreshToken=p),m&&(K("string"==typeof m,"internal-error",{appName:c}),T.accessToken=m),v&&(K("number"==typeof v,"internal-error",{appName:c}),T.expirationTime=v),T}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new q,this.toJSON())}_performRefresh(){return Gt("not implemented")}}function P(h,c){K("string"==typeof h||typeof h>"u","internal-error",{appName:c})}class W{constructor(c){var{uid:l,auth:p,stsTokenManager:m}=c,v=(0,zt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=p,this.stsTokenManager=m,this.accessToken=m.accessToken,this.displayName=v.displayName||null,this.email=v.email||null,this.emailVerified=v.emailVerified||!1,this.phoneNumber=v.phoneNumber||null,this.photoURL=v.photoURL||null,this.isAnonymous=v.isAnonymous||!1,this.tenantId=v.tenantId||null,this.providerData=v.providerData?[...v.providerData]:[],this.metadata=new ra(v.createdAt||void 0,v.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,I.Z)(function*(){const p=yield ii(l,l.stsTokenManager.getToken(l.auth,c));return K(p,l.auth,"internal-error"),l.accessToken!==p&&(l.accessToken=p,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),p})()}getIdTokenResult(c){return function Ft(h){return yi.apply(this,arguments)}(this,c)}reload(){return function Ms(h){return ia.apply(this,arguments)}(this)}_assign(c){this!==c&&(K(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new W(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var p=this;return(0,I.Z)(function*(){let m=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),m=!0),l&&(yield ar(p)),yield p.auth._persistUserIfCurrent(p),m&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,I.Z)(function*(){const l=yield c.getIdToken();return yield ii(c,function gu(h,c){return _i.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var p,m,v,T,x,G,ae,ge;const ve=null!==(p=l.displayName)&&void 0!==p?p:void 0,nn=null!==(m=l.email)&&void 0!==m?m:void 0,Ii=null!==(v=l.phoneNumber)&&void 0!==v?v:void 0,jl=null!==(T=l.photoURL)&&void 0!==T?T:void 0,C_=null!==(x=l.tenantId)&&void 0!==x?x:void 0,ba=null!==(G=l._redirectEventId)&&void 0!==G?G:void 0,kf=null!==(ae=l.createdAt)&&void 0!==ae?ae:void 0,D_=null!==(ge=l.lastLoginAt)&&void 0!==ge?ge:void 0,{uid:$l,emailVerified:Cw,isAnonymous:Vf,providerData:b_,stsTokenManager:A_}=l;K($l&&A_,c,"internal-error");const Dw=q.fromJSON(this.name,A_);K("string"==typeof $l,c,"internal-error"),P(ve,c.name),P(nn,c.name),K("boolean"==typeof Cw,c,"internal-error"),K("boolean"==typeof Vf,c,"internal-error"),P(Ii,c.name),P(jl,c.name),P(C_,c.name),P(ba,c.name),P(kf,c.name),P(D_,c.name);const ec=new W({uid:$l,auth:c,email:nn,emailVerified:Cw,displayName:ve,isAnonymous:Vf,photoURL:jl,phoneNumber:Ii,tenantId:C_,stsTokenManager:Dw,createdAt:kf,lastLoginAt:D_});return b_&&Array.isArray(b_)&&(ec.providerData=b_.map(hR=>Object.assign({},hR))),ba&&(ec._redirectEventId=ba),ec}static _fromIdTokenResponse(c,l,p=!1){return(0,I.Z)(function*(){const m=new q;m.updateFromServerResponse(l);const v=new W({uid:l.localId,auth:c,stsTokenManager:m,isAnonymous:p});return yield ar(v),v})()}}const Ne=new Map;function ze(h){Lt(h instanceof Function,"Expected a class definition");let c=Ne.get(h);return c?(Lt(c instanceof h,"Instance stored in cache mismatched with class"),c):(c=new h,Ne.set(h,c),c)}const Wt=(()=>{class h{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(l,p){var m=this;return(0,I.Z)(function*(){m.storage[l]=p})()}_get(l){var p=this;return(0,I.Z)(function*(){const m=p.storage[l];return void 0===m?null:m})()}_remove(l){var p=this;return(0,I.Z)(function*(){delete p.storage[l]})()}_addListener(l,p){}_removeListener(l,p){}}return h.type="NONE",h})();function Rn(h,c,l){return`firebase:${h}:${c}:${l}`}class ye{constructor(c,l,p){this.persistence=c,this.auth=l,this.userKey=p;const{config:m,name:v}=this.auth;this.fullUserKey=Rn(this.userKey,m.apiKey,v),this.fullPersistenceKey=Rn("persistence",m.apiKey,v),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,I.Z)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?W._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,I.Z)(function*(){if(l.persistence===c)return;const p=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,p?l.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,p="authUser"){return(0,I.Z)(function*(){if(!l.length)return new ye(ze(Wt),c,p);const m=(yield Promise.all(l.map(function(){var ae=(0,I.Z)(function*(ge){if(yield ge._isAvailable())return ge});return function(ge){return ae.apply(this,arguments)}}()))).filter(ae=>ae);let v=m[0]||ze(Wt);const T=Rn(p,c.config.apiKey,c.name);let x=null;for(const ae of l)try{const ge=yield ae._get(T);if(ge){const ve=W._fromJSON(c,ge);ae!==v&&(x=ve),v=ae;break}}catch{}const G=m.filter(ae=>ae._shouldAllowMigration);return v._shouldAllowMigration&&G.length?(v=G[0],x&&(yield v._set(T,x.toJSON())),yield Promise.all(l.map(function(){var ae=(0,I.Z)(function*(ge){if(ge!==v)try{yield ge._remove(T)}catch{}});return function(ge){return ae.apply(this,arguments)}}())),new ye(v,c,p)):new ye(v,c,p)})()}}function Bn(h){const c=h.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(O(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Tt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ne(c))return"Blackberry";if(Te(c))return"Webos";if(ki(c))return"Safari";if((c.includes("chrome/")||Yc(c))&&!c.includes("edge/"))return"Chrome";if(S(c))return"Android";{const p=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Tt(h=(0,j.z$)()){return/firefox\//i.test(h)}function ki(h=(0,j.z$)()){const c=h.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Yc(h=(0,j.z$)()){return/crios\//i.test(h)}function O(h=(0,j.z$)()){return/iemobile/i.test(h)}function S(h=(0,j.z$)()){return/android/i.test(h)}function ne(h=(0,j.z$)()){return/blackberry/i.test(h)}function Te(h=(0,j.z$)()){return/webos/i.test(h)}function Ve(h=(0,j.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function Ee(h=(0,j.z$)()){return Ve(h)||S(h)||Te(h)||ne(h)||/windows phone/i.test(h)||O(h)}function oa(h,c=[]){let l;switch(h){case"Browser":l=Bn((0,j.z$)());break;case"Worker":l=`${Bn((0,j.z$)())}-${h}`;break;default:l=h}const p=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Me.SDK_VERSION}/${p}`}class RS{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const p=v=>new Promise((T,x)=>{try{T(c(v))}catch(G){x(G)}});p.onAbort=l,this.queue.push(p);const m=this.queue.length-1;return()=>{this.queue[m]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,I.Z)(function*(){if(l.auth.currentUser===c)return;const p=[];try{for(const m of l.queue)yield m(c),m.onAbort&&p.push(m.onAbort)}catch(m){p.reverse();for(const v of p)try{v()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:m?.message})}})()}}function yu(){return(yu=(0,I.Z)(function*(h,c={}){return B(h,"GET","/v2/passwordPolicy",Y(h,c))})).apply(this,arguments)}class PS{constructor(c){var l,p,m,v;const T=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=T.minPasswordLength)&&void 0!==l?l:6,T.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=T.maxPasswordLength),void 0!==T.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=T.containsLowercaseCharacter),void 0!==T.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=T.containsUppercaseCharacter),void 0!==T.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=T.containsNumericCharacter),void 0!==T.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=T.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(m=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==m?m:"",this.forceUpgradeOnSignin=null!==(v=c.forceUpgradeOnSignin)&&void 0!==v&&v,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,p,m,v,T,x;const G={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,G),this.validatePasswordCharacterOptions(c,G),G.isValid&&(G.isValid=null===(l=G.meetsMinPasswordLength)||void 0===l||l),G.isValid&&(G.isValid=null===(p=G.meetsMaxPasswordLength)||void 0===p||p),G.isValid&&(G.isValid=null===(m=G.containsLowercaseLetter)||void 0===m||m),G.isValid&&(G.isValid=null===(v=G.containsUppercaseLetter)||void 0===v||v),G.isValid&&(G.isValid=null===(T=G.containsNumericCharacter)||void 0===T||T),G.isValid&&(G.isValid=null===(x=G.containsNonAlphanumericCharacter)||void 0===x||x),G}validatePasswordLengthOptions(c,l){const p=this.customStrengthOptions.minPasswordLength,m=this.customStrengthOptions.maxPasswordLength;p&&(l.meetsMinPasswordLength=c.length>=p),m&&(l.meetsMaxPasswordLength=c.length<=m)}validatePasswordCharacterOptions(c,l){let p;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let m=0;m<c.length;m++)p=c.charAt(m),this.updatePasswordCharacterOptionsStatuses(l,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,l,p,m,v){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=m)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=v))}}class wI{constructor(c,l,p,m){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=p,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ns(this),this.idTokenSubscription=new Ns(this),this.beforeStateQueue=new RS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ke,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(c,l){var p=this;return l&&(this._popupRedirectResolver=ze(l)),this._initializationPromise=this.queue((0,I.Z)(function*(){var m,v;if(!p._deleted&&(p.persistenceManager=yield ye.create(p,c),!p._deleted)){if(null!==(m=p._popupRedirectResolver)&&void 0!==m&&m._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(l),p.lastNotifiedUid=(null===(v=p.currentUser)||void 0===v?void 0:v.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,I.Z)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUser(c){var l=this;return(0,I.Z)(function*(){var p;const m=yield l.assertedPersistence.getCurrentUser();let v=m,T=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const x=null===(p=l.redirectUser)||void 0===p?void 0:p._redirectEventId,G=v?._redirectEventId,ae=yield l.tryRedirectSignIn(c);(!x||x===G)&&ae?.user&&(v=ae.user,T=!0)}if(!v)return l.directlySetCurrentUser(null);if(!v._redirectEventId){if(T)try{yield l.beforeStateQueue.runMiddleware(v)}catch(x){v=m,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(x))}return v?l.reloadAndSetCurrentUserOrClear(v):l.directlySetCurrentUser(null)}return K(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===v._redirectEventId?l.directlySetCurrentUser(v):l.reloadAndSetCurrentUserOrClear(v)})()}tryRedirectSignIn(c){var l=this;return(0,I.Z)(function*(){let p=null;try{p=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,I.Z)(function*(){try{yield ar(c)}catch(p){if("auth/network-request-failed"!==p?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function vo(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}()}_delete(){var c=this;return(0,I.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,I.Z)(function*(){const p=c?(0,j.m9)(c):null;return p&&K(p.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(p&&p._clone(l))})()}_updateCurrentUser(c,l=!1){var p=this;return(0,I.Z)(function*(){if(!p._deleted)return c&&K(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),l||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,I.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,I.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var l=this;return this.queue((0,I.Z)(function*(){yield l.assertedPersistence.setPersistence(ze(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,I.Z)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const p=l._getPasswordPolicyInternal();return p.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,I.Z)(function*(){const l=yield function II(h){return yu.apply(this,arguments)}(c),p=new PS(l);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new j.LL("auth","Firebase",c())}onAuthStateChanged(c,l,p){return this.registerStateListener(this.authStateSubscription,c,l,p)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,p){return this.registerStateListener(this.idTokenSubscription,c,l,p)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,I.Z)(function*(){if(l.currentUser){const p=yield l.currentUser.getIdToken(),m={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=l.tenantId&&(m.tenantId=l.tenantId),yield function C(h,c){return A.apply(this,arguments)}(l,m)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var p=this;return(0,I.Z)(function*(){const m=yield p.getOrInitRedirectPersistenceManager(l);return null===c?m.removeCurrentUser():m.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,I.Z)(function*(){if(!l.redirectPersistenceManager){const p=c&&ze(c)||l._popupRedirectResolver;K(p,l,"argument-error"),l.redirectPersistenceManager=yield ye.create(l,[ze(p._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,I.Z)(function*(){var p,m;return l._isInitialized&&(yield l.queue((0,I.Z)(function*(){}))),(null===(p=l._currentUser)||void 0===p?void 0:p._redirectEventId)===c?l._currentUser:(null===(m=l.redirectUser)||void 0===m?void 0:m._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,I.Z)(function*(){if(c===l.currentUser)return l.queue((0,I.Z)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,p,m){if(this._deleted)return()=>{};const v="function"==typeof l?l:l.next.bind(l);let T=!1;const x=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(x,this,"internal-error"),x.then(()=>{T||v(this.currentUser)}),"function"==typeof l){const G=c.addObserver(l,p,m);return()=>{T=!0,G()}}{const G=c.addObserver(l);return()=>{T=!0,G()}}}directlySetCurrentUser(c){var l=this;return(0,I.Z)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=oa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,I.Z)(function*(){var l;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const m=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();m&&(p["X-Firebase-Client"]=m);const v=yield c._getAppCheckToken();return v&&(p["X-Firebase-AppCheck"]=v),p})()}_getAppCheckToken(){var c=this;return(0,I.Z)(function*(){var l;const p=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return p?.error&&function Un(h,...c){Fn.logLevel<=ct.in.WARN&&Fn.warn(`Auth (${Me.SDK_VERSION}): ${h}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Ut(h){return(0,j.m9)(h)}class Ns{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,j.ne)(l=>this.observer=l)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function dm(h){return new Promise((c,l)=>{const p=document.createElement("script");p.setAttribute("src",h),p.onload=c,p.onerror=m=>{const v=St("internal-error");v.customData=m,l(v)},p.type="text/javascript",p.charset="UTF-8",function xS(){var h,c;return null!==(c=null===(h=document.getElementsByTagName("head"))||void 0===h?void 0:h[0])&&void 0!==c?c:document}().appendChild(p)})}function TI(h){return`__${h}${Math.floor(1e6*Math.random())}`}class hm{constructor(c){this.type="recaptcha-enterprise",this.auth=Ut(c)}verify(c="verify",l=!1){var p=this;return(0,I.Z)(function*(){function v(){return v=(0,I.Z)(function*(x){if(!l){if(null==x.tenantId&&null!=x._agentRecaptchaConfig)return x._agentRecaptchaConfig.siteKey;if(null!=x.tenantId&&void 0!==x._tenantRecaptchaConfigs[x.tenantId])return x._tenantRecaptchaConfigs[x.tenantId].siteKey}return new Promise(function(){var G=(0,I.Z)(function*(ae,ge){vn(x,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ve=>{if(void 0!==ve.recaptchaKey){const nn=new kr(ve);return null==x.tenantId?x._agentRecaptchaConfig=nn:x._tenantRecaptchaConfigs[x.tenantId]=nn,ae(nn.siteKey)}ge(new Error("recaptcha Enterprise site key undefined"))}).catch(ve=>{ge(ve)})});return function(ae,ge){return G.apply(this,arguments)}}())}),v.apply(this,arguments)}function T(x,G,ae){const ge=window.grecaptcha;yr(ge)?ge.enterprise.ready(()=>{ge.enterprise.execute(x,{action:c}).then(ve=>{G(ve)}).catch(()=>{G("NO_RECAPTCHA")})}):ae(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((x,G)=>{(function m(x){return v.apply(this,arguments)})(p.auth).then(ae=>{if(!l&&yr(window.grecaptcha))T(ae,x,G);else{if(typeof window>"u")return void G(new Error("RecaptchaVerifier is only supported in browser"));dm("https://www.google.com/recaptcha/enterprise.js?render="+ae).then(()=>{T(ae,x,G)}).catch(ge=>{G(ge)})}}).catch(ae=>{G(ae)})})})()}}function DI(h,c,l){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,I.Z)(function*(h,c,l,p=!1){const m=new hm(h);let v;try{v=yield m.verify(l)}catch{v=yield m.verify(l,!0)}const T=Object.assign({},c);return Object.assign(T,p?{captchaResp:v}:{captchaResponse:v}),Object.assign(T,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(T,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),T})).apply(this,arguments)}function Ae(h,c,l,p){return fm.apply(this,arguments)}function fm(){return fm=(0,I.Z)(function*(h,c,l,p){var m;if(null!==(m=h._getRecaptchaConfig())&&void 0!==m&&m.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const v=yield DI(h,c,l,"getOobCode"===l);return p(h,v)}return p(h,c).catch(function(){var v=(0,I.Z)(function*(T){if("auth/missing-recaptcha-token"===T.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const x=yield DI(h,c,l,"getOobCode"===l);return p(h,x)}return Promise.reject(T)});return function(T){return v.apply(this,arguments)}}())}),fm.apply(this,arguments)}function vu(h){const c=h.indexOf(":");return c<0?"":h.substr(0,c+1)}function Ph(h){if(!h)return null;const c=Number(h);return isNaN(c)?null:c}class us{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return Gt("not implemented")}_getIdTokenResponse(c){return Gt("not implemented")}_linkToIdToken(c,l){return Gt("not implemented")}_getReauthenticationResolver(c){return Gt("not implemented")}}function Eu(h,c){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:resetPassword",Y(h,c))})).apply(this,arguments)}function xh(){return(xh=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Je(h,c){return wu.apply(this,arguments)}function wu(){return(wu=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Xn(){return(Xn=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:update",Y(h,c))})).apply(this,arguments)}function _m(h,c){return ym.apply(this,arguments)}function ym(){return(ym=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithPassword",Y(h,c))})).apply(this,arguments)}function _t(h,c){return vm.apply(this,arguments)}function vm(){return(vm=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:sendOobCode",Y(h,c))})).apply(this,arguments)}function ce(){return(ce=(0,I.Z)(function*(h,c){return _t(h,c)})).apply(this,arguments)}function Mh(h,c){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,I.Z)(function*(h,c){return _t(h,c)})).apply(this,arguments)}function Em(h,c){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,I.Z)(function*(h,c){return _t(h,c)})).apply(this,arguments)}function Du(){return(Du=(0,I.Z)(function*(h,c){return _t(h,c)})).apply(this,arguments)}function Im(){return(Im=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithEmailLink",Y(h,c))})).apply(this,arguments)}function wm(){return(wm=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithEmailLink",Y(h,c))})).apply(this,arguments)}class Jc extends us{constructor(c,l,p,m=null){super("password",p),this._email=c,this._password=l,this._tenantId=m}static _fromEmailAndPassword(c,l){return new Jc(c,l,"password")}static _fromEmailAndCode(c,l,p=null){return new Jc(c,l,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,I.Z)(function*(){switch(l.signInMethod){case"password":return Ae(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",_m);case"emailLink":return function LS(h,c){return Im.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:gt(c,"internal-error")}})()}_linkToIdToken(c,l){var p=this;return(0,I.Z)(function*(){switch(p.signInMethod){case"password":return Ae(c,{idToken:l,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Je);case"emailLink":return function FS(h,c){return wm.apply(this,arguments)}(c,{idToken:l,email:p._email,oobCode:p._password});default:gt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Lr(h,c){return bu.apply(this,arguments)}function bu(){return(bu=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithIdp",Y(h,c))})).apply(this,arguments)}class Vi extends us{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new Vi(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):gt("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:m}=l,v=(0,zt._T)(l,["providerId","signInMethod"]);if(!p||!m)return null;const T=new Vi(p,m);return T.idToken=v.idToken||void 0,T.accessToken=v.accessToken||void 0,T.secret=v.secret,T.nonce=v.nonce,T.pendingToken=v.pendingToken||null,T}_getIdTokenResponse(c){return Lr(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,Lr(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,Lr(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,j.xO)(l)}return c}}function Nh(){return(Nh=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:sendVerificationCode",Y(h,c))})).apply(this,arguments)}function Os(){return(Os=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,c))})).apply(this,arguments)}function Li(){return(Li=(0,I.Z)(function*(h,c){const l=yield we(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,c));if(l.temporaryProof)throw An(h,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const xI={USER_NOT_FOUND:"user-not-found"};function el(){return(el=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,Object.assign(Object.assign({},c),{operation:"REAUTH"})),xI)})).apply(this,arguments)}class pe extends us{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new pe({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new pe({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function Tm(h,c){return Os.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function PI(h,c){return Li.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function se(h,c){return el.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:p,verificationCode:m}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:p,code:m}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:p,phoneNumber:m,temporaryProof:v}=c;return p||l||m||v?new pe({verificationId:l,verificationCode:p,phoneNumber:m,temporaryProof:v}):null}}class cs{constructor(c){var l,p,m,v,T,x;const G=(0,j.zd)((0,j.pd)(c)),ae=null!==(l=G.apiKey)&&void 0!==l?l:null,ge=null!==(p=G.oobCode)&&void 0!==p?p:null,ve=function tl(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(m=G.mode)&&void 0!==m?m:null);K(ae&&ge&&ve,"argument-error"),this.apiKey=ae,this.operation=ve,this.code=ge,this.continueUrl=null!==(v=G.continueUrl)&&void 0!==v?v:null,this.languageCode=null!==(T=G.languageCode)&&void 0!==T?T:null,this.tenantId=null!==(x=G.tenantId)&&void 0!==x?x:null}static parseLink(c){const l=function Oh(h){const c=(0,j.zd)((0,j.pd)(h)).link,l=c?(0,j.zd)((0,j.pd)(c)).deep_link_id:null,p=(0,j.zd)((0,j.pd)(h)).deep_link_id;return(p?(0,j.zd)((0,j.pd)(p)).link:null)||p||l||c||h}(c);try{return new cs(l)}catch{return null}}}let kh=(()=>{class h{constructor(){this.providerId=h.PROVIDER_ID}static credential(l,p){return Jc._fromEmailAndPassword(l,p)}static credentialWithLink(l,p){const m=cs.parseLink(p);return K(m,"argument-error"),Jc._fromEmailAndCode(l,m.code,m.tenantId)}}return h.PROVIDER_ID="password",h.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h.EMAIL_LINK_SIGN_IN_METHOD="emailLink",h})();class ls{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Tr extends ls{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class ds extends Tr{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return K("providerId"in l&&"signInMethod"in l,"argument-error"),Vi._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return K(c.idToken||c.accessToken,"argument-error"),Vi._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return ds.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return ds.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:p,oauthTokenSecret:m,pendingToken:v,nonce:T,providerId:x}=c;if(!p&&!m&&!l&&!v||!x)return null;try{return new ds(x)._credential({idToken:l,accessToken:p,nonce:T,pendingToken:v})}catch{return null}}}let si=(()=>{class h extends Tr{constructor(){super("facebook.com")}static credential(l){return Vi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.FACEBOOK_SIGN_IN_METHOD="facebook.com",h.PROVIDER_ID="facebook.com",h})(),vi=(()=>{class h extends Tr{constructor(){super("google.com"),this.addScope("profile")}static credential(l,p){return Vi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:p})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:p,oauthAccessToken:m}=l;if(!p&&!m)return null;try{return h.credential(p,m)}catch{return null}}}return h.GOOGLE_SIGN_IN_METHOD="google.com",h.PROVIDER_ID="google.com",h})(),ot=(()=>{class h extends Tr{constructor(){super("github.com")}static credential(l){return Vi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.GITHUB_SIGN_IN_METHOD="github.com",h.PROVIDER_ID="github.com",h})();class ks extends us{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return Lr(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,Lr(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,Lr(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:m,pendingToken:v}=l;return p&&m&&v&&p===m?new ks(p,v):null}static _create(c,l){return new ks(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Au extends ls{constructor(c){K(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Au.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Au.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=ks.fromJSON(c);return K(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:p}=c;if(!l||!p)return null;try{return ks._create(p,l)}catch{return null}}}let Fi=(()=>{class h extends Tr{constructor(){super("twitter.com")}static credential(l,p){return Vi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:p})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:p,oauthTokenSecret:m}=l;if(!p||!m)return null;try{return h.credential(p,m)}catch{return null}}}return h.TWITTER_SIGN_IN_METHOD="twitter.com",h.PROVIDER_ID="twitter.com",h})();function aa(h,c){return rl.apply(this,arguments)}function rl(){return(rl=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signUp",Y(h,c))})).apply(this,arguments)}class Fr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,p,m=!1){return(0,I.Z)(function*(){const v=yield W._fromIdTokenResponse(c,p,m),T=il(p);return new Fr({user:v,providerId:T,_tokenResponse:p,operationType:l})})()}static _forOperation(c,l,p){return(0,I.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const m=il(p);return new Fr({user:c,providerId:m,_tokenResponse:p,operationType:l})})()}}function il(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}function sl(){return(sl=(0,I.Z)(function*(h){var c;const l=Ut(h);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new Fr({user:l.currentUser,providerId:null,operationType:"signIn"});const p=yield aa(l,{returnSecureToken:!0}),m=yield Fr._fromIdTokenResponse(l,"signIn",p,!0);return yield l._updateCurrentUser(m.user),m})).apply(this,arguments)}class Vs extends j.ZR{constructor(c,l,p,m){var v;super(l.code,l.message),this.operationType=p,this.user=m,Object.setPrototypeOf(this,Vs.prototype),this.customData={appName:c.name,tenantId:null!==(v=c.tenantId)&&void 0!==v?v:void 0,_serverResponse:l.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,l,p,m){return new Vs(c,l,p,m)}}function Lh(h,c,l,p){return("reauthenticate"===c?l._getReauthenticationResolver(h):l._getIdTokenResponse(h)).catch(v=>{throw"auth/multi-factor-auth-required"===v.code?Vs._fromErrorAndOperation(h,v,c,p):v})}function Fh(h){return new Set(h.map(({providerId:c})=>c).filter(c=>!!c))}function ol(){return ol=(0,I.Z)(function*(h,c){const l=(0,j.m9)(h);yield Cr(!0,l,c);const{providerUserInfo:p}=yield function mu(h,c){return vr.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),m=Fh(p||[]);return l.providerData=l.providerData.filter(v=>m.has(v.providerId)),m.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),ol.apply(this,arguments)}function Uh(h,c){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,I.Z)(function*(h,c,l=!1){const p=yield ii(h,c._linkToIdToken(h.auth,yield h.getIdToken()),l);return Fr._forOperation(h,"link",p)})).apply(this,arguments)}function Cr(h,c,l){return jh.apply(this,arguments)}function jh(){return(jh=(0,I.Z)(function*(h,c,l){yield ar(c);const m=!1===h?"provider-already-linked":"no-such-provider";K(Fh(c.providerData).has(l)===h,c.auth,m)})).apply(this,arguments)}function $h(h,c){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,I.Z)(function*(h,c,l=!1){const{auth:p}=h,m="reauthenticate";try{const v=yield ii(h,Lh(p,m,c,h),l);K(v.idToken,p,"internal-error");const T=ta(v.idToken);K(T,p,"internal-error");const{sub:x}=T;return K(h.uid===x,p,"user-mismatch"),Fr._forOperation(h,m,v)}catch(v){throw"auth/user-not-found"===v?.code&&gt(p,"user-mismatch"),v}})).apply(this,arguments)}function Dm(h,c){return zh.apply(this,arguments)}function zh(){return(zh=(0,I.Z)(function*(h,c,l=!1){const p="signIn",m=yield Lh(h,p,c),v=yield Fr._fromIdTokenResponse(h,p,m);return l||(yield h._updateCurrentUser(v.user)),v})).apply(this,arguments)}function al(h,c){return ul.apply(this,arguments)}function ul(){return(ul=(0,I.Z)(function*(h,c){return Dm(Ut(h),c)})).apply(this,arguments)}function bm(h,c){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,I.Z)(function*(h,c){const l=(0,j.m9)(h);return yield Cr(!1,l,c.providerId),Uh(l,c)})).apply(this,arguments)}function Am(h,c){return hs.apply(this,arguments)}function hs(){return(hs=(0,I.Z)(function*(h,c){return $h((0,j.m9)(h),c)})).apply(this,arguments)}function qh(){return(qh=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithCustomToken",Y(h,c))})).apply(this,arguments)}function Dr(){return Dr=(0,I.Z)(function*(h,c){const l=Ut(h),p=yield function NI(h,c){return qh.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),m=yield Fr._fromIdTokenResponse(l,"signIn",p);return yield l._updateCurrentUser(m.user),m}),Dr.apply(this,arguments)}class Su{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?cl._fromServerResponse(c,l):"totpInfo"in l?Pe._fromServerResponse(c,l):gt(c,"internal-error")}}class cl extends Su{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new cl(l)}}class Pe extends Su{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new Pe(l)}}function jn(h,c,l){var p;K((null===(p=l.url)||void 0===p?void 0:p.length)>0,h,"invalid-continue-uri"),K(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,h,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(K(l.iOS.bundleId.length>0,h,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(K(l.android.packageName.length>0,h,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function Xe(h){return En.apply(this,arguments)}function En(){return(En=(0,I.Z)(function*(h){const c=Ut(h);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function Ls(){return(Ls=(0,I.Z)(function*(h,c,l){const p=Ut(h),m={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&jn(p,m,l),yield Ae(p,m,"getOobCode",Mh)})).apply(this,arguments)}function ll(){return ll=(0,I.Z)(function*(h,c,l){yield Eu((0,j.m9)(h),{oobCode:c,newPassword:l}).catch(function(){var p=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&Xe(h),m});return function(m){return p.apply(this,arguments)}}())}),ll.apply(this,arguments)}function ua(){return ua=(0,I.Z)(function*(h,c){yield function mm(h,c){return Xn.apply(this,arguments)}((0,j.m9)(h),{oobCode:c})}),ua.apply(this,arguments)}function Rm(h,c){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,I.Z)(function*(h,c){const l=(0,j.m9)(h),p=yield Eu(l,{oobCode:c}),m=p.requestType;switch(K(m,l,"internal-error"),m){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":K(p.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":K(p.mfaInfo,l,"internal-error");default:K(p.email,l,"internal-error")}let v=null;return p.mfaInfo&&(v=Su._fromServerResponse(Ut(l),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:v},operation:m}})).apply(this,arguments)}function le(){return(le=(0,I.Z)(function*(h,c){const{data:l}=yield Rm((0,j.m9)(h),c);return l.email})).apply(this,arguments)}function Rt(){return(Rt=(0,I.Z)(function*(h,c,l){const p=Ut(h),T=yield Ae(p,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aa).catch(G=>{throw"auth/password-does-not-meet-requirements"===G.code&&Xe(h),G}),x=yield Fr._fromIdTokenResponse(p,"signIn",T);return yield p._updateCurrentUser(x.user),x})).apply(this,arguments)}function Pn(){return(Pn=(0,I.Z)(function*(h,c,l){const p=Ut(h),m={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function v(T,x){K(x.handleCodeInApp,p,"argument-error"),x&&jn(p,T,x)})(m,l),yield Ae(p,m,"getOobCode",Em)})).apply(this,arguments)}function Ui(){return(Ui=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h),m=kh.credentialWithLink(c,l||yn());return K(m._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),al(p,m)})).apply(this,arguments)}function Oe(){return(Oe=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:createAuthUri",Y(h,c))})).apply(this,arguments)}function dl(){return dl=(0,I.Z)(function*(h,c){const p={identifier:c,continueUri:Mi()?yn():"http://localhost"},{signinMethods:m}=yield function la(h,c){return Oe.apply(this,arguments)}((0,j.m9)(h),p);return m||[]}),dl.apply(this,arguments)}function Zt(){return Zt=(0,I.Z)(function*(h,c){const l=(0,j.m9)(h),m={requestType:"VERIFY_EMAIL",idToken:yield h.getIdToken()};c&&jn(l.auth,m,c);const{email:v}=yield function VS(h,c){return ce.apply(this,arguments)}(l.auth,m);v!==h.email&&(yield h.reload())}),Zt.apply(this,arguments)}function Fs(){return Fs=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h),v={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield h.getIdToken(),newEmail:c};l&&jn(p.auth,v,l);const{email:T}=yield function SI(h,c){return Du.apply(this,arguments)}(p.auth,v);T!==h.email&&(yield h.reload())}),Fs.apply(this,arguments)}function Io(){return(Io=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ji(){return ji=(0,I.Z)(function*(h,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const p=(0,j.m9)(h),v={idToken:yield p.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},T=yield ii(p,function Bi(h,c){return Io.apply(this,arguments)}(p.auth,v));p.displayName=T.displayName||null,p.photoURL=T.photoUrl||null;const x=p.providerData.find(({providerId:G})=>"password"===G);x&&(x.displayName=p.displayName,x.photoURL=p.photoURL),yield p._updateTokensIfNecessary(T)}),ji.apply(this,arguments)}function ha(h,c,l){return Ze.apply(this,arguments)}function Ze(){return Ze=(0,I.Z)(function*(h,c,l){const{auth:p}=h,v={idToken:yield h.getIdToken(),returnSecureToken:!0};c&&(v.email=c),l&&(v.password=l);const T=yield ii(h,function gm(h,c){return xh.apply(this,arguments)}(p,v));yield h._updateTokensIfNecessary(T,!0)}),Ze.apply(this,arguments)}class Us{constructor(c,l,p={}){this.isNewUser=c,this.providerId=l,this.profile=p}}class Zh extends Us{constructor(c,l,p,m){super(c,l,p),this.username=m}}class $i extends Us{constructor(c,l){super(c,"facebook.com",l)}}class hl extends Zh{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class fa extends Us{constructor(c,l){super(c,"google.com",l)}}class Nu extends Zh{constructor(c,l,p){super(c,"twitter.com",l,p)}}function $n(h){const{user:c,_tokenResponse:l}=h;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function BS(h){var c,l;if(!h)return null;const{providerId:p}=h,m=h.rawUserInfo?JSON.parse(h.rawUserInfo):{},v=h.isNewUser||"identitytoolkit#SignupNewUserResponse"===h.kind;if(!p&&h?.idToken){const T=null===(l=null===(c=ta(h.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(T)return new Us(v,"anonymous"!==T&&"custom"!==T?T:null)}if(!p)return null;switch(p){case"facebook.com":return new $i(v,m);case"github.com":return new hl(v,m);case"google.com":return new fa(v,m);case"twitter.com":return new Nu(v,m,h.screenName||null);case"custom":case"anonymous":return new Us(v,null);default:return new Us(v,p,m)}}(l)}class pa{constructor(c,l,p){this.type=c,this.credential=l,this.user=p}static _fromIdtoken(c,l){return new pa("enroll",c,l)}static _fromMfaPendingCredential(c){return new pa("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,p;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return pa._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return pa._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Mm{constructor(c,l,p){this.session=c,this.hints=l,this.signInResolver=p}static _fromError(c,l){const p=Ut(c),m=l.customData._serverResponse,v=(m.mfaInfo||[]).map(x=>Su._fromServerResponse(p,x));K(m.mfaPendingCredential,p,"internal-error");const T=pa._fromMfaPendingCredential(m.mfaPendingCredential);return new Mm(T,v,function(){var x=(0,I.Z)(function*(G){const ae=yield G._process(p,T);delete m.mfaInfo,delete m.mfaPendingCredential;const ge=Object.assign(Object.assign({},m),{idToken:ae.idToken,refreshToken:ae.refreshToken});switch(l.operationType){case"signIn":const ve=yield Fr._fromIdTokenResponse(p,l.operationType,ge);return yield p._updateCurrentUser(ve.user),ve;case"reauthenticate":return K(l.user,p,"internal-error"),Fr._forOperation(l.user,l.operationType,ge);default:gt(p,"internal-error")}});return function(G){return x.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,I.Z)(function*(){return l.signInResolver(c)})()}}class Nm{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(p=>Su._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new Nm(c)}getSession(){var c=this;return(0,I.Z)(function*(){return pa._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var p=this;return(0,I.Z)(function*(){const m=c,v=yield p.getSession(),T=yield ii(p.user,m._process(p.user.auth,v,l));return yield p.user._updateTokensIfNecessary(T),p.user.reload()})()}unenroll(c){var l=this;return(0,I.Z)(function*(){const p="string"==typeof c?c:c.uid,m=yield l.user.getIdToken();try{const v=yield ii(l.user,function ZS(h,c){return B(h,"POST","/v2/accounts/mfaEnrollment:withdraw",Y(h,c))}(l.user.auth,{idToken:m,mfaEnrollmentId:p}));l.enrolledFactors=l.enrolledFactors.filter(({uid:T})=>T!==p),yield l.user._updateTokensIfNecessary(v),yield l.user.reload()}catch(v){throw v}})()}}const Om=new WeakMap,Qh="__sak";class Yh{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(Qh,"1"),this.storage.removeItem(Qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const zi=(()=>{class h extends Yh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,p)=>this.onStorageEvent(l,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function km(){const h=(0,j.z$)();return ki(h)||Ve(h)}()&&function Ye(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ee(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const p of Object.keys(this.listeners)){const m=this.storage.getItem(p),v=this.localCache[p];m!==v&&l(p,v,m)}}onStorageEvent(l,p=!1){if(!l.key)return void this.forAllChangedKeys((x,G,ae)=>{this.notifyListeners(x,ae)});const m=l.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const x=this.storage.getItem(m);if(l.newValue!==x)null!==l.newValue?this.storage.setItem(m,l.newValue):this.storage.removeItem(m);else if(this.localCache[m]===l.newValue&&!p)return}const v=()=>{const x=this.storage.getItem(m);!p&&this.localCache[m]===x||this.notifyListeners(m,x)},T=this.storage.getItem(m);!function hn(){return(0,j.w1)()&&10===document.documentMode}()||T===l.newValue||l.newValue===l.oldValue?v():setTimeout(v,10)}notifyListeners(l,p){this.localCache[l]=p;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,p,m)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:p,newValue:m}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,p){var m=()=>super._set,v=this;return(0,I.Z)(function*(){yield m().call(v,l,p),v.localCache[l]=JSON.stringify(p)})()}_get(l){var p=()=>super._get,m=this;return(0,I.Z)(function*(){const v=yield p().call(m,l);return m.localCache[l]=JSON.stringify(v),v})()}_remove(l){var p=()=>super._remove,m=this;return(0,I.Z)(function*(){yield p().call(m,l),delete m.localCache[l]})()}}return h.type="LOCAL",h})(),Co=(()=>{class h extends Yh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,p){}_removeListener(l,p){}}return h.type="SESSION",h})();let Hn=(()=>{class h{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const p=this.receivers.find(v=>v.isListeningto(l));if(p)return p;const m=new h(l);return this.receivers.push(m),m}isListeningto(l){return this.eventTarget===l}handleEvent(l){var p=this;return(0,I.Z)(function*(){const m=l,{eventId:v,eventType:T,data:x}=m.data,G=p.handlersMap[T];if(!G?.size)return;m.ports[0].postMessage({status:"ack",eventId:v,eventType:T});const ae=Array.from(G).map(function(){var ve=(0,I.Z)(function*(nn){return nn(m.origin,x)});return function(nn){return ve.apply(this,arguments)}}()),ge=yield function JS(h){return Promise.all(h.map(function(){var c=(0,I.Z)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(p){return{fulfilled:!1,reason:p}}});return function(l){return c.apply(this,arguments)}}()))}(ae);m.ports[0].postMessage({status:"done",eventId:v,eventType:T,response:ge})})()}_subscribe(l,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(p)}_unsubscribe(l,p){this.handlersMap[l]&&p&&this.handlersMap[l].delete(p),(!p||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return h.receivers=[],h})();function Bs(h="",c=10){let l="";for(let p=0;p<c;p++)l+=Math.floor(10*Math.random());return h+l}class oi{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,p=50){var m=this;return(0,I.Z)(function*(){const v=typeof MessageChannel<"u"?new MessageChannel:null;if(!v)throw new Error("connection_unavailable");let T,x;return new Promise((G,ae)=>{const ge=Bs("",20);v.port1.start();const ve=setTimeout(()=>{ae(new Error("unsupported_event"))},p);x={messageChannel:v,onMessage(nn){const Ii=nn;if(Ii.data.eventId===ge)switch(Ii.data.status){case"ack":clearTimeout(ve),T=setTimeout(()=>{ae(new Error("timeout"))},3e3);break;case"done":clearTimeout(T),G(Ii.data.response);break;default:clearTimeout(ve),clearTimeout(T),ae(new Error("invalid_response"))}}},m.handlers.add(x),v.port1.addEventListener("message",x.onMessage),m.target.postMessage({eventType:c,eventId:ge,data:l},[v.port2])}).finally(()=>{x&&m.removeMessageHandler(x)})})()}}function ln(){return window}function pl(){return typeof ln().WorkerGlobalScope<"u"&&"function"==typeof ln().importScripts}function ku(){return(ku=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const gl="firebaseLocalStorageDb",Vu="firebaseLocalStorage",Xh="fbase_key";class js{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function $s(h,c){return h.transaction([Vu],c?"readwrite":"readonly").objectStore(Vu)}function ml(){const h=indexedDB.open(gl,1);return new Promise((c,l)=>{h.addEventListener("error",()=>{l(h.error)}),h.addEventListener("upgradeneeded",()=>{const p=h.result;try{p.createObjectStore(Vu,{keyPath:Xh})}catch(m){l(m)}}),h.addEventListener("success",(0,I.Z)(function*(){const p=h.result;p.objectStoreNames.contains(Vu)?c(p):(p.close(),yield function ga(){const h=indexedDB.deleteDatabase(gl);return new js(h).toPromise()}(),c(yield ml()))}))})}function kI(h,c,l){return Bm.apply(this,arguments)}function Bm(){return(Bm=(0,I.Z)(function*(h,c,l){const p=$s(h,!0).put({[Xh]:c,value:l});return new js(p).toPromise()})).apply(this,arguments)}function ef(){return(ef=(0,I.Z)(function*(h,c){const l=$s(h,!1).get(c),p=yield new js(l).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function jm(h,c){const l=$s(h,!0).delete(c);return new js(l).toPromise()}const ma=(()=>{class h{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,I.Z)(function*(){return l.db||(l.db=yield ml()),l.db})()}_withRetries(l){var p=this;return(0,I.Z)(function*(){let m=0;for(;;)try{const v=yield p._openDb();return yield l(v)}catch(v){if(m++>3)throw v;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,I.Z)(function*(){return pl()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,I.Z)(function*(){l.receiver=Hn._getInstance(function Jh(){return pl()?self:null}()),l.receiver._subscribe("keyChanged",function(){var p=(0,I.Z)(function*(m,v){return{keyProcessed:(yield l._poll()).includes(v.key)}});return function(m,v){return p.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var p=(0,I.Z)(function*(m,v){return["keyChanged"]});return function(m,v){return p.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,I.Z)(function*(){var p,m;if(l.activeServiceWorker=yield function Lm(){return ku.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new oi(l.activeServiceWorker);const v=yield l.sender._send("ping",{},800);v&&null!==(p=v[0])&&void 0!==p&&p.fulfilled&&null!==(m=v[0])&&void 0!==m&&m.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var p=this;return(0,I.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function Fm(){var h;return(null===(h=navigator?.serviceWorker)||void 0===h?void 0:h.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:l},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const l=yield ml();return yield kI(l,Qh,"1"),yield jm(l,Qh),!0}catch{}return!1})()}_withPendingWrite(l){var p=this;return(0,I.Z)(function*(){p.pendingWrites++;try{yield l()}finally{p.pendingWrites--}})()}_set(l,p){var m=this;return(0,I.Z)(function*(){return m._withPendingWrite((0,I.Z)(function*(){return yield m._withRetries(v=>kI(v,l,p)),m.localCache[l]=p,m.notifyServiceWorker(l)}))})()}_get(l){var p=this;return(0,I.Z)(function*(){const m=yield p._withRetries(v=>function XS(h,c){return ef.apply(this,arguments)}(v,l));return p.localCache[l]=m,m})()}_remove(l){var p=this;return(0,I.Z)(function*(){return p._withPendingWrite((0,I.Z)(function*(){return yield p._withRetries(m=>jm(m,l)),delete p.localCache[l],p.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,I.Z)(function*(){const p=yield l._withRetries(T=>{const x=$s(T,!1).getAll();return new js(x).toPromise()});if(!p)return[];if(0!==l.pendingWrites)return[];const m=[],v=new Set;for(const{fbase_key:T,value:x}of p)v.add(T),JSON.stringify(l.localCache[T])!==JSON.stringify(x)&&(l.notifyListeners(T,x),m.push(T));for(const T of Object.keys(l.localCache))l.localCache[T]&&!v.has(T)&&(l.notifyListeners(T,null),m.push(T));return m})()}notifyListeners(l,p){this.localCache[l]=p;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(p)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return h.type="LOCAL",h})(),Lu=1e12;class LI{constructor(c){this.auth=c,this.counter=Lu,this._widgets=new Map}render(c,l){const p=this.counter;return this._widgets.set(p,new FI(c,this.auth.name,l||{})),this.counter++,p}reset(c){var l;const p=c||Lu;null===(l=this._widgets.get(p))||void 0===l||l.delete(),this._widgets.delete(p)}getResponse(c){var l;return(null===(l=this._widgets.get(c||Lu))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,I.Z)(function*(){var p;return null===(p=l._widgets.get(c||Lu))||void 0===p||p.execute(),""})()}}class FI{constructor(c,l,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const m="string"==typeof c?document.getElementById(c):c;K(m,"argument-error",{appName:l}),this.container=m,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function UI(h){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<h;p++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _l=TI("rcb"),BI=new Oi(3e4,6e4);class jI{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=ln().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return K(function rR(h){return h.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(h)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&or(ln().grecaptcha)?Promise.resolve(ln().grecaptcha):new Promise((p,m)=>{const v=ln().setTimeout(()=>{m(St(c,"network-request-failed"))},BI.get());ln()[_l]=()=>{ln().clearTimeout(v),delete ln()[_l];const x=ln().grecaptcha;if(!x||!or(x))return void m(St(c,"internal-error"));const G=x.render;x.render=(ae,ge)=>{const ve=G(ae,ge);return this.counter++,ve},this.hostLanguage=l,p(x)},dm(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:_l,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(v),m(St(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=ln().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $I{load(c){return(0,I.Z)(function*(){return new LI(c)})()}clearedOneInstance(){}}const jr="recaptcha",qm={theme:"light",type:"image"};class HI{constructor(c,l,p=Object.assign({},qm)){this.parameters=p,this.type=jr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ut(c),this.isInvisible="invisible"===this.parameters.size,K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const m="string"==typeof l?document.getElementById(l):l;K(m,this.auth,"argument-error"),this.container=m,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $I:new jI,this.validateStartingState()}verify(){var c=this;return(0,I.Z)(function*(){c.assertNotDestroyed();const l=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(l)||new Promise(v=>{const T=x=>{x&&(c.tokenChangeListeners.delete(T),v(x))};c.tokenChangeListeners.add(T),c.isInvisible&&p.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){K(!this.parameters.sitekey,this.auth,"argument-error"),K(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(p=>p(l)),"function"==typeof c)c(l);else if("string"==typeof c){const p=ln()[c];"function"==typeof p&&p(l)}}}assertNotDestroyed(){K(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,I.Z)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const p=document.createElement("div");l.appendChild(p),l=p}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,I.Z)(function*(){K(Mi()&&!pl(),c.auth,"internal-error"),yield function zI(){let h=null;return new Promise(c=>{"complete"!==document.readyState?(h=()=>c(),window.addEventListener("load",h)):c()}).catch(c=>{throw h&&window.removeEventListener("load",h),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function pu(h){return os.apply(this,arguments)}(c.auth);K(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return K(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class yl{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=pe._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function nf(){return(nf=(0,I.Z)(function*(h,c,l){const p=Ut(h),m=yield Fu(p,c,(0,j.m9)(l));return new yl(m,v=>al(p,v))})).apply(this,arguments)}function sf(){return(sf=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);yield Cr(!1,p,"phone");const m=yield Fu(p.auth,c,(0,j.m9)(l));return new yl(m,v=>bm(p,v))})).apply(this,arguments)}function vl(){return(vl=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h),m=yield Fu(p.auth,c,(0,j.m9)(l));return new yl(m,v=>Am(p,v))})).apply(this,arguments)}function Fu(h,c,l){return It.apply(this,arguments)}function It(){return It=(0,I.Z)(function*(h,c,l){var p;const m=yield l.verify();try{let v;if(K("string"==typeof m,h,"argument-error"),K(l.type===jr,h,"argument-error"),v="string"==typeof c?{phoneNumber:c}:c,"session"in v){const T=v.session;if("phoneNumber"in v)return K("enroll"===T.type,h,"internal-error"),(yield function GS(h,c){return B(h,"POST","/v2/accounts/mfaEnrollment:start",Y(h,c))}(h,{idToken:T.credential,phoneEnrollmentInfo:{phoneNumber:v.phoneNumber,recaptchaToken:m}})).phoneSessionInfo.sessionInfo;{K("signin"===T.type,h,"internal-error");const x=(null===(p=v.multiFactorHint)||void 0===p?void 0:p.uid)||v.multiFactorUid;return K(x,h,"missing-multi-factor-info"),(yield function tf(h,c){return B(h,"POST","/v2/accounts/mfaSignIn:start",Y(h,c))}(h,{mfaPendingCredential:T.credential,mfaEnrollmentId:x,phoneSignInInfo:{recaptchaToken:m}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:T}=yield function RI(h,c){return Nh.apply(this,arguments)}(h,{phoneNumber:v.phoneNumber,recaptchaToken:m});return T}}finally{l._reset()}}),It.apply(this,arguments)}function _a(){return(_a=(0,I.Z)(function*(h,c){yield Uh((0,j.m9)(h),c)})).apply(this,arguments)}let xn=(()=>{class h{constructor(l){this.providerId=h.PROVIDER_ID,this.auth=Ut(l)}verifyPhoneNumber(l,p){return Fu(this.auth,l,(0,j.m9)(p))}static credential(l,p){return pe._fromVerification(l,p)}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:p,temporaryProof:m}=l;return p&&m?pe._fromTokenResponse(p,m):null}}return h.PROVIDER_ID="phone",h.PHONE_SIGN_IN_METHOD="phone",h})();function Do(h,c){return c?ze(c):(K(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}class El extends us{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Lr(c,this._buildIdpRequest())}_linkToIdToken(c,l){return Lr(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return Lr(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function ya(h){return Dm(h.auth,new El(h),h.bypassAuthState)}function $r(h){const{auth:c,user:l}=h;return K(l,c,"internal-error"),$h(l,new El(h),h.bypassAuthState)}function GI(h){return uf.apply(this,arguments)}function uf(){return(uf=(0,I.Z)(function*(h){const{auth:c,user:l}=h;return K(l,c,"internal-error"),Uh(l,new El(h),h.bypassAuthState)})).apply(this,arguments)}class Zm{constructor(c,l,p,m,v=!1){this.auth=c,this.resolver=p,this.user=m,this.bypassAuthState=v,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,I.Z)(function*(p,m){c.pendingPromise={resolve:p,reject:m};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(v){c.reject(v)}});return function(p,m){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,I.Z)(function*(){const{urlResponse:p,sessionId:m,postBody:v,tenantId:T,error:x,type:G}=c;if(x)return void l.reject(x);const ae={auth:l.auth,requestUri:p,sessionId:m,tenantId:T||void 0,postBody:v||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(G)(ae))}catch(ge){l.reject(ge)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return ya;case"linkViaPopup":case"linkViaRedirect":return GI;case"reauthViaPopup":case"reauthViaRedirect":return $r;default:gt(this.auth,"internal-error")}}resolve(c){Lt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Lt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hs=new Oi(2e3,1e4);function cf(){return(cf=(0,I.Z)(function*(h,c,l){const p=Ut(h);He(h,c,ls);const m=Do(p,l);return new Re(p,"signInViaPopup",c,m).executeNotNull()})).apply(this,arguments)}function Il(){return(Il=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);He(p.auth,c,ls);const m=Do(p.auth,l);return new Re(p.auth,"reauthViaPopup",c,m,p).executeNotNull()})).apply(this,arguments)}function lf(){return(lf=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);He(p.auth,c,ls);const m=Do(p.auth,l);return new Re(p.auth,"linkViaPopup",c,m,p).executeNotNull()})).apply(this,arguments)}let Re=(()=>{class h extends Zm{constructor(l,p,m,v,T){super(l,p,v,T),this.provider=m,this.authWindow=null,this.pollId=null,h.currentPopupAction&&h.currentPopupAction.cancel(),h.currentPopupAction=this}executeNotNull(){var l=this;return(0,I.Z)(function*(){const p=yield l.execute();return K(p,l.auth,"internal-error"),p})()}onExecution(){var l=this;return(0,I.Z)(function*(){Lt(1===l.filter.length,"Popup operations only handle one event");const p=Bs();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],p),l.authWindow.associatedEvent=p,l.resolver._originValidation(l.auth).catch(m=>{l.reject(m)}),l.resolver._isIframeWebStorageSupported(l.auth,m=>{m||l.reject(St(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(St(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h.currentPopupAction=null}pollUserCancellation(){const l=()=>{var p,m;this.pollId=null!==(m=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==m&&m.closed?window.setTimeout(()=>{this.pollId=null,this.reject(St(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,Hs.get())};l()}}return h.currentPopupAction=null,h})();const Jm="pendingRedirect",wl=new Map;class qI extends Zm{constructor(c,l,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,I.Z)(function*(){let p=wl.get(l.auth._key());if(!p){try{const v=(yield function WI(h,c){return df.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;p=()=>Promise.resolve(v)}catch(m){p=()=>Promise.reject(m)}wl.set(l.auth._key(),p)}return l.bypassAuthState||wl.set(l.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,p=this;return(0,I.Z)(function*(){if("signInViaRedirect"===c.type)return l().call(p,c);if("unknown"!==c.type){if(c.eventId){const m=yield p.auth._redirectUserForId(c.eventId);if(m)return p.user=m,l().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function df(){return(df=(0,I.Z)(function*(h,c){const l=e_(c),p=Xm(h);if(!(yield p._isAvailable()))return!1;const m="true"===(yield p._get(l));return yield p._remove(l),m})).apply(this,arguments)}function Tl(h,c){return zs.apply(this,arguments)}function zs(){return(zs=(0,I.Z)(function*(h,c){return Xm(h)._set(e_(c),"true")})).apply(this,arguments)}function hf(h,c){wl.set(h._key(),c)}function Xm(h){return ze(h._redirectPersistence)}function e_(h){return Rn(Jm,h.config.apiKey,h.name)}function KI(h,c,l){return function J(h,c,l){return et.apply(this,arguments)}(h,c,l)}function et(){return(et=(0,I.Z)(function*(h,c,l){const p=Ut(h);He(h,c,ls),yield p._initializationPromise;const m=Do(p,l);return yield Tl(m,p),m._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function Hr(h,c,l){return function zr(h,c,l){return In.apply(this,arguments)}(h,c,l)}function In(){return(In=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);He(p.auth,c,ls),yield p.auth._initializationPromise;const m=Do(p.auth,l);yield Tl(m,p.auth);const v=yield pf(p);return m._openRedirect(p.auth,c,"reauthViaRedirect",v)})).apply(this,arguments)}function t_(h,c,l){return function Uu(h,c,l){return ai.apply(this,arguments)}(h,c,l)}function ai(){return(ai=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);He(p.auth,c,ls),yield p.auth._initializationPromise;const m=Do(p.auth,l);yield Cr(!1,p,c.providerId),yield Tl(m,p.auth);const v=yield pf(p);return m._openRedirect(p.auth,c,"linkViaRedirect",v)})).apply(this,arguments)}function Bu(){return(Bu=(0,I.Z)(function*(h,c){return yield Ut(h)._initializationPromise,Cl(h,c,!1)})).apply(this,arguments)}function Cl(h,c){return n_.apply(this,arguments)}function n_(){return(n_=(0,I.Z)(function*(h,c,l=!1){const p=Ut(h),m=Do(p,c),T=yield new qI(p,m,l).execute();return T&&!l&&(delete T.user._redirectEventId,yield p._persistUserIfCurrent(T.user),yield p._setRedirectUser(null,c)),T})).apply(this,arguments)}function pf(h){return zn.apply(this,arguments)}function zn(){return(zn=(0,I.Z)(function*(h){const c=Bs(`${h.uid}:::`);return h._redirectEventId=c,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),c})).apply(this,arguments)}class gf{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(l=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function QI(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qi(h);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var p;if(c.error&&!qi(c)){const m=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";l.onError(St(this.auth,m))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const p=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bo(c))}saveEventToCache(c){this.cachedEventUids.add(bo(c)),this.lastProcessedEventTime=Date.now()}}function bo(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(c=>c).join("-")}function qi({type:h,error:c}){return"unknown"===h&&"auth/no-auth-event"===c?.code}function mf(h){return _f.apply(this,arguments)}function _f(){return(_f=(0,I.Z)(function*(h,c={}){return B(h,"GET","/v1/projects",c)})).apply(this,arguments)}const YI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yf=/^https?/;function Dl(){return(Dl=(0,I.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:c}=yield mf(h);for(const l of c)try{if(Ef(l))return}catch{}gt(h,"unauthorized-domain")})).apply(this,arguments)}function Ef(h){const c=yn(),{protocol:l,hostname:p}=new URL(c);if(h.startsWith("chrome-extension://")){const T=new URL(h);return""===T.hostname&&""===p?"chrome-extension:"===l&&h.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&T.hostname===p}if(!yf.test(l))return!1;if(YI.test(h))return p===h;const m=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+m+"|"+m+")$","i").test(p)}const JI=new Oi(3e4,6e4);function If(){const h=ln().___jsl;if(h?.H)for(const c of Object.keys(h.H))if(h.H[c].r=h.H[c].r||[],h.H[c].L=h.H[c].L||[],h.H[c].r=[...h.H[c].L],h.CP)for(let l=0;l<h.CP.length;l++)h.CP[l]=null}let ju=null;const i_=new Oi(5e3,15e3),s_="__/auth/iframe",Tf="emulator/auth/iframe",XI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ew=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cr(h){const c=h.config;K(c.authDomain,h,"auth-domain-config-required");const l=c.emulator?V(c,Tf):`https://${h.config.authDomain}/${s_}`,p={apiKey:c.apiKey,appName:h.name,v:Me.SDK_VERSION},m=ew.get(h.config.apiHost);m&&(p.eid=m);const v=h._getFrameworks();return v.length&&(p.fw=v.join(",")),`${l}?${(0,j.xO)(p).slice(1)}`}function Nt(){return Nt=(0,I.Z)(function*(h){const c=yield function r_(h){return ju=ju||function wf(h){return new Promise((c,l)=>{var p,m,v;function T(){If(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{If(),l(St(h,"network-request-failed"))},timeout:JI.get()})}if(null!==(m=null===(p=ln().gapi)||void 0===p?void 0:p.iframes)&&void 0!==m&&m.Iframe)c(gapi.iframes.getContext());else{if(null===(v=ln().gapi)||void 0===v||!v.load){const x=TI("iframefcb");return ln()[x]=()=>{gapi.load?T():l(St(h,"network-request-failed"))},dm(`https://apis.google.com/js/api.js?onload=${x}`).catch(G=>l(G))}T()}}).catch(c=>{throw ju=null,c})}(h),ju}(h),l=ln().gapi;return K(l,h,"internal-error"),c.open({where:document.body,url:cr(h),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XI,dontclear:!0},p=>new Promise(function(){var m=(0,I.Z)(function*(v,T){yield p.restyle({setHideOnLeave:!1});const x=St(h,"network-request-failed"),G=ln().setTimeout(()=>{T(x)},i_.get());function ae(){ln().clearTimeout(G),v(p)}p.ping(ae).then(ae,()=>{T(x)})});return function(v,T){return m.apply(this,arguments)}}()))}),Nt.apply(this,arguments)}const tw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Cf{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const sw="__/auth/handler",Al="emulator/auth/handler",Sl=encodeURIComponent("fac");function va(h,c,l,p,m,v){return $u.apply(this,arguments)}function $u(){return($u=(0,I.Z)(function*(h,c,l,p,m,v){K(h.config.authDomain,h,"auth-domain-config-required"),K(h.config.apiKey,h,"invalid-api-key");const T={apiKey:h.config.apiKey,appName:h.name,authType:l,redirectUrl:p,v:Me.SDK_VERSION,eventId:m};if(c instanceof ls){c.setDefaultLanguage(h.languageCode),T.providerId=c.providerId||"",(0,j.xb)(c.getCustomParameters())||(T.customParameters=JSON.stringify(c.getCustomParameters()));for(const[ge,ve]of Object.entries(v||{}))T[ge]=ve}if(c instanceof Tr){const ge=c.getScopes().filter(ve=>""!==ve);ge.length>0&&(T.scopes=ge.join(","))}h.tenantId&&(T.tid=h.tenantId);const x=T;for(const ge of Object.keys(x))void 0===x[ge]&&delete x[ge];const G=yield h._getAppCheckToken(),ae=G?`#${Sl}=${encodeURIComponent(G)}`:"";return`${function a_({config:h}){return h.emulator?V(h,Al):`https://${h.authDomain}/${sw}`}(h)}?${(0,j.xO)(x).slice(1)}${ae}`})).apply(this,arguments)}const Rl="webStorageSupport",So=class ow{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Co,this._completeRedirectFn=Cl,this._overrideRedirectResult=hf}_openPopup(c,l,p,m){var v=this;return(0,I.Z)(function*(){var T;Lt(null===(T=v.eventManagers[c._key()])||void 0===T?void 0:T.manager,"_initialize() not called before _openPopup()");const x=yield va(c,l,p,yn(),m);return function bl(h,c,l,p=500,m=600){const v=Math.max((window.screen.availHeight-m)/2,0).toString(),T=Math.max((window.screen.availWidth-p)/2,0).toString();let x="";const G=Object.assign(Object.assign({},tw),{width:p.toString(),height:m.toString(),top:v,left:T}),ae=(0,j.z$)().toLowerCase();l&&(x=Yc(ae)?"_blank":l),Tt(ae)&&(c=c||"http://localhost",G.scrollbars="yes");const ge=Object.entries(G).reduce((nn,[Ii,jl])=>`${nn}${Ii}=${jl},`,"");if(function $(h=(0,j.z$)()){var c;return Ve(h)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(ae)&&"_self"!==x)return function Gs(h,c){const l=document.createElement("a");l.href=h,l.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(p)}(c||"",x),new Cf(null);const ve=window.open(c||"",x,ge);K(ve,h,"popup-blocked");try{ve.focus()}catch{}return new Cf(ve)}(c,x,Bs())})()}_openRedirect(c,l,p,m){var v=this;return(0,I.Z)(function*(){return yield v._originValidation(c),function Vm(h){ln().location.href=h}(yield va(c,l,p,yn(),m)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:m,promise:v}=this.eventManagers[l];return m?Promise.resolve(m):(Lt(v,"If manager is not set, promise should be"),v)}const p=this.initAndGetManager(c);return this.eventManagers[l]={promise:p},p.catch(()=>{delete this.eventManagers[l]}),p}initAndGetManager(c){var l=this;return(0,I.Z)(function*(){const p=yield function Ao(h){return Nt.apply(this,arguments)}(c),m=new gf(c);return p.register("authEvent",v=>(K(v?.authEvent,c,"invalid-auth-event"),{status:m.onEvent(v.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:m},l.iframes[c._key()]=p,m})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(Rl,{type:Rl},m=>{var v;const T=null===(v=m?.[0])||void 0===v?void 0:v[Rl];void 0!==T&&l(!!T),gt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function vf(h){return Dl.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return Ee()||ki()||Ve()}};class Hu{constructor(c){this.factorId=c}_process(c,l,p){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,p);case"signin":return this._finalizeSignIn(c,l.credential);default:return Gt("unexpected MultiFactorSessionType")}}}class Df extends Hu{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Df(c)}_finalizeEnroll(c,l,p){return function qS(h,c){return B(h,"POST","/v2/accounts/mfaEnrollment:finalize",Y(h,c))}(c,{idToken:l,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function tR(h,c){return B(h,"POST","/v2/accounts/mfaSignIn:finalize",Y(h,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let iR=(()=>{class h{constructor(){}static assertion(l){return Df._fromCredential(l)}}return h.FACTOR_ID="phone",h})();var aw="@firebase/auth";class bf{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,I.Z)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qs(){return window}(0,j.Pz)("authIdTokenMaxAge"),function cw(h){(0,Me._registerComponent)(new en.wA("auth",(c,{options:l})=>{const p=c.getProvider("app").getImmediate(),m=c.getProvider("heartbeat"),v=c.getProvider("app-check-internal"),{apiKey:T,authDomain:x}=p.options;K(T&&!T.includes(":"),"invalid-api-key",{appName:p.name});const G={apiKey:T,authDomain:x,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oa(h)},ae=new wI(p,m,v,G);return function kS(h,c){const l=c?.persistence||[],p=(Array.isArray(l)?l:[l]).map(ze);c?.errorMap&&h._updateErrorMap(c.errorMap),h._initializeWithPersistence(p,c?.popupRedirectResolver)}(ae,l),ae},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,p)=>{c.getProvider("auth-internal").initialize()})),(0,Me._registerComponent)(new en.wA("auth-internal",c=>{const l=Ut(c.getProvider("auth").getImmediate());return new bf(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Me.registerVersion)(aw,"1.4.0",function zu(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(h)),(0,Me.registerVersion)(aw,"1.4.0","esm2017")}("Browser");function Sf(){return Sf=(0,I.Z)(function*(h,c,l){var p;const{BuildInfo:m}=qs();Lt(c.sessionId,"AuthEvent did not contain a session ID");const v=yield function h_(h){return Nl.apply(this,arguments)}(c.sessionId),T={};return Ve()?T.ibi=m.packageName:S()?T.apn=m.packageName:gt(h,"operation-not-supported-in-this-environment"),m.displayName&&(T.appDisplayName=m.displayName),T.sessionId=v,va(h,l,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,T)}),Sf.apply(this,arguments)}function Wu(){return(Wu=(0,I.Z)(function*(h){const{BuildInfo:c}=qs(),l={};Ve()?l.iosBundleId=c.packageName:S()?l.androidPackageName=c.packageName:gt(h,"operation-not-supported-in-this-environment"),yield mf(h,l)})).apply(this,arguments)}function Zu(){return(Zu=(0,I.Z)(function*(h,c,l){const{cordova:p}=qs();let m=()=>{};try{yield new Promise((v,T)=>{let x=null;function G(){var ve;v();const nn=null===(ve=p.plugins.browsertab)||void 0===ve?void 0:ve.close;"function"==typeof nn&&nn(),"function"==typeof l?.close&&l.close()}function ae(){x||(x=window.setTimeout(()=>{T(St(h,"redirect-cancelled-by-user"))},2e3))}function ge(){"visible"===document?.visibilityState&&ae()}c.addPassiveListener(G),document.addEventListener("resume",ae,!1),S()&&document.addEventListener("visibilitychange",ge,!1),m=()=>{c.removePassiveListener(G),document.removeEventListener("resume",ae,!1),document.removeEventListener("visibilitychange",ge,!1),x&&window.clearTimeout(x)}})}finally{m()}})).apply(this,arguments)}function Nl(){return(Nl=(0,I.Z)(function*(h){const c=function f_(h){if(Lt(/[0-9a-zA-Z]+/.test(h),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(h);const c=new ArrayBuffer(h.length),l=new Uint8Array(c);for(let p=0;p<h.length;p++)l[p]=h.charCodeAt(p);return l}(h),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(m=>m.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class fw extends gf{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,I.Z)(function*(){yield c.initPromise})()}}function g_(h){return kl.apply(this,arguments)}function kl(){return(kl=(0,I.Z)(function*(h){const c=yield Rf()._get(Gn(h));return c&&(yield Rf()._remove(Gn(h))),c})).apply(this,arguments)}function Ku(){const h=[];for(let l=0;l<20;l++){const p=Math.floor(62*Math.random());h.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return h.join("")}function Rf(){return ze(zi)}function Gn(h){return Rn("authEvent",h.config.apiKey,h.name)}function Ea(h){if(!h?.includes("?"))return{};const[c,...l]=h.split("?");return(0,j.zd)(l.join("?"))}const Vl=class __{constructor(){this._redirectPersistence=Co,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Cl,this._overrideRedirectResult=hf}_initialize(c){var l=this;return(0,I.Z)(function*(){const p=c._key();let m=l.eventManagers.get(p);return m||(m=new fw(c),l.eventManagers.set(p,m),l.attachCallbackListeners(c,m)),m})()}_openPopup(c){gt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,p,m){var v=this;return(0,I.Z)(function*(){!function hw(h){var c,l,p,m,v,T,x,G,ae,ge;const ve=qs();K("function"==typeof(null===(c=ve?.universalLinks)||void 0===c?void 0:c.subscribe),h,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),K(typeof(null===(l=ve?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),K("function"==typeof(null===(v=null===(m=null===(p=ve?.cordova)||void 0===p?void 0:p.plugins)||void 0===m?void 0:m.browsertab)||void 0===v?void 0:v.openUrl),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(G=null===(x=null===(T=ve?.cordova)||void 0===T?void 0:T.plugins)||void 0===x?void 0:x.browsertab)||void 0===G?void 0:G.isAvailable),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(ge=null===(ae=ve?.cordova)||void 0===ae?void 0:ae.InAppBrowser)||void 0===ge?void 0:ge.open),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const T=yield v._initialize(c);yield T.initialized(),T.resetRedirect(),function ZI(){wl.clear()}(),yield v._originValidation(c);const x=function Ol(h,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:Ku(),postBody:null,tenantId:h.tenantId,error:St(h,"no-auth-event")}}(c,p,m);yield function Ro(h,c){return Rf()._set(Gn(h),c)}(c,x);const G=yield function Wi(h,c,l){return Sf.apply(this,arguments)}(c,x,l),ae=yield function d_(h){const{cordova:c}=qs();return new Promise(l=>{c.plugins.browsertab.isAvailable(p=>{let m=null;p?c.plugins.browsertab.openUrl(h):m=c.InAppBrowser.open(h,function We(h=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(h)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(h)}()?"_blank":"_system","location=yes"),l(m)})})}(G);return function Ml(h,c,l){return Zu.apply(this,arguments)}(c,T,ae)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function xl(h){return Wu.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:p,handleOpenURL:m,BuildInfo:v}=qs(),T=setTimeout((0,I.Z)(function*(){yield g_(c),l.onEvent(Po())}),500),x=function(){var ge=(0,I.Z)(function*(ve){clearTimeout(T);const nn=yield g_(c);let Ii=null;nn&&ve?.url&&(Ii=function m_(h,c){var l,p;const m=function qn(h){const c=Ea(h),l=c.link?decodeURIComponent(c.link):void 0,p=Ea(l).link,m=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Ea(m).link||m||p||l||h}(c);if(m.includes("/__/auth/callback")){const v=Ea(m),T=v.firebaseError?function pw(h){try{return JSON.parse(h)}catch{return null}}(decodeURIComponent(v.firebaseError)):null,x=null===(p=null===(l=T?.code)||void 0===l?void 0:l.split("auth/"))||void 0===p?void 0:p[1],G=x?St(x):null;return G?{type:h.type,eventId:h.eventId,tenantId:h.tenantId,error:G,urlResponse:null,sessionId:null,postBody:null}:{type:h.type,eventId:h.eventId,tenantId:h.tenantId,sessionId:h.sessionId,urlResponse:m,postBody:null}}return null}(nn,ve.url)),l.onEvent(Ii||Po())});return function(nn){return ge.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,x);const G=m,ae=`${v.packageName.toLowerCase()}://`;qs().handleOpenURL=function(){var ge=(0,I.Z)(function*(ve){if(ve.toLowerCase().startsWith(ae)&&x({url:ve}),"function"==typeof G)try{G(ve)}catch(nn){console.error(nn)}});return function(ve){return ge.apply(this,arguments)}}()}};function Po(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:St("no-auth-event")}}function Zi(){var h;return(null===(h=self?.location)||void 0===h?void 0:h.protocol)||null}function v_(h=(0,j.z$)()){return!("file:"!==Zi()&&"ionic:"!==Zi()&&"capacitor:"!==Zi()||!h.toLowerCase().match(/iphone|ipad|ipod|android/))}function mw(){try{const h=self.localStorage,c=Bs();if(h)return h.setItem(c,"1"),h.removeItem(c),!function lR(h=(0,j.z$)()){return function uR(){return(0,j.w1)()&&11===document?.documentMode}()||function cR(h=(0,j.z$)()){return/Edge\/\d+/.test(h)}(h)}()||(0,j.hl)()}catch{return E_()&&(0,j.hl)()}return!1}function E_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ws(){return(function oR(){return"http:"===Zi()||"https:"===Zi()}()||(0,j.ru)()||v_())&&!function aR(){return(0,j.b$)()||(0,j.UG)()}()&&mw()&&!E_()}function I_(){return v_()&&typeof document<"u"}function dn(){return(dn=(0,I.Z)(function*(){return!!I_()&&new Promise(h=>{const c=setTimeout(()=>{h(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),h(!0)})})})).apply(this,arguments)}const Wn={LOCAL:"local",NONE:"none",SESSION:"session"},Qu=K,Gr="persistence";function Ll(h){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,I.Z)(function*(h){yield h._initializationPromise;const c=w_(),l=Rn(Gr,h.config.apiKey,h.name);c&&c.setItem(l,h._getPersistence())})).apply(this,arguments)}function w_(){var h;try{return(null===(h=function yw(){return typeof window<"u"?window:null}())||void 0===h?void 0:h.sessionStorage)||null}catch{return null}}const dR=K;class Zs{constructor(){this.browserResolver=ze(So),this.cordovaResolver=ze(Vl),this.underlyingResolver=null,this._redirectPersistence=Co,this._completeRedirectFn=Cl,this._overrideRedirectResult=hf}_initialize(c){var l=this;return(0,I.Z)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,p,m){var v=this;return(0,I.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openPopup(c,l,p,m)})()}_openRedirect(c,l,p,m){var v=this;return(0,I.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openRedirect(c,l,p,m)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return I_()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return dR(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,I.Z)(function*(){if(c.underlyingResolver)return;const l=yield function _w(){return dn.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function vw(h){return h.unwrap()}function xf(h){return Ew(h)}function Ew(h){const{_tokenResponse:c}=h instanceof j.ZR?h.customData:h;if(!c)return null;if(!(h instanceof j.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return xn.credentialFromResult(h);const l=c.providerId;if(!l||l===Qe.PASSWORD)return null;let p;switch(l){case Qe.GOOGLE:p=vi;break;case Qe.FACEBOOK:p=si;break;case Qe.GITHUB:p=ot;break;case Qe.TWITTER:p=Fi;break;default:const{oauthIdToken:m,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:x,nonce:G}=c;return v||T||m||x?x?l.startsWith("saml.")?ks._create(l,x):Vi._fromParams({providerId:l,signInMethod:l,pendingToken:x,idToken:m,accessToken:v}):new ds(l).credential({idToken:m,accessToken:v,rawNonce:G}):null}return h instanceof j.ZR?p.credentialFromError(h):p.credentialFromResult(h)}function lr(h,c){return c.catch(l=>{throw l instanceof j.ZR&&function Da(h,c){var l;const p=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new Iw(h,function zS(h,c){var l;const p=(0,j.m9)(h),m=c;return K(c.customData.operationType,p,"argument-error"),K(null===(l=m.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,p,"argument-error"),Mm._fromError(p,m)}(h,c));else if(p){const m=Ew(c),v=c;m&&(v.credential=m,v.tenantId=p.tenantId||void 0,v.email=p.email||void 0,v.phoneNumber=p.phoneNumber||void 0)}}(h,l),l}).then(l=>{const m=l.user;return{operationType:l.operationType,credential:xf(l),additionalUserInfo:$n(l),user:gs.getOrCreate(m)}})}function Mf(h,c){return Nf.apply(this,arguments)}function Nf(){return(Nf=(0,I.Z)(function*(h,c){const l=yield c;return{verificationId:l.verificationId,confirm:p=>lr(h,l.confirm(p))}})).apply(this,arguments)}class Iw{constructor(c,l){this.resolver=l,this.auth=function qr(h){return h.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return lr(vw(this.auth),this.resolver.resolveSignIn(c))}}class gs{constructor(c){this._delegate=c,this.multiFactor=function KS(h){const c=(0,j.m9)(h);return Om.has(c)||Om.set(c,Nm._fromUser(c)),Om.get(c)}(c)}static getOrCreate(c){return gs.USER_MAP.has(c)||gs.USER_MAP.set(c,new gs(c)),gs.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,I.Z)(function*(){return lr(l.auth,bm(l._delegate,c))})()}linkWithPhoneNumber(c,l){var p=this;return(0,I.Z)(function*(){return Mf(p.auth,function rf(h,c,l){return sf.apply(this,arguments)}(p._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,I.Z)(function*(){return lr(l.auth,function Ym(h,c,l){return lf.apply(this,arguments)}(l._delegate,c,Zs))})()}linkWithRedirect(c){var l=this;return(0,I.Z)(function*(){return yield Ll(Ut(l.auth)),t_(l._delegate,c,Zs)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,I.Z)(function*(){return lr(l.auth,Am(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return Mf(this.auth,function Gi(h,c,l){return vl.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return lr(this.auth,function Qm(h,c,l){return Il.apply(this,arguments)}(this._delegate,c,Zs))}reauthenticateWithRedirect(c){var l=this;return(0,I.Z)(function*(){return yield Ll(Ut(l.auth)),Hr(l._delegate,c,Zs)})()}sendEmailVerification(c){return function da(h,c){return Zt.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,I.Z)(function*(){return yield function MI(h,c){return ol.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function fs(h,c){return ha((0,j.m9)(h),c,null)}(this._delegate,c)}updatePassword(c){return function Mu(h,c){return ha((0,j.m9)(h),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function af(h,c){return _a.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Pm(h,c){return ji.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function xu(h,c,l){return Fs.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}gs.USER_MAP=new WeakMap;const Ju=K;let T_=(()=>{class h{constructor(l,p){if(this.app=l,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:m}=l.options;Ju(m,"invalid-api-key",{appName:l.name}),Ju(m,"invalid-api-key",{appName:l.name});const v=typeof window<"u"?Zs:void 0;this._delegate=p.initialize({options:{persistence:Ul(m,l.name),popupRedirectResolver:v}}),this._delegate._updateErrorMap(Ln),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?gs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,p){!function wr(h,c,l){const p=Ut(h);K(p._canInitEmulator,p,"emulator-config-failed"),K(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const m=!!l?.disableWarnings,v=vu(c),{host:T,port:x}=function bI(h){const c=vu(h),l=/(\/\/)?([^?#/]+)/.exec(h.substr(c.length));if(!l)return{host:"",port:null};const p=l[2].split("@").pop()||"",m=/^(\[[^\]]+\])(:|$)/.exec(p);if(m){const v=m[1];return{host:v,port:Ph(p.substr(v.length+1))}}{const[v,T]=p.split(":");return{host:v,port:Ph(T)}}}(c);p.config.emulator={url:`${v}//${T}${null===x?"":`:${x}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:T,port:x,protocol:v.replace(":",""),options:Object.freeze({disableWarnings:m})}),m||function AI(){function h(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h())}()}(this._delegate,l,p)}applyActionCode(l){return function Sm(h,c){return ua.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return Rm(this._delegate,l)}confirmPasswordReset(l,p){return function Ur(h,c,l){return ll.apply(this,arguments)}(this._delegate,l,p)}createUserWithEmailAndPassword(l,p){var m=this;return(0,I.Z)(function*(){return lr(m._delegate,function Ue(h,c,l){return Rt.apply(this,arguments)}(m._delegate,l,p))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function Pu(h,c){return dl.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function ca(h,c){const l=cs.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,I.Z)(function*(){Ju(Ws(),l._delegate,"operation-not-supported-in-this-environment");const p=yield function ff(h,c){return Bu.apply(this,arguments)}(l._delegate,Zs);return p?lr(l._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function Ia(h,c){Ut(h)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,p,m){const{next:v,error:T,complete:x}=Fl(l,p,m);return this._delegate.onAuthStateChanged(v,T,x)}onIdTokenChanged(l,p,m){const{next:v,error:T,complete:x}=Fl(l,p,m);return this._delegate.onIdTokenChanged(v,T,x)}sendSignInLinkToEmail(l,p){return function Ru(h,c,l){return Pn.apply(this,arguments)}(this._delegate,l,p)}sendPasswordResetEmail(l,p){return function ur(h,c,l){return Ls.apply(this,arguments)}(this._delegate,l,p||void 0)}setPersistence(l){var p=this;return(0,I.Z)(function*(){let m;switch(function Ta(h,c){Qu(Object.values(Wn).includes(c),h,"invalid-persistence-type"),(0,j.b$)()?Qu(c!==Wn.SESSION,h,"unsupported-persistence-type"):(0,j.UG)()?Qu(c===Wn.NONE,h,"unsupported-persistence-type"):E_()?Qu(c===Wn.NONE||c===Wn.LOCAL&&(0,j.hl)(),h,"unsupported-persistence-type"):Qu(c===Wn.NONE||mw(),h,"unsupported-persistence-type")}(p._delegate,l),l){case Wn.SESSION:m=Co;break;case Wn.LOCAL:m=(yield ze(ma)._isAvailable())?ma:zi;break;case Wn.NONE:m=Wt;break;default:return gt("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(m)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return lr(this._delegate,function Cm(h){return sl.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return lr(this._delegate,al(this._delegate,l))}signInWithCustomToken(l){return lr(this._delegate,function OI(h,c){return Dr.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,p){return lr(this._delegate,function Ei(h,c,l){return al((0,j.m9)(h),kh.credential(c,l)).catch(function(){var p=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&Xe(h),m});return function(m){return p.apply(this,arguments)}}())}(this._delegate,l,p))}signInWithEmailLink(l,p){return lr(this._delegate,function cn(h,c,l){return Ui.apply(this,arguments)}(this._delegate,l,p))}signInWithPhoneNumber(l,p){return Mf(this._delegate,function Wm(h,c,l){return nf.apply(this,arguments)}(this._delegate,l,p))}signInWithPopup(l){var p=this;return(0,I.Z)(function*(){return Ju(Ws(),p._delegate,"operation-not-supported-in-this-environment"),lr(p._delegate,function Km(h,c,l){return cf.apply(this,arguments)}(p._delegate,l,Zs))})()}signInWithRedirect(l){var p=this;return(0,I.Z)(function*(){return Ju(Ws(),p._delegate,"operation-not-supported-in-this-environment"),yield Ll(p._delegate),KI(p._delegate,l,Zs)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function tn(h,c){return le.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return h.Persistence=Wn,h})();function Fl(h,c,l){let p=h;"function"!=typeof h&&({next:p,error:c,complete:l}=h);const m=p;return{next:T=>m(T&&gs.getOrCreate(T)),error:c,complete:l}}function Ul(h,c){const l=function Yu(h,c){const l=w_();if(!l)return[];const p=Rn(Gr,h,c);switch(l.getItem(p)){case Wn.NONE:return[Wt];case Wn.LOCAL:return[ma,Co];case Wn.SESSION:return[Co];default:return[]}}(h,c);if(typeof self<"u"&&!l.includes(ma)&&l.push(ma),typeof window<"u")for(const p of[zi,Co])l.includes(p)||l.push(p);return l.includes(Wt)||l.push(Wt),l}class Of{constructor(){this.providerId="phone",this._delegate=new xn(vw(xe.Z.auth()))}static credential(c,l){return xn.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}Of.PHONE_SIGN_IN_METHOD=xn.PHONE_SIGN_IN_METHOD,Of.PROVIDER_ID=xn.PROVIDER_ID;const Xu=K;class ww{constructor(c,l,p=xe.Z.app()){var m;Xu(null===(m=p.options)||void 0===m?void 0:m.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new HI(p.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Tw(h){h.INTERNAL.registerComponent(new en.wA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new T_(l,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:kh,FacebookAuthProvider:si,GithubAuthProvider:ot,GoogleAuthProvider:vi,OAuthProvider:ds,SAMLAuthProvider:Au,PhoneAuthProvider:Of,PhoneMultiFactorGenerator:iR,RecaptchaVerifier:ww,TwitterAuthProvider:Fi,Auth:T_,AuthCredential:us,Error:j.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),h.registerVersion("@firebase/auth-compat","0.4.9")}(xe.Z)},861:(ss,kn,Fe)=>{function I(j,Me,ct,zt,en,Vn,Qe){try{var Q=j[Vn](Qe),ie=Q.value}catch(Ie){return void ct(Ie)}Q.done?Me(ie):Promise.resolve(ie).then(zt,en)}function xe(j){return function(){var Me=this,ct=arguments;return new Promise(function(zt,en){var Vn=j.apply(Me,ct);function Qe(ie){I(Vn,zt,en,Qe,Q,"next",ie)}function Q(ie){I(Vn,zt,en,Qe,Q,"throw",ie)}Qe(void 0)})}}Fe.d(kn,{Z:()=>xe})},582:(ss,kn,Fe)=>{function Me(V,F){var H={};for(var z in V)Object.prototype.hasOwnProperty.call(V,z)&&F.indexOf(z)<0&&(H[z]=V[z]);if(null!=V&&"function"==typeof Object.getOwnPropertySymbols){var Y=0;for(z=Object.getOwnPropertySymbols(V);Y<z.length;Y++)F.indexOf(z[Y])<0&&Object.prototype.propertyIsEnumerable.call(V,z[Y])&&(H[z[Y]]=V[z[Y]])}return H}function Ie(V,F,H,z){return new(H||(H=Promise))(function(B,fe){function tt(st){try{we(z.next(st))}catch(qt){fe(qt)}}function _e(st){try{we(z.throw(st))}catch(qt){fe(qt)}}function we(st){st.done?B(st.value):function Y(B){return B instanceof H?B:new H(function(fe){fe(B)})}(st.value).then(tt,_e)}we((z=z.apply(V,F||[])).next())})}function Vt(V){return this instanceof Vt?(this.v=V,this):new Vt(V)}function gt(V,F,H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y,z=H.apply(V,F||[]),B=[];return Y={},fe("next"),fe("throw"),fe("return"),Y[Symbol.asyncIterator]=function(){return this},Y;function fe(Mt){z[Mt]&&(Y[Mt]=function(Yn){return new Promise(function(An,or){B.push([Mt,Yn,An,or])>1||tt(Mt,Yn)})})}function tt(Mt,Yn){try{!function _e(Mt){Mt.value instanceof Vt?Promise.resolve(Mt.value.v).then(we,st):qt(B[0][2],Mt)}(z[Mt](Yn))}catch(An){qt(B[0][3],An)}}function we(Mt){tt("next",Mt)}function st(Mt){tt("throw",Mt)}function qt(Mt,Yn){Mt(Yn),B.shift(),B.length&&tt(B[0][0],B[0][1])}}function _r(V){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H,F=V[Symbol.asyncIterator];return F?F.call(V):(V=function pt(V){var F="function"==typeof Symbol&&Symbol.iterator,H=F&&V[F],z=0;if(H)return H.call(V);if(V&&"number"==typeof V.length)return{next:function(){return V&&z>=V.length&&(V=void 0),{value:V&&V[z++],done:!V}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}(V),H={},z("next"),z("throw"),z("return"),H[Symbol.asyncIterator]=function(){return this},H);function z(B){H[B]=V[B]&&function(fe){return new Promise(function(tt,_e){!function Y(B,fe,tt,_e){Promise.resolve(_e).then(function(we){B({value:we,done:tt})},fe)}(tt,_e,(fe=V[B](fe)).done,fe.value)})}}}Fe.d(kn,{FC:()=>gt,KL:()=>_r,_T:()=>Me,mG:()=>Ie,qq:()=>Vt}),"function"==typeof SuppressedError&&SuppressedError}},ss=>{ss(ss.s=246)}]);