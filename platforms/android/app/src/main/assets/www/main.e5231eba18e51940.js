"use strict";(self.webpackChunkSharedShoppingList=self.webpackChunkSharedShoppingList||[]).push([[179],{58:(as,Fn,Fe)=>{Fe.d(Fn,{BH:()=>xt,G6:()=>ki,L:()=>Je,LL:()=>B,Pz:()=>_t,Sg:()=>Ir,UG:()=>K,ZB:()=>Ie,ZR:()=>Y,aH:()=>Ut,b$:()=>wn,eu:()=>F,hl:()=>V,jU:()=>Zt,m9:()=>oa,ne:()=>cs,pd:()=>_u,r3:()=>cr,ru:()=>Bt,tV:()=>Q,uI:()=>Pn,vZ:()=>us,w1:()=>Oi,xO:()=>mu,xb:()=>Ur,z$:()=>ze,zd:()=>yi});const Me=function(D){const C=[];let A=0;for(let W=0;W<D.length;W++){let P=D.charCodeAt(W);P<128?C[A++]=P:P<2048?(C[A++]=P>>6|192,C[A++]=63&P|128):55296==(64512&P)&&W+1<D.length&&56320==(64512&D.charCodeAt(W+1))?(P=65536+((1023&P)<<10)+(1023&D.charCodeAt(++W)),C[A++]=P>>18|240,C[A++]=P>>12&63|128,C[A++]=P>>6&63|128,C[A++]=63&P|128):(C[A++]=P>>12|224,C[A++]=P>>6&63|128,C[A++]=63&P|128)}return C},Wt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(D,C){if(!Array.isArray(D))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=C?this.byteToCharMapWebSafe_:this.byteToCharMap_,W=[];for(let P=0;P<D.length;P+=3){const G=D[P],Ne=P+1<D.length,Ge=Ne?D[P+1]:0,ft=P+2<D.length,Qt=ft?D[P+2]:0;let Hn=(15&Ge)<<2|Qt>>6,Dt=63&Qt;ft||(Dt=64,Ne||(Hn=64)),W.push(A[G>>2],A[(3&G)<<4|Ge>>4],A[Hn],A[Dt])}return W.join("")},encodeString(D,C){return this.HAS_NATIVE_SUPPORT&&!C?btoa(D):this.encodeByteArray(Me(D),C)},decodeString(D,C){return this.HAS_NATIVE_SUPPORT&&!C?atob(D):function(D){const C=[];let A=0,W=0;for(;A<D.length;){const P=D[A++];if(P<128)C[W++]=String.fromCharCode(P);else if(P>191&&P<224){const G=D[A++];C[W++]=String.fromCharCode((31&P)<<6|63&G)}else if(P>239&&P<365){const ft=((7&P)<<18|(63&D[A++])<<12|(63&D[A++])<<6|63&D[A++])-65536;C[W++]=String.fromCharCode(55296+(ft>>10)),C[W++]=String.fromCharCode(56320+(1023&ft))}else{const G=D[A++],Ne=D[A++];C[W++]=String.fromCharCode((15&P)<<12|(63&G)<<6|63&Ne)}}return C.join("")}(this.decodeStringToByteArray(D,C))},decodeStringToByteArray(D,C){this.init_();const A=C?this.charToByteMapWebSafe_:this.charToByteMap_,W=[];for(let P=0;P<D.length;){const G=A[D.charAt(P++)],Ge=P<D.length?A[D.charAt(P)]:0;++P;const Qt=P<D.length?A[D.charAt(P)]:64;++P;const ye=P<D.length?A[D.charAt(P)]:64;if(++P,null==G||null==Ge||null==Qt||null==ye)throw new nn;W.push(G<<2|Ge>>4),64!==Qt&&(W.push(Ge<<4&240|Qt>>2),64!==ye&&W.push(Qt<<6&192|ye))}return W},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let D=0;D<this.ENCODED_VALS.length;D++)this.byteToCharMap_[D]=this.ENCODED_VALS.charAt(D),this.charToByteMap_[this.byteToCharMap_[D]]=D,this.byteToCharMapWebSafe_[D]=this.ENCODED_VALS_WEBSAFE.charAt(D),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[D]]=D,D>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(D)]=D,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(D)]=D)}}};class nn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Je=function(D){return function(D){const C=Me(D);return Wt.encodeByteArray(C,!0)}(D).replace(/\./g,"")},Q=function(D){try{return Wt.decodeString(D,!0)}catch(C){console.error("base64Decode failed: ",C)}return null};function Ie(D,C){if(!(C instanceof Object))return C;switch(C.constructor){case Date:return new Date(C.getTime());case Object:void 0===D&&(D={});break;case Array:D=[];break;default:return C}for(const A in C)!C.hasOwnProperty(A)||!Ye(A)||(D[A]=Ie(D[A],C[A]));return D}function Ye(D){return"__proto__"!==D}const He=()=>{try{return function ht(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const D=process.env.__FIREBASE_DEFAULTS__;return D?JSON.parse(D):void 0})()||(()=>{if(typeof document>"u")return;let D;try{D=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const C=D&&Q(D[1]);return C&&JSON.parse(C)})()}catch(D){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${D}`)}},Ut=()=>{var D;return null===(D=He())||void 0===D?void 0:D.config},_t=D=>{var C;return null===(C=He())||void 0===C?void 0:C[`_${D}`]};class xt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((C,A)=>{this.resolve=C,this.reject=A})}wrapCallback(C){return(A,W)=>{A?this.reject(A):this.resolve(W),"function"==typeof C&&(this.promise.catch(()=>{}),1===C.length?C(A):C(A,W))}}}function Ir(D,C){if(D.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const W=C||"demo-project",P=D.iat||0,G=D.sub||D.user_id;if(!G)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ne=Object.assign({iss:`https://securetoken.google.com/${W}`,aud:W,iat:P,exp:P+3600,auth_time:P,sub:G,user_id:G,firebase:{sign_in_provider:"custom",identities:{}}},D);return[Je(JSON.stringify({alg:"none",type:"JWT"})),Je(JSON.stringify(Ne)),""].join(".")}function ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function K(){var D;const C=null===(D=He())||void 0===D?void 0:D.forceEnvironment;if("node"===C)return!0;if("browser"===C)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Zt(){return"object"==typeof self&&self.self===self}function Bt(){const D="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof D&&void 0!==D.id}function wn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Oi(){const D=ze();return D.indexOf("MSIE ")>=0||D.indexOf("Trident/")>=0}function ki(){return!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V(){try{return"object"==typeof indexedDB}catch{return!1}}function F(){return new Promise((D,C)=>{try{let A=!0;const W="validate-browser-context-for-indexeddb-analytics-module",P=self.indexedDB.open(W);P.onsuccess=()=>{P.result.close(),A||self.indexedDB.deleteDatabase(W),D(!0)},P.onupgradeneeded=()=>{A=!1},P.onerror=()=>{var G;C((null===(G=P.error)||void 0===G?void 0:G.message)||"")}}catch(A){C(A)}})}class Y extends Error{constructor(C,A,W){super(A),this.code=C,this.customData=W,this.name="FirebaseError",Object.setPrototypeOf(this,Y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,B.prototype.create)}}class B{constructor(C,A,W){this.service=C,this.serviceName=A,this.errors=W}create(C,...A){const W=A[0]||{},P=`${this.service}/${C}`,G=this.errors[C],Ne=G?function pe(D,C){return D.replace(rt,(A,W)=>{const P=C[W];return null!=P?String(P):`<${W}?>`})}(G,W):"Error";return new Y(P,`${this.serviceName}: ${Ne} (${P}).`,W)}}const rt=/\{\$([^}]+)}/g;function cr(D,C){return Object.prototype.hasOwnProperty.call(D,C)}function Ur(D){for(const C in D)if(Object.prototype.hasOwnProperty.call(D,C))return!1;return!0}function us(D,C){if(D===C)return!0;const A=Object.keys(D),W=Object.keys(C);for(const P of A){if(!W.includes(P))return!1;const G=D[P],Ne=C[P];if(Tn(G)&&Tn(Ne)){if(!us(G,Ne))return!1}else if(G!==Ne)return!1}for(const P of W)if(!A.includes(P))return!1;return!0}function Tn(D){return null!==D&&"object"==typeof D}function mu(D){const C=[];for(const[A,W]of Object.entries(D))Array.isArray(W)?W.forEach(P=>{C.push(encodeURIComponent(A)+"="+encodeURIComponent(P))}):C.push(encodeURIComponent(A)+"="+encodeURIComponent(W));return C.length?"&"+C.join("&"):""}function yi(D){const C={};return D.replace(/^\?/,"").split("&").forEach(W=>{if(W){const[P,G]=W.split("=");C[decodeURIComponent(P)]=decodeURIComponent(G)}}),C}function _u(D){const C=D.indexOf("?");if(!C)return"";const A=D.indexOf("#",C);return D.substring(C,A>0?A:void 0)}function cs(D,C){const A=new Ms(D,C);return A.subscribe.bind(A)}class Ms{constructor(C,A){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=A,this.task.then(()=>{C(this)}).catch(W=>{this.error(W)})}next(C){this.forEachObserver(A=>{A.next(C)})}error(C){this.forEachObserver(A=>{A.error(C)}),this.close(C)}complete(){this.forEachObserver(C=>{C.complete()}),this.close()}subscribe(C,A,W){let P;if(void 0===C&&void 0===A&&void 0===W)throw new Error("Missing Observer.");P=function Io(D,C){if("object"!=typeof D||null===D)return!1;for(const A of C)if(A in D&&"function"==typeof D[A])return!0;return!1}(C,["next","error","complete"])?C:{next:C,error:A,complete:W},void 0===P.next&&(P.next=jt),void 0===P.error&&(P.error=jt),void 0===P.complete&&(P.complete=jt);const G=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?P.error(this.finalError):P.complete()}catch{}}),this.observers.push(P),G}unsubscribeOne(C){void 0===this.observers||void 0===this.observers[C]||(delete this.observers[C],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(C){if(!this.finalized)for(let A=0;A<this.observers.length;A++)this.sendOne(A,C)}sendOne(C,A){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[C])try{A(this.observers[C])}catch(W){typeof console<"u"&&console.error&&console.error(W)}})}close(C){this.finalized||(this.finalized=!0,void 0!==C&&(this.finalError=C),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jt(){}function oa(D){return D&&D._delegate?D._delegate:D}},401:(as,Fn,Fe)=>{function I(t){return"function"==typeof t}function xe(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const j=xe(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Me(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class dt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(I(r))try{r()}catch(s){e=s instanceof j?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Un(s)}catch(o){e=e??[],o instanceof j?e=[...e,...o.errors]:e.push(o)}}if(e)throw new j(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Un(e);else{if(e instanceof dt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Me(n,e)}remove(e){const{_finalizers:n}=this;n&&Me(n,e),e instanceof dt&&e._removeParent(this)}}dt.EMPTY=(()=>{const t=new dt;return t.closed=!0,t})();const Wt=dt.EMPTY;function nn(t){return t instanceof dt||t&&"closed"in t&&I(t.remove)&&I(t.add)&&I(t.unsubscribe)}function Un(t){I(t)?t():t.unsubscribe()}const Je={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Q={setTimeout(t,e,...n){const{delegate:r}=Q;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Q;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ie(t){Q.setTimeout(()=>{const{onUnhandledError:e}=Je;if(!e)throw t;e(t)})}function Ie(){}const Ye=mt("C",void 0,void 0);function mt(t,e,n){return{kind:t,value:e,error:n}}let ke=null;function He(t){if(Je.useDeprecatedSynchronousErrorHandling){const e=!ke;if(e&&(ke={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=ke;if(ke=null,n)throw r}}else t()}class $n extends dt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,nn(e)&&e.add(this)):this.destination=Zt}static create(e,n,r){return new Ir(e,n,r)}next(e){this.isStopped?K(function Bn(t){return mt("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?K(function ht(t){return mt("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?K(Ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ut=Function.prototype.bind;function _t(t,e){return Ut.call(t,e)}class xt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ze(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ze(r)}else ze(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ze(n)}}}class Ir extends $n{constructor(e,n,r){let i;if(super(),I(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Je.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&_t(e.next,s),error:e.error&&_t(e.error,s),complete:e.complete&&_t(e.complete,s)}):i=e}this.destination=new xt(i)}}function ze(t){Je.useDeprecatedSynchronousErrorHandling?function jn(t){Je.useDeprecatedSynchronousErrorHandling&&ke&&(ke.errorThrown=!0,ke.error=t)}(t):ie(t)}function K(t,e){const{onStoppedNotification:n}=Je;n&&Q.setTimeout(()=>n(t,e))}const Zt={closed:!0,next:Ie,error:function Pn(t){throw t},complete:Ie},Bt="function"==typeof Symbol&&Symbol.observable||"@@observable";function wn(t){return t}function Oi(t){return 0===t.length?wn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let st=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function V(t){return t&&t instanceof $n||function ki(t){return t&&I(t.next)&&I(t.error)&&I(t.complete)}(t)&&nn(t)}(n)?n:new Ir(n,r,i);return He(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Eo(r))((i,s)=>{const o=new Ir({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Bt](){return this}pipe(...n){return Oi(n)(this)}toPromise(n){return new(n=Eo(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Eo(t){var e;return null!==(e=t??Je.Promise)&&void 0!==e?e:Promise}const F=xe(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let H=(()=>{class t extends st{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new z(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new F}next(n){He(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){He(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){He(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Wt:(this.currentObservers=null,s.push(n),new dt(()=>{this.currentObservers=null,Me(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new st;return n.source=this,n}}return t.create=(e,n)=>new z(e,n),t})();class z extends H{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Wt}}function Y(t){return I(t?.lift)}function B(t){return e=>{if(Y(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(t,e,n,r,i){return new rt(t,e,n,r,i)}class rt extends $n{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function _e(t,e){return B((n,r)=>{let i=0;n.subscribe(pe(r,s=>{r.next(t.call(e,s,i++))}))})}var we=Fe(582);const at=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Kt(t){return I(t?.then)}function Ot(t){return I(t[Bt])}function er(t){return Symbol.asyncIterator&&I(t?.[Symbol.asyncIterator])}function xn(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const wr=function cr(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ur(t){return I(t?.[wr])}function gu(t){return(0,we.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,we.qq)(n.read());if(i)return yield(0,we.qq)(void 0);yield yield(0,we.qq)(r)}}finally{n.releaseLock()}})}function us(t){return I(t?.getReader)}function Tn(t){if(t instanceof st)return t;if(null!=t){if(Ot(t))return function ta(t){return new st(e=>{const n=t[Bt]();if(I(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(at(t))return function mu(t){return new st(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Kt(t))return function yi(t){return new st(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ie)})}(t);if(er(t))return Tr(t);if(Ur(t))return function _u(t){return new st(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(us(t))return function cs(t){return Tr(gu(t))}(t)}throw xn(t)}function Tr(t){return new st(e=>{(function Ms(t,e){var n,r,i,s;return(0,we.mG)(this,void 0,void 0,function*(){try{for(n=(0,we.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function tr(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function jt(t,e,n=1/0){return I(e)?jt((r,i)=>_e((s,o)=>e(r,s,i,o))(Tn(t(r,i))),n):("number"==typeof e&&(n=e),B((r,i)=>function Io(t,e,n,r,i,s,o,a){const u=[];let d=0,f=0,g=!1;const _=()=>{g&&!u.length&&!d&&e.complete()},y=w=>d<r?E(w):u.push(w),E=w=>{s&&e.next(w),d++;let b=!1;Tn(n(w,f++)).subscribe(pe(e,M=>{i?.(M),s?y(M):e.next(M)},()=>{b=!0},void 0,()=>{if(b)try{for(d--;u.length&&d<r;){const M=u.shift();o?tr(e,o,()=>E(M)):E(M)}_()}catch(M){e.error(M)}}))};return t.subscribe(pe(e,y,()=>{g=!0,_()})),()=>{a?.()}}(r,i,t,n)))}function vi(t=1/0){return jt(wn,t)}const Mn=new st(t=>t.complete());function Ns(t){return t[t.length-1]}function ra(t){return I(Ns(t))?t.pop():void 0}function Os(t){return function oi(t){return t&&I(t.schedule)}(Ns(t))?t.pop():void 0}function lr(t,e=0){return B((n,r)=>{n.subscribe(pe(r,i=>tr(r,t,()=>r.next(i),e),()=>tr(r,t,()=>r.complete(),e),i=>tr(r,t,()=>r.error(i),e)))})}function Cr(t,e=0){return B((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function oa(t,e){if(!t)throw new Error("Iterable cannot be null");return new st(n=>{tr(n,e,()=>{const r=t[Symbol.asyncIterator]();tr(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function A(t,e){return e?function C(t,e){if(null!=t){if(Ot(t))return function ks(t,e){return Tn(t).pipe(Cr(e),lr(e))}(t,e);if(at(t))return function Xc(t,e){return new st(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Kt(t))return function sa(t,e){return Tn(t).pipe(Cr(e),lr(e))}(t,e);if(er(t))return oa(t,e);if(Ur(t))return function yu(t,e){return new st(n=>{let r;return tr(n,e,()=>{r=t[wr](),tr(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>I(r?.return)&&r.return()})}(t,e);if(us(t))return function D(t,e){return oa(gu(t),e)}(t,e)}throw xn(t)}(t,e):Tn(t)}function W(...t){const e=Os(t),n=function ia(t,e){return"number"==typeof Ns(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Tn(r[0]):vi(n)(A(r,e)):Mn}class P extends H{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function G(...t){return A(t,Os(t))}function Ne(t={}){const{connector:e=(()=>new H),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,d=0,f=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},y=()=>{_(),o=u=void 0,f=g=!1},E=()=>{const w=o;y(),w?.unsubscribe()};return B((w,b)=>{d++,!g&&!f&&_();const M=u=u??e();b.add(()=>{d--,0===d&&!g&&!f&&(a=Ge(E,i))}),M.subscribe(b),!o&&d>0&&(o=new Ir({next:R=>M.next(R),error:R=>{g=!0,_(),a=Ge(y,n,R),M.error(R)},complete:()=>{f=!0,_(),a=Ge(y,r),M.complete()}}),Tn(w).subscribe(o))})(s)}}function Ge(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Ir({next:()=>{r.unsubscribe(),t()}});return Tn(e(...n)).subscribe(r)}function ft(t,e){return B((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(pe(r,u=>{i?.unsubscribe();let d=0;const f=s++;Tn(t(u,f)).subscribe(i=pe(r,g=>r.next(e?e(u,g,f,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Qt(t,e=wn){return t=t??Nn,B((n,r)=>{let i,s=!0;n.subscribe(pe(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function Nn(t,e){return t===e}function ye(t){for(let e in t)if(t[e]===ye)return e;throw Error("Could not find renamed property on target object.")}function Hn(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Dt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Dt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Vi(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const el=ye({__forward_ref__:ye});function O(t){return t.__forward_ref__=O,t.toString=function(){return Dt(this())},t}function S(t){return ne(t)?t():t}function ne(t){return"function"==typeof t&&t.hasOwnProperty(el)&&t.__forward_ref__===O}function Te(t){return t&&!!t.\u0275providers}class $ extends Error{constructor(e,n){super(function pn(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Ee(t){return"string"==typeof t?t:null==t?"":String(t)}function vu(t,e){throw new $(-201,!1)}function br(t,e){null==t&&function Ae(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Ce(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Dr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Eu(t){return Nh(t,Iu)||Nh(t,ym)}function Nh(t,e){return t.hasOwnProperty(e)?t[e]:null}function ls(t){return t&&(t.hasOwnProperty(wu)||t.hasOwnProperty(Oh))?t[wu]:null}const Iu=ye({\u0275prov:ye}),wu=ye({\u0275inj:ye}),ym=ye({ngInjectableDef:ye}),Oh=ye({ngInjectorDef:ye});var et=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(et||{});let Tu;function nr(t){const e=Tu;return Tu=t,e}function Em(t,e,n){const r=Eu(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&et.Optional?null:void 0!==e?e:void vu(Dt(t))}const yt=globalThis;class ce{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ce({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const jr={},Au="__NG_DI_FLAG__",nl="ngTempTokenPath",MI=/\n/gm,Dm="__source";let Ls;function Fi(t){const e=Ls;return Ls=t,e}function OI(t,e=et.Default){if(void 0===Ls)throw new $(-203,!1);return null===Ls?Em(t,void 0,e):Ls.get(t,e&et.Optional?null:void 0,e)}function se(t,e=et.Default){return(function vm(){return Tu}()||OI)(S(t),e)}function he(t,e=et.Default){return se(t,il(e))}function il(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Lh(t){const e=[];for(let n=0;n<t.length;n++){const r=S(t[n]);if(Array.isArray(r)){if(0===r.length)throw new $(900,!1);let i,s=et.Default;for(let o=0;o<r.length;o++){const a=r[o],u=jS(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(se(i,s))}else e.push(se(r))}return e}function ds(t,e){return t[Au]=e,t.prototype[Au]=e,t}function jS(t){return t[Au]}function Ar(t){return{toString:t}.toString()}var fs=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(fs||{}),ai=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ai||{});const Ei={},ut=[],sl=ye({\u0275cmp:ye}),Fs=ye({\u0275dir:ye}),Uh=ye({\u0275pipe:ye}),Su=ye({\u0275mod:ye}),Ui=ye({\u0275fac:ye}),ua=ye({__NG_ELEMENT_ID__:ye}),ol=ye({__NG_ENV_ID__:ye});function $r(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function al(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];ul(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Am(t){return 3===t||4===t||6===t}function ul(t){return 64===t.charCodeAt(0)}function Us(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Bh(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Bh(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const jh="ng-template";function kI(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==$r(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function cl(t){return 4===t.type&&t.value!==jh}function $h(t,e,n){return e===(4!==t.type||n?t.value:jh)}function Hh(t,e,n){let r=4;const i=t.attrs||[],s=function Sm(t){for(let e=0;e<t.length;e++)if(Am(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!$h(t,u,n)||""===u&&1===e.length){if(Sr(r))return!1;o=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!kI(t.attrs,d,n)){if(Sr(r))return!1;o=!0}continue}const g=zh(8&r?"class":u,i,cl(t),n);if(-1===g){if(Sr(r))return!1;o=!0;continue}if(""!==d){let _;_=g>s?"":i[g+1].toLowerCase();const y=8&r?_:null;if(y&&-1!==$r(y,d,0)||2&r&&d!==_){if(Sr(r))return!1;o=!0}}}}else{if(!o&&!Sr(r)&&!Sr(u))return!1;if(o&&Sr(u))continue;o=!1,r=u|1&r}}return Sr(r)||o}function Sr(t){return 0==(1&t)}function zh(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Wh(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Gh(t,e,n=!1){for(let r=0;r<e.length;r++)if(Hh(t,e[r],n))return!0;return!1}function dl(t,e){return t?":not("+e.trim()+")":e}function Rm(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Sr(o)&&(e+=dl(s,i),i=""),r=o,s=s||!Sr(r);n++}return""!==i&&(e+=dl(s,i)),e}function Bi(t){return Ar(()=>{const e=fl(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===fs.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ai.Emulated,styles:t.styles||ut,_:null,schemas:t.schemas||null,tView:null,id:""};xm(n);const r=t.dependencies;return n.directiveDefs=ca(r,!1),n.pipeDefs=ca(r,!0),n.id=function Qh(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function Kh(t){return tt(t)||Cn(t)}function LI(t){return null!==t}function Rr(t){return Ar(()=>({type:t.type,bootstrap:t.bootstrap||ut,declarations:t.declarations||ut,imports:t.imports||ut,exports:t.exports||ut,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function hl(t,e){if(null==t)return Ei;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function Pe(t){return Ar(()=>{const e=fl(t);return xm(e),e})}function zn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function tt(t){return t[sl]||null}function Cn(t){return t[Fs]||null}function dr(t){return t[Uh]||null}function Hr(t,e){const n=t[Su]||null;if(!n&&!0===e)throw new Error(`Type ${Dt(t)} does not have '\u0275mod' property.`);return n}function fl(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ei,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||ut,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:hl(t.inputs,e),outputs:hl(t.outputs)}}function xm(t){t.features?.forEach(e=>e(t))}function ca(t,e){if(!t)return null;const n=e?dr:Kh;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(LI)}const rn=0,le=1,Ue=2,Mt=3,Ii=4,Pu=5,On=6,la=7,dn=8,ji=9,da=10,Oe=11,xu=12,pl=13,ha=14,Yt=15,Mu=16,js=17,$i=18,wo=19,Nm=20,Hi=21,ps=22,Nu=23,fa=24,Ke=25,$s=1,Yh=2,zi=7,pa=9,Gn=11;function zr(t){return Array.isArray(t)&&"object"==typeof t[$s]}function Pr(t){return Array.isArray(t)&&!0===t[$s]}function ku(t){return 0!=(4&t.flags)}function To(t){return t.componentOffset>-1}function ml(t){return 1==(1&t.flags)}function Gi(t){return!!t.template}function Om(t){return 0!=(512&t[Ue])}function qi(t,e){return t.hasOwnProperty(Ui)?t[Ui]:null}let qn=null,Hs=!1;function ui(t){const e=qn;return qn=t,e}const hn={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function _l(t){if(!Gs(t)||t.dirty){if(!t.producerMustRecompute(t)&&!$m(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function jm(t){t.dirty=!0,function Bm(t){if(void 0===t.liveConsumerNode)return;const e=Hs;Hs=!0;try{for(const n of t.liveConsumerNode)n.dirty||jm(n)}finally{Hs=e}}(t),t.consumerMarkedDirty?.(t)}function tf(t){return t&&(t.nextProducerIndex=0),ui(t)}function yl(t,e){if(ui(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Gs(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)zs(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function $m(t){ma(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(_l(n),r!==n.version))return!0}return!1}function Lu(t){if(ma(t),Gs(t))for(let e=0;e<t.producerNode.length;e++)zs(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function zs(t,e){if(function vl(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),ma(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)zs(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ma(i),i.producerIndexOfThis[r]=e}}function Gs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ma(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Gm=null;function El(t){const e=ui(null);try{return t()}finally{ui(e)}}const Zm=()=>{},zI=(()=>({...hn,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Zm}))();class GI{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Gr(){return Km}function Km(t){return t.type.prototype.ngOnChanges&&(t.setInput=WI),qI}function qI(){const t=Qm(this),e=t?.current;if(e){const n=t.previous;if(n===Ei)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function WI(t,e,n,r){const i=this.declaredInputs[n],s=Qm(t)||function af(t,e){return t[Il]=e}(t,{previous:Ei,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new GI(u&&u.currentValue,e,a===Ei),t[r]=e}Gr.ngInherit=!0;const Il="__ngSimpleChanges__";function Qm(t){return t[Il]||null}const Wi=function(t,e,n){};function Tt(t){for(;Array.isArray(t);)t=t[rn];return t}function ya(t,e){return Tt(e[t])}function kn(t,e){return Tt(e[t.index])}function Tl(t,e){return t.data[e]}function qr(t,e){const n=e[t];return zr(n)?n:n[rn]}function qs(t,e){return null==e?null:t[e]}function Jm(t){t[js]=0}function hf(t){1024&t[Ue]||(t[Ue]|=1024,Cl(t,1))}function Xm(t){1024&t[Ue]&&(t[Ue]&=-1025,Cl(t,-1))}function Cl(t,e){let n=t[Mt];if(null===n)return;n[Pu]+=e;let r=n;for(n=n[Mt];null!==n&&(1===e&&1===r[Pu]||-1===e&&0===r[Pu]);)n[Pu]+=e,r=n,n=n[Mt]}const Re={lFrame:o_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Dl(){return Re.bindingsEnabled}function X(){return Re.lFrame.lView}function nt(){return Re.lFrame.tView}function gn(t){return Re.lFrame.contextLView=t,t[dn]}function mn(t){return Re.lFrame.contextLView=null,t}function bn(){let t=i_();for(;null!==t&&64===t.type;)t=t.parent;return t}function i_(){return Re.lFrame.currentTNode}function ci(t,e){const n=Re.lFrame;n.currentTNode=t,n.isParent=e}function mf(){return Re.lFrame.isParent}function ju(){Re.lFrame.isParent=!1}function Ao(){return Re.lFrame.bindingIndex++}function Ef(t,e){const n=Re.lFrame;n.bindingIndex=n.bindingRootIndex=t,If(e)}function If(t){Re.lFrame.currentDirectiveIndex=t}function Tf(t){Re.lFrame.currentQueryIndex=t}function tw(t){const e=t[le];return 2===e.type?e.declTNode:1===e.type?t[On]:null}function Cf(t,e,n){if(n&et.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&et.Host||(i=tw(s),null===i||(s=s[ha],10&i.type))););if(null===i)return!1;e=i,t=s}const r=Re.lFrame=$u();return r.currentTNode=e,r.lView=t,!0}function bf(t){const e=$u(),n=t[le];Re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function $u(){const t=Re.lFrame,e=null===t?null:t.child;return null===e?o_(t):e}function o_(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function a_(){const t=Re.lFrame;return Re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const u_=a_;function Df(){const t=a_();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function hr(){return Re.lFrame.selectedIndex}function So(t){Re.lFrame.selectedIndex=t}function kt(){const t=Re.lFrame;return Tl(t.tView,t.selectedIndex)}let Af=!0;function Rl(){return Af}function Zs(t){Af=t}function Pl(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),null!=f&&(t.destroyHooks??=[]).push(n,f)}}function xl(t,e,n){l_(t,e,3,n)}function Ea(t,e,n,r){(3&t[Ue])===n&&l_(t,e,n,r)}function Hu(t,e){let n=t[Ue];(3&n)===e&&(n&=8191,n+=1,t[Ue]=n)}function l_(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[js]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[js]+=65536),(a<s||-1==s)&&(cw(t,n,e,u),t[js]=(4294901760&t[js])+u+2),u++}function Ml(t,e){Wi(4,t,e);const n=ui(null);try{e.call(t)}finally{ui(n),Wi(5,t,e)}}function cw(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[Ue]>>13<t[js]>>16&&(3&t[Ue])===e&&(t[Ue]+=8192,Ml(a,s)):Ml(a,s)}const Ro=-1;class zu{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Rf(t){return t!==Ro}function Gu(t){return 32767&t}function qu(t,e){let n=function hw(t){return t>>16}(t),r=e;for(;n>0;)r=r[ha],n--;return r}let Pf=!0;function Wu(t){const e=Pf;return Pf=t,e}const fw=255,Ks=5;let pw=0;const Ki={};function Ol(t,e){const n=p_(t,e);if(-1!==n)return n;const r=e[le];r.firstCreatePass&&(t.injectorIndex=e.length,Zu(r.data,t),Zu(e,null),Zu(r.blueprint,null));const i=kl(t,e),s=t.injectorIndex;if(Rf(i)){const o=Gu(i),a=qu(i,e),u=a[le].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|u[o+d]}return e[s+8]=i,s}function Zu(t,e){t.push(0,0,0,0,0,0,0,0,e)}function p_(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function kl(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=E_(i),null===r)return Ro;if(n++,i=i[ha],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ro}function Ku(t,e,n){!function xf(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ua)&&(r=n[ua]),null==r&&(r=n[ua]=pw++);const i=r&fw;e.data[t+(i>>Ks)]|=1<<i}(t,e,n)}function g_(t,e,n){if(n&et.Optional||void 0!==t)return t;vu()}function Vl(t,e,n,r){if(n&et.Optional&&void 0===r&&(r=null),!(n&(et.Self|et.Host))){const i=t[ji],s=nr(void 0);try{return i?i.get(e,r,n&et.Optional):Em(e,r,n&et.Optional)}finally{nr(s)}}return g_(r,0,n)}function m_(t,e,n,r=et.Default,i){if(null!==t){if(2048&e[Ue]&&!(r&et.Self)){const o=function yw(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[Ue]&&!(512&o[Ue]);){const a=__(s,o,n,r|et.Self,Ki);if(a!==Ki)return a;let u=s.parent;if(!u){const d=o[Nm];if(d){const f=d.get(n,Ki,r);if(f!==Ki)return f}u=E_(o),o=o[ha]}s=u}return i}(t,e,n,r,Ki);if(o!==Ki)return o}const s=__(t,e,n,r,Ki);if(s!==Ki)return s}return Vl(e,n,r,i)}function __(t,e,n,r,i){const s=function y_(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(ua)?t[ua]:void 0;return"number"==typeof e?e>=0?e&fw:_w:e}(n);if("function"==typeof s){if(!Cf(e,t,r))return r&et.Host?g_(i,0,r):Vl(e,n,r,i);try{let o;if(o=s(r),null!=o||r&et.Optional)return o;vu()}finally{u_()}}else if("number"==typeof s){let o=null,a=p_(t,e),u=Ro,d=r&et.Host?e[Yt][On]:null;for((-1===a||r&et.SkipSelf)&&(u=-1===a?kl(t,e):e[a+8],u!==Ro&&v_(r,!1)?(o=e[le],a=Gu(u),e=qu(u,e)):a=-1);-1!==a;){const f=e[le];if(Fl(s,a,f.data)){const g=mw(a,e,n,o,r,d);if(g!==Ki)return g}u=e[a+8],u!==Ro&&v_(r,e[le].data[a+8]===d)&&Fl(s,a,e)?(o=f,a=Gu(u),e=qu(u,e)):a=-1}}return i}function mw(t,e,n,r,i,s){const o=e[le],a=o.data[t+8],f=function Ll(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,f=s>>20,_=i?a+f:t.directiveEnd;for(let y=r?a:a+f;y<_;y++){const E=o[y];if(y<u&&n===E||y>=u&&E.type===n)return y}if(i){const y=o[u];if(y&&Gi(y)&&y.type===n)return u}return null}(a,o,n,null==r?To(a)&&Pf:r!=o&&0!=(3&a.type),i&et.Host&&s===a);return null!==f?Po(e,o,f,a):Ki}function Po(t,e,n,r){let i=t[n];const s=e.data;if(function Sf(t){return t instanceof zu}(i)){const o=i;o.resolving&&function aa(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new $(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Xe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ee(t)}(s[n]));const a=Wu(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?nr(o.injectImpl):null;Cf(t,r,et.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function uw(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Km(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==d&&nr(d),Wu(a),o.resolving=!1,u_()}}return i}function Fl(t,e,n){return!!(n[e+(t>>Ks)]&1<<t)}function v_(t,e){return!(t&et.Self||t&et.Host&&e)}class Zn{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return m_(this._tNode,this._lView,e,il(r),n)}}function _w(){return new Zn(bn(),X())}function Kn(t){return Ar(()=>{const e=t.prototype.constructor,n=e[Ui]||Ia(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[Ui]||Ia(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ia(t){return ne(t)?()=>{const e=Ia(S(t));return e&&e()}:qi(t)}function E_(t){const e=t[le],n=e.type;return 2===n?e.declTNode:1===n?t[On]:null}const wa="__parameters__";function Qi(t,e,n){return Ar(()=>{const r=function Nf(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,f){const g=u.hasOwnProperty(wa)?u[wa]:Object.defineProperty(u,wa,{value:[]})[wa];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Ca(t,e){t.forEach(n=>Array.isArray(n)?Ca(n,e):e(n))}function Bl(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ba(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Zr(t,e,n){let r=Da(t,e);return r>=0?t[1|r]=n:(r=~r,function Ys(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Of(t,e){const n=Da(t,e);if(n>=0)return t[1|n]}function Da(t,e){return function fr(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const ec=ds(Qi("Optional"),8),Hl=ds(Qi("SkipSelf"),4);function N_(t){return 128==(128&t.flags)}var Sa=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Sa||{});const Qj=/^>|^->|<!--|-->|--!>|<!-$/g,Yj=/(<|>)/g,Jj="\u200b$1\u200b";const Pw=new Map;let Xj=0;const Mw="__ngContext__";function xr(t,e){zr(e)?(t[Mw]=e[wo],function t$(t){Pw.set(t[wo],t)}(e)):t[Mw]=e}let Nw;function Ow(t,e){return Nw(t,e)}function jf(t){const e=t[Mt];return Pr(e)?e[Mt]:e}function SR(t){return PR(t[xu])}function RR(t){return PR(t[Ii])}function PR(t){for(;null!==t&&!Pr(t);)t=t[Ii];return t}function Wl(t,e,n,r,i){if(null!=r){let s,o=!1;Pr(r)?s=r:zr(r)&&(o=!0,r=r[rn]);const a=Tt(r);0===t&&null!==n?null==i?OR(e,n,a):nc(e,n,a,i||null,!0):1===t&&null!==n?nc(e,n,a,i||null,!0):2===t?function B_(t,e,n){const r=F_(t,e);r&&function E$(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function T$(t,e,n,r,i){const s=n[zi];s!==Tt(n)&&Wl(e,t,r,s,i);for(let a=Gn;a<n.length;a++){const u=n[a];Hf(u[le],u,t,e,r,s)}}(e,t,s,n,i)}}function kw(t,e){return t.createComment(function ER(t){return t.replace(Qj,e=>e.replace(Yj,Jj))}(e))}function V_(t,e,n){return t.createElement(e,n)}function MR(t,e){const n=t[pa],r=n.indexOf(e);Xm(e),n.splice(r,1)}function L_(t,e){if(t.length<=Gn)return;const n=Gn+e,r=t[n];if(r){const i=r[Mu];null!==i&&i!==t&&MR(i,r),e>0&&(t[n-1][Ii]=r[Ii]);const s=ba(t,Gn+e);!function h$(t,e){Hf(t,e,e[Oe],2,null,null),e[rn]=null,e[On]=null}(r[le],r);const o=s[$i];null!==o&&o.detachView(s[le]),r[Mt]=null,r[Ii]=null,r[Ue]&=-129}return r}function Vw(t,e){if(!(256&e[Ue])){const n=e[Oe];e[Nu]&&Lu(e[Nu]),e[fa]&&Lu(e[fa]),n.destroyNode&&Hf(t,e,n,3,null,null),function g$(t){let e=t[xu];if(!e)return Lw(t[le],t);for(;e;){let n=null;if(zr(e))n=e[xu];else{const r=e[Gn];r&&(n=r)}if(!n){for(;e&&!e[Ii]&&e!==t;)zr(e)&&Lw(e[le],e),e=e[Mt];null===e&&(e=t),zr(e)&&Lw(e[le],e),n=e&&e[Ii]}e=n}}(e)}}function Lw(t,e){if(!(256&e[Ue])){e[Ue]&=-129,e[Ue]|=256,function v$(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof zu)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];Wi(4,a,u);try{u.call(a)}finally{Wi(5,a,u)}}else{Wi(4,i,s);try{s.call(i)}finally{Wi(5,i,s)}}}}}(t,e),function y$(t,e){const n=t.cleanup,r=e[la];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[la]=null);const i=e[Hi];if(null!==i){e[Hi]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[le].type&&e[Oe].destroy();const n=e[Mu];if(null!==n&&Pr(e[Mt])){n!==e[Mt]&&MR(n,e);const r=e[$i];null!==r&&r.detachView(t)}!function n$(t){Pw.delete(t[wo])}(e)}}function Fw(t,e,n){return function NR(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[rn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===ai.None||s===ai.Emulated)return null}return kn(r,n)}}(t,e.parent,n)}function nc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function OR(t,e,n){t.appendChild(e,n)}function kR(t,e,n,r,i){null!==r?nc(t,e,n,r,i):OR(t,e,n)}function F_(t,e){return t.parentNode(e)}let Uw,Hw,FR=function LR(t,e,n){return 40&t.type?kn(t,n):null};function U_(t,e,n,r){const i=Fw(t,r,e),s=e[Oe],a=function VR(t,e,n){return FR(t,e,n)}(r.parent||e[On],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)kR(s,i,n[u],a,!1);else kR(s,i,n,a,!1);void 0!==Uw&&Uw(s,r,e,n,i)}function $f(t,e){if(null!==e){const n=e.type;if(3&n)return kn(e,t);if(4&n)return Bw(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return $f(t,r);{const i=t[e.index];return Pr(i)?Bw(-1,i):Tt(i)}}if(32&n)return Ow(e,t)()||Tt(t[e.index]);{const r=BR(t,e);return null!==r?Array.isArray(r)?r[0]:$f(jf(t[Yt]),r):$f(t,e.next)}}return null}function BR(t,e){return null!==e?t[Yt][On].projection[e.projection]:null}function Bw(t,e){const n=Gn+t+1;if(n<e.length){const r=e[n],i=r[le].firstChild;if(null!==i)return $f(r,i)}return e[zi]}function jw(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&xr(Tt(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)jw(t,e,n.child,r,i,s,!1),Wl(e,t,i,a,s);else if(32&u){const d=Ow(n,r);let f;for(;f=d();)Wl(e,t,i,f,s);Wl(e,t,i,a,s)}else 16&u?$R(t,e,r,n,i,s):Wl(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Hf(t,e,n,r,i,s){jw(n,r,t.firstChild,e,i,s,!1)}function $R(t,e,n,r,i,s){const o=n[Yt],u=o[On].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)Wl(e,t,i,u[d],s);else{let d=u;const f=o[Mt];N_(r)&&(d.flags|=128),jw(t,e,d,f,i,s,!0)}}function HR(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function zR(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&al(t,e,r),null!==i&&HR(t,e,i),null!==s&&function b$(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}class ZR{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const Wf=new ce("ENVIRONMENT_INITIALIZER"),iP=new ce("INJECTOR",-1),sP=new ce("INJECTOR_DEF_TYPES");class Kw{get(e,n=jr){if(n===jr){const r=new Error(`NullInjectorError: No provider for ${Dt(e)}!`);throw r.name="NullInjectorError",r}return n}}function J$(...t){return{\u0275providers:aP(0,t),\u0275fromNgModule:!0}}function aP(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return Ca(e,o=>{const a=o;z_(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&uP(i,s),n}function uP(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];Qw(i,s=>{e(s,r)})}}function z_(t,e,n,r){if(!(t=S(t)))return!1;let i=null,s=ls(t);const o=!s&&tt(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=ls(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)z_(d,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{Ca(s.imports,f=>{z_(f,e,n,r)&&(d||=[],d.push(f))})}finally{}void 0!==d&&uP(d,e)}if(!a){const d=qi(i)||(()=>new i);e({provide:i,useFactory:d,deps:ut},i),e({provide:sP,useValue:i,multi:!0},i),e({provide:Wf,useValue:()=>se(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const d=t;Qw(u,f=>{e(f,d)})}}}return i!==t&&void 0!==t.providers}function Qw(t,e){for(let n of t)Te(n)&&(n=n.\u0275providers),Array.isArray(n)?Qw(n,e):e(n)}const X$=ye({provide:String,useValue:ye});function Yw(t){return null!==t&&"object"==typeof t&&X$ in t}function rc(t){return"function"==typeof t}const Jw=new ce("Set Injector scope."),G_={},tH={};let Xw;function q_(){return void 0===Xw&&(Xw=new Kw),Xw}class Yi{}class Yl extends Yi{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,t0(e,o=>this.processProvider(o)),this.records.set(iP,Jl(void 0,this)),i.has("environment")&&this.records.set(Yi,Jl(void 0,this));const s=this.records.get(Jw);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(sP.multi,ut,et.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Fi(this),r=nr(void 0);try{return e()}finally{Fi(n),nr(r)}}get(e,n=jr,r=et.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ol))return e[ol](this);r=il(r);const s=Fi(this),o=nr(void 0);try{if(!(r&et.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function oH(t){return"function"==typeof t||"object"==typeof t&&t instanceof ce}(e)&&Eu(e);u=d&&this.injectableDefInScope(d)?Jl(e0(e),G_):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&et.Self?q_():this.parent).get(e,n=r&et.Optional&&n===jr?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[nl]=a[nl]||[]).unshift(Dt(e)),s)throw a;return function Fh(t,e,n,r){const i=t[nl];throw e[Dm]&&i.unshift(e[Dm]),t.message=function hs(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Dt(e);if(Array.isArray(e))i=e.map(Dt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Dt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(MI,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[nl]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{nr(o),Fi(s)}}resolveInjectorInitializers(){const e=Fi(this),n=nr(void 0);try{const i=this.get(Wf.multi,ut,et.Self);for(const s of i)s()}finally{Fi(e),nr(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Dt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(e){let n=rc(e=S(e))?e:S(e&&e.provide);const r=function rH(t){return Yw(t)?Jl(void 0,t.useValue):Jl(dP(t),G_)}(e);if(rc(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Jl(void 0,G_,!0),i.factory=()=>Lh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===G_&&(n.value=tH,n.value=n.factory()),"object"==typeof n.value&&n.value&&function sH(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=S(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function e0(t){const e=Eu(t),n=null!==e?e.factory:qi(t);if(null!==n)return n;if(t instanceof ce)throw new $(204,!1);if(t instanceof Function)return function nH(t){const e=t.length;if(e>0)throw function Ju(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new $(204,!1);const n=function PI(t){return t&&(t[Iu]||t[ym])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new $(204,!1)}function dP(t,e,n){let r;if(rc(t)){const i=S(t);return qi(i)||e0(i)}if(Yw(t))r=()=>S(t.useValue);else if(function lP(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Lh(t.deps||[]));else if(function cP(t){return!(!t||!t.useExisting)}(t))r=()=>se(S(t.useExisting));else{const i=S(t&&(t.useClass||t.provide));if(!function iH(t){return!!t.deps}(t))return qi(i)||e0(i);r=()=>new i(...Lh(t.deps))}return r}function Jl(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function t0(t,e){for(const n of t)Array.isArray(n)?t0(n,e):n&&Te(n)?t0(n.\u0275providers,e):e(n)}const W_=new ce("AppId",{providedIn:"root",factory:()=>aH}),aH="ng",hP=new ce("Platform Initializer"),No=new ce("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),fP=new ce("CSP nonce",{providedIn:"root",factory:()=>function Kl(){if(void 0!==Hw)return Hw;if(typeof document<"u")return document;throw new $(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let pP=(t,e,n)=>null;function l0(t,e,n=!1){return pP(t,e,n)}class _H{}class _P{}class vH{resolveComponentFactory(e){throw function yH(t){const e=Error(`No component factory found for ${Dt(t)}.`);return e.ngComponent=t,e}(e)}}let X_=(()=>{class t{static#e=this.NULL=new vH}return t})();function EH(){return td(bn(),X())}function td(t,e){return new Ti(kn(t,e))}let Ti=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=EH}return t})();class vP{}let Oo=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function wH(){const t=X(),n=qr(bn().index,t);return(zr(n)?n:t)[Oe]}()}return t})(),TH=(()=>{class t{static#e=this.\u0275prov=Ce({token:t,providedIn:"root",factory:()=>null})}return t})();class nd{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const EP=new nd("16.2.12"),f0={};function CP(t,e=null,n=null,r){const i=bP(t,e,n,r);return i.resolveInjectorInitializers(),i}function bP(t,e=null,n=null,r,i=new Set){const s=[n||ut,J$(t)];return r=r||("object"==typeof t?void 0:Dt(t)),new Yl(s,e||q_(),r||null,i)}let Ci=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=jr;static#t=this.NULL=new Kw;static create(n,r){if(Array.isArray(n))return CP({name:""},r,n,"");{const i=n.name??"";return CP({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Ce({token:t,providedIn:"any",factory:()=>se(iP)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function g0(t){return t.ngOriginalError}class _s{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&g0(e);for(;n&&g0(n);)n=g0(n);return n||null}}function _0(t){return e=>{setTimeout(t,void 0,e)}}const _n=class PH extends H{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=_0(s),i&&(i=_0(i)),o&&(o=_0(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof dt&&e.add(a),a}};function AP(...t){}class Ct{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _n(!1),this.onMicrotaskEmpty=new _n(!1),this.onStable=new _n(!1),this.onError=new _n(!1),typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function xH(){const t="function"==typeof yt.requestAnimationFrame;let e=yt[t?"requestAnimationFrame":"setTimeout"],n=yt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function OH(t){const e=()=>{!function NH(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(yt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,v0(t),t.isCheckStableRunning=!0,y0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),v0(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function VH(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return SP(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),RP(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return SP(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),RP(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,v0(t),y0(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ct.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(Ct.isInAngularZone())throw new $(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,MH,AP,AP);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const MH={};function y0(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function v0(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function SP(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function RP(t){t._nesting--,y0(t)}class kH{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _n,this.onMicrotaskEmpty=new _n,this.onStable=new _n,this.onError=new _n}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const PP=new ce("",{providedIn:"root",factory:xP});function xP(){const t=he(Ct);let e=!0;return W(new st(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new st(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{Ct.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{Ct.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Ne()))}function ko(t){return t instanceof Function?t():t}let E0=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Ce({token:t,providedIn:"root",factory:()=>new t})}return t})();function Qf(t){for(;t;){t[Ue]|=64;const e=jf(t);if(Om(t)&&!e)return t;t=e}return null}const VP=new ce("",{providedIn:"root",factory:()=>!1});let ty=null;function BP(t,e){return t[e]??HP()}function jP(t,e){const n=HP();n.producerNode?.length&&(t[e]=ty,n.lView=t,ty=$P())}const qH={...hn,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Qf(t.lView)},lView:null};function $P(){return Object.create(qH)}function HP(){return ty??=$P(),ty}const je={};function Vt(t){zP(nt(),X(),hr()+t,!1)}function zP(t,e,n,r){if(!r)if(3==(3&e[Ue])){const s=t.preOrderCheckHooks;null!==s&&xl(e,s,n)}else{const s=t.preOrderHooks;null!==s&&Ea(e,s,0,n)}So(n)}function J(t,e=et.Default){const n=X();return null===n?se(t,e):m_(bn(),n,S(t),e)}function ny(t,e,n,r,i,s,o,a,u,d,f){const g=e.blueprint.slice();return g[rn]=i,g[Ue]=140|r,(null!==d||t&&2048&t[Ue])&&(g[Ue]|=2048),Jm(g),g[Mt]=g[ha]=t,g[dn]=n,g[da]=o||t&&t[da],g[Oe]=a||t&&t[Oe],g[ji]=u||t&&t[ji]||null,g[On]=s,g[wo]=function e$(){return Xj++}(),g[ps]=f,g[Nm]=d,g[Yt]=2==e.type?t[Yt]:g,g}function sd(t,e,n,r,i){let s=t.data[e];if(null===s)s=function I0(t,e,n,r,i){const s=i_(),o=mf(),u=t.data[e]=function e4(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Ws(){return null!==Re.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function XI(){return Re.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Bu(){const t=Re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ci(s,!0),s}function Yf(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function qP(t,e,n,r,i){const s=BP(e,Nu),o=hr(),a=2&r;try{So(-1),a&&e.length>Ke&&zP(t,e,Ke,!1),Wi(a?2:0,i);const d=a?s:null,f=tf(d);try{null!==d&&(d.dirty=!1),n(r,i)}finally{yl(d,f)}}finally{a&&null===e[Nu]&&jP(e,Nu),So(o),Wi(a?3:1,i)}}function w0(t,e,n){if(ku(e)){const r=ui(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{ui(r)}}}function T0(t,e,n){Dl()&&(function a4(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;To(n)&&function p4(t,e,n){const r=kn(e,t),i=WP(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=ry(t,ny(t,i,null,o,r,e,null,t[da].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ol(n,e),xr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],d=Po(e,t,a,n);xr(d,e),null!==o&&g4(0,a-i,d,u,0,o),Gi(u)&&(qr(n.index,e)[dn]=Po(e,t,a,n))}}(t,e,n,kn(n,e)),64==(64&n.flags)&&JP(t,e,n))}function C0(t,e,n=kn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function WP(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=b0(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function b0(t,e,n,r,i,s,o,a,u,d,f){const g=Ke+r,_=g+i,y=function ZH(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:je);return n}(g,_),E="function"==typeof d?d():d;return y[le]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:E,incompleteFirstPass:!1,ssrId:f}}let ZP=t=>null;function KP(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?QP(n,e,i,s):r.hasOwnProperty(i)&&QP(n,e,r[i],s)}return n}function QP(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function D0(t,e,n,r){if(Dl()){const i=null===r?null:{"":-1},s=function c4(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(Gh(e,o.selectors,!1))if(r||(r=[]),Gi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),A0(t,e,a.length)}else r.unshift(o),A0(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&YP(t,e,n,o,i,a),i&&function l4(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new $(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Us(n.mergedAttrs,n.attrs)}function YP(t,e,n,r,i,s){for(let d=0;d<r.length;d++)Ku(Ol(n,e),t,r[d].type);!function h4(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let d=0;d<r.length;d++){const f=r[d];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,u=Yf(t,e,r.length,null);for(let d=0;d<r.length;d++){const f=r[d];n.mergedAttrs=Us(n.mergedAttrs,f.hostAttrs),f4(t,n,e,u,f),d4(u,f,i),null!==f.contentQueries&&(n.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(n.flags|=64);const g=f.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function t4(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,d=null;for(let f=e.directiveStart;f<i;f++){const g=s[f],_=n?n.get(g):null,E=_?_.outputs:null;u=KP(g.inputs,f,u,_?_.inputs:null),d=KP(g.outputs,f,d,E);const w=null===u||null===o||cl(e)?null:m4(u,f,o);a.push(w)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(t,n,s)}function JP(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function ew(){return Re.lFrame.currentDirectiveIndex}();try{So(s);for(let a=r;a<i;a++){const u=t.data[a],d=e[a];If(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&u4(u,d)}}finally{So(-1),If(o)}}function u4(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function A0(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function d4(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Gi(e)&&(n[""]=t)}}function f4(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=qi(i.type)),o=new zu(s,Gi(i),J);t.blueprint[r]=o,n[r]=o,function s4(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function o4(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,Yf(t,n,i.hostVars,je),i)}function Js(t,e,n,r,i,s){const o=kn(t,e);!function S0(t,e,n,r,i,s,o){if(null==s)t.removeAttribute(e,i,n);else{const a=null==o?Ee(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}(e[Oe],o,s,t.value,n,r,i)}function g4(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)XP(r,n,o[a++],o[a++],o[a++])}function XP(t,e,n,r,i){const s=ui(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{ui(s)}}function m4(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function ex(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function tx(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];Tf(n[r]),o.contentQueries(2,e[s],s)}}}function ry(t,e){return t[xu]?t[pl][Ii]=e:t[xu]=e,t[pl]=e,e}function R0(t,e,n){Tf(0);const r=ui(null);try{e(t,n)}finally{ui(r)}}function sx(t,e){const n=t[ji],r=n?n.get(_s,null):null;r&&r.handleError(e)}function P0(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];XP(t.data[o],e[o],r,a,i)}}function _4(t,e){const n=qr(e,t),r=n[le];!function y4(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[rn];null!==i&&null===n[ps]&&(n[ps]=l0(i,n[ji])),x0(r,n,n[dn])}function x0(t,e,n){bf(e);try{const r=t.viewQuery;null!==r&&R0(1,r,n);const i=t.template;null!==i&&qP(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&tx(t,e),t.staticViewQueries&&R0(2,t.viewQuery,n);const s=t.components;null!==s&&function v4(t,e){for(let n=0;n<e.length;n++)_4(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Ue]&=-5,Df()}}let ox=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function HI(t,e,n){const r=Object.create(zI);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>jm(r),run:()=>{if(r.dirty=!1,r.hasRun&&!$m(r))return;r.hasRun=!0;const o=tf(r);try{r.cleanupFn(),r.cleanupFn=Zm,r.fn(i)}finally{yl(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ce({token:t,providedIn:"root",factory:()=>new t})}return t})();function iy(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Vi(i,a):2==s&&(r=Vi(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Jf(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(Tt(s)),Pr(s)&&ax(s,r);const o=n.type;if(8&o)Jf(t,e,n.child,r);else if(32&o){const a=Ow(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=BR(e,n);if(Array.isArray(a))r.push(...a);else{const u=jf(e[Yt]);Jf(u[le],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function ax(t,e){for(let n=Gn;n<t.length;n++){const r=t[n],i=r[le].firstChild;null!==i&&Jf(r[le],r,i,e)}t[zi]!==t[rn]&&e.push(t[zi])}function sy(t,e,n,r=!0){const i=e[da],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{ux(t,e,t.template,n)}catch(u){throw r&&sx(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function ux(t,e,n,r){const i=e[Ue];if(256!=(256&i)){e[da].effectManager?.flush(),bf(e);try{Jm(e),function yf(t){return Re.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&qP(t,e,n,2,r);const o=3==(3&i);if(o){const d=t.preOrderCheckHooks;null!==d&&xl(e,d,null)}else{const d=t.preOrderHooks;null!==d&&Ea(e,d,0,null),Hu(e,0)}if(function w4(t){for(let e=SR(t);null!==e;e=RR(e)){if(!e[Yh])continue;const n=e[pa];for(let r=0;r<n.length;r++){hf(n[r])}}}(e),cx(e,2),null!==t.contentQueries&&tx(t,e),o){const d=t.contentCheckHooks;null!==d&&xl(e,d)}else{const d=t.contentHooks;null!==d&&Ea(e,d,1),Hu(e,1)}!function WH(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=BP(e,fa);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)So(~s);else{const o=s,a=n[++i],u=n[++i];Ef(a,o),r.dirty=!1;const d=tf(r);try{u(2,e[o])}finally{yl(r,d)}}}}finally{null===e[fa]&&jP(e,fa),So(-1)}}(t,e);const a=t.components;null!==a&&dx(e,a,0);const u=t.viewQuery;if(null!==u&&R0(2,u,r),o){const d=t.viewCheckHooks;null!==d&&xl(e,d)}else{const d=t.viewHooks;null!==d&&Ea(e,d,2),Hu(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Ue]&=-73,Xm(e)}finally{Df()}}}function cx(t,e){for(let n=SR(t);null!==n;n=RR(n))for(let r=Gn;r<n.length;r++)lx(n[r],e)}function T4(t,e,n){lx(qr(e,t),n)}function lx(t,e){if(!function df(t){return 128==(128&t[Ue])}(t))return;const n=t[le],r=t[Ue];if(80&r&&0===e||1024&r||2===e)ux(n,t,n.template,t[dn]);else if(t[Pu]>0){cx(t,1);const i=n.components;null!==i&&dx(t,i,1)}}function dx(t,e,n){for(let r=0;r<e.length;r++)T4(t,e[r],n)}class Xf{get rootNodes(){const e=this._lView,n=e[le];return Jf(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[dn]}set context(e){this._lView[dn]=e}get destroyed(){return 256==(256&this._lView[Ue])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Mt];if(Pr(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(L_(e,r),ba(n,r))}this._attachedToViewContainer=!1}Vw(this._lView[le],this._lView)}onDestroy(e){!function e_(t,e){if(256==(256&t[Ue]))throw new $(911,!1);null===t[Hi]&&(t[Hi]=[]),t[Hi].push(e)}(this._lView,e)}markForCheck(){Qf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ue]&=-129}reattach(){this._lView[Ue]|=128}detectChanges(){sy(this._lView[le],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function p$(t,e){Hf(t,e,e[Oe],2,null,null)}(this._lView[le],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e}}class C4 extends Xf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;sy(e[le],e,e[dn],!1)}checkNoChanges(){}get context(){return null}}class hx extends X_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=tt(e);return new ep(n,this.ngModule)}}function fx(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class D4{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=il(r);const i=this.injector.get(e,f0,r);return i!==f0||n===f0?i:this.parentInjector.get(e,n,r)}}class ep extends _P{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=fx(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return fx(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function Zh(t){return t.map(Rm).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Yi?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new D4(e,s):e,a=o.get(vP,null);if(null===a)throw new $(407,!1);const g={rendererFactory:a,sanitizer:o.get(TH,null),effectManager:o.get(ox,null),afterRenderEventManager:o.get(E0,null)},_=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",E=r?function KH(t,e,n,r){const s=r.get(VP,!1)||n===ai.ShadowDom,o=t.selectRootElement(e,s);return function QH(t){ZP(t)}(o),o}(_,r,this.componentDef.encapsulation,o):V_(_,y,function b4(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),M=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let R=null;null!==E&&(R=l0(E,o,!0));const k=b0(0,null,null,1,0,null,null,null,null,null,null),U=ny(null,k,null,M,null,null,g,_,o,null,R);let te,de;bf(U);try{const Se=this.componentDef;let lt,cn=null;Se.findHostDirectiveDefs?(lt=[],cn=new Map,Se.findHostDirectiveDefs(Se,lt,cn),lt.push(Se)):lt=[Se];const ln=function S4(t,e){const n=t[le],r=Ke;return t[r]=e,sd(n,r,2,"#host",null)}(U,E),ur=function R4(t,e,n,r,i,s,o){const a=i[le];!function P4(t,e,n,r){for(const i of t)e.mergedAttrs=Us(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(iy(e,e.mergedAttrs,!0),null!==n&&zR(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=l0(e,i[ji]));const d=s.rendererFactory.createRenderer(e,n);let f=16;n.signals?f=4096:n.onPush&&(f=64);const g=ny(i,WP(n),null,f,i[t.index],t,s,d,null,null,u);return a.firstCreatePass&&A0(a,t,r.length-1),ry(i,g),i[t.index]=g}(ln,E,Se,lt,U,g,_);de=Tl(k,Ke),E&&function M4(t,e,n,r){if(r)al(t,n,["ng-version",EP.full]);else{const{attrs:i,classes:s}=function Pm(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Sr(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&al(t,n,i),s&&s.length>0&&HR(t,n,s.join(" "))}}(_,Se,E,r),void 0!==n&&function N4(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(de,this.ngContentSelectors,n),te=function x4(t,e,n,r,i,s){const o=bn(),a=i[le],u=kn(o,i);YP(a,i,o,n,null,r);for(let f=0;f<n.length;f++)xr(Po(i,a,o.directiveStart+f,o),i);JP(a,i,o),u&&xr(u,i);const d=Po(i,a,o.directiveStart+o.componentOffset,o);if(t[dn]=i[dn]=d,null!==s)for(const f of s)f(d,e);return w0(a,o,t),d}(ur,Se,lt,cn,U,[O4]),x0(k,U,null)}finally{Df()}return new A4(this.componentType,te,td(de,U),U,de)}}class A4 extends _H{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new C4(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;P0(s[le],s,i,e,n),this.previousInputValues.set(e,n),Qf(qr(this._tNode.index,s))}}get injector(){return new Zn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function O4(){const t=bn();Pl(X()[le],t)}function At(t){let e=function px(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Gi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=oy(t.inputs),o.inputTransforms=oy(t.inputTransforms),o.declaredInputs=oy(t.declaredInputs),o.outputs=oy(t.outputs);const a=i.hostBindings;a&&F4(t,a);const u=i.viewQuery,d=i.contentQueries;if(u&&V4(t,u),d&&L4(t,d),Hn(t.inputs,i.inputs),Hn(t.declaredInputs,i.declaredInputs),Hn(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Hn(o.inputTransforms,i.inputTransforms)),Gi(i)&&i.data.animation){const f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===At&&(n=!1)}}e=Object.getPrototypeOf(e)}!function k4(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Us(i.hostAttrs,n=Us(n,i.hostAttrs))}}(r)}function oy(t){return t===Ei?{}:t===ut?[]:t}function V4(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function L4(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function F4(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function ay(t){return!!function M0(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Mr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function eo(t,e,n,r){const i=X();return Mr(i,Ao(),e)&&(nt(),Js(kt(),i,t,e,n,r)),eo}function Kr(t,e,n,r,i,s,o,a){const u=X(),d=nt(),f=t+Ke,g=d.firstCreatePass?function cz(t,e,n,r,i,s,o,a,u){const d=e.consts,f=sd(e,t,4,o||null,qs(d,a));D0(e,n,f,qs(d,u)),Pl(e,f);const g=f.tView=b0(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}(f,d,u,e,n,r,i,s,o):d.data[f];ci(g,!1);const _=xx(d,u,g,t);Rl()&&U_(d,u,_,g),xr(_,u),ry(u,u[f]=ex(_,u,_,g)),ml(g)&&T0(d,u,g),null!=o&&C0(u,g,a)}let xx=function Mx(t,e,n,r){return Zs(!0),e[Oe].createComment("")};function Dn(t,e,n){const r=X();return Mr(r,Ao(),e)&&function bi(t,e,n,r,i,s,o,a){const u=kn(e,n);let f,d=e.inputs;!a&&null!=d&&(f=d[r])?(P0(t,n,f,r,i),To(e)&&function r4(t,e){const n=qr(e,t);16&n[Ue]||(n[Ue]|=64)}(n,e.index)):3&e.type&&(r=function n4(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(nt(),kt(),r,t,e,r[Oe],n,!1),Dn}function F0(t,e,n,r,i){const o=i?"class":"style";P0(t,n,e.inputs[o],o,r)}function $e(t,e,n,r){const i=X(),s=nt(),o=Ke+t,a=i[Oe],u=s.firstCreatePass?function pz(t,e,n,r,i,s){const o=e.consts,u=sd(e,t,2,r,qs(o,i));return D0(e,n,u,qs(o,s)),null!==u.attrs&&iy(u,u.attrs,!1),null!==u.mergedAttrs&&iy(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],d=Nx(s,i,u,a,e,t);i[o]=d;const f=ml(u);return ci(u,!0),zR(a,d,u),32!=(32&u.flags)&&Rl()&&U_(s,i,d,u),0===function KI(){return Re.lFrame.elementDepthCount}()&&xr(d,i),function QI(){Re.lFrame.elementDepthCount++}(),f&&(T0(s,i,u),w0(s,u,i)),null!==r&&C0(i,u),$e}function Qe(){let t=bn();mf()?ju():(t=t.parent,ci(t,!1));const e=t;(function YI(t){return Re.skipHydrationRootTNode===t})(e)&&function JI(){Re.skipHydrationRootTNode=null}(),function pf(){Re.lFrame.elementDepthCount--}();const n=nt();return n.firstCreatePass&&(Pl(n,t),ku(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function f_(t){return 0!=(8&t.flags)}(e)&&F0(n,e,X(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Nl(t){return 0!=(16&t.flags)}(e)&&F0(n,e,X(),e.stylesWithoutHost,!1),Qe}function gd(t,e,n,r){return $e(t,e,n,r),Qe(),gd}let Nx=(t,e,n,r,i,s)=>(Zs(!0),V_(r,i,function c_(){return Re.lFrame.currentNamespace}()));function hy(t,e,n){const r=X(),i=nt(),s=t+Ke,o=i.firstCreatePass?function _z(t,e,n,r,i){const s=e.consts,o=qs(s,r),a=sd(e,t,8,"ng-container",o);return null!==o&&iy(a,o,!0),D0(e,n,a,qs(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,n):i.data[s];ci(o,!0);const a=kx(i,r,o,t);return r[s]=a,Rl()&&U_(i,r,a,o),xr(a,r),ml(o)&&(T0(i,r,o),w0(i,o,r)),null!=n&&C0(r,o),hy}function fy(){let t=bn();const e=nt();return mf()?ju():(t=t.parent,ci(t,!1)),e.firstCreatePass&&(Pl(e,t),ku(t)&&e.queries.elementEnd(t)),fy}let kx=(t,e,n,r)=>(Zs(!0),kw(e[Oe],""));function ys(){return X()}function sp(t){return!!t&&"function"==typeof t.then}function Vx(t){return!!t&&"function"==typeof t.subscribe}function ct(t,e,n,r){const i=X(),s=nt(),o=bn();return function Fx(t,e,n,r,i,s,o){const a=ml(r),d=t.firstCreatePass&&function rx(t){return t.cleanup||(t.cleanup=[])}(t),f=e[dn],g=function nx(t){return t[la]||(t[la]=[])}(e);let _=!0;if(3&r.type||o){const w=kn(r,e),b=o?o(w):w,M=g.length,R=o?U=>o(Tt(U[r.index])):r.index;let k=null;if(!o&&a&&(k=function Ez(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[la],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==k)(k.__ngLastListenerFn__||k).__ngNextListenerFn__=s,k.__ngLastListenerFn__=s,_=!1;else{s=Bx(r,e,f,s,!1);const U=n.listen(b,i,s);g.push(s,U),d&&d.push(i,R,M,M+1)}}else s=Bx(r,e,f,s,!1);const y=r.outputs;let E;if(_&&null!==y&&(E=y[i])){const w=E.length;if(w)for(let b=0;b<w;b+=2){const te=e[E[b]][E[b+1]].subscribe(s),de=g.length;g.push(s,te),d&&d.push(i,r.index,de,-(de+1))}}}(s,i,i[Oe],o,t,e,r),ct}function Ux(t,e,n,r){try{return Wi(6,e,n),!1!==n(r)}catch(i){return sx(t,i),!1}finally{Wi(7,e,n)}}function Bx(t,e,n,r,i){return function s(o){if(o===Function)return r;Qf(t.componentOffset>-1?qr(t.index,e):e);let u=Ux(e,n,r,o),d=s.__ngNextListenerFn__;for(;d;)u=Ux(e,n,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function vt(t=1){return function nw(t){return(Re.lFrame.contextLView=function rw(t,e){for(;t>0;)e=e[ha],t--;return e}(t,Re.lFrame.contextLView))[dn]}(t)}function py(t,e){return t<<17|e<<2}function Pa(t){return t>>17&32767}function B0(t){return 2|t}function sc(t){return(131068&t)>>2}function j0(t,e){return-131069&t|e<<2}function $0(t){return 1|t}function Qx(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?Pa(s):sc(s),u=!1;for(;0!==a&&(!1===u||o);){const f=t[a+1];Rz(t[a],e)&&(u=!0,t[a+1]=r?$0(f):B0(f)),a=r?Pa(f):sc(f)}u&&(t[n+1]=r?B0(s):$0(s))}function Rz(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Da(t,e)>=0}function op(t,e){return function vs(t,e,n,r){const i=X(),s=nt(),o=function Zi(t){const e=Re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function sM(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[hr()],o=function iM(t,e){return e>=t.expandoStartIndex}(t,n);(function cM(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function Fz(t,e,n,r){const i=function wf(t){const e=Re.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=ap(n=H0(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=H0(i,t,e,n,r),null===s){let u=function Uz(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==sc(r))return t[Pa(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=H0(null,t,e,u[1],r),u=ap(u,e.attrs,r),function Bz(t,e,n,r){t[Pa(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function jz(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=ap(r,t[s].hostAttrs,n);return ap(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function Az(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Pa(o),u=sc(o);t[r]=n;let f,d=!1;if(Array.isArray(n)?(f=n[1],(null===f||Da(n,f)>0)&&(d=!0)):f=n,i)if(0!==u){const _=Pa(t[a+1]);t[r+1]=py(_,a),0!==_&&(t[_+1]=j0(t[_+1],r)),t[a+1]=function bz(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=py(a,0),0!==a&&(t[a+1]=j0(t[a+1],r)),a=r;else t[r+1]=py(u,0),0===a?a=r:t[u+1]=j0(t[u+1],r),u=r;d&&(t[r+1]=B0(t[r+1])),Qx(t,f,r,!0),Qx(t,f,r,!1),function Sz(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Da(s,e)>=0&&(n[r+1]=$0(n[r+1]))}(e,f,t,r,s),o=py(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==je&&Mr(i,o,e)&&function aM(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,d=u[a+1],f=function Dz(t){return 1==(1&t)}(d)?uM(u,e,n,i,sc(d),o):void 0;gy(f)||(gy(s)||function Cz(t){return 2==(2&t)}(d)&&(s=uM(u,null,n,i,a,o)),function C$(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Sa.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Sa.Important),t.setStyle(n,r,i,s))}}(r,o,ya(hr(),n),i,s))}(s,s.data[hr()],i,i[Oe],t,i[o+1]=function Gz(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Dt(function Ra(t){return t instanceof ZR?t.changingThisBreaksApplicationSecurity:t}(t)))),t}(e,n),r,o)}(t,e,null,!0),op}function H0(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=ap(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ap(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Zr(t,o,!!n||e[++s]))}return void 0===t?null:t}function uM(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],d=Array.isArray(u),f=d?u[1]:u,g=null===f;let _=n[i+1];_===je&&(_=g?ut:void 0);let y=g?Of(_,r):f===r?_:void 0;if(d&&!gy(y)&&(y=Of(u,r)),gy(y)&&(a=y,o))return a;const E=t[i+1];i=o?Pa(E):sc(E)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=Of(u,r))}return a}function gy(t){return void 0!==t}function bt(t,e=""){const n=X(),r=nt(),i=t+Ke,s=r.firstCreatePass?sd(r,i,1,e,null):r.data[i],o=lM(r,n,s,e,t);n[i]=o,Rl()&&U_(r,n,o,s),ci(s,!1)}let lM=(t,e,n,r,i)=>(Zs(!0),function k_(t,e){return t.createText(e)}(e[Oe],r));function z0(t){return Is("",t,""),z0}function Is(t,e,n){const r=X(),i=function ad(t,e,n,r){return Mr(t,Ao(),n)?e+Ee(n)+r:je}(r,t,e,n);return i!==je&&function Vo(t,e,n){const r=ya(e,t);!function xR(t,e,n){t.setValue(e,n)}(t[Oe],r,n)}(r,hr(),i),Is}const yd="en-US";let MM=yd;function W0(t,e,n,r,i){if(t=S(t),Array.isArray(t))for(let s=0;s<t.length;s++)W0(t[s],e,n,r,i);else{const s=nt(),o=X(),a=bn();let u=rc(t)?t:S(t.provide);const d=dP(t),f=1048575&a.providerIndexes,g=a.directiveStart,_=a.providerIndexes>>20;if(rc(t)||!t.multi){const y=new zu(d,i,J),E=K0(u,e,i?f:f+_,g);-1===E?(Ku(Ol(a,o),s,u),Z0(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[E]=y,o[E]=y)}else{const y=K0(u,e,f+_,g),E=K0(u,e,f,f+_),b=E>=0&&n[E];if(i&&!b||!i&&!(y>=0&&n[y])){Ku(Ol(a,o),s,u);const M=function hq(t,e,n,r,i){const s=new zu(t,n,J);return s.multi=[],s.index=e,s.componentProviders=0,rN(s,i,r&&!n),s}(i?dq:lq,n.length,i,r,d);!i&&b&&(n[E].providerFactory=M),Z0(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(M),o.push(M)}else Z0(s,t,y>-1?y:E,rN(n[i?E:y],d,!i&&r));!i&&r&&b&&n[E].componentProviders++}}}function Z0(t,e,n,r){const i=rc(e),s=function eH(t){return!!t.useClass}(e);if(i||s){const u=(s?S(e.useClass):e).prototype.ngOnDestroy;if(u){const d=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const f=d.indexOf(n);-1===f?d.push(n,[r,u]):d[f+1].push(r,u)}else d.push(n,u)}}}function rN(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function K0(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function lq(t,e,n,r){return Q0(this.multi,[])}function dq(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Po(n,n[le],this.providerFactory.index,r);s=a.slice(0,o),Q0(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Q0(i,s);return s}function Q0(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function on(t,e=[]){return n=>{n.providersResolver=(r,i)=>function cq(t,e,n){const r=nt();if(r.firstCreatePass){const i=Gi(t);W0(n,r.data,r.blueprint,i,!0),W0(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class ac{}class iN{}class Y0 extends ac{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hx(this);const i=Hr(e);this._bootstrapComponents=ko(i.bootstrap),this._r3Injector=bP(e,n,[{provide:ac,useValue:this},{provide:X_,useValue:this.componentFactoryResolver},...r],Dt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class J0 extends iN{constructor(e){super(),this.moduleType=e}create(e){return new Y0(this.moduleType,e,[])}}class sN extends ac{constructor(e){super(),this.componentFactoryResolver=new hx(this),this.instance=null;const n=new Yl([...e.providers,{provide:ac,useValue:this},{provide:X_,useValue:this.componentFactoryResolver}],e.parent||q_(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function X0(t,e,n=null){return new sN({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let gq=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=aP(0,n.type),i=r.length>0?X0([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ce({token:t,providedIn:"environment",factory:()=>new t(se(Yi))})}return t})();function oN(t){t.getStandaloneInjector=e=>e.get(gq).getOrCreateStandaloneInjector(t)}function fN(t,e,n,r,i,s){const o=e+n;return Mr(t,o,i)?function Xs(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function fp(t,e){const n=t[e];return n===je?void 0:n}(t,o+1)}function uc(t,e){const n=nt();let r;const i=t+Ke;n.firstCreatePass?(r=function Oq(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=qi(r.type)),a=nr(J);try{const u=Wu(!1),d=s();return Wu(u),function hz(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,X(),i,d),d}finally{nr(a)}}function cc(t,e,n){const r=t+Ke,i=X(),s=function va(t,e){return t[e]}(i,r);return function pp(t,e){return t[le].data[e].pure}(i,r)?fN(i,function Wn(){const t=Re.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,s.transform,n,s):s.transform(n)}function jq(t,e,n,r=!0){const i=e[le];if(function m$(t,e,n,r){const i=Gn+r,s=n.length;r>0&&(n[i-1][Ii]=e),r<s-Gn?(e[Ii]=n[i],Bl(n,Gn+r,e)):(n.push(e),e[Ii]=null),e[Mt]=n;const o=e[Mu];null!==o&&n!==o&&function _$(t,e){const n=t[pa];e[Yt]!==e[Mt][Mt][Yt]&&(t[Yh]=!0),null===n?t[pa]=[e]:n.push(e)}(o,e);const a=e[$i];null!==a&&a.insertView(t),e[Ue]|=128}(i,e,t,n),r){const s=Bw(n,t),o=e[Oe],a=F_(o,t[zi]);null!==a&&function f$(t,e,n,r,i,s){r[rn]=i,r[On]=e,Hf(t,r,n,1,i,s)}(i,t[On],o,e,a,s)}}Symbol;let Lo=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=zq}return t})();const $q=Lo,Hq=class extends $q{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function Bq(t,e,n,r){const i=e.tView,a=ny(t,i,n,4096&t[Ue]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Mu]=t[e.index];const d=t[$i];return null!==d&&(a[$i]=d.createEmbeddedView(i)),x0(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new Xf(i)}};function zq(){return function Ey(t,e){return 4&t.type?new Hq(e,t,td(t,e)):null}(bn(),X())}let ws=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Qq}return t})();function Qq(){return function CN(t,e){let n;const r=e[t.index];return Pr(r)?n=r:(n=ex(r,e,null,t),e[t.index]=n,ry(e,n)),bN(n,e,t,r),new wN(n,t,e)}(bn(),X())}const Yq=ws,wN=class extends Yq{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return td(this._hostTNode,this._hostLView)}get injector(){return new Zn(this._hostTNode,this._hostLView)}get parentInjector(){const e=kl(this._hostTNode,this._hostLView);if(Rf(e)){const n=qu(e,this._hostLView),r=Gu(e);return new Zn(n[le].data[r+8],n)}return new Zn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=TN(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Gn}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function Qn(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const w=n||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}const u=o?e:new ep(tt(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const b=(o?d:this.parentInjector).get(Yi,null);b&&(s=b)}tt(u.componentType??{});const y=u.create(d,i,null,s);return this.insertImpl(y.hostView,a,false),y}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function Ym(t){return Pr(t[Mt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[Mt],f=new wN(d,d[On],d[Mt]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return jq(a,i,o,!r),e.attachToViewContainerRef(),Bl(nT(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=TN(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=L_(this._lContainer,n);r&&(ba(nT(this._lContainer),n),Vw(r[le],r))}detach(e){const n=this._adjustIndex(e,-1),r=L_(this._lContainer,n);return r&&null!=ba(nT(this._lContainer),n)?new Xf(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function TN(t){return t[8]}function nT(t){return t[8]||(t[8]=[])}let bN=function DN(t,e,n,r){if(t[zi])return;let i;i=8&n.type?Tt(r):function Jq(t,e){const n=t[Oe],r=n.createComment(""),i=kn(e,t);return nc(n,F_(n,i),r,function I$(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[zi]=i};const fT=new ce("Application Initializer");let pT=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=he(fT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(sp(s))n.push(s);else if(Vx(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),YN=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Fo=new ce("LocaleId",{providedIn:"root",factory:()=>he(Fo,et.Optional|et.SkipSelf)||function R3(){return typeof $localize<"u"&&$localize.locale||yd}()});let JN=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new P(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class M3{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let XN=(()=>{class t{compileModuleSync(n){return new J0(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=ko(Hr(n).declarations).reduce((o,a)=>{const u=tt(a);return u&&o.push(new ep(u)),o},[]);return new M3(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const rO=new ce(""),Cy=new ce("");let vT,_T=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,vT||(function e9(t){vT=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ct.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(se(Ct),se(yT),se(Cy))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})(),yT=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return vT?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),xa=null;const iO=new ce("AllowMultipleToken"),ET=new ce("PlatformDestroyListeners"),IT=new ce("appBootstrapListener");class oO{constructor(e,n){this.name=e,this.token=n}}function uO(t,e,n=[]){const r=`Platform: ${e}`,i=new ce(r);return(s=[])=>{let o=wT();if(!o||o.injector.get(iO,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function r9(t){if(xa&&!xa.get(iO,!1))throw new $(400,!1);(function sO(){!function _a(t){Gm=t}(()=>{throw new $(600,!1)})})(),xa=t;const e=t.get(lO);(function aO(t){t.get(hP,null)?.forEach(n=>n())})(t)}(function cO(t=[],e){return Ci.create({name:e,providers:[{provide:Jw,useValue:"platform"},{provide:ET,useValue:new Set([()=>xa=null])},...t]})}(a,r))}return function s9(t){const e=wT();if(!e)throw new $(401,!1);return e}()}}function wT(){return xa?.get(lO)??null}let lO=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function o9(t="zone.js",e){return"noop"===t?new kH:"zone.js"===t?new Ct(e):t}(r?.ngZone,function dO(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function pq(t,e,n){return new Y0(t,e,n)}(n.moduleType,this.injector,function mO(t){return[{provide:Ct,useFactory:t},{provide:Wf,multi:!0,useFactory:()=>{const e=he(u9,{optional:!0});return()=>e.initialize()}},{provide:gO,useFactory:a9},{provide:PP,useFactory:xP}]}(()=>i)),o=s.injector.get(_s,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{by(this._modules,s),a.unsubscribe()})}),function hO(t,e,n){try{const r=n();return sp(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(pT);return a.runInitializers(),a.donePromise.then(()=>(function NM(t){br(t,"Expected localeId to be defined"),"string"==typeof t&&(MM=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Fo,yd)||yd),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=fO({},r);return function t9(t,e,n){const r=new J0(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(Id);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new $(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(ET,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(se(Ci))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function fO(t,e){return Array.isArray(e)?e.reduce(fO,t):{...t,...e}}let Id=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=he(gO),this.zoneIsStable=he(PP),this.componentTypes=[],this.components=[],this.isStable=he(JN).hasPendingTasks.pipe(ft(n=>n?G(!1):this.zoneIsStable),Qt(),Ne()),this._injector=he(Yi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof _P;if(!this._injector.get(pT).done)throw!i&&function Bs(t){const e=tt(t)||Cn(t)||dr(t);return null!==e&&e.standalone}(n),new $(405,!1);let o;o=i?n:this._injector.get(X_).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function n9(t){return t.isBoundToModule}(o)?void 0:this._injector.get(ac),d=o.create(Ci.NULL,[],r||o.selector,a),f=d.location.nativeElement,g=d.injector.get(rO,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),by(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new $(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;by(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(IT,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>by(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new $(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function by(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const gO=new ce("",{providedIn:"root",factory:()=>he(_s).handleError.bind(void 0)});function a9(){const t=he(Ct),e=he(_s);return n=>t.runOutsideAngular(()=>e.handleError(n))}let u9=(()=>{class t{constructor(){this.zone=he(Ct),this.applicationRef=he(Id)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let Dy=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=l9}return t})();function l9(t){return function d9(t,e,n){if(To(t)&&!n){const r=qr(t.index,e);return new Xf(r,r)}return 47&t.type?new Xf(e[Yt],e):null}(bn(),X(),16==(16&t))}class IO{constructor(){}supports(e){return ay(e)}create(e){return new _9(e)}}const m9=(t,e)=>e;class _9{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||m9}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<TO(r,i,s)?n:r,a=TO(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const d=a-i,f=u-i;if(d!=f){for(let _=0;_<d;_++){const y=_<s.length?s[_]:s[_]=0,E=y+_;f<=E&&E<d&&(s[_]=y+1)}s[o.previousIndex]=f-d}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!ay(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function G4(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new y9(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new wO),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wO),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class y9{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class v9{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class wO{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new v9,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function TO(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function bO(){return new Ry([new IO])}let Ry=(()=>{class t{static#e=this.\u0275prov=Ce({token:t,providedIn:"root",factory:bO});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||bO()),deps:[[t,new Hl,new ec]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new $(901,!1)}}return t})();const C9=uO(null,"core",[]);let b9=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(se(Id))};static#t=this.\u0275mod=Rr({type:t});static#n=this.\u0275inj=Dr({})}return t})();function wd(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let ST=null;function Ma(){return ST}class U9{}const Xi=new ce("DocumentToken");let RT=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:function(){return he(j9)},providedIn:"platform"})}return t})();const B9=new ce("Location Initialized");let j9=(()=>{class t extends RT{constructor(){super(),this._doc=he(Xi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ma().getBaseHref(this._doc)}onPopState(n){const r=Ma().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Ma().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function PT(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function kO(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Uo(t){return t&&"?"!==t[0]?"?"+t:t}let dc=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:function(){return he(LO)},providedIn:"root"})}return t})();const VO=new ce("appBaseHref");let LO=(()=>{class t extends dc{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??he(Xi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return PT(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Uo(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+Uo(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+Uo(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(se(RT),se(VO,8))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$9=(()=>{class t extends dc{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=PT(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Uo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Uo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(se(RT),se(VO,8))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})(),xT=(()=>{class t{constructor(n){this._subject=new _n,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function G9(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(kO(FO(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Uo(r))}normalize(n){return t.stripTrailingSlash(function z9(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,FO(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Uo(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Uo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=Uo;static#t=this.joinWithSlash=PT;static#n=this.stripTrailingSlash=kO;static#r=this.\u0275fac=function(r){return new(r||t)(se(dc))};static#i=this.\u0275prov=Ce({token:t,factory:function(){return function H9(){return new xT(se(dc))}()},providedIn:"root"})}return t})();function FO(t){return t.replace(/\/index.html$/,"")}class M6{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $T=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new M6(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),KO(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{KO(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(J(ws),J(Lo),J(Ry))};static#t=this.\u0275dir=Pe({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function KO(t,e){t.context.$implicit=e.item}let jy=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new N6,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){QO("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){QO("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(J(ws),J(Lo))};static#t=this.\u0275dir=Pe({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class N6{constructor(){this.$implicit=null,this.ngIf=null}}function QO(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Dt(e)}'.`)}class V6{createSubscription(e,n){return El(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){El(()=>e.unsubscribe())}}class L6{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const F6=new L6,U6=new V6;let $y=(()=>{class t{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(sp(n))return F6;if(Vx(n))return U6;throw function Cs(t,e){return new $(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||t)(J(Dy,16))};static#t=this.\u0275pipe=zn({name:"async",type:t,pure:!1,standalone:!0})}return t})(),r5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Rr({type:t});static#n=this.\u0275inj=Dr({})}return t})();function Hy(t){return"server"===t}let a5=(()=>{class t{static#e=this.\u0275prov=Ce({token:t,providedIn:"root",factory:()=>new u5(se(Xi),window)})}return t})();class u5{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function c5(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class N5 extends U9{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class KT extends N5{static makeCurrent(){!function F9(t){ST||(ST=t)}(new KT)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function O5(){return Ip=Ip||document.querySelector("base"),Ip?Ip.getAttribute("href"):null}();return null==n?null:function k5(t){qy=qy||document.createElement("a"),qy.setAttribute("href",t);const e=qy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Ip=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function R6(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let qy,Ip=null,L5=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();const QT=new ce("EventManagerPlugins");let ik=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(se(QT),se(Ct))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();class sk{constructor(e){this._doc=e}}const YT="ng-app-id";let ok=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Hy(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${YT}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(YT),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(YT,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(se(Xi),se(W_),se(fP,8),se(No))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();const JT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},XT=/%COMP%/g,j5=new ce("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function uk(t,e){return e.map(n=>n.replace(XT,t))}let ck=(()=>{class t{constructor(n,r,i,s,o,a,u,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Hy(a),this.defaultRenderer=new eC(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ai.ShadowDom&&(r={...r,encapsulation:ai.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof dk?i.applyToHost(n):i instanceof tC&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case ai.Emulated:s=new dk(u,d,r,this.appId,f,o,a,g);break;case ai.ShadowDom:return new G5(u,d,n,r,o,a,this.nonce,g);default:s=new tC(u,d,r,f,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(se(ik),se(ok),se(W_),se(j5),se(Xi),se(No),se(Ct),se(fP))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();class eC{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(JT[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(lk(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(lk(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=JT[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=JT[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Sa.DashCase|Sa.Important)?e.style.setProperty(n,r,i&Sa.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Sa.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=Ma().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function lk(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class G5 extends eC{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=uk(i.id,i.styles);for(const f of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class tC extends eC{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?uk(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class dk extends tC{constructor(e,n,r,i,s,o,a,u){const d=i+"-"+r.id;super(e,n,r,s,o,a,u,d),this.contentAttr=function $5(t){return"_ngcontent-%COMP%".replace(XT,t)}(d),this.hostAttr=function H5(t){return"_nghost-%COMP%".replace(XT,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let q5=(()=>{class t extends sk{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(se(Xi))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();const hk=["alt","control","meta","shift"],W5={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Z5={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let K5=(()=>{class t extends sk{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ma().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),hk.forEach(d=>{const f=r.indexOf(d);f>-1&&(r.splice(f,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=W5[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),hk.forEach(o=>{o!==i&&(0,Z5[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(se(Xi))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();const pk=[{provide:No,useValue:"browser"},{provide:hP,useValue:function Q5(){KT.makeCurrent()},multi:!0},{provide:Xi,useFactory:function J5(){return function R$(t){Hw=t}(document),document},deps:[]}],X5=uO(C9,"browser",pk),eW=new ce(""),gk=[{provide:Cy,useClass:class V5{addToWindow(e){yt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new $(5103,!1);return s},yt.getAllAngularTestabilities=()=>e.getAllTestabilities(),yt.getAllAngularRootElements=()=>e.getAllRootElements(),yt.frameworkStabilizers||(yt.frameworkStabilizers=[]),yt.frameworkStabilizers.push(r=>{const i=yt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Ma().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:rO,useClass:_T,deps:[Ct,yT,Cy]},{provide:_T,useClass:_T,deps:[Ct,yT,Cy]}],mk=[{provide:Jw,useValue:"root"},{provide:_s,useFactory:function Y5(){return new _s},deps:[]},{provide:QT,useClass:q5,multi:!0,deps:[Xi,Ct,No]},{provide:QT,useClass:K5,multi:!0,deps:[Xi]},ck,ok,ik,{provide:vP,useExisting:ck},{provide:class l5{},useClass:L5,deps:[]},[]];let tW=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:W_,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(se(eW,12))};static#t=this.\u0275mod=Rr({type:t});static#n=this.\u0275inj=Dr({providers:[...mk,...gk],imports:[r5,b9]})}return t})(),_k=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(se(Xi))};static#t=this.\u0275prov=Ce({token:t,factory:function(r){let i=null;return i=r?new r:function rW(){return new _k(se(Xi))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;const{isArray:cW}=Array,{getPrototypeOf:lW,prototype:dW,keys:hW}=Object;function Ik(t){if(1===t.length){const e=t[0];if(cW(e))return{args:e,keys:null};if(function fW(t){return t&&"object"==typeof t&&lW(t)===dW}(e)){const n=hW(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:pW}=Array;function wk(t){return _e(e=>function gW(t,e){return pW(e)?t(...e):t(e)}(t,e))}function Tk(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Wy(...t){const e=Os(t),n=ra(t),{args:r,keys:i}=Ik(t);if(0===r.length)return A([],e);const s=new st(function mW(t,e,n=wn){return r=>{Ck(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)Ck(e,()=>{const d=A(t[u],e);let f=!1;d.subscribe(pe(r,g=>{s[u]=g,f||(f=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>Tk(i,o):wn));return n?s.pipe(wk(n)):s}function Ck(t,e,n){t?tr(n,t,e):e()}const Zy=xe(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function rC(...t){return function _W(){return vi(1)}()(A(t,Os(t)))}function bk(t){return new st(e=>{Tn(t()).subscribe(e)})}function wp(t,e){const n=I(t)?t:()=>t,r=i=>i.error(n());return new st(e?i=>e.schedule(r,0,i):r)}function iC(){return B((t,e)=>{let n=null;t._refCount++;const r=pe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class Dk extends st{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Y(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dt;const n=this.getSubject();e.add(this.source.subscribe(pe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dt.EMPTY)}return e}refCount(){return iC()(this)}}function hc(t){return t<=0?()=>Mn:B((e,n)=>{let r=0;e.subscribe(pe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ky(...t){const e=Os(t);return B((n,r)=>{(e?rC(t,n,e):rC(t,n)).subscribe(r)})}function bs(t,e){return B((n,r)=>{let i=0;n.subscribe(pe(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Qy(t){return B((e,n)=>{let r=!1;e.subscribe(pe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Ak(t=yW){return B((e,n)=>{let r=!1;e.subscribe(pe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function yW(){return new Zy}function Oa(t,e){const n=arguments.length>=2;return r=>r.pipe(t?bs((i,s)=>t(i,s,r)):wn,hc(1),n?Qy(e):Ak(()=>new Zy))}function Tp(t,e){return I(e)?jt(t,e,1):jt(t,1)}function pr(t,e,n){const r=I(t)||e||n?{next:t,error:e,complete:n}:t;return r?B((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(pe(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):wn}function ka(t){return B((e,n)=>{let s,r=null,i=!1;r=e.subscribe(pe(n,void 0,void 0,o=>{s=Tn(t(o,ka(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Yy(t,e){return B(function vW(t,e,n,r,i){return(s,o)=>{let a=n,u=e,d=0;s.subscribe(pe(o,f=>{const g=d++;u=a?t(u,f,g):(a=!0,f),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}function sC(t){return t<=0?()=>Mn:B((e,n)=>{let r=[];e.subscribe(pe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function oC(t){return B((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const qe="primary",Cp=Symbol("RouteTitle");class TW{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Cd(t){return new TW(t)}function CW(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ro(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Sk(t[i],e[i]))return!1;return!0}function Sk(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function Rk(t){return t.length>0?t[t.length-1]:null}function Va(t){return function uW(t){return!!t&&(t instanceof st||I(t.lift)&&I(t.subscribe))}(t)?t:sp(t)?A(Promise.resolve(t)):G(t)}const DW={exact:function Mk(t,e,n){if(!fc(t.segments,e.segments)||!Jy(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!Mk(t.children[r],e.children[r],n))return!1;return!0},subset:Nk},Pk={exact:function AW(t,e){return ro(t,e)},subset:function SW(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Sk(t[n],e[n]))},ignored:()=>!0};function xk(t,e,n){return DW[n.paths](t.root,e.root,n.matrixParams)&&Pk[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Nk(t,e,n){return Ok(t,e,e.segments,n)}function Ok(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!fc(i,n)||e.hasChildren()||!Jy(i,n,r))}if(t.segments.length===n.length){if(!fc(t.segments,n)||!Jy(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!Nk(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(fc(t.segments,i)&&Jy(t.segments,i,r)&&t.children[qe])&&Ok(t.children[qe],e,s,r)}}function Jy(t,e,n){return e.every((r,i)=>Pk[n](t[i].parameters,r.parameters))}class bd{constructor(e=new St([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cd(this.queryParams)),this._queryParamMap}toString(){return xW.serialize(this)}}class St{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xy(this)}}class bp{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Cd(this.parameters)),this._parameterMap}toString(){return Lk(this)}}function fc(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Dp=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:function(){return new aC},providedIn:"root"})}return t})();class aC{parse(e){const n=new $W(e);return new bd(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Ap(e.root,!0)}`,r=function OW(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${ev(n)}=${ev(i)}`).join("&"):`${ev(n)}=${ev(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function MW(t){return encodeURI(t)}(e.fragment)}`:""}`}}const xW=new aC;function Xy(t){return t.segments.map(e=>Lk(e)).join("/")}function Ap(t,e){if(!t.hasChildren())return Xy(t);if(e){const n=t.children[qe]?Ap(t.children[qe],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==qe&&r.push(`${i}:${Ap(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function PW(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===qe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==qe&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===qe?[Ap(t.children[qe],!1)]:[`${i}:${Ap(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[qe]?`${Xy(t)}/${n[0]}`:`${Xy(t)}/(${n.join("//")})`}}function kk(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ev(t){return kk(t).replace(/%3B/gi,";")}function uC(t){return kk(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tv(t){return decodeURIComponent(t)}function Vk(t){return tv(t.replace(/\+/g,"%20"))}function Lk(t){return`${uC(t.path)}${function NW(t){return Object.keys(t).map(e=>`;${uC(e)}=${uC(t[e])}`).join("")}(t.parameters)}`}const kW=/^[^\/()?;#]+/;function cC(t){const e=t.match(kW);return e?e[0]:""}const VW=/^[^\/()?;=#]+/,FW=/^[^=?&#]+/,BW=/^[^&#]+/;class $W{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new St([],{}):new St([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[qe]=new St(e,n)),r}parseSegment(){const e=cC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new bp(tv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function LW(t){const e=t.match(VW);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=cC(this.remaining);i&&(r=i,this.capture(r))}e[tv(n)]=tv(r)}parseQueryParam(e){const n=function UW(t){const e=t.match(FW);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function jW(t){const e=t.match(BW);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=Vk(n),s=Vk(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=cC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new $(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=qe);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[qe]:new St([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}}function Fk(t){return t.segments.length>0?new St([],{[qe]:t}):t}function Uk(t){const e={};for(const r of Object.keys(t.children)){const s=Uk(t.children[r]);if(r===qe&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function HW(t){if(1===t.numberOfChildren&&t.children[qe]){const e=t.children[qe];return new St(t.segments.concat(e.segments),e.children)}return t}(new St(t.segments,e))}function pc(t){return t instanceof bd}function Bk(t){let e;const i=Fk(function n(s){const o={};for(const u of s.children){const d=n(u);o[u.outlet]=d}const a=new St(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function jk(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return lC(i,i,i,n,r);const s=function GW(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Hk(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new Hk(n,e,r)}(e);if(s.toRoot())return lC(i,i,new St([],{}),n,r);const o=function qW(t,e,n){if(t.isAbsolute)return new rv(e,!0,0);if(!n)return new rv(e,!1,NaN);if(null===n.parent)return new rv(n,!0,0);const r=nv(t.commands[0])?0:1;return function WW(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new rv(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?Rp(o.segmentGroup,o.index,s.commands):zk(o.segmentGroup,o.index,s.commands);return lC(i,o.segmentGroup,a,n,r)}function nv(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Sp(t){return"object"==typeof t&&null!=t&&t.outlets}function lC(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`}),o=t===e?n:$k(t,e,n);const a=Fk(Uk(o));return new bd(a,s,i)}function $k(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:$k(s,e,n)}),new St(t.segments,r)}class Hk{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&nv(r[0]))throw new $(4003,!1);const i=r.find(Sp);if(i&&i!==Rk(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rv{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function zk(t,e,n){if(t||(t=new St([],{})),0===t.segments.length&&t.hasChildren())return Rp(t,e,n);const r=function KW(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(Sp(a))break;const u=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!qk(u,d,o))return s;r+=2}else{if(!qk(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new St(t.segments.slice(0,r.pathIndex),{});return s.children[qe]=new St(t.segments.slice(r.pathIndex),t.children),Rp(s,0,i)}return r.match&&0===i.length?new St(t.segments,{}):r.match&&!t.hasChildren()?dC(t,e,n):r.match?Rp(t,0,i):dC(t,e,n)}function Rp(t,e,n){if(0===n.length)return new St(t.segments,{});{const r=function ZW(t){return Sp(t[0])?t[0].outlets:{[qe]:t}}(n),i={};if(Object.keys(r).some(s=>s!==qe)&&t.children[qe]&&1===t.numberOfChildren&&0===t.children[qe].segments.length){const s=Rp(t.children[qe],e,n);return new St(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=zk(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new St(t.segments,i)}}function dC(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Sp(s)){const u=QW(s.outlets);return new St(r,u)}if(0===i&&nv(n[0])){r.push(new bp(t.segments[e].path,Gk(n[0]))),i++;continue}const o=Sp(s)?s.outlets[qe]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&nv(a)?(r.push(new bp(o,Gk(a))),i+=2):(r.push(new bp(o,{})),i++)}return new St(r,{})}function QW(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=dC(new St([],{}),0,r))}),e}function Gk(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function qk(t,e,n){return t==n.path&&ro(e,n.parameters)}const Pp="imperative";class io{constructor(e,n){this.id=e,this.url=n}}class iv extends io{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class La extends io{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xp extends io{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dd extends io{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class sv extends io{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Wk extends io{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YW extends io{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JW extends io{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class XW extends io{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class e8 extends io{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class t8{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class n8{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class r8{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class i8{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class s8{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class o8{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zk{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class hC{}class fC{constructor(e){this.url=e}}class a8{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Mp,this.attachRef=null}}let Mp=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new a8,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Kk{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=pC(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=pC(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=gC(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return gC(e,this._root).map(n=>n.value)}}function pC(t,e){if(t===e.value)return e;for(const n of e.children){const r=pC(t,n);if(r)return r}return null}function gC(t,e){if(t===e.value)return[e];for(const n of e.children){const r=gC(t,n);if(r.length)return r.unshift(e),r}return[]}class $o{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Ad(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class Qk extends Kk{constructor(e,n){super(e),this.snapshot=n,mC(this,e)}toString(){return this.snapshot.toString()}}function Yk(t,e){const n=function u8(t,e){const o=new ov([],{},{},"",{},qe,e,null,{});return new Xk("",new $o(o,[]))}(0,e),r=new P([new bp("",{})]),i=new P({}),s=new P({}),o=new P({}),a=new P(""),u=new Sd(r,i,o,a,s,qe,e,n.root);return u.snapshot=n.root,new Qk(new $o(u,[]),n)}class Sd{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(_e(d=>d[Cp]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(_e(e=>Cd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(_e(e=>Cd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Jk(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function c8(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class ov{get title(){return this.data?.[Cp]}constructor(e,n,r,i,s,o,a,u,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Cd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Xk extends Kk{constructor(e,n){super(n),this.url=e,mC(this,n)}toString(){return e1(this._root)}}function mC(t,e){e.value._routerState=t,e.children.forEach(n=>mC(t,n))}function e1(t){const e=t.children.length>0?` { ${t.children.map(e1).join(", ")} } `:"";return`${t.value}${e}`}function _C(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ro(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ro(e.params,n.params)||t.paramsSubject.next(n.params),function bW(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ro(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),ro(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function yC(t,e){const n=ro(t.params,e.params)&&function RW(t,e){return fc(t,e)&&t.every((n,r)=>ro(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||yC(t.parent,e.parent))}let vC=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=qe,this.activateEvents=new _n,this.deactivateEvents=new _n,this.attachEvents=new _n,this.detachEvents=new _n,this.parentContexts=he(Mp),this.location=he(ws),this.changeDetector=he(Dy),this.environmentInjector=he(Yi),this.inputBinder=he(av,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new l8(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Pe({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Gr]})}return t})();class l8{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Sd?this.route:e===Mp?this.childContexts:this.parent.get(e,n)}}const av=new ce("");let t1=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=Wy([r.queryParams,r.params,r.data]).pipe(ft(([s,o,a],u)=>(a={...s,...o,...a},0===u?G(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function L9(t){const e=tt(t);if(!e)return null;const n=new ep(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();function Np(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function h8(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Np(t,r,i);return Np(t,r)})}(t,e,n);return new $o(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Np(t,a)),o}}const r=function f8(t){return new Sd(new P(t.url),new P(t.params),new P(t.queryParams),new P(t.fragment),new P(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>Np(t,s));return new $o(r,i)}}const EC="ngNavigationCancelingError";function n1(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=pc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=r1(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function r1(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[EC]=!0,r.cancellationCode=e,n&&(r.url=n),r}function i1(t){return t&&t[EC]}let s1=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Bi({type:t,selectors:[["ng-component"]],standalone:!0,features:[oN],decls:1,vars:0,template:function(r,i){1&r&&gd(0,"router-outlet")},dependencies:[vC],encapsulation:2})}return t})();function IC(t){const e=t.children&&t.children.map(IC),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==qe&&(n.component=s1),n}function Ds(t){return t.outlet||qe}function Op(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class I8{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),_C(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Ad(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ad(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ad(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Ad(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new o8(s.value.snapshot))}),e.children.length&&this.forwardEvent(new i8(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(_C(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),_C(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Op(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class o1{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class uv{constructor(e,n){this.component=e,this.route=n}}function w8(t,e,n){const r=t._root;return kp(r,e?e._root:null,n,[r.value])}function Rd(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function RI(t){return null!==Eu(t)}(t)?e.get(t):t:r}function kp(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ad(e);return t.children.forEach(o=>{(function C8(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function b8(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!fc(t.url,e.url);case"pathParamsOrQueryParamsChange":return!fc(t.url,e.url)||!ro(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yC(t,e)||!ro(t.queryParams,e.queryParams);default:return!yC(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new o1(r)):(s.data=o.data,s._resolvedData=o._resolvedData),kp(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new uv(a.outlet.component,o))}else o&&Vp(e,a,i),i.canActivateChecks.push(new o1(r)),kp(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Vp(a,n.getContext(o),i)),i}function Vp(t,e,n){const r=Ad(t),i=t.value;Object.entries(r).forEach(([s,o])=>{Vp(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new uv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Lp(t){return"function"==typeof t}function a1(t){return t instanceof Zy||"EmptyError"===t?.name}const cv=Symbol("INITIAL_VALUE");function Pd(){return ft(t=>Wy(t.map(e=>e.pipe(hc(1),Ky(cv)))).pipe(_e(e=>{for(const n of e)if(!0!==n){if(n===cv)return cv;if(!1===n||n instanceof bd)return n}return!0}),bs(e=>e!==cv),hc(1)))}function u1(t){return function Ni(...t){return Oi(t)}(pr(e=>{if(pc(e))throw n1(0,e)}),_e(e=>!0===e))}class lv{constructor(e){this.segmentGroup=e||null}}class c1{constructor(e){this.urlTree=e}}function xd(t){return wp(new lv(t))}function l1(t){return wp(new c1(t))}class G8{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new $(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return G(r);if(i.numberOfChildren>1||!i.children[qe])return wp(new $(4e3,!1));i=i.children[qe]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new bd(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new St(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const wC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function q8(t,e,n,r,i){const s=TC(t,e,n);return s.matched?(r=function g8(t,e){return t.providers&&!t._injector&&(t._injector=X0(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function $8(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?G(i.map(o=>{const a=Rd(o,t);return Va(function x8(t){return t&&Lp(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Pd(),u1()):G(!0)}(r,e,n).pipe(_e(o=>!0===o?s:{...wC}))):G(s)}function TC(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...wC}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||CW)(n,t,e);if(!i)return{...wC};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function d1(t,e,n,r){return n.length>0&&function K8(t,e,n){return n.some(r=>dv(t,e,r)&&Ds(r)!==qe)}(t,n,r)?{segmentGroup:new St(e,Z8(r,new St(n,t.children))),slicedSegments:[]}:0===n.length&&function Q8(t,e,n){return n.some(r=>dv(t,e,r))}(t,n,r)?{segmentGroup:new St(t.segments,W8(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new St(t.segments,t.children),slicedSegments:n}}function W8(t,e,n,r,i){const s={};for(const o of r)if(dv(t,n,o)&&!i[Ds(o)]){const a=new St([],{});s[Ds(o)]=a}return{...i,...s}}function Z8(t,e){const n={};n[qe]=e;for(const r of t)if(""===r.path&&Ds(r)!==qe){const i=new St([],{});n[Ds(r)]=i}return n}function dv(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class e7{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new G8(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,!1)}recognize(){const e=d1(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,qe).pipe(ka(n=>{if(n instanceof c1)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof lv?this.noMatchError(n):n}),_e(n=>{const r=new ov([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qe,this.rootComponentType,null,{}),i=new $o(r,n),s=new Xk("",i),o=function zW(t,e,n=null,r=null){return jk(Bk(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,qe).pipe(ka(r=>{throw r instanceof lv?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=Jk(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return A(i).pipe(Tp(s=>{const o=r.children[s],a=function v8(t,e){const n=t.filter(r=>Ds(r)===e);return n.push(...t.filter(r=>Ds(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),Yy((s,o)=>(s.push(...o),s)),Qy(null),function EW(t,e){const n=arguments.length>=2;return r=>r.pipe(t?bs((i,s)=>t(i,s,r)):wn,sC(1),n?Qy(e):Ak(()=>new Zy))}(),jt(s=>{if(null===s)return xd(r);const o=h1(s);return function t7(t){t.sort((e,n)=>e.value.outlet===qe?-1:n.value.outlet===qe?1:e.value.outlet.localeCompare(n.value.outlet))}(o),G(o)}))}processSegment(e,n,r,i,s,o){return A(n).pipe(Tp(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(ka(u=>{if(u instanceof lv)return G(null);throw u}))),Oa(a=>!!a),ka(a=>{if(a1(a))return function J8(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?G([]):xd(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function Y8(t,e,n,r){return!!(Ds(t)===r||r!==qe&&dv(e,n,t))&&("**"===t.path||TC(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):xd(i):xd(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?l1(s):this.applyRedirects.lineralizeSegments(r,s).pipe(jt(o=>{const a=new St(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:f}=TC(n,i,s);if(!a)return xd(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,f);return i.redirectTo.startsWith("/")?l1(g):this.applyRedirects.lineralizeSegments(i,g).pipe(jt(_=>this.processSegment(e,r,n,_.concat(d),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?Rk(i).parameters:{};a=G({snapshot:new ov(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,f1(r),Ds(r),r.component??r._loadedComponent??null,r,p1(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=q8(n,r,i,e).pipe(_e(({matched:u,consumedSegments:d,remainingSegments:f,parameters:g})=>u?{snapshot:new ov(d,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,f1(r),Ds(r),r.component??r._loadedComponent??null,r,p1(r)),consumedSegments:d,remainingSegments:f}:null));return a.pipe(ft(u=>null===u?xd(n):this.getChildConfig(e=r._injector??e,r,i).pipe(ft(({routes:d})=>{const f=r._loadedInjector??e,{snapshot:g,consumedSegments:_,remainingSegments:y}=u,{segmentGroup:E,slicedSegments:w}=d1(n,_,y,d);if(0===w.length&&E.hasChildren())return this.processChildren(f,d,E).pipe(_e(M=>null===M?null:[new $o(g,M)]));if(0===d.length&&0===w.length)return G([new $o(g,[])]);const b=Ds(r)===s;return this.processSegment(f,d,E,w,b?qe:s,!0).pipe(_e(M=>[new $o(g,M)]))}))))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?G({routes:n._loadedRoutes,injector:n._loadedInjector}):function j8(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?G(!0):G(i.map(o=>{const a=Rd(o,t);return Va(function A8(t){return t&&Lp(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Pd(),u1())}(e,n,r).pipe(jt(i=>i?this.configLoader.loadChildren(e,n).pipe(pr(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function z8(t){return wp(r1(!1,3))}())):G({routes:[],injector:e})}}function n7(t){const e=t.value.routeConfig;return e&&""===e.path}function h1(t){const e=[],n=new Set;for(const r of t){if(!n7(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=h1(r.children);e.push(new $o(r.value,i))}return e.filter(r=>!n.has(r))}function f1(t){return t.data||{}}function p1(t){return t.resolve||{}}function g1(t){return"string"==typeof t.title||null===t.title}function CC(t){return ft(e=>{const n=t(e);return n?A(n).pipe(_e(()=>e)):G(e)})}const Md=new ce("ROUTES");let bC=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=he(XN)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return G(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Va(n.loadComponent()).pipe(_e(m1),pr(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),oC(()=>{this.componentLoaders.delete(n)})),i=new Dk(r,()=>new H).pipe(iC());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function c7(t,e,n,r){return Va(t.loadChildren()).pipe(_e(m1),jt(i=>i instanceof iN||Array.isArray(i)?G(i):A(e.compileModuleAsync(i))),_e(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get(Md,[],{optional:!0,self:!0}).flat()),{routes:o.map(IC),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(oC(()=>{this.childrenLoaders.delete(r)})),o=new Dk(s,()=>new H).pipe(iC());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function m1(t){return function l7(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let hv=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new H,this.transitionAbortSubject=new H,this.configLoader=he(bC),this.environmentInjector=he(Yi),this.urlSerializer=he(Dp),this.rootContexts=he(Mp),this.inputBindingEnabled=null!==he(av,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new n8(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new t8(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new P({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Pp,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(bs(s=>0!==s.id),_e(s=>({...s,extractedUrl:n.urlHandlingStrategy.extract(s.rawUrl)})),ft(s=>{this.currentTransition=s;let o=!1,a=!1;return G(s).pipe(pr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ft(u=>{const d=u.currentBrowserUrl.toString(),f=!n.navigated||u.extractedUrl.toString()!==d||d!==u.currentUrlTree.toString();if(!f&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const _="";return this.events.next(new Dd(u.id,this.urlSerializer.serialize(u.rawUrl),_,0)),u.resolve(null),Mn}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return G(u).pipe(ft(_=>{const y=this.transitions?.getValue();return this.events.next(new iv(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),y!==this.transitions?.getValue()?Mn:Promise.resolve(_)}),function r7(t,e,n,r,i,s){return jt(o=>function X8(t,e,n,r,i,s,o="emptyOnly"){return new e7(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(_e(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),pr(_=>{s.targetSnapshot=_.targetSnapshot,s.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects};const y=new Wk(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(y)}));if(f&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:_,extractedUrl:y,source:E,restoredState:w,extras:b}=u,M=new iv(_,this.urlSerializer.serialize(y),E,w);this.events.next(M);const R=Yk(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:R,urlAfterRedirects:y,extras:{...b,skipLocationChange:!1,replaceUrl:!1}},G(s)}{const _="";return this.events.next(new Dd(u.id,this.urlSerializer.serialize(u.extractedUrl),_,1)),u.resolve(null),Mn}}),pr(u=>{const d=new YW(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),_e(u=>(this.currentTransition=s={...u,guards:w8(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function N8(t,e){return jt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?G({...n,guardsResult:!0}):function O8(t,e,n,r){return A(t).pipe(jt(i=>function B8(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?G(s.map(a=>{const u=Op(e)??i,d=Rd(a,u);return Va(function P8(t){return t&&Lp(t.canDeactivate)}(d)?d.canDeactivate(t,e,n,r):u.runInContext(()=>d(t,e,n,r))).pipe(Oa())})).pipe(Pd()):G(!0)}(i.component,i.route,n,e,r)),Oa(i=>!0!==i,!0))}(o,r,i,t).pipe(jt(a=>a&&function D8(t){return"boolean"==typeof t}(a)?function k8(t,e,n,r){return A(e).pipe(Tp(i=>rC(function L8(t,e){return null!==t&&e&&e(new r8(t)),G(!0)}(i.route.parent,r),function V8(t,e){return null!==t&&e&&e(new s8(t)),G(!0)}(i.route,r),function U8(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function T8(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>bk(()=>G(o.guards.map(u=>{const d=Op(o.node)??n,f=Rd(u,d);return Va(function R8(t){return t&&Lp(t.canActivateChild)}(f)?f.canActivateChild(r,t):d.runInContext(()=>f(r,t))).pipe(Oa())})).pipe(Pd())));return G(s).pipe(Pd())}(t,i.path,n),function F8(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return G(!0);const i=r.map(s=>bk(()=>{const o=Op(e)??n,a=Rd(s,o);return Va(function S8(t){return t&&Lp(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(Oa())}));return G(i).pipe(Pd())}(t,i.route,n))),Oa(i=>!0!==i,!0))}(r,s,t,e):G(a)),_e(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),pr(u=>{if(s.guardsResult=u.guardsResult,pc(u.guardsResult))throw n1(0,u.guardsResult);const d=new JW(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),bs(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),CC(u=>{if(u.guards.canActivateChecks.length)return G(u).pipe(pr(d=>{const f=new XW(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),ft(d=>{let f=!1;return G(d).pipe(function i7(t,e){return jt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let s=0;return A(i).pipe(Tp(o=>function s7(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!g1(i)&&(s[Cp]=i.title),function o7(t,e,n,r){const i=function a7(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return G({});const s={};return A(i).pipe(jt(o=>function u7(t,e,n,r){const i=Op(e)??r,s=Rd(t,i);return Va(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(Oa(),pr(a=>{s[o]=a}))),sC(1),function IW(t){return _e(()=>t)}(s),ka(o=>a1(o)?Mn:wp(o)))}(s,t,e,r).pipe(_e(o=>(t._resolvedData=o,t.data=Jk(t,n).resolve,i&&g1(i)&&(t.data[Cp]=i.title),null)))}(o.route,r,t,e)),pr(()=>s++),sC(1),jt(o=>s===i.length?G(n):Mn))})}(n.paramsInheritanceStrategy,this.environmentInjector),pr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",2)}}))}),pr(d=>{const f=new e8(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),CC(u=>{const d=f=>{const g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(pr(_=>{f.component=_}),_e(()=>{})));for(const _ of f.children)g.push(...d(_));return g};return Wy(d(u.targetSnapshot.root)).pipe(Qy(),hc(1))}),CC(()=>this.afterPreactivation()),_e(u=>{const d=function d8(t,e,n){const r=Np(t,e._root,n?n._root:void 0);return new Qk(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:d},s}),pr(()=>{this.events.next(new hC)}),((t,e,n,r)=>_e(i=>(new I8(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),hc(1),pr({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new La(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function wW(t){return B((e,n)=>{Tn(t).subscribe(pe(n,()=>n.complete(),Ie)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(pr(u=>{throw u}))),oC(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),ka(u=>{if(a=!0,i1(u))this.events.next(new xp(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function p8(t){return i1(t)&&pc(t.url)}(u)?this.events.next(new fC(u.url)):s.resolve(!1);else{this.events.next(new sv(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(d){s.reject(d)}}return Mn}))}))}cancelNavigationTransition(n,r,i){const s=new xp(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _1(t){return t!==Pp}let y1=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===qe);return r}getResolvedTitleForRoute(n){return n.data[Cp]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:function(){return he(d7)},providedIn:"root"})}return t})(),d7=(()=>{class t extends y1{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(se(_k))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),h7=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:function(){return he(p7)},providedIn:"root"})}return t})();class f7{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let p7=(()=>{class t extends f7{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Kn(t)))(i||t)}}();static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const fv=new ce("",{providedIn:"root",factory:()=>({})});let g7=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:function(){return he(m7)},providedIn:"root"})}return t})(),m7=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Fp=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Fp||{});function v1(t,e){t.events.pipe(bs(n=>n instanceof La||n instanceof xp||n instanceof sv||n instanceof Dd),_e(n=>n instanceof La||n instanceof Dd?Fp.COMPLETE:n instanceof xp&&(0===n.code||1===n.code)?Fp.REDIRECTING:Fp.FAILED),bs(n=>n!==Fp.REDIRECTING),hc(1)).subscribe(()=>{e()})}function _7(t){throw t}function y7(t,e,n){return e.parse("/")}const v7={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},E7={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gr=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=he(YN),this.isNgZoneEnabled=!1,this._events=new H,this.options=he(fv,{optional:!0})||{},this.pendingTasks=he(JN),this.errorHandler=this.options.errorHandler||_7,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||y7,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=he(g7),this.routeReuseStrategy=he(h7),this.titleStrategy=he(y1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=he(Md,{optional:!0})?.flat()??[],this.navigationTransitions=he(hv),this.urlSerializer=he(Dp),this.location=he(xT),this.componentInputBindingEnabled=!!he(av,{optional:!0}),this.eventsSubscription=new dt,this.isNgZoneEnabled=he(Ct)instanceof Ct&&Ct.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new bd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Yk(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(E1(r)&&this._events.next(r));if(r instanceof iv)_1(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Dd)this.rawUrlTree=i.rawUrl;else if(r instanceof Wk){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof hC)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof xp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof fC){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||_1(i.source)};this.scheduleNavigation(s,Pp,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof sv&&this.restoreHistory(i,!0),r instanceof La&&(this.navigated=!0),E1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Pp,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(IC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o;let g,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{g=Bk(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return jk(g,n,f,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=pc(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Pp,null,r)}navigate(n,r={skipLocationChange:!1}){return function I7(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new $(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...v7}:!1===r?{...E7}:r,pc(n))return xk(this.currentUrlTree,n,i);const s=this.parseUrl(n);return xk(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d;o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((g,_)=>{a=g,u=_});const f=this.pendingTasks.add();return v1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function E1(t){return!(t instanceof hC||t instanceof fC)}class I1{}let C7=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(bs(n=>n instanceof La),Tp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=X0(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return A(i).pipe(vi())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):G(null);const s=i.pipe(jt(o=>null===o?G(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?A([s,this.loader.loadComponent(r)]).pipe(vi()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(se(gr),se(XN),se(Yi),se(I1),se(bC))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const AC=new ce("");let w1=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof iv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof La?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Dd&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Zk&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Zk(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function GP(){throw new Error("invalid")}()};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();function Ho(t,e){return{\u0275kind:t,\u0275providers:e}}function C1(){const t=he(Ci);return e=>{const n=t.get(Id);if(e!==n.components[0])return;const r=t.get(gr),i=t.get(b1);1===t.get(SC)&&r.initialNavigation(),t.get(D1,null,et.Optional)?.setUpPreloading(),t.get(AC,null,et.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const b1=new ce("",{factory:()=>new H}),SC=new ce("",{providedIn:"root",factory:()=>1}),D1=new ce("");function S7(t){return Ho(0,[{provide:D1,useExisting:C7},{provide:I1,useExisting:t}])}const A1=new ce("ROUTER_FORROOT_GUARD"),P7=[xT,{provide:Dp,useClass:aC},gr,Mp,{provide:Sd,useFactory:function T1(t){return t.routerState.root},deps:[gr]},bC,[]];function x7(){return new oO("Router",gr)}let S1=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[P7,[],{provide:Md,multi:!0,useValue:n},{provide:A1,useFactory:k7,deps:[[gr,new ec,new Hl]]},{provide:fv,useValue:r||{}},r?.useHash?{provide:dc,useClass:$9}:{provide:dc,useClass:LO},{provide:AC,useFactory:()=>{const t=he(a5),e=he(Ct),n=he(fv),r=he(hv),i=he(Dp);return n.scrollOffset&&t.setOffset(n.scrollOffset),new w1(i,r,t,e,n)}},r?.preloadingStrategy?S7(r.preloadingStrategy).\u0275providers:[],{provide:oO,multi:!0,useFactory:x7},r?.initialNavigation?V7(r):[],r?.bindToComponentInputs?Ho(8,[t1,{provide:av,useExisting:t1}]).\u0275providers:[],[{provide:R1,useFactory:C1},{provide:IT,multi:!0,useExisting:R1}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Md,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(se(A1,8))};static#t=this.\u0275mod=Rr({type:t});static#n=this.\u0275inj=Dr({})}return t})();function k7(t){return"guarded"}function V7(t){return["disabled"===t.initialNavigation?Ho(3,[{provide:fT,multi:!0,useFactory:()=>{const e=he(gr);return()=>{e.setUpLocationChangeListener()}}},{provide:SC,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Ho(2,[{provide:SC,useValue:0},{provide:fT,multi:!0,deps:[Ci],useFactory:e=>{const n=e.get(B9,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(gr),s=e.get(b1);v1(i,()=>{r(!0)}),e.get(hv).afterPreactivation=()=>(r(!0),s.closed?G(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const R1=new ce("");var Z=Fe(861),Nd=(Fe(956),Fe(534));(0,Nd.registerVersion)("firebase","10.6.0","app");class B7 extends dt{constructor(e,n){super()}schedule(e,n=0){return this}}const pv={setInterval(t,e,...n){const{delegate:r}=pv;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=pv;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class P1 extends B7{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return pv.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&pv.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Me(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const RC={now:()=>(RC.delegate||Date).now(),delegate:void 0};class Up{constructor(e,n=Up.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Up.now=RC.now;class x1 extends Up{constructor(e,n=Up.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const H7=new class $7 extends x1{}(class j7 extends P1{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),M1=new x1(P1),PC=new nd("ANGULARFIRE2_VERSION");class N1{constructor(){return((t,e)=>{const n=(0,Nd.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(G7)}}const G7="app-check";function Od(){}class O1{zone;delegate;constructor(e,n=H7){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class q7{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Od,{},Od,Od)),n.pipe(pr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let k1=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new O1(Zone.current)),this.insideAngular=n.run(()=>new O1(Zone.current,M1)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(se(Ct))};static \u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ai(t){return function Z7(t){return function(n){return(n=n.lift(new q7(t.ngZone))).pipe(Cr(t.outsideAngular),lr(t.insideAngular))}}(function kd(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}())(t)}var so=Fe(106);so.Z.registerVersion("firebase","10.6.0","app-compat");const J7=["ngOnDestroy"];class V1{constructor(e){return e}}const gv=new ce("angularfire2.app.options"),mv=new ce("angularfire2.app.name");function xC(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=so.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>so.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){const a=!!module.hot;tZ("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new V1(o)}const tZ=(t,...e)=>{},nZ={provide:V1,useFactory:xC,deps:[gv,Ct,[new ec,mv]]};let rZ=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:gv,useValue:n},{provide:mv,useValue:r}]}}constructor(n){so.Z.registerVersion("angularfire",PC.full,"core"),so.Z.registerVersion("angularfire",PC.full,"app-compat"),so.Z.registerVersion("angular",EP.full,n.toString())}static \u0275fac=function(r){return new(r||t)(se(No))};static \u0275mod=Rr({type:t});static \u0275inj=Dr({providers:[nZ]})}return t})();function L1(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return function iZ(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,o)||(F1("error",`${e} was already initialized on the ${n} Firebase App with different settings.${sZ?" You may need to reload as Firebase is not HMR aware.":""}`),F1("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const sZ=typeof module<"u"&&!!module.hot,F1=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class oZ extends H{constructor(e=1/0,n=1/0,r=RC){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function U1(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,Ne({connector:()=>new oZ(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function B1(t,e){return I(e)?ft(()=>t,e):ft(()=>t)}const j1=new ce("angularfire2.auth.use-emulator"),$1=new ce("angularfire2.auth.settings"),H1=new ce("angularfire2.auth.tenant-id"),z1=new ce("angularfire2.auth.langugage-code"),G1=new ce("angularfire2.auth.use-device-language"),q1=new ce("angularfire.auth.persistence"),W1=(t,e,n,r,i,s,o,a)=>L1(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[d,f]of Object.entries(o))u.settings[d]=f;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let MC=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,d,f,g,_,y){const E=new H,w=G(void 0).pipe(lr(o.outsideAngular),ft(()=>s.runOutsideAngular(()=>Promise.resolve().then(Fe.bind(Fe,956)))),_e(()=>xC(n,s,r)),_e(b=>W1(b,s,a,d,f,g,u,_)),U1({bufferSize:1,refCount:!1}));if(Hy(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=G(null);else{w.pipe(Oa()).subscribe();const b=w.pipe(ft(k=>k.getRedirectResult().then(U=>U,()=>null)),Ai,U1({bufferSize:1,refCount:!1})),M=w.pipe(ft(k=>new st(U=>({unsubscribe:s.runOutsideAngular(()=>k.onAuthStateChanged(te=>U.next(te),te=>U.error(te),()=>U.complete()))})))),R=w.pipe(ft(k=>new st(U=>({unsubscribe:s.runOutsideAngular(()=>k.onIdTokenChanged(te=>U.next(te),te=>U.error(te),()=>U.complete()))}))));this.authState=b.pipe(B1(M),Cr(o.outsideAngular),lr(o.insideAngular)),this.user=b.pipe(B1(R),Cr(o.outsideAngular),lr(o.insideAngular)),this.idToken=this.user.pipe(ft(k=>k?A(k.getIdToken()):G(null))),this.idTokenResult=this.user.pipe(ft(k=>k?A(k.getIdTokenResult()):G(null))),this.credential=W(b,E,this.authState.pipe(bs(k=>!k))).pipe(_e(k=>k?.user?k:null),Cr(o.outsideAngular),lr(o.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(J7.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>n.run(()=>d)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,d)=>o.then(f=>{const g=f?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,g),g})})})}))(this,w,s,{spy:{apply:(b,M,R)=>{(b.startsWith("signIn")||b.startsWith("createUser"))&&R.then(k=>E.next(k))}}})}static \u0275fac=function(r){return new(r||t)(se(gv),se(mv,8),se(No),se(Ct),se(k1),se(j1,8),se($1,8),se(H1,8),se(z1,8),se(G1,8),se(q1,8),se(N1,8))};static \u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function NC(){return B((t,e)=>{let n,r=!1;t.subscribe(pe(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}var fe,Z1=Fe(537),oo=Fe(879),Ft=Fe(58),uZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},As={},OC=OC||{},Be=uZ||self;function _v(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Bp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var kC="closure_uid_"+(1e9*Math.random()>>>0),lZ=0;function dZ(t,e,n){return t.call.apply(t.bind,arguments)}function hZ(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Nr(t,e,n){return(Nr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dZ:hZ).apply(null,arguments)}function yv(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function rr(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Fa(){this.s=this.s,this.o=this.o}Fa.prototype.s=!1,Fa.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function cZ(t){Object.prototype.hasOwnProperty.call(t,kC)&&t[kC]||(t[kC]=++lZ)}(this)},Fa.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const K1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function VC(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Q1(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(_v(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Or(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Or.prototype.h=function(){this.defaultPrevented=!0};var pZ=function(){if(!Be.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Be.addEventListener("test",()=>{},e),Be.removeEventListener("test",()=>{},e)}catch{}return t}();function jp(t){return/^[\s\xa0]*$/.test(t)}function vv(){var t=Be.navigator;return t&&(t=t.userAgent)?t:""}function ao(t){return-1!=vv().indexOf(t)}function LC(t){return LC[" "](t),t}LC[" "]=function(){};var UC,t,mZ=ao("Opera"),Vd=ao("Trident")||ao("MSIE"),Y1=ao("Edge"),FC=Y1||Vd,J1=ao("Gecko")&&!(-1!=vv().toLowerCase().indexOf("webkit")&&!ao("Edge"))&&!(ao("Trident")||ao("MSIE"))&&!ao("Edge"),_Z=-1!=vv().toLowerCase().indexOf("webkit")&&!ao("Edge");function X1(){var t=Be.document;return t?t.documentMode:void 0}e:{var BC="",jC=(t=vv(),J1?/rv:([^\);]+)(\)|;)/.exec(t):Y1?/Edge\/([\d\.]+)/.exec(t):Vd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):_Z?/WebKit\/(\S+)/.exec(t):mZ?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(jC&&(BC=jC?jC[1]:""),Vd){var $C=X1();if(null!=$C&&$C>parseFloat(BC)){UC=String($C);break e}}UC=BC}var yZ=Be.document&&Vd&&(X1()||parseInt(UC,10))||void 0;function $p(t,e){if(Or.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(J1){e:{try{LC(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:vZ[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&$p.$.h.call(this)}}rr($p,Or);var vZ={2:"touch",3:"pen",4:"mouse"};$p.prototype.h=function(){$p.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Hp="closure_listenable_"+(1e6*Math.random()|0),EZ=0;function IZ(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++EZ,this.fa=this.ia=!1}function Ev(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function zC(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function tV(t){const e={};for(const n in t)e[n]=t[n];return e}const nV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rV(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<nV.length;s++)n=nV[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Iv(t){this.src=t,this.g={},this.h=0}function GC(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=K1(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Ev(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function qC(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}Iv.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=qC(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new IZ(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var WC="closure_lm_"+(1e6*Math.random()|0),ZC={};function iV(t,e,n,r,i){if(r&&r.once)return oV(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)iV(t,e[s],n,r,i);return null}return n=JC(n),t&&t[Hp]?t.O(e,n,Bp(r)?!!r.capture:!!r,i):sV(t,e,n,!1,r,i)}function sV(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Bp(i)?!!i.capture:!!i,a=QC(t);if(a||(t[WC]=a=new Iv(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function TZ(){const e=CZ;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)pZ||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(uV(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function oV(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)oV(t,e[s],n,r,i);return null}return n=JC(n),t&&t[Hp]?t.P(e,n,Bp(r)?!!r.capture:!!r,i):sV(t,e,n,!0,r,i)}function aV(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)aV(t,e[s],n,r,i);else r=Bp(r)?!!r.capture:!!r,n=JC(n),t&&t[Hp]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=qC(s=t.g[e],n,r,i))&&(Ev(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=QC(t))&&(e=t.g[e.toString()],t=-1,e&&(t=qC(e,n,r,i)),(n=-1<t?e[t]:null)&&KC(n))}function KC(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Hp])GC(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(uV(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=QC(e))?(GC(n,t),0==n.h&&(n.src=null,e[WC]=null)):Ev(t)}}}function uV(t){return t in ZC?ZC[t]:ZC[t]="on"+t}function CZ(t,e){if(t.fa)t=!0;else{e=new $p(e,this);var n=t.listener,r=t.la||t.src;t.ia&&KC(t),t=n.call(r,e)}return t}function QC(t){return(t=t[WC])instanceof Iv?t:null}var YC="__closure_events_fn_"+(1e9*Math.random()>>>0);function JC(t){return"function"==typeof t?t:(t[YC]||(t[YC]=function(e){return t.handleEvent(e)}),t[YC])}function ir(){Fa.call(this),this.i=new Iv(this),this.S=this,this.J=null}function mr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Or(e,t);else if(e instanceof Or)e.target=e.target||t;else{var i=e;rV(e=new Or(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=wv(o,r,!0,e)&&i}if(i=wv(o=e.g=t,r,!0,e)&&i,i=wv(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=wv(o=e.g=n[s],r,!1,e)&&i}function wv(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&GC(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}rr(ir,Fa),ir.prototype[Hp]=!0,ir.prototype.removeEventListener=function(t,e,n,r){aV(this,t,e,n,r)},ir.prototype.N=function(){if(ir.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ev(n[r]);delete t.g[e],t.h--}}this.J=null},ir.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},ir.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var XC=Be.JSON.stringify;function DZ(){var t=eb;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var cV=new class bZ{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new SZ,t=>t.reset());class SZ{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function RZ(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function PZ(t){Be.setTimeout(()=>{throw t},0)}let zp,Gp=!1,eb=new class AZ{constructor(){this.h=this.g=null}add(e,n){const r=cV.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},lV=()=>{const t=Be.Promise.resolve(void 0);zp=()=>{t.then(xZ)}};var xZ=()=>{for(var t;t=DZ();){try{t.h.call(t.g)}catch(n){PZ(n)}var e=cV;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Gp=!1};function Tv(t,e){ir.call(this),this.h=t||1,this.g=e||Be,this.j=Nr(this.qb,this),this.l=Date.now()}function tb(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function nb(t,e,n){if("function"==typeof t)n&&(t=Nr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Nr(t.handleEvent,t)}return 2147483647<Number(e)?-1:Be.setTimeout(t,e||0)}function dV(t){t.g=nb(()=>{t.g=null,t.i&&(t.i=!1,dV(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}rr(Tv,ir),(fe=Tv.prototype).ga=!1,fe.T=null,fe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),mr(this,"tick"),this.ga&&(tb(this),this.start()))}},fe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fe.N=function(){Tv.$.N.call(this),tb(this),delete this.g};class MZ extends Fa{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:dV(this)}N(){super.N(),this.g&&(Be.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qp(t){Fa.call(this),this.h=t,this.g={}}rr(qp,Fa);var hV=[];function fV(t,e,n,r){Array.isArray(n)||(n&&(hV[0]=n.toString()),n=hV);for(var i=0;i<n.length;i++){var s=iV(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function pV(t){zC(t.g,function(e,n){this.g.hasOwnProperty(n)&&KC(e)},t),t.g={}}function Cv(){this.g=!0}function Ld(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function VZ(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return XC(n)}catch{return e}}(t,n)+(r?" "+r:"")})}qp.prototype.N=function(){qp.$.N.call(this),pV(this)},qp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cv.prototype.Ea=function(){this.g=!1},Cv.prototype.info=function(){};var _c={},gV=null;function bv(){return gV=gV||new ir}function mV(t){Or.call(this,_c.Ta,t)}function Wp(t){const e=bv();mr(e,new mV(e))}function _V(t,e){Or.call(this,_c.STAT_EVENT,t),this.stat=e}function Xr(t){const e=bv();mr(e,new _V(e,t))}function yV(t,e){Or.call(this,_c.Ua,t),this.size=e}function Zp(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Be.setTimeout(function(){t()},e)}_c.Ta="serverreachability",rr(mV,Or),_c.STAT_EVENT="statevent",rr(_V,Or),_c.Ua="timingevent",rr(yV,Or);var Dv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},vV={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function rb(){}function IV(){}rb.prototype.h=null;var ob,Kp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ib(){Or.call(this,"d")}function sb(){Or.call(this,"c")}function Av(){}function Qp(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new qp(this),this.P=LZ,this.V=new Tv(t=FC?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new wV}function wV(){this.i=null,this.g="",this.h=!1}rr(ib,Or),rr(sb,Or),rr(Av,rb),Av.prototype.g=function(){return new XMLHttpRequest},Av.prototype.i=function(){return{}},ob=new Av;var LZ=45e3,ab={},Sv={};function ub(t,e,n){t.L=1,t.v=Mv(zo(e)),t.s=n,t.S=!0,TV(t,null)}function TV(t,e){t.G=Date.now(),Yp(t),t.A=zo(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),NV(n.i,"t",r),t.C=0,n=t.l.J,t.h=new wV,t.g=rL(t.l,n?e:null,!t.s),0<t.O&&(t.M=new MZ(Nr(t.Pa,t,t.g),t.O)),fV(t.U,t.g,"readystatechange",t.nb),e=t.I?tV(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Wp(),function NZ(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var d=a[u].split("=");if(1<d.length){var f=d[0];d=d[1];var g=f.split("_");o=2<=g.length&&"type"==g[1]?o+(f+"=")+d+"&":o+(f+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.W,t.s)}function CV(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function bV(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=FZ(t,n),i==Sv){4==e&&(t.o=4,Xr(14),r=!1),Ld(t.j,t.m,null,"[Incomplete Response]");break}if(i==ab){t.o=4,Xr(15),Ld(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Ld(t.j,t.m,i,null),cb(t,i)}CV(t)&&i!=Sv&&i!=ab&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Xr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),mb(e),e.M=!0,Xr(11))):(Ld(t.j,t.m,n,"[Invalid Chunked Response]"),yc(t),Jp(t))}function FZ(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Sv:(n=Number(e.substring(n,r)),isNaN(n)?ab:(r+=1)+n>e.length?Sv:(e=e.slice(r,r+n),t.C=r+n,e))}function Yp(t){t.Y=Date.now()+t.P,DV(t,t.P)}function DV(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Zp(Nr(t.lb,t),e)}function Rv(t){t.B&&(Be.clearTimeout(t.B),t.B=null)}function Jp(t){0==t.l.H||t.J||XV(t.l,t)}function yc(t){Rv(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,tb(t.V),pV(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function cb(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||lb(n.i,t)))if(!t.K&&lb(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;Fv(n),Vv(n)}gb(n),Xr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Zp(Nr(n.ib,n),6e3));if(1>=VV(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ec(n,11)}else if((t.K||n.g==t)&&Fv(n),!jp(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let d=i[e];if(n.V=d[0],d=d[1],2==n.H)if("c"==d[0]){n.K=d[1],n.pa=d[2];const f=d[3];null!=f&&(n.ra=f,n.l.info("VER="+n.ra));const g=d[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const _=d[5];null!=_&&"number"==typeof _&&0<_&&(n.L=r=1.5*_,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const E=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(db(s,s.h),s.h=null))}if(r.F){const w=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,Jt(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=nL(r,r.J?r.pa:null,r.Y),o.K){LV(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(Rv(a),Yp(a)),r.g=o}else YV(r);0<n.j.length&&Lv(n)}else"stop"!=d[0]&&"close"!=d[0]||Ec(n,7);else 3==n.H&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?Ec(n,7):pb(n):"noop"!=d[0]&&n.h&&n.h.Aa(d),n.A=0)}Wp()}catch{}}function AV(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(_v(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function BZ(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(_v(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function UZ(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(_v(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(fe=Qp.prototype).setTimeout=function(t){this.P=t},fe.nb=function(t){t=t.target;const e=this.M;e&&3==uo(t)?e.l():this.Pa(t)},fe.Pa=function(t){try{if(t==this.g)e:{const f=uo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>f)&&(3!=f||FC||this.g&&(this.h.h||this.g.ja()||GV(this.g)))){this.J||4!=f||7==e||Wp(),Rv(this);var n=this.g.da();this.ca=n;t:if(CV(this)){var r=GV(this.g);t="";var i=r.length,s=4==uo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){yc(this),Jp(this);var o="";break t}this.h.i=new Be.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function OZ(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,f,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jp(a)){var d=a;break t}}d=null}if(!(n=d)){this.i=!1,this.o=3,Xr(12),yc(this),Jp(this);break e}Ld(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cb(this,n)}this.S?(bV(this,f,o),FC&&this.i&&3==f&&(fV(this.U,this.V,"tick",this.mb),this.V.start())):(Ld(this.j,this.m,o,null),cb(this,o)),4==f&&yc(this),this.i&&!this.J&&(4==f?XV(this.l,this):(this.i=!1,Yp(this)))}else(function iK(t){const e={};t=(t.g&&2<=uo(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(jp(t[r]))continue;var n=RZ(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function wZ(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Xr(12)):(this.o=0,Xr(13)),yc(this),Jp(this)}}}catch{}},fe.mb=function(){if(this.g){var t=uo(this.g),e=this.g.ja();this.C<e.length&&(Rv(this),bV(this,t,e),this.i&&4!=t&&Yp(this))}},fe.cancel=function(){this.J=!0,yc(this)},fe.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function kZ(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Wp(),Xr(17)),yc(this),this.o=2,Jp(this)):DV(this,this.Y-t)};var SV=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vc(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof vc){this.h=t.h,Pv(this,t.j),this.s=t.s,this.g=t.g,xv(this,t.m),this.l=t.l;var e=t.i,n=new tg;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),RV(this,n),this.o=t.o}else t&&(e=String(t).match(SV))?(this.h=!1,Pv(this,e[1]||"",!0),this.s=Xp(e[2]||""),this.g=Xp(e[3]||"",!0),xv(this,e[4]),this.l=Xp(e[5]||"",!0),RV(this,e[6]||"",!0),this.o=Xp(e[7]||"")):(this.h=!1,this.i=new tg(null,this.h))}function zo(t){return new vc(t)}function Pv(t,e,n){t.j=n?Xp(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function xv(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function RV(t,e,n){e instanceof tg?(t.i=e,function WZ(t,e){e&&!t.j&&(Ua(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(xV(this,r),NV(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=eg(e,GZ)),t.i=new tg(e,t.h))}function Jt(t,e,n){t.i.set(e,n)}function Mv(t){return Jt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Xp(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function eg(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,$Z),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $Z(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}vc.prototype.toString=function(){var t=[],e=this.j;e&&t.push(eg(e,PV,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(eg(e,PV,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(eg(n,"/"==n.charAt(0)?zZ:HZ,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",eg(n,qZ)),t.join("")};var PV=/[#\/\?@]/g,HZ=/[#\?:]/g,zZ=/[#\?]/g,GZ=/[#\?@]/g,qZ=/#/g;function tg(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ua(t){t.g||(t.g=new Map,t.h=0,t.i&&function jZ(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function xV(t,e){Ua(t),e=Fd(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function MV(t,e){return Ua(t),e=Fd(t,e),t.g.has(e)}function NV(t,e,n){xV(t,e),0<n.length&&(t.i=null,t.g.set(Fd(t,e),VC(n)),t.h+=n.length)}function Fd(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function OV(t){this.l=t||KZ,t=Be.PerformanceNavigationTiming?0<(t=Be.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Be.g&&Be.g.Ka&&Be.g.Ka()&&Be.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(fe=tg.prototype).add=function(t,e){Ua(this),this.i=null,t=Fd(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},fe.forEach=function(t,e){Ua(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},fe.ta=function(){Ua(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},fe.Z=function(t){Ua(this);let e=[];if("string"==typeof t)MV(this,t)&&(e=e.concat(this.g.get(Fd(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},fe.set=function(t,e){return Ua(this),this.i=null,MV(this,t=Fd(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},fe.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var KZ=10;function kV(t){return!!t.h||!!t.g&&t.g.size>=t.j}function VV(t){return t.h?1:t.g?t.g.size:0}function lb(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function db(t,e){t.g?t.g.add(e):t.h=e}function LV(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function FV(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return VC(t.i)}OV.prototype.cancel=function(){if(this.i=FV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var QZ=class{stringify(t){return Be.JSON.stringify(t,void 0)}parse(t){return Be.JSON.parse(t,void 0)}};function YZ(){this.g=new QZ}function JZ(t,e,n){const r=n||"";try{AV(t,function(i,s){let o=i;Bp(i)&&(o=XC(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Nv(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ng(t){this.l=t.ec||null,this.j=t.ob||!1}function Ov(t,e){ir.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=hb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rr(ng,rb),ng.prototype.g=function(){return new Ov(this.l,this.j)},ng.prototype.i=function(t){return function(){return t}}({}),rr(Ov,ir);var hb=0;function UV(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function rg(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ig(t)}function ig(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(fe=Ov.prototype).open=function(t,e){if(this.readyState!=hb)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ig(this)},fe.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Be).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rg(this)),this.readyState=hb},fe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ig(this)),this.g&&(this.readyState=3,ig(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Be.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;UV(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},fe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?rg(this):ig(this),3==this.readyState&&UV(this)}},fe.Za=function(t){this.g&&(this.response=this.responseText=t,rg(this))},fe.Ya=function(t){this.g&&(this.response=t,rg(this))},fe.ka=function(){this.g&&rg(this)},fe.setRequestHeader=function(t,e){this.v.append(t,e)},fe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},fe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Ov.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var eK=Be.JSON.parse;function vn(t){ir.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=BV,this.L=this.M=!1}rr(vn,ir);var BV="",tK=/^https?$/i,nK=["POST","PUT"];function jV(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,$V(t),kv(t)}function $V(t){t.F||(t.F=!0,mr(t,"complete"),mr(t,"error"))}function HV(t){if(t.h&&typeof OC<"u"&&(!t.C[1]||4!=uo(t)||2!=t.da()))if(t.v&&4==uo(t))nb(t.La,0,t);else if(mr(t,"readystatechange"),4==uo(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(SV)[1]||null;!i&&Be.self&&Be.self.location&&(i=Be.self.location.protocol.slice(0,-1)),r=!tK.test(i?i.toLowerCase():"")}n=r}if(n)mr(t,"complete"),mr(t,"success");else{t.m=6;try{var s=2<uo(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",$V(t)}}finally{kv(t)}}}function kv(t,e){if(t.g){zV(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||mr(t,"ready");try{n.onreadystatechange=r}catch{}}}function zV(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Be.clearTimeout(t.A),t.A=null)}function uo(t){return t.g?t.g.readyState:0}function GV(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case BV:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function qV(t){let e="";return zC(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function fb(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=qV(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Jt(t,e,n))}function sg(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function WV(t){this.Ga=0,this.j=[],this.l=new Cv,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=sg("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=sg("baseRetryDelayMs",5e3,t),this.hb=sg("retryDelaySeedMs",1e4,t),this.eb=sg("forwardChannelMaxRetries",2,t),this.xa=sg("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new OV(t&&t.concurrentRequestLimit),this.Ja=new YZ,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function pb(t){if(ZV(t),3==t.H){var e=t.W++,n=zo(t.I);if(Jt(n,"SID",t.K),Jt(n,"RID",e),Jt(n,"TYPE","terminate"),og(t,n),(e=new Qp(t,t.l,e)).L=2,e.v=Mv(zo(n)),n=!1,Be.navigator&&Be.navigator.sendBeacon)try{n=Be.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Be.Image&&((new Image).src=e.v,n=!0),n||(e.g=rL(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Yp(e)}tL(t)}function Vv(t){t.g&&(mb(t),t.g.cancel(),t.g=null)}function ZV(t){Vv(t),t.u&&(Be.clearTimeout(t.u),t.u=null),Fv(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Be.clearTimeout(t.m),t.m=null)}function Lv(t){if(!kV(t.i)&&!t.m){t.m=!0;var e=t.Na;zp||lV(),Gp||(zp(),Gp=!0),eb.add(e,t),t.C=0}}function KV(t,e){var n;n=e?e.m:t.W++;const r=zo(t.I);Jt(r,"SID",t.K),Jt(r,"RID",n),Jt(r,"AID",t.V),og(t,r),t.o&&t.s&&fb(r,t.o,t.s),n=new Qp(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=QV(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),db(t.i,n),ub(n,r,e)}function og(t,e){t.na&&zC(t.na,function(n,r){Jt(e,r,n)}),t.h&&AV({},function(n,r){Jt(e,r,n)})}function QV(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Nr(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let d=i[u].g;const f=i[u].map;if(d-=s,0>d)s=Math.max(0,i[u].g-100),a=!1;else try{JZ(f,o,"req"+d+"_")}catch{r&&r(f)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function YV(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;zp||lV(),Gp||(zp(),Gp=!0),eb.add(e,t),t.A=0}}function gb(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Zp(Nr(t.Ma,t),eL(t,t.A)),t.A++,0))}function mb(t){null!=t.B&&(Be.clearTimeout(t.B),t.B=null)}function JV(t){t.g=new Qp(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=zo(t.wa);Jt(e,"RID","rpc"),Jt(e,"SID",t.K),Jt(e,"AID",t.V),Jt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Jt(e,"TO",t.qa),Jt(e,"TYPE","xmlhttp"),og(t,e),t.o&&t.s&&fb(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Mv(zo(e)),n.s=null,n.S=!0,TV(n,t)}function Fv(t){null!=t.v&&(Be.clearTimeout(t.v),t.v=null)}function XV(t,e){var n=null;if(t.g==e){Fv(t),mb(t),t.g=null;var r=2}else{if(!lb(t.i,e))return;n=e.F,LV(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;mr(r=bv(),new yV(r,n)),Lv(t)}else YV(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function sK(t,e){return!(VV(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Zp(Nr(t.Na,t,e),eL(t,t.C)),t.C++,0)))}(t,e)||2==r&&gb(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ec(t,5);break;case 4:Ec(t,10);break;case 3:Ec(t,6);break;default:Ec(t,2)}}function eL(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ec(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Nr(t.pb,t);n||(n=new vc("//www.google.com/images/cleardot.gif"),Be.location&&"http"==Be.location.protocol||Pv(n,"https"),Mv(n)),function XZ(t,e){const n=new Cv;if(Be.Image){const r=new Image;r.onload=yv(Nv,n,r,"TestLoadImage: loaded",!0,e),r.onerror=yv(Nv,n,r,"TestLoadImage: error",!1,e),r.onabort=yv(Nv,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=yv(Nv,n,r,"TestLoadImage: timeout",!1,e),Be.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Xr(2);t.H=0,t.h&&t.h.za(e),tL(t),ZV(t)}function tL(t){if(t.H=0,t.ma=[],t.h){const e=FV(t.i);(0!=e.length||0!=t.j.length)&&(Q1(t.ma,e),Q1(t.ma,t.j),t.i.i.length=0,VC(t.j),t.j.length=0),t.h.ya()}}function nL(t,e,n){var r=n instanceof vc?zo(n):new vc(n);if(""!=r.g)e&&(r.g=e+"."+r.g),xv(r,r.m);else{var i=Be.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new vc(null);r&&Pv(s,r),e&&(s.g=e),i&&xv(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&Jt(r,n,e),Jt(r,"VER",t.ra),og(t,r),r}function rL(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vn(n&&t.Ha&&!t.va?new ng({ob:!0}):t.va)).Oa(t.J),e}function iL(){}function Uv(){if(Vd&&!(10<=Number(yZ)))throw Error("Environmental error: no available transport.")}function Si(t,e){ir.call(this),this.g=new WV(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!jp(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jp(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Ud(this)}function sL(t){ib.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function oL(){sb.call(this),this.status=1}function Ud(t){this.g=t}function Ss(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function _b(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function Rt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(fe=vn.prototype).Oa=function(t){this.M=t},fe.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ob.g(),this.C=function EV(t){return t.h||(t.h=t.i())}(this.u?this.u:ob),this.g.onreadystatechange=Nr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void jV(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=Be.FormData&&t instanceof Be.FormData,!(0<=K1(nK,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{zV(this),0<this.B&&((this.L=function rK(t){return Vd&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nr(this.ua,this)):this.A=nb(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){jV(this,s)}},fe.ua=function(){typeof OC<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mr(this,"timeout"),this.abort(8))},fe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,mr(this,"complete"),mr(this,"abort"),kv(this))},fe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kv(this,!0)),vn.$.N.call(this)},fe.La=function(){this.s||(this.G||this.v||this.l?HV(this):this.kb())},fe.kb=function(){HV(this)},fe.isActive=function(){return!!this.g},fe.da=function(){try{return 2<uo(this)?this.g.status:-1}catch{return-1}},fe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},fe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),eK(e)}},fe.Ia=function(){return this.m},fe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(fe=WV.prototype).ra=8,fe.H=1,fe.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Qp(this,this.l,t);let s=this.s;if(this.U&&(s?(s=tV(s),rV(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=QV(this,i,e),Jt(n=zo(this.I),"RID",t),Jt(n,"CVER",22),this.F&&Jt(n,"X-HTTP-Session-Id",this.F),og(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(qV(s)))+"&"+e:this.o&&fb(n,this.o,s)),db(this.i,i),this.bb&&Jt(n,"TYPE","init"),this.P?(Jt(n,"$req",e),Jt(n,"SID","null"),i.aa=!0,ub(i,n,null)):ub(i,n,e),this.H=2}}else 3==this.H&&(t?KV(this,t):0==this.j.length||kV(this.i)||KV(this))},fe.Ma=function(){if(this.u=null,JV(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Zp(Nr(this.jb,this),t)}},fe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Xr(10),Vv(this),JV(this))},fe.ib=function(){null!=this.v&&(this.v=null,Vv(this),gb(this),Xr(19))},fe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Xr(2)):(this.l.info("Failed to ping google.com"),Xr(1))},fe.isActive=function(){return!!this.h&&this.h.isActive(this)},(fe=iL.prototype).Ba=function(){},fe.Aa=function(){},fe.za=function(){},fe.ya=function(){},fe.isActive=function(){return!0},fe.Va=function(){},Uv.prototype.g=function(t,e){return new Si(t,e)},rr(Si,ir),Si.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Xr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=nL(t,null,t.Y),Lv(t)},Si.prototype.close=function(){pb(this.g)},Si.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=XC(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Lv(e)},Si.prototype.N=function(){this.g.h=null,delete this.j,pb(this.g),delete this.g,Si.$.N.call(this)},rr(sL,ib),rr(oL,sb),rr(Ud,iL),Ud.prototype.Ba=function(){mr(this.g,"a")},Ud.prototype.Aa=function(t){mr(this.g,new sL(t))},Ud.prototype.za=function(t){mr(this.g,new oL)},Ud.prototype.ya=function(){mr(this.g,"b")},rr(Ss,function oK(){this.blockSize=-1}),Ss.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ss.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)_b(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){_b(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){_b(this,r),i=0;break}}this.h=i,this.i+=e},Ss.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var aK={};function yb(t){return-128<=t&&128>t?function gZ(t,e){var n=aK;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Rt([0|e],0>e?-1:0)}):new Rt([0|t],0>t?-1:0)}function co(t){if(isNaN(t)||!isFinite(t))return Bd;if(0>t)return _r(co(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=vb;return new Rt(e,0)}var vb=4294967296,Bd=yb(0),Eb=yb(1),uL=yb(16777216);function Go(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function ns(t){return-1==t.h}function _r(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Rt(n,~t.h).add(Eb)}function Bv(t,e){return t.add(_r(e))}function jv(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ag(t,e){this.g=t,this.h=e}function $v(t,e){if(Go(e))throw Error("division by zero");if(Go(t))return new ag(Bd,Bd);if(ns(t))return e=$v(_r(t),e),new ag(_r(e.g),_r(e.h));if(ns(e))return e=$v(t,_r(e)),new ag(_r(e.g),e.h);if(30<t.g.length){if(ns(t)||ns(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Eb,r=e;0>=r.X(t);)n=cL(n),r=cL(r);var i=jd(n,1),s=jd(r,1);for(r=jd(r,2),n=jd(n,2);!Go(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=jd(r,1),n=jd(n,1)}return e=Bv(t,i.R(e)),new ag(i,e)}for(i=Bd;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=co(n)).R(e);ns(o)||0<o.X(t);)o=(s=co(n-=r)).R(e);Go(s)&&(s=Eb),i=i.add(s),t=Bv(t,o)}return new ag(i,t)}function cL(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Rt(n,t.h)}function jd(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Rt(i,t.h)}(fe=Rt.prototype).ea=function(){if(ns(this))return-_r(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:vb+r)*e,e*=vb}return t},fe.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Go(this))return"0";if(ns(this))return"-"+_r(this).toString(t);for(var e=co(Math.pow(t,6)),n=this,r="";;){var i=$v(n,e).g,s=((0<(n=Bv(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Go(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},fe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},fe.X=function(t){return ns(t=Bv(this,t))?-1:Go(t)?0:1},fe.abs=function(){return ns(this)?_r(this):this},fe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new Rt(n,-2147483648&n[n.length-1]?-1:0)},fe.R=function(t){if(Go(this)||Go(t))return Bd;if(ns(this))return ns(t)?_r(this).R(_r(t)):_r(_r(this).R(t));if(ns(t))return _r(this.R(_r(t)));if(0>this.X(uL)&&0>t.X(uL))return co(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,jv(n,2*r+2*i),n[2*r+2*i+1]+=s*u,jv(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,jv(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,jv(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Rt(n,0)},fe.gb=function(t){return $v(this,t).h},fe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Rt(n,this.h&t.h)},fe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Rt(n,this.h|t.h)},fe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Rt(n,this.h^t.h)},Uv.prototype.createWebChannel=Uv.prototype.g,Si.prototype.send=Si.prototype.u,Si.prototype.open=Si.prototype.m,Si.prototype.close=Si.prototype.close,Dv.NO_ERROR=0,Dv.TIMEOUT=8,Dv.HTTP_ERROR=6,vV.COMPLETE="complete",IV.EventType=Kp,Kp.OPEN="a",Kp.CLOSE="b",Kp.ERROR="c",Kp.MESSAGE="d",ir.prototype.listen=ir.prototype.O,vn.prototype.listenOnce=vn.prototype.P,vn.prototype.getLastError=vn.prototype.Sa,vn.prototype.getLastErrorCode=vn.prototype.Ia,vn.prototype.getStatus=vn.prototype.da,vn.prototype.getResponseJson=vn.prototype.Wa,vn.prototype.getResponseText=vn.prototype.ja,vn.prototype.send=vn.prototype.ha,vn.prototype.setWithCredentials=vn.prototype.Oa,Ss.prototype.digest=Ss.prototype.l,Ss.prototype.reset=Ss.prototype.reset,Ss.prototype.update=Ss.prototype.j,Rt.prototype.add=Rt.prototype.add,Rt.prototype.multiply=Rt.prototype.R,Rt.prototype.modulo=Rt.prototype.gb,Rt.prototype.compare=Rt.prototype.X,Rt.prototype.toNumber=Rt.prototype.ea,Rt.prototype.toString=Rt.prototype.toString,Rt.prototype.getBits=Rt.prototype.D,Rt.fromNumber=co,Rt.fromString=function aL(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return _r(aL(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=co(Math.pow(e,8)),r=Bd,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=co(Math.pow(e,s)),r=r.R(s).add(co(o))):r=(r=r.R(n)).add(co(o))}return r};var uK=As.createWebChannelTransport=function(){return new Uv},cK=As.getStatEventTarget=function(){return bv()},Ib=As.ErrorCode=Dv,lK=As.EventType=vV,dK=As.Event=_c,lL=As.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},hK=As.FetchXmlHttpFactory=ng,Hv=As.WebChannel=IV,fK=As.XhrIo=vn,pK=As.Md5=Ss,$d=As.Integer=Rt;const dL="@firebase/firestore";class sr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sr.UNAUTHENTICATED=new sr(null),sr.GOOGLE_CREDENTIALS=new sr("google-credentials-uid"),sr.FIRST_PARTY=new sr("first-party-uid"),sr.MOCK_USER=new sr("mock-user");let Hd="10.5.2";const Ba=new oo.Yd("@firebase/firestore");function zd(){return Ba.logLevel}function re(t,...e){if(Ba.logLevel<=oo.in.DEBUG){const n=e.map(wb);Ba.debug(`Firestore (${Hd}): ${t}`,...n)}}function Sn(t,...e){if(Ba.logLevel<=oo.in.ERROR){const n=e.map(wb);Ba.error(`Firestore (${Hd}): ${t}`,...n)}}function fi(t,...e){if(Ba.logLevel<=oo.in.WARN){const n=e.map(wb);Ba.warn(`Firestore (${Hd}): ${t}`,...n)}}function wb(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function me(t="Unexpected state"){const e=`FIRESTORE (${Hd}) INTERNAL ASSERTION FAILED: `+t;throw Sn(e),new Error(e)}function be(t,e){t||me()}function oe(t,e){return t}const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Ft.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class hL{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _K{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(sr.UNAUTHENTICATED))}shutdown(){}}class yK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vK{constructor(e){this.t=e,this.currentUser=sr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Jn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Jn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,Z.Z)(function*(){yield d.promise,yield s(r.currentUser)}))},u=d=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Jn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be("string"==typeof r.accessToken),new hL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return be(null===e||"string"==typeof e),new sr(e)}}class EK{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=sr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class IK{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new EK(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(sr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wK{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be("string"==typeof n.token),this.R=n.token,new fL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function TK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class pL{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=TK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Le(t,e){return t<e?-1:t>e?1:0}function Gd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function gL(t){return t+"\0"}class an{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return an.fromMillis(Date.now())}static fromDate(e){return an.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new an(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class De{constructor(e){this.timestamp=e}static fromTimestamp(e){return new De(e)}static min(){return new De(new an(0,0))}static max(){return new De(new an(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ug{constructor(e,n,r){void 0===n?n=0:n>e.length&&me(),void 0===r?r=e.length-n:r>e.length-n&&me(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===ug.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ug?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class pt extends ug{construct(e,n,r){return new pt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new pt(n)}static emptyPath(){return new pt([])}}const CK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends ug{construct(e,n,r){return new Xt(e,n,r)}static isValidIdentifier(e){return CK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ee(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ee(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ee(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ee(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(n)}static emptyPath(){return new Xt([])}}class ue{constructor(e){this.path=e}static fromPath(e){return new ue(pt.fromString(e))}static fromName(e){return new ue(pt.fromString(e).popFirst(5))}static empty(){return new ue(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new pt(e.slice()))}}class qd{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Tb(t){return t.fields.find(e=>2===e.kind)}function Ic(t){return t.fields.filter(e=>2!==e.kind)}qd.UNKNOWN_ID=-1;class wc{constructor(e,n){this.fieldPath=e,this.kind=n}}class Wd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Wd(0,Ri.min())}}function mL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=De.fromTimestamp(1e9===r?new an(n+1,0):new an(n,r));return new Ri(i,ue.empty(),e)}function _L(t){return new Ri(t.readTime,t.key,-1)}class Ri{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ri(De.min(),ue.empty(),-1)}static max(){return new Ri(De.max(),ue.empty(),-1)}}function Cb(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ue.comparator(t.documentKey,e.documentKey),0!==n?n:Le(t.largestBatchId,e.largestBatchId))}const yL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ja(t){return bb.apply(this,arguments)}function bb(){return bb=(0,Z.Z)(function*(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==yL)throw t;re("LocalStore","Unexpectedly lost primary lease")}),bb.apply(this,arguments)}class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(i=>i?N.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new N((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new N((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class zv{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Jn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new cg(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Db(r.target.error);this.V.reject(new cg(e,i))}}static open(e,n,r,i){try{return new zv(n,e.transaction(i,r))}catch(s){throw new cg(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new SK(n)}}class Rs{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===Rs.S((0,Ft.z$)())&&Sn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return re("SimpleDb","Removing database:",e),Tc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ft.hl)())return!1;if(Rs.C())return!0;const e=(0,Ft.z$)(),n=Rs.S(e),r=0<n&&n<10,i=Rs.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,Z.Z)(function*(){return n.db||(re("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new cg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new ee(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ee(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new cg(e,a))},s.onupgradeneeded=o=>{re("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.p.N(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{re("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,Z.Z)(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.O(e);const u=zv.open(s.db,e,o?"readonly":"readwrite",r),d=i(u).next(f=>(u.g(),f)).catch(f=>(u.abort(f),N.reject(f))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,f="FirebaseError"!==d.name&&a<3;if(re("SimpleDb","Transaction failed with error:",d.message,"Retrying:",f),s.close(),!f)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class AK{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Tc(this.k.delete())}}class cg extends ee{constructor(e,n){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function $a(t){return"IndexedDbTransactionError"===t.name}class SK{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(re("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Tc(r)}add(e){return re("SimpleDb","ADD",this.store.name,e,e),Tc(this.store.add(e))}get(e){return Tc(this.store.get(e)).next(n=>(void 0===n&&(n=null),re("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return re("SimpleDb","DELETE",this.store.name,e),Tc(this.store.delete(e))}count(){return re("SimpleDb","COUNT",this.store.name),Tc(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new N((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new N((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new N((r,i)=>{n.onerror=s=>{const o=Db(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new N((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new AK(a),d=n(a.primaryKey,a.value,u);if(d instanceof N){const f=d.catch(g=>(u.done(),N.reject(g)));r.push(f)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>N.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Tc(t){return new N((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=Db(r.target.error);n(i)}})}let EL=!1;function Db(t){const e=Rs.S((0,Ft.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return EL||(EL=!0,setTimeout(()=>{throw r},0)),r}}return t}class RK{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;re("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Z.Z)(function*(){n.task=null;try{re("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){$a(r)?re("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ja(r)}yield n.ee(6e4)}))}}class PK{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,Z.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,s=!0;return N.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return re("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(re("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=_L(s);Cb(o,r)>0&&(r=o)}),new Ri(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Pi=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function lg(t){return null==t}function dg(t){return 0===t&&1/t==-1/0}function IL(t){return"number"==typeof t&&Number.isInteger(t)&&!dg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function kr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=wL(e)),e=xK(t.get(n),e);return wL(e)}function xK(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function wL(t){return t+"\x01\x01"}function lo(t){const e=t.length;if(be(e>=2),2===e)return be("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),pt.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&me(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:me()}s=o+2}return new pt(r)}const TL=["userId","batchId"];function Gv(t,e){return[t,kr(e)]}function CL(t,e,n){return[t,kr(e),n]}const MK={},NK=["prefixPath","collectionGroup","readTime","documentId"],OK=["prefixPath","collectionGroup","documentId"],kK=["collectionGroup","readTime","prefixPath","documentId"],VK=["canonicalId","targetId"],LK=["targetId","path"],FK=["path","targetId"],UK=["collectionId","parent"],BK=["indexId","uid"],jK=["uid","sequenceNumber"],$K=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],HK=["indexId","uid","orderedDocumentKey"],zK=["userId","collectionPath","documentId"],GK=["userId","collectionPath","largestBatchId"],qK=["userId","collectionGroup","largestBatchId"],bL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],WK=[...bL,"documentOverlays"],DL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],AL=DL,ZK=[...AL,"indexConfiguration","indexState","indexEntries"];class Ab extends vL{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function or(t,e){const n=oe(t);return Rs.M(n.ae,e)}function SL(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ha(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function RL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Gt{constructor(e,n){this.comparator=e,this.root=n||yr.EMPTY}insert(e,n){return new Gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yr.BLACK,null,null))}remove(e){return new Gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qv(this.root,e,this.comparator,!1)}getReverseIterator(){return new qv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qv(this.root,e,this.comparator,!0)}}class qv{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??yr.RED,this.left=i??yr.EMPTY,this.right=s??yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new yr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return yr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw me();const e=this.left.check();if(e!==this.right.check())throw me();return e+(this.isRed()?0:1)}}yr.EMPTY=null,yr.RED=!0,yr.BLACK=!1,yr.EMPTY=new class{constructor(){this.size=0}get key(){throw me()}get value(){throw me()}get color(){throw me()}get left(){throw me()}get right(){throw me()}copy(e,n,r,i,s){return this}insert(e,n,r){return new yr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nt{constructor(e){this.comparator=e,this.data=new Gt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PL(this.data.getIterator())}getIteratorFrom(e){return new PL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class PL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zd(t){return t.hasNext()?t.getNext():void 0}class pi{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new pi([])}unionWith(e){let n=new Nt(Xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new pi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class xL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new xL("Invalid base64 string: "+s):s}}(e);return new Xn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xn.EMPTY_BYTE_STRING=new Xn("");const QK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function za(t){if(be(!!t),"string"==typeof t){let e=0;const n=QK.exec(t);if(be(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:En(t.seconds),nanos:En(t.nanos)}}function En(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function qo(t){return"string"==typeof t?Xn.fromBase64String(t):Xn.fromUint8Array(t)}function Wv(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zv(t){const e=t.mapValue.fields.__previous_value__;return Wv(e)?Zv(e):e}function hg(t){const e=za(t.mapValue.fields.__local_write_time__.timestampValue);return new an(e.seconds,e.nanos)}class YK{constructor(e,n,r,i,s,o,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class Ga{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ga("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ga&&e.projectId===this.projectId&&e.database===this.database}}const qa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Kv={nullValue:"NULL_VALUE"};function Wa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wv(t)?4:kL(t)?9007199254740991:10:me()}function ho(t,e){if(t===e)return!0;const n=Wa(t);if(n!==Wa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hg(t).isEqual(hg(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=za(i.timestampValue),a=za(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,qo(t.bytesValue).isEqual(qo(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return En(i.geoPointValue.latitude)===En(s.geoPointValue.latitude)&&En(i.geoPointValue.longitude)===En(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return En(i.integerValue)===En(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=En(i.doubleValue),a=En(s.doubleValue);return o===a?dg(o)===dg(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Gd(t.arrayValue.values||[],e.arrayValue.values||[],ho);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(SL(o)!==SL(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!ho(o[u],a[u])))return!1;return!0}(t,e);default:return me()}var s}function fg(t,e){return void 0!==(t.values||[]).find(n=>ho(n,e))}function Za(t,e){if(t===e)return 0;const n=Wa(t),r=Wa(e);if(n!==r)return Le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=En(s.integerValue||s.doubleValue),u=En(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return ML(t.timestampValue,e.timestampValue);case 4:return ML(hg(t),hg(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(s,o){const a=qo(s),u=qo(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const f=Le(a[d],u[d]);if(0!==f)return f}return Le(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Le(En(s.latitude),En(o.latitude));return 0!==a?a:Le(En(s.longitude),En(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let d=0;d<a.length&&d<u.length;++d){const f=Za(a[d],u[d]);if(f)return f}return Le(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===qa.mapValue&&o===qa.mapValue)return 0;if(s===qa.mapValue)return 1;if(o===qa.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const _=Le(u[g],f[g]);if(0!==_)return _;const y=Za(a[u[g]],d[f[g]]);if(0!==y)return y}return Le(u.length,f.length)}(t.mapValue,e.mapValue);default:throw me()}}function ML(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Le(t,e);const n=za(t),r=za(e),i=Le(n.seconds,r.seconds);return 0!==i?i:Le(n.nanos,r.nanos)}function Kd(t){return Sb(t)}function Sb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=za(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?qo(t.bytesValue).toBase64():"referenceValue"in t?ue.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Sb(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Sb(n.fields[o])}`;return i+"}"}(t.mapValue):me()}function Cc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rb(t){return!!t&&"integerValue"in t}function pg(t){return!!t&&"arrayValue"in t}function NL(t){return!!t&&"nullValue"in t}function OL(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yv(t){return!!t&&"mapValue"in t}function gg(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ha(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=gg(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gg(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kL(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function JK(t){return"nullValue"in t?Kv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Cc(Ga.empty(),ue.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:me()}function XK(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Cc(Ga.empty(),ue.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?qa:me()}function VL(t,e){const n=Za(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function LL(t,e){const n=Za(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class vr{constructor(e){this.value=e}static empty(){return new vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gg(n)}setAll(e){let n=Xt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=gg(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Yv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ho(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Yv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ha(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new vr(gg(this.value))}}function FL(t){const e=[];return Ha(t.fields,(n,r)=>{const i=new Xt([n]);if(Yv(r)){const s=FL(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new pi(e)}class en{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new en(e,0,De.min(),De.min(),De.min(),vr.empty(),0)}static newFoundDocument(e,n,r,i){return new en(e,1,n,De.min(),r,i,0)}static newNoDocument(e,n){return new en(e,2,n,De.min(),De.min(),vr.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,De.min(),De.min(),vr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ka{constructor(e,n){this.position=e,this.inclusive=n}}function UL(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?ue.comparator(ue.fromName(o.referenceValue),n.key):Za(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function BL(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ho(t.position[n],e.position[n]))return!1;return!0}class mg{constructor(e,n="asc"){this.field=e,this.dir=n}}function eQ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class jL{}class ot extends jL{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new tQ(e,n,r):"array-contains"===n?new iQ(e,r):"in"===n?new WL(e,r):"not-in"===n?new sQ(e,r):"array-contains-any"===n?new oQ(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new nQ(e,r):new rQ(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Za(n,this.value)):null!==n&&Wa(this.value)===Wa(n)&&this.matchesComparison(Za(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pt extends jL{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Pt(e,n)}matches(e){return Qd(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Qd(t){return"and"===t.op}function Pb(t){return"or"===t.op}function xb(t){return $L(t)&&Qd(t)}function $L(t){for(const e of t.filters)if(e instanceof Pt)return!1;return!0}function Mb(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+Kd(t.value);if(xb(t))return t.filters.map(e=>Mb(e)).join(",");{const e=t.filters.map(n=>Mb(n)).join(",");return`${t.op}(${e})`}}function HL(t,e){return t instanceof ot?(r=t,(i=e)instanceof ot&&r.op===i.op&&r.field.isEqual(i.field)&&ho(r.value,i.value)):t instanceof Pt?function(r,i){return i instanceof Pt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&HL(o,i.filters[a]),!0)}(t,e):void me();var r,i}function zL(t,e){const n=t.filters.concat(e);return Pt.create(n,t.op)}function GL(t){return t instanceof ot?`${(n=t).field.canonicalString()} ${n.op} ${Kd(n.value)}`:t instanceof Pt?function(n){return n.op.toString()+" {"+n.getFilters().map(GL).join(" ,")+"}"}(t):"Filter";var n}class tQ extends ot{constructor(e,n,r){super(e,n,r),this.key=ue.fromName(r.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class nQ extends ot{constructor(e,n){super(e,"in",n),this.keys=qL(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rQ extends ot{constructor(e,n){super(e,"not-in",n),this.keys=qL(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function qL(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>ue.fromName(r.referenceValue))}class iQ extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pg(n)&&fg(n.arrayValue,this.value)}}class WL extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&fg(this.value.arrayValue,n)}}class sQ extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(fg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!fg(this.value.arrayValue,n)}}class oQ extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fg(this.value.arrayValue,r))}}class aQ{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function Nb(t,e=null,n=[],r=[],i=null,s=null,o=null){return new aQ(t,e,n,r,i,s,o)}function bc(t){const e=oe(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Mb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),lg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Kd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Kd(r)).join(",")),e.ce=n}return e.ce}function _g(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eQ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HL(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!BL(t.startAt,e.startAt)&&BL(t.endAt,e.endAt)}function Jv(t){return ue.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Xv(t,e){return t.filters.filter(n=>n instanceof ot&&n.field.isEqual(e))}function ZL(t,e,n){let r=Kv,i=!0;for(const s of Xv(t,e)){let o=Kv,a=!0;switch(s.op){case"<":case"<=":o=JK(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Kv}VL({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];VL({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function KL(t,e,n){let r=qa,i=!0;for(const s of Xv(t,e)){let o=qa,a=!0;switch(s.op){case">=":case">":o=XK(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=qa}LL({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];LL({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class Wo{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function QL(t,e,n,r,i,s,o,a){return new Wo(t,e,n,r,i,s,o,a)}function Yd(t){return new Wo(t)}function YL(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Ob(t){return null!==t.collectionGroup}function Jd(t){const e=oe(t);if(null===e.le){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Nt(Xt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new mg(s,r))}),n.has(Xt.keyField().canonicalString())||e.le.push(new mg(Xt.keyField(),r))}return e.le}function ei(t){const e=oe(t);return e.he||(e.he=function JL(t,e){if("F"===t.limitType)return Nb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new mg(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Ka(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ka(t.startAt.position,t.startAt.inclusive):null;return Nb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Jd(t))),e.he}function kb(t,e){const n=t.filters.concat([e]);return new Wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function eE(t,e,n){return new Wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yg(t,e){return _g(ei(t),ei(e))&&t.limitType===e.limitType}function XL(t){return`${bc(ei(t))}|lt:${t.limitType}`}function Xd(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>GL(i)).join(", ")}]`),lg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Kd(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Kd(i)).join(",")),`Target(${r})`}(ei(t))}; limitType=${t.limitType})`}function vg(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ue.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Jd(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const d=UL(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,Jd(r),i)||r.endAt&&!function(o,a,u){const d=UL(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,Jd(r),i)));var r,i}function eF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tF(t){return(e,n)=>{let r=!1;for(const i of Jd(t)){const s=uQ(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function uQ(t,e,n){const r=t.field.isKeyField()?ue.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return null!==u&&null!==d?Za(u,d):me()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return me()}}class Zo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ha(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return RL(this.inner)}size(){return this.innerSize}}const cQ=new Gt(ue.comparator);function gi(){return cQ}const nF=new Gt(ue.comparator);function Eg(...t){let e=nF;for(const n of t)e=e.insert(n.key,n);return e}function rF(t){let e=nF;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function fo(){return Ig()}function iF(){return Ig()}function Ig(){return new Zo(t=>t.toString(),(t,e)=>t.isEqual(e))}const lQ=new Gt(ue.comparator),dQ=new Nt(ue.comparator);function We(...t){let e=dQ;for(const n of t)e=e.add(n);return e}const hQ=new Nt(Le);function Vb(){return hQ}function sF(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dg(e)?"-0":e}}function oF(t){return{integerValue:""+t}}function aF(t,e){return IL(e)?oF(e):sF(t,e)}class tE{constructor(){this._=void 0}}function fQ(t,e,n){return t instanceof eh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Wv(s)&&(s=Zv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Dc?cF(t,e):t instanceof Ac?lF(t,e):function(i,s){const o=uF(i,s),a=dF(o)+dF(i.Ie);return Rb(o)&&Rb(i.Ie)?oF(a):sF(i.serializer,a)}(t,e)}function pQ(t,e,n){return t instanceof Dc?cF(t,e):t instanceof Ac?lF(t,e):n}function uF(t,e){return t instanceof th?Rb(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class eh extends tE{}class Dc extends tE{constructor(e){super(),this.elements=e}}function cF(t,e){const n=hF(e);for(const r of t.elements)n.some(i=>ho(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ac extends tE{constructor(e){super(),this.elements=e}}function lF(t,e){let n=hF(e);for(const r of t.elements)n=n.filter(i=>!ho(i,r));return{arrayValue:{values:n}}}class th extends tE{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function dF(t){return En(t.integerValue||t.doubleValue)}function hF(t){return pg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class wg{constructor(e,n){this.field=e,this.transform=n}}class mQ{constructor(e,n){this.version=e,this.transformResults=n}}class un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new un}static exists(e){return new un(void 0,e)}static updateTime(e){return new un(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nE(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class rE{}function fF(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new rh(t.key,un.none()):new nh(t.key,t.data,un.none());{const n=t.data,r=vr.empty();let i=new Nt(Xt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ko(t.key,r,new pi(i.toArray()),un.none())}}function _Q(t,e,n){t instanceof nh?function(i,s,o){const a=i.value.clone(),u=mF(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ko?function(i,s,o){if(!nE(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=mF(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(gF(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Tg(t,e,n,r){return t instanceof nh?function(s,o,a,u){if(!nE(s.precondition,o))return a;const d=s.value.clone(),f=_F(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ko?function(s,o,a,u){if(!nE(s.precondition,o))return a;const d=_F(s.fieldTransforms,u,o),f=o.data;return f.setAll(gF(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,nE(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function yQ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=uF(r.transform,i||null);null!=s&&(null===n&&(n=vr.empty()),n.set(r.field,s))}return n||null}function pF(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Gd(r,i,(s,o)=>function gQ(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Dc&&i instanceof Dc||r instanceof Ac&&i instanceof Ac?Gd(r.elements,i.elements,ho):r instanceof th&&i instanceof th?ho(r.Ie,i.Ie):r instanceof eh&&i instanceof eh);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class nh extends rE{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ko extends rE{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function gF(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function mF(t,e,n){const r=new Map;be(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,pQ(o,a,n[i]))}return r}function _F(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,fQ(s,o,e))}return r}class rh extends rE{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lb extends rE{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Fb{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&_Q(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Tg(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Tg(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=iF();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=fF(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&Gd(this.mutations,e.mutations,(n,r)=>pF(n,r))&&Gd(this.baseMutations,e.baseMutations,(n,r)=>pF(n,r))}}class Ub{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){be(e.mutations.length===r.length);let i=lQ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ub(e,n,r,i)}}class Bb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class EQ{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ln,gt;function yF(t){switch(t){default:return me();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function vF(t){if(void 0===t)return Sn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Ln.OK:return L.OK;case Ln.CANCELLED:return L.CANCELLED;case Ln.UNKNOWN:return L.UNKNOWN;case Ln.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ln.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ln.INTERNAL:return L.INTERNAL;case Ln.UNAVAILABLE:return L.UNAVAILABLE;case Ln.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ln.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ln.NOT_FOUND:return L.NOT_FOUND;case Ln.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ln.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ln.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ln.ABORTED:return L.ABORTED;case Ln.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ln.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ln.DATA_LOSS:return L.DATA_LOSS;default:return me()}}(gt=Ln||(Ln={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";function EF(){return new TextEncoder}const IQ=new $d([4294967295,4294967295],0);function IF(t){const e=EF().encode(t),n=new pK;return n.update(e),new Uint8Array(n.digest())}function wF(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new $d([n,r],0),new $d([i,s],0)]}class jb{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cg(`Invalid padding: ${n}`);if(r<0)throw new Cg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Cg(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Cg(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=$d.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply($d.fromNumber(r)));return 1===i.compare(IQ)&&(i=new $d([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=IF(e),[r,i]=wF(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new jb(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const n=IF(e),[r,i]=wF(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Cg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bg{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Dg.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bg(De.min(),i,new Gt(Le),gi(),We())}}class Dg{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Dg(r,n,We(),We(),We())}}class sE{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class TF{constructor(e,n){this.targetId=e,this.fe=n}}class CF{constructor(e,n,r=Xn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class bF{constructor(){this.ge=0,this.pe=AF(),this.ye=Xn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=We(),n=We(),r=We();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:me()}}),new Dg(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=AF()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class wQ{constructor(e){this.Le=e,this.ke=new Map,this.qe=gi(),this.Qe=DF(),this.Ke=new Gt(Le)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:me()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(Jv(s))if(0===r){const o=new ue(s.path);this.We(n,o,en.newNoDocument(o,De.min()))}else be(1===r);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=qo(r).toUint8Array()}catch(u){if(u instanceof xL)return fi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new jb(o,i,s)}catch(u){return fi(u instanceof Cg?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Jv(a.target)){const u=new ue(a.target.path);null!==this.qe.get(u)||this.st(o,u)||this.We(o,u,en.newNoDocument(u,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=We();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Ye(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new bg(e,n,this.Ke,this.qe,r);return this.qe=gi(),this.Qe=DF(),this.Ke=new Gt(Le),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new bF,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Nt(Le),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||re("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new bF),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function DF(){return new Gt(ue.comparator)}function AF(){return new Gt(ue.comparator)}const TQ={asc:"ASCENDING",desc:"DESCENDING"},CQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bQ={and:"AND",or:"OR"};class DQ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $b(t,e){return t.useProto3Json||lg(e)?e:{value:e}}function ih(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AQ(t,e){return ih(t,e.toTimestamp())}function Rn(t){return be(!!t),De.fromTimestamp(function(n){const r=za(n);return new an(r.seconds,r.nanos)}(t))}function Hb(t,e){return(r=t,new pt(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function RF(t){const e=pt.fromString(t);return be(FF(e)),e}function Ag(t,e){return Hb(t.databaseId,e.path)}function po(t,e){const n=RF(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(xF(n))}function zb(t,e){return Hb(t.databaseId,e)}function PF(t){const e=RF(t);return 4===e.length?pt.emptyPath():xF(e)}function Sg(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xF(t){return be(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function MF(t,e,n){return{name:Ag(t,e),fields:n.value.mapValue.fields}}function NF(t,e,n){const r=po(t,e.name),i=Rn(e.updateTime),s=e.createTime?Rn(e.createTime):De.min(),o=new vr({mapValue:{fields:e.fields}}),a=en.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Rg(t,e){let n;if(e instanceof nh)n={update:MF(t,e.key,e.value)};else if(e instanceof rh)n={delete:Ag(t,e.key)};else if(e instanceof Ko)n={update:MF(t,e.key,e.data),updateMask:kQ(e.fieldMask)};else{if(!(e instanceof Lb))return me();n={verify:Ag(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof eh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ac)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof th)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw me()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:AQ(t,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:me()),n;var s}function Gb(t,e){const n=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?un.updateTime(Rn(s.updateTime)):void 0!==s.exists?un.exists(s.exists):un.none():un.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(be("REQUEST_TIME"===a.setToServerValue),u=new eh):"appendMissingElements"in a?u=new Dc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Ac(a.removeAllFromArray.values||[]):"increment"in a?u=new th(o,a.increment):me();const d=Xt.fromServerFormat(a.fieldPath);return new wg(d,u)}(t,i)):[];var s;if(e.update){const i=po(t,e.update.name),s=new vr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new pi((e.updateMask.fieldPaths||[]).map(f=>Xt.fromServerFormat(f)));return new Ko(i,s,o,n,r)}return new nh(i,s,n,r)}if(e.delete){const i=po(t,e.delete);return new rh(i,n)}if(e.verify){const i=po(t,e.verify);return new Lb(i,n)}return me()}function OF(t,e){return{documents:[zb(t,e.path)]}}function qb(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=zb(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=zb(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return LF(Pt.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(d=>{return{field:Qa((g=d).field),direction:MQ(g.dir)};var g})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=$b(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function kF(t){let e=PF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){be(1===r);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(g){const _=VF(g);return _ instanceof Pt&&xb(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(_=>{return new mg(sh((E=_).field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;n.limit&&(a=function(g){let _;return _="object"==typeof g?g.value:g,lg(_)?null:_}(n.limit));let u=null;var g;n.startAt&&(u=new Ka((g=n.startAt).values||[],!!g.before));let d=null;return n.endAt&&(d=function(g){return new Ka(g.values||[],!g.before)}(n.endAt)),QL(e,i,o,s,a,"F",u,d)}function VF(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=sh(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=sh(n.unaryFilter.field);return ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=sh(n.unaryFilter.field);return ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=sh(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return me()}}(t):void 0!==t.fieldFilter?ot.create(sh((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return me()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Pt.create(n.compositeFilter.filters.map(r=>VF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me()}}(n.compositeFilter.op))}(t):me();var n}function MQ(t){return TQ[t]}function NQ(t){return CQ[t]}function OQ(t){return bQ[t]}function Qa(t){return{fieldPath:t.canonicalString()}}function sh(t){return Xt.fromServerFormat(t.fieldPath)}function LF(t){return t instanceof ot?function(n){if("=="===n.op){if(OL(n.value))return{unaryFilter:{field:Qa(n.field),op:"IS_NAN"}};if(NL(n.value))return{unaryFilter:{field:Qa(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(OL(n.value))return{unaryFilter:{field:Qa(n.field),op:"IS_NOT_NAN"}};if(NL(n.value))return{unaryFilter:{field:Qa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qa(n.field),op:NQ(n.op),value:n.value}}}(t):t instanceof Pt?function(n){const r=n.getFilters().map(i=>LF(i));return 1===r.length?r[0]:{compositeFilter:{op:OQ(n.op),filters:r}}}(t):me()}function kQ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FF(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Qo{constructor(e,n,r,i,s=De.min(),o=De.min(),a=Xn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Qo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class UF{constructor(e){this.ut=e}}function BF(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:oE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ag(s=t.ut,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:ih(s,o.version.toTimestamp()),createTime:ih(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Sc(e.version)};else{if(!e.isUnknownDocument())return me();r.unknownDocument={path:n.path.toArray(),version:Sc(e.version)}}var s,o;return r}function oE(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Sc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rc(t){const e=new an(t.seconds,t.nanoseconds);return De.fromTimestamp(e)}function Pc(t,e){const n=(e.baseMutations||[]).map(s=>Gb(t.ut,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>Gb(t.ut,s)),i=an.fromMillis(e.localWriteTimeMs);return new Fb(e.batchId,i,n,r)}function Pg(t){const e=Rc(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Rc(t.lastLimboFreeSnapshotVersion):De.min();let r;return r=void 0!==t.query.documents?(be(1===(s=t.query).documents.length),ei(Yd(PF(s.documents[0])))):function(s){return ei(kF(s))}(t.query),new Qo(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Xn.fromBase64String(t.resumeToken));var s}function jF(t,e){const n=Sc(e.snapshotVersion),r=Sc(e.lastLimboFreeSnapshotVersion);let i;i=Jv(e.target)?OF(t.ut,e.target):qb(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:bc(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Wb(t){const e=kF({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?eE(e,e.limit,"L"):e}function Zb(t,e){return new Bb(e.largestBatchId,Gb(t.ut,e.overlayMutation))}function $F(t,e){const n=e.path.lastSegment();return[t,kr(e.path.popLast()),n]}function HF(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Sc(r.readTime),documentKey:kr(r.documentKey.path),largestBatchId:r.largestBatchId}}class LQ{getBundleMetadata(e,n){return zF(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Rc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return zF(e).put({bundleId:(i=n).id,createTime:Sc(Rn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return GF(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:Wb(s.bundledQuery),readTime:Rc(s.readTime)};var s})}saveNamedQuery(e,n){return GF(e).put({name:(i=n).name,readTime:Sc(Rn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function zF(t){return or(t,"bundles")}function GF(t){return or(t,"namedQueries")}class aE{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new aE(e,n.uid||"")}getOverlay(e,n){return xg(e).get($F(this.userId,n)).next(r=>r?Zb(this.serializer,r):null)}getOverlays(e,n){const r=fo();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Bb(n,o);i.push(this.lt(e,a))}),N.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(kr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(xg(e).H("collectionPathOverlayIndex",a))}),N.waitFor(s)}getOverlaysForCollection(e,n,r){const i=fo(),s=kr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return xg(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=Zb(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=fo();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return xg(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,d,f)=>{const g=Zb(this.serializer,d);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):f.done()}).next(()=>s)}lt(e,n){return xg(e).put(function(i,s,o){const[a,u,d]=$F(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Rg(i.ut,o.mutation)}}(this.serializer,this.userId,n))}}function xg(t){return or(t,"documentOverlays")}class xc{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(En(e.integerValue));else if("doubleValue"in e){const r=En(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),dg(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(qo(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?kL(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):me()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),ue.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function FQ(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function qF(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=FQ(255&r[s]);if(i+=o,8!==o)break}return i}(t);return Math.ceil(e/8)}xc.St=new xc;class UQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=qF(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=qF(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class BQ{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class jQ{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Mg{constructor(){this.Wt=new UQ,this.Gt=new BQ(this.Wt),this.zt=new jQ(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Mc{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Mc(this.indexId,this.documentKey,this.arrayValue,r)}}function Ya(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=WF(t.arrayValue,e.arrayValue),0!==n?n:(n=WF(t.directionalValue,e.directionalValue),0!==n?n:ue.comparator(t.documentKey,e.documentKey)))}function WF(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class ZF{constructor(e){this.Jt=new Nt((n,r)=>Xt.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(be(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=Tb(e);if(void 0!==n&&!this.tn(n))return!1;const r=Ic(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.nn(a,u)||!this.rn(this.Yt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Yt.length||!this.rn(this.Yt[o++],r[s]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Nt(Xt.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new wc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new wc(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new wc(r.field,"asc"===r.dir?0:1)));return new qd(qd.UNKNOWN_ID,this.collectionId,n,Wd.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function KF(t){var e,n;if(be(t instanceof ot||t instanceof Pt),t instanceof ot){if(t instanceof WL){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>ot.create(t.field,"==",s)))||[];return Pt.create(i,"or")}return t}const r=t.filters.map(i=>KF(i));return Pt.create(r,t.op)}function $Q(t){if(0===t.getFilters().length)return[];const e=Yb(KF(t));return be(QF(e)),Kb(e)||Qb(e)?[e]:e.getFilters()}function Kb(t){return t instanceof ot}function Qb(t){return t instanceof Pt&&xb(t)}function QF(t){return Kb(t)||Qb(t)||function(n){if(n instanceof Pt&&Pb(n)){for(const r of n.getFilters())if(!Kb(r)&&!Qb(r))return!1;return!0}return!1}(t)}function Yb(t){if(be(t instanceof ot||t instanceof Pt),t instanceof ot)return t;if(1===t.filters.length)return Yb(t.filters[0]);const e=t.filters.map(r=>Yb(r));let n=Pt.create(e,t.op);return n=uE(n),QF(n)?n:(be(n instanceof Pt),be(Qd(n)),be(n.filters.length>1),n.filters.reduce((r,i)=>Jb(r,i)))}function Jb(t,e){let n;return be(t instanceof ot||t instanceof Pt),be(e instanceof ot||e instanceof Pt),n=t instanceof ot?e instanceof ot?Pt.create([t,e],"and"):YF(t,e):e instanceof ot?YF(e,t):function(i,s){if(be(i.filters.length>0&&s.filters.length>0),Qd(i)&&Qd(s))return zL(i,s.getFilters());const o=Pb(i)?i:s,a=Pb(i)?s:i,u=o.filters.map(d=>Jb(d,a));return Pt.create(u,"or")}(t,e),uE(n)}function YF(t,e){if(Qd(e))return zL(e,t.getFilters());{const n=e.filters.map(r=>Jb(t,r));return Pt.create(n,"or")}}function uE(t){if(be(t instanceof ot||t instanceof Pt),t instanceof ot)return t;const e=t.getFilters();if(1===e.length)return uE(e[0]);if($L(t))return t;const n=e.map(i=>uE(i)),r=[];return n.forEach(i=>{i instanceof ot?r.push(i):i instanceof Pt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Pt.create(r,t.op)}class HQ{constructor(){this.on=new Xb}addToCollectionParentIndex(e,n){return this.on.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(Ri.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class Xb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Nt(pt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nt(pt.comparator)).toArray()}}const cE=new Uint8Array(0);class zQ{constructor(e,n){this.user=e,this.databaseId=n,this._n=new Xb,this.an=new Zo(r=>bc(r),(r,i)=>_g(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:r,parent:kr(i)};return JF(e).put(s)}return N.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[gL(n),""],!1,!0);return JF(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(lo(o.parent))}return r})}addFieldIndex(e,n){const r=Ng(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(n.indexState){const o=ah(e);return s.next(a=>{o.put(HF(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Ng(e),i=ah(e),s=oh(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Ng(e),r=oh(e),i=ah(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return N.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new ZF(r).sn();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=oh(e);let i=!0;const s=new Map;return N.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=We();const a=[];return N.forEach(s,(u,d)=>{var k;re("IndexedDbIndexManager",`Using index ${k=u,`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map(U=>`${U.fieldPath}:${U.kind}`).join(",")}`} to execute ${bc(n)}`);const f=function(k,U){const te=Tb(U);if(void 0===te)return null;for(const de of Xv(k,te.fieldPath))switch(de.op){case"array-contains-any":return de.value.arrayValue.values||[];case"array-contains":return[de.value]}return null}(d,u),g=function(k,U){const te=new Map;for(const de of Ic(U))for(const Se of Xv(k,de.fieldPath))switch(Se.op){case"==":case"in":te.set(de.fieldPath.canonicalString(),Se.value);break;case"not-in":case"!=":return te.set(de.fieldPath.canonicalString(),Se.value),Array.from(te.values())}return null}(d,u),_=function(k,U){const te=[];let de=!0;for(const Se of Ic(U)){const lt=0===Se.kind?ZL(k,Se.fieldPath,k.startAt):KL(k,Se.fieldPath,k.startAt);te.push(lt.value),de&&(de=lt.inclusive)}return new Ka(te,de)}(d,u),y=function(k,U){const te=[];let de=!0;for(const Se of Ic(U)){const lt=0===Se.kind?KL(k,Se.fieldPath,k.endAt):ZL(k,Se.fieldPath,k.endAt);te.push(lt.value),de&&(de=lt.inclusive)}return new Ka(te,de)}(d,u),E=this.ln(u,d,_),w=this.ln(u,d,y),b=this.hn(u,d,g),M=this.Pn(u.indexId,f,E,_.inclusive,w,y.inclusive,b);return N.forEach(M,R=>r.j(R,n.limit).next(k=>{k.forEach(U=>{const te=ue.fromSegments(U.documentKey);o.has(te)||(o=o.add(te),a.push(te))})}))}).next(()=>a)}return N.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:$Q(Pt.create(e.filters,"and")).map(r=>Nb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){const u=(null!=n?n.length:1)*Math.max(r.length,s.length),d=u/(null!=n?n.length:1),f=[];for(let g=0;g<u;++g){const _=n?this.In(n[g/d]):cE,y=this.Tn(e,_,r[g%d],i),E=this.En(e,_,s[g%d],o),w=a.map(b=>this.Tn(e,_,b,!0));f.push(...this.createRange(y,E,w))}return f}Tn(e,n,r,i){const s=new Mc(e,ue.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){const s=new Mc(e,ue.empty(),n,r);return i?s.Ht():s}cn(e,n){const r=new ZF(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.un(n);return N.forEach(i,s=>this.cn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new Nt(Xt.comparator),f=!1;for(const g of u.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?f=!0:d=d.add(_.field));for(const g of u.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new Mg;for(const i of Ic(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.jt(i.kind);xc.St.ht(s,o)}return r.Ut()}In(e){const n=new Mg;return xc.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new Mg;return xc.St.ht(Cc(this.databaseId,n),r.jt(function(s){const o=Ic(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new Mg);let s=0;for(const o of Ic(e)){const a=r[s++];for(const u of i)if(this.Rn(n,o.fieldPath)&&pg(a))i=this.Vn(i,o,a);else{const d=u.jt(o.kind);xc.St.ht(a,d)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Mg;u.seed(a.Ut()),xc.St.ht(o,u.jt(n.kind)),s.push(u)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof ot&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Ng(e),i=ah(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return N.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(f,g){const _=g?new Wd(g.sequenceNumber,new Ri(Rc(g.readTime),new ue(lo(g.documentKey)),g.largestBatchId)):Wd.empty(),y=f.fields.map(([E,w])=>new wc(Xt.fromServerFormat(E),w));return new qd(f.indexId,f.collectionGroup,y,_)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Le(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Ng(e),s=ah(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>N.forEach(a,u=>s.put(HF(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return N.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?N.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),N.forEach(a,u=>this.gn(e,i,u).next(d=>{const f=this.pn(s,u);return d.isEqual(f)?N.resolve():this.yn(e,s,u,d,f)}))))})}wn(e,n,r,i){return oh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return oh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=oh(e);let s=new Nt(Ya);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new Mc(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new Nt(Ya);const i=this.dn(n,e);if(null==i)return r;const s=Tb(n);if(null!=s){const o=e.data.field(s.fieldPath);if(pg(o))for(const a of o.arrayValue.values||[])r=r.add(new Mc(n.indexId,e.key,this.In(a),i))}else r=r.add(new Mc(n.indexId,e.key,cE,i));return r}yn(e,n,r,i,s){re("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,d,f,g,_){const y=u.getIterator(),E=d.getIterator();let w=Zd(y),b=Zd(E);for(;w||b;){let M=!1,R=!1;if(w&&b){const k=f(w,b);k<0?R=!0:k>0&&(M=!0)}else null!=w?R=!0:M=!0;M?(g(b),b=Zd(E)):R?(_(w),w=Zd(y)):(w=Zd(y),b=Zd(E))}}(i,s,Ya,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),N.waitFor(o)}fn(e){let n=1;return ah(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ya(o,a)).filter((o,a,u)=>!a||0!==Ya(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Ya(o,e),u=Ya(o,n);if(0===a)i[0]=e.Ht();else if(a>0&&u<0)i.push(o),i.push(o.Ht());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,cE,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,cE,[]]))}return s}bn(e,n){return Ya(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(XF)}getMinOffset(e,n){return N.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||me())).next(XF)}}function JF(t){return or(t,"collectionParents")}function oh(t){return or(t,"indexEntries")}function Ng(t){return or(t,"indexConfiguration")}function ah(t){return or(t,"indexState")}function XF(t){be(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Cb(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ri(e.readTime,e.documentKey,n)}const e2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vr(e,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function t2(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:o},(f,g,_)=>(a++,_.delete()));s.push(u.next(()=>{be(1===a)}));const d=[];for(const f of n.mutations){const g=CL(e,f.key.path,n.batchId);s.push(i.delete(g)),d.push(f.key)}return N.waitFor(s).next(()=>d)}function lE(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw me();e=t.noDocument}return JSON.stringify(e).length}Vr.DEFAULT_COLLECTION_PERCENTILE=10,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vr.DEFAULT=new Vr(41943040,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vr.DISABLED=new Vr(-1,0,0);class dE{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){be(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new dE(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ja(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=uh(e),o=Ja(e);return o.add({}).next(a=>{be("number"==typeof a);const u=new Fb(a,n,r,i),d=function(y,E,w){const b=w.baseMutations.map(R=>Rg(y.ut,R)),M=w.mutations.map(R=>Rg(y.ut,R));return{userId:E,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:b,mutations:M}}(this.serializer,this.userId,u),f=[];let g=new Nt((_,y)=>Le(_.canonicalString(),y.canonicalString()));for(const _ of i){const y=CL(this.userId,_.key.path,a);g=g.add(_.key.path.popLast()),f.push(o.put(d)),f.push(s.put(y,MK))}return g.forEach(_=>{f.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),N.waitFor(f).next(()=>u)})}lookupMutationBatch(e,n){return Ja(e).get(n).next(r=>r?(be(r.userId===this.userId),Pc(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?N.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ja(e).Y({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(be(a.batchId>=r),s=Pc(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ja(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ja(e).W("userMutationsIndex",n).next(r=>r.map(i=>Pc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Gv(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return uh(e).Y({range:i},(o,a,u)=>{const[d,f,g]=o,_=lo(f);if(d===this.userId&&n.path.isEqual(_))return Ja(e).get(g).next(y=>{if(!y)throw me();be(y.userId===this.userId),s.push(Pc(this.serializer,y))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nt(Le);const i=[];return n.forEach(s=>{const o=Gv(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=uh(e).Y({range:a},(d,f,g)=>{const[_,y,E]=d,w=lo(y);_===this.userId&&s.path.isEqual(w)?r=r.add(E):g.done()});i.push(u)}),N.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Gv(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Nt(Le);return uh(e).Y({range:o},(u,d,f)=>{const[g,_,y]=u,E=lo(_);g===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(y)):f.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Ja(e).get(s).next(o=>{if(null===o)throw me();be(o.userId===this.userId),r.push(Pc(this.serializer,o))}))}),N.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return t2(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),N.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return N.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return uh(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=lo(s[1]);i.push(u)}else a.done()}).next(()=>{be(0===i.length)})})}containsKey(e,n){return n2(e,this.userId,n)}Mn(e){return r2(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function n2(t,e,n){const r=Gv(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return uh(t).Y({range:s,J:!0},(a,u,d)=>{const[f,g,_]=a;f===e&&g===i&&(o=!0),d.done()}).next(()=>o)}function Ja(t){return or(t,"mutations")}function uh(t){return or(t,"documentMutations")}function r2(t){return or(t,"mutationQueues")}class Nc{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Nc(0)}static Nn(){return new Nc(-1)}}class GQ{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new Nc(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>De.fromTimestamp(new an(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ch(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(be(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return ch(e).Y((o,a)=>{const u=Pg(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>N.waitFor(s)).next(()=>i)}forEachTarget(e,n){return ch(e).Y((r,i)=>{const s=Pg(i);n(s)})}Bn(e){return i2(e).get("targetGlobalKey").next(n=>(be(null!==n),n))}Ln(e,n){return i2(e).put("targetGlobalKey",n)}kn(e,n){return ch(e).put(jF(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=bc(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ch(e).Y({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const d=Pg(a);_g(n,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Xa(e);return n.forEach(o=>{const a=kr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),N.waitFor(i)}removeMatchingKeys(e,n,r){const i=Xa(e);return N.forEach(n,s=>{const o=kr(s.path);return N.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Xa(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Xa(e);let s=We();return i.Y({range:r,J:!0},(o,a,u)=>{const d=lo(o[1]),f=new ue(d);s=s.add(f)}).next(()=>s)}containsKey(e,n){const r=kr(n.path),i=IDBKeyRange.bound([r],[gL(r)],!1,!0);let s=0;return Xa(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],u,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}_t(e,n){return ch(e).get(n).next(r=>r?Pg(r):null)}}function ch(t){return or(t,"targets")}function i2(t){return or(t,"targetGlobal")}function Xa(t){return or(t,"targetDocuments")}function s2([t,e],[n,r]){const i=Le(t,n);return 0===i?Le(e,r):i}class qQ{constructor(e){this.Qn=e,this.buffer=new Nt(s2),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();s2(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class o2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Z.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){$a(r)?re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ja(r)}yield n.Gn(3e5)}))}}class WQ{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return N.resolve(Pi._e);const r=new qQ(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(e2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),e2):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),zd()<=oo.in.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(d-u)+`ms\nTotal Duration: ${d-f}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class ZQ{constructor(e,n){this.db=e,this.garbageCollector=function a2(t,e){return new WQ(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return hE(e,r)}removeReference(e,n,r){return hE(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return hE(e,n)}Xn(e,n){return function(i,s){let o=!1;return r2(i).Z(a=>n2(i,a,s).next(u=>(u&&(o=!0),N.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=n){const u=this.Xn(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,De.min()),Xa(e).delete([0,kr(o.path)])))});i.push(u)}}).next(()=>N.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return hE(e,n)}Zn(e,n){const r=Xa(e);let i,s=Pi._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{0===o?(s!==Pi._e&&n(new ue(lo(i)),s),s=d,i=u):s=Pi._e}).next(()=>{s!==Pi._e&&n(new ue(lo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hE(t,e){return Xa(t).put((i=t.currentSequenceNumber,{targetId:0,path:kr(e.path),sequenceNumber:i}));var i}class u2{constructor(){this.changes=new Zo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class KQ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Oc(e).put(r)}removeEntry(e,n,r){return Oc(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],oE(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=en.newInvalidDocument(n);return Oc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Og(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:en.newInvalidDocument(n)};return Oc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Og(n))},(i,s)=>{r={document:this.tr(n,s),size:lE(s)}}).next(()=>r)}getEntries(e,n){let r=gi();return this.rr(e,n,(i,s)=>{const o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=gi(),i=new Gt(ue.comparator);return this.rr(e,n,(s,o)=>{const a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,lE(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return N.resolve();let i=new Nt(h2);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Og(i.first()),Og(i.last())),o=i.getIterator();let a=o.getNext();return Oc(e).Y({index:"documentKeyIndex",range:s},(u,d,f)=>{const g=ue.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&h2(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?f.U(Og(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),oE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Oc(e).W(IDBKeyRange.bound(a,u,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let f=gi();for(const g of d){const _=this.tr(ue.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(vg(n,_)||i.has(_.key))&&(f=f.insert(_.key,_))}return f})}getAllFromCollectionGroup(e,n,r,i){let s=gi();const o=d2(n,r),a=d2(n,Ri.max());return Oc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,f)=>{const g=this.tr(ue.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(g.key,g),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new QQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return l2(e).get("remoteDocumentGlobalKey").next(n=>(be(!!n),n))}er(e,n){return l2(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function VQ(t,e){let n;if(e.document)n=NF(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ue.fromSegments(e.noDocument.path),i=Rc(e.noDocument.readTime);n=en.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return me();{const r=ue.fromSegments(e.unknownDocument.path),i=Rc(e.unknownDocument.version);n=en.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new an(i[0],i[1]);return De.fromTimestamp(s)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(De.min()))return r}return en.newInvalidDocument(e)}}function c2(t){return new KQ(t)}class QQ extends u2{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Zo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Nt((s,o)=>Le(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=BF(this._r.serializer,o);i=i.add(s.path.popLast());const d=lE(u);r+=d-a.size,n.push(this._r.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=BF(this._r.serializer,o.convertToNoDocument(De.min()));n.push(this._r.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),N.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function l2(t){return or(t,"remoteDocumentGlobal")}function Oc(t){return or(t,"remoteDocumentsV14")}function Og(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function d2(t,e){const n=e.documentKey.path.toArray();return[t,oE(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function h2(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Le(n[s],r[s]),i)return i;return i=Le(n.length,r.length),i||(i=Le(n[n.length-2],r[r.length-2]),i||Le(n[n.length-1],r[r.length-1]))}class YQ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class f2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Tg(r.mutation,i,pi.empty(),an.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,n,r=We()){const i=fo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Eg();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=fo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,We()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=gi();const o=Ig(),a=Ig();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(void 0===f||f.mutation instanceof Ko)?s=s.insert(d.key,d):void 0!==f?(o.set(d.key,f.mutation.getFieldMask()),Tg(f.mutation,d,f.mutation.getFieldMask(),an.now())):o.set(d.key,pi.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var g;return a.set(d,new YQ(f,null!==(g=o.get(d))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ig();let i=new Gt((o,a)=>o-a),s=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=n.get(u);if(null===d)return;let f=r.get(u)||pi.empty();f=a.applyToLocalView(d,f),r.set(u,f);const g=(i.get(a.batchId)||We()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,f=u.value,g=iF();f.forEach(_=>{if(!s.has(_)){const y=fF(n.get(_),r.get(_));null!==y&&g.set(_,y),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return ue.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):Ob(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):N.resolve(fo());let a=-1,u=s;return o.next(d=>N.forEach(d,(f,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(f)?N.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,We())).next(f=>({batchId:a,changes:rF(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(r=>{let i=Eg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Eg();return this.indexManager.getCollectionParents(e,s).next(a=>N.forEach(a,u=>{const d=(g=n,_=u.child(s),new Wo(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const f=d.getKey();null===o.get(f)&&(o=o.insert(f,en.newInvalidDocument(f)))});let a=Eg();return o.forEach((u,d)=>{const f=s.get(u);void 0!==f&&Tg(f.mutation,d,pi.empty(),an.now()),vg(n,d)&&(a=a.insert(u,d))}),a})}}class JQ{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return N.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:Rn(i.createTime)}),N.resolve();var i}getNamedQuery(e,n){return N.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:Wb(i.bundledQuery),readTime:Rn(i.readTime)}),N.resolve();var i}}class XQ{constructor(){this.overlays=new Gt(ue.comparator),this.lr=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=fo();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const i=fo(),s=n.length+1,o=new ue(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return N.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Gt((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);null===f&&(f=fo(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=fo(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=i)););return N.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Bb(n,r));let s=this.lr.get(n);void 0===s&&(s=We(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}class eD{constructor(){this.hr=new Nt(ar.Pr),this.Ir=new Nt(ar.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new ar(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new ar(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new ue(new pt([])),r=new ar(n,e),i=new ar(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new ue(new pt([])),r=new ar(n,e),i=new ar(n,e+1);let s=We();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ar(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class ar{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return ue.comparator(e.key,n.key)||Le(e.gr,n.gr)}static Tr(e,n){return Le(e.gr,n.gr)||ue.comparator(e.key,n.key)}}class eY{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Nt(ar.Pr)}checkEmpty(e){return N.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++;const o=new Fb(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new ar(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),s=i<0?0:i;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ar(n,0),i=new ar(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nt(Le);return n.forEach(i=>{const s=new ar(i,0),o=new ar(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),N.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ue.isDocumentKey(s)||(s=s.child(""));const o=new ar(new ue(s),0);let a=new Nt(Le);return this.yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.gr)),!0)},o),N.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){be(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return N.forEach(n.mutations,i=>{const s=new ar(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new ar(n,0),i=this.yr.firstAfterOrEqual(r);return N.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return N.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class tY{constructor(e){this.Cr=e,this.docs=new Gt(ue.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let r=gi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():en.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=gi();const o=n.path,a=new ue(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Cb(_L(f),r)<=0||(i.has(f.key)||vg(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,n,r,i){me()}vr(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nY(this)}getSize(e){return N.resolve(this.size)}}class nY extends u2{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class rY{constructor(e){this.persistence=e,this.Fr=new Zo(n=>bc(n),_g),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.Mr=0,this.Or=new eD,this.targetCount=0,this.Nr=Nc.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),N.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Nc(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.kn(n),N.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(s).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.Or.containsKey(n))}}class tD{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Pi(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new rY(this),this.indexManager=new HQ,this.remoteDocumentCache=new tY(r=>this.referenceDelegate.Qr(r)),this.serializer=new UF(n),this.Kr=new JQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XQ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new eY(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const i=new iY(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return N.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class iY extends vL{constructor(e){super(),this.currentSequenceNumber=e}}class fE{constructor(e){this.persistence=e,this.Gr=new eD,this.zr=null}static jr(e){return new fE(e)}get Hr(){if(this.zr)return this.zr;throw me()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),N.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Hr,r=>{const i=ue.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,De.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return N.or([()=>N.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class sY{constructor(e){this.serializer=e}N(e,n,r,i){const s=new zv("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TL,{unique:!0}),u.createObjectStore("documentMutations"),p2(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=N.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),p2(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:De.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,d){return d.store("mutations").W().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TL,{unique:!0});const g=d.store("mutations"),_=f.map(y=>g.put(y));return N.waitFor(_)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:zK});d.createIndex("collectionPathOverlayIndex",GK,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",qK,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:NK});d.createIndex("documentKeyIndex",OK),d.createIndex("collectionGroupIndex",kK)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:BK}).createIndex("sequenceNumberIndex",jK,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:$K}).createIndex("documentKeyIndex",HK,{unique:!1})}(e))),o}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=lE(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>N.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>N.forEach(a,u=>{be(u.userId===s.userId);const d=Pc(this.serializer,u);return t2(e,s.userId,d).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const u=new pt(o),d=[0,kr(u)];s.push(n.get(d).next(f=>f?N.resolve():n.put({targetId:0,path:kr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>N.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:UK});const r=n.store("collectionParents"),i=new Xb,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:kr(u)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const u=new pt(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,u],d)=>{const f=lo(a);return s(f.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const s=Pg(i),o=jF(this.serializer,s);return n.put(o)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(g=o,g.document?new ue(pt.fromString(g.document.name).popFirst(5)):g.noDocument?ue.fromSegments(g.noDocument.path):g.unknownDocument?ue.fromSegments(g.unknownDocument.path):me()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(d))}).next(()=>N.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=c2(this.serializer),s=new tD(fE.jr,this.serializer.ut);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var d;let f=null!==(d=a.get(u.userId))&&void 0!==d?d:We();Pc(this.serializer,u).keys().forEach(g=>f=f.add(g)),a.set(u.userId,f)}),N.forEach(a,(u,d)=>{const f=new sr(d),g=aE.ct(this.serializer,f),_=s.getIndexManager(f),y=dE.ct(f,this.serializer,_,s.referenceDelegate);return new f2(i,y,g,_).recalculateAndSaveOverlaysForDocumentKeys(new Ab(n,Pi._e),u).next()})})}}function p2(t){t.createObjectStore("targetDocuments",{keyPath:LK}).createIndex("documentTargetsIndex",FK,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",VK,{unique:!0}),t.createObjectStore("targetGlobal")}const nD="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rD{constructor(e,n,r,i,s,o,a,u,d,f,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=d,this._i=f,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=_=>Promise.resolve(),!rD.D())throw new ee(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZQ(this,i),this.Ii=n+"main",this.serializer=new UF(u),this.Ti=new Rs(this.Ii,this.ai,new sY(this.serializer)),this.qr=new GQ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=c2(this.serializer),this.Kr=new LQ,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===f&&Sn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ee(L.FAILED_PRECONDITION,nD);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Pi(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,Z.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,Z.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,Z.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if($a(e))return re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return kg(e).get("owner").next(n=>N.resolve(this.wi(n)))}Si(e){return gE(e).delete(this.clientId)}bi(){var e=this;return(0,Z.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=or(r,"clientMetadata");return i.W().next(s=>{const o=e.Ci(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return N.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?N.resolve(!0):kg(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new ee(L.FAILED_PRECONDITION,nD);return!1}}return!(!this.networkEnabled||!this.inForeground)||gE(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&re("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Z.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new Ab(n,Pi._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>gE(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return dE.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zQ(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return aE.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){re("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=15===(u=this.ai)?ZK:14===u?AL:13===u?DL:12===u?WK:11===u?bL:void me();var u;let o;return this.Ti.runTransaction(e,i,s,a=>(o=new Ab(a,this.Lr?this.Lr.next():Pi._e),"readwrite-primary"===n?this.fi(o).next(u=>!!u||this.gi(o)).next(u=>{if(!u)throw Sn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new ee(L.FAILED_PRECONDITION,yL);return r(o)}).next(u=>this.yi(o).next(()=>u)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return kg(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ee(L.FAILED_PRECONDITION,nD)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kg(e).put("owner",n)}static D(){return Rs.D()}pi(e){const n=kg(e);return n.get("owner").next(r=>this.wi(r)?(re("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):N.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(Sn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,Ft.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Sn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Sn("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kg(t){return or(t,"owner")}function gE(t){return or(t,"clientMetadata")}function iD(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class sD{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=We(),i=We();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new sD(e,n.fromCache,r,i)}}class oY{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class g2{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new oY;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(zd()<=oo.in.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Xd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),N.resolve()):(zd()<=oo.in.DEBUG&&re("QueryEngine","Query:",Xd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(zd()<=oo.in.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Xd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ei(n))):N.resolve())}zi(e,n){if(YL(n))return N.resolve(null);let r=ei(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=eE(n,null,"F"),r=ei(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=We(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Yi(n,a);return this.Zi(n,d,o,u.readTime)?this.zi(e,eE(n,null,"F")):this.Xi(e,d,n,u)}))})))}ji(e,n,r,i){return YL(n)||i.isEqual(De.min())?N.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?N.resolve(null):(zd()<=oo.in.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xd(n)),this.Xi(e,o,n,mL(i,-1)).next(a=>a))})}Yi(e,n){let r=new Nt(tF(e));return n.forEach((i,s)=>{vg(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return zd()<=oo.in.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Xd(n)),this.Gi.getDocumentsMatchingQuery(e,n,Ri.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class aY{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Gt(Le),this.ns=new Zo(s=>bc(s),_g),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new f2(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function m2(t,e,n,r){return new aY(t,e,n,r)}function _2(t,e){return oD.apply(this,arguments)}function oD(){return oD=(0,Z.Z)(function*(t,e){const n=oe(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=We();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({_s:d,removedBatchIds:o,addedBatchIds:a}))})})}),oD.apply(this,arguments)}function y2(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function v2(t,e,n){let r=We(),i=We();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=gi();return n.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(De.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):re("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{us:o,cs:i}})}function lY(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lh(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,N.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new Qo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function dh(t,e,n){return aD.apply(this,arguments)}function aD(){return aD=(0,Z.Z)(function*(t,e,n){const r=oe(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!$a(o))throw o;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),aD.apply(this,arguments)}function mE(t,e,n){const r=oe(t);let i=De.min(),s=We();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const g=oe(u),_=g.ns.get(f);return void 0!==_?N.resolve(g.ts.get(_)):g.qr.getTargetData(d,f)}(r,o,ei(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:De.min(),n?s:We())).next(a=>(w2(r,eF(e),a),{documents:a,ls:s})))}function E2(t,e){const n=oe(t),r=oe(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function I2(t,e){const n=oe(t),r=n.rs.get(e)||De.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,mL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(w2(n,e,i),i))}function w2(t,e,n){let r=t.rs.get(e)||De.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}function uD(){return uD=(0,Z.Z)(function*(t,e,n,r){const i=oe(t);let s=We(),o=gi();for(const d of n){const f=e.hs(d.metadata.name);d.document&&(s=s.add(f));const g=e.Ps(d);g.setReadTime(e.Is(d.metadata.readTime)),o=o.insert(f,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield lh(i,(f=r,ei(Yd(pt.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>v2(d,a,o).next(f=>(a.apply(d),f)).next(f=>i.qr.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.qr.addMatchingKeys(d,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,f.us,f.cs)).next(()=>f.us)))}),uD.apply(this,arguments)}function hY(t,e){return cD.apply(this,arguments)}function cD(){return cD=(0,Z.Z)(function*(t,e,n=We()){const r=yield lh(t,ei(Wb(e.bundledQuery))),i=oe(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Rn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(s,e);const a=r.withResumeToken(Xn.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(s,a).next(()=>i.qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(s,e))})}),cD.apply(this,arguments)}function T2(t,e){return`firestore_clients_${t}_${e}`}function C2(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function lD(t,e){return`firestore_targets_${t}_${e}`}class _E{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new ee(i.error.code,i.error.message))),o?new _E(e,n,i.state,s):(Sn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vg{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ee(r.error.code,r.error.message))),s?new Vg(e,r.state,i):(Sn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yE{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Vb();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=IL(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new yE(e,s):(Sn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class dD{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new dD(n.clientId,n.onlineState):(Sn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class hD{constructor(){this.activeTargetIds=Vb()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fD{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Gt(Le),this.started=!1,this.ps=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=T2(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new hD),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Z.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const s=e.getItem(T2(e.persistenceKey,i));if(s){const o=yE.Ts(i,s);o&&(e.gs=e.gs.insert(o.clientId,o))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(lD(this.persistenceKey,e));if(r){const i=Vg.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(lD(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return re("SharedClientState","READ",e,n),n}setItem(e,n){re("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void Sn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,Z.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(o){let a=Pi._e;if(null!=o)try{const u=JSON.parse(o);be("number"==typeof u),a=u}catch(u){Sn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Pi._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Js(s)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new _E(this.currentUser,e,n,r),s=C2(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){const n=C2(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=lD(this.persistenceKey,e),s=new Vg(e,n,r);this.setItem(i,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return yE.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return _E.Ts(new sr(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return Vg.Ts(i,n)}Ms(e){return dD.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,Z.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=Vb();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class b2{constructor(){this.eo=new hD,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new hD,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fY{ro(e){}shutdown(){}}class D2{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let vE=null;function pD(){return null===vE?vE=268435456+Math.round(2147483648*Math.random()):vE++,"0x"+vE.toString(16)}const pY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gY{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Lr="WebChannelConnection";class mY extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=pD(),u=this.So(n,r);re("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(d,s,o),this.Do(n,u,d,i).then(f=>(re("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw fi("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+Hd,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){return`${this.mo}/v1/${r}:${pY[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const s=pD();return new Promise((o,a)=>{const u=new fK;u.setWithCredentials(!0),u.listenOnce(lK.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ib.NO_ERROR:const f=u.getResponseJson();re(Lr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Ib.TIMEOUT:re(Lr,`RPC '${e}' ${s} timed out`),a(new ee(L.DEADLINE_EXCEEDED,"Request time out"));break;case Ib.HTTP_ERROR:const g=u.getStatus();if(re(Lr,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const y=_?.error;if(y&&y.status&&y.message){const E=function(b){const M=b.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(M)>=0?M:L.UNKNOWN}(y.status);a(new ee(E,y.message))}else a(new ee(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ee(L.UNAVAILABLE,"Connection failed."));break;default:me()}}finally{re(Lr,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);re(Lr,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}vo(e,n,r){const i=pD(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=uK(),a=cK(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new hK({})),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");re(Lr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const g=o.createWebChannel(f,u);let _=!1,y=!1;const E=new gY({co:b=>{y?re(Lr,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(_||(re(Lr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),re(Lr,`RPC '${e}' stream ${i} sending:`,b),g.send(b))},lo:()=>g.close()}),w=(b,M,R)=>{b.listen(M,k=>{try{R(k)}catch(U){setTimeout(()=>{throw U},0)}})};return w(g,Hv.EventType.OPEN,()=>{y||re(Lr,`RPC '${e}' stream ${i} transport opened.`)}),w(g,Hv.EventType.CLOSE,()=>{y||(y=!0,re(Lr,`RPC '${e}' stream ${i} transport closed`),E.Ro())}),w(g,Hv.EventType.ERROR,b=>{y||(y=!0,fi(Lr,`RPC '${e}' stream ${i} transport errored:`,b),E.Ro(new ee(L.UNAVAILABLE,"The operation could not be completed")))}),w(g,Hv.EventType.MESSAGE,b=>{var M;if(!y){const R=b.data[0];be(!!R);const U=R.error||(null===(M=R[0])||void 0===M?void 0:M.error);if(U){re(Lr,`RPC '${e}' stream ${i} received error:`,U);const te=U.status;let de=function(cn){const ln=Ln[cn];if(void 0!==ln)return vF(ln)}(te),Se=U.message;void 0===de&&(de=L.INTERNAL,Se="Unknown error status: "+te+" with message "+U.message),y=!0,E.Ro(new ee(de,Se)),g.close()}else re(Lr,`RPC '${e}' stream ${i} received:`,R),E.Vo(R)}}),w(a,dK.STAT_EVENT,b=>{b.stat===lL.PROXY?re(Lr,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===lL.NOPROXY&&re(Lr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Ao()},0),E}}function A2(){return typeof window<"u"?window:null}function EE(){return typeof document<"u"?document:null}function Lg(t){return new DQ(t,!0)}class gD{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class S2{constructor(e,n,r,i,s,o,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new gD(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Z.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Z.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,Z.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Sn(n.toString()),Sn("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===L.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new ee(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Z.Z)(function*(){e.state=0,e.start()}))}o_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _Y extends S2{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function RQ(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:me(),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(be(void 0===f||"string"==typeof f),Xn.fromBase64String(f||"")):(be(void 0===f||f instanceof Uint8Array),Xn.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const f=void 0===d.code?L.UNKNOWN:vF(d.code);return new ee(f,d.message||"")}(o);n=new CF(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=po(t,r.document.name),s=Rn(r.document.updateTime),o=r.document.createTime?Rn(r.document.createTime):De.min(),a=new vr({mapValue:{fields:r.document.fields}}),u=en.newFoundDocument(i,s,o,a);n=new sE(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=po(t,r.document),s=r.readTime?Rn(r.readTime):De.min(),o=en.newNoDocument(i,s);n=new sE([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=po(t,r.document);n=new sE([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return me();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new EQ(i,s);n=new TF(r.targetId,o)}}var d;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return De.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?Rn(o.readTime):De.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=Sg(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Jv(u)?{documents:OF(s,u)}:{query:qb(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=SF(s,o.resumeToken);const d=$b(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=ih(s,o.snapshotVersion.toTimestamp());const d=$b(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function xQ(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=Sg(this.serializer),n.removeTarget=e,this.e_(n)}}class yY extends S2{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function PQ(t,e){return t&&t.length>0?(be(void 0!==e),t.map(n=>function(i,s){let o=Rn(i.updateTime?i.updateTime:s);return o.isEqual(De.min())&&(o=Rn(s)),new mQ(o,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.I_(r,n)}return be(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Sg(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Rg(this.serializer,r))};this.e_(n)}}class vY extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new ee(L.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ee(L.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee(L.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class IY{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Sn(n),this.f_=!1):re("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class wY{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{r.enqueueAndForget((0,Z.Z)(function*(){var u;eu(o)&&(re("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,Z.Z)(function*(f){const g=oe(f);g.C_.add(4),yield hh(g),g.M_.set("Unknown"),g.C_.delete(4),yield Fg(g)}),function d(f){return u.apply(this,arguments)})(o))}))}),this.M_=new IY(r,i)}}function Fg(t){return _D.apply(this,arguments)}function _D(){return _D=(0,Z.Z)(function*(t){if(eu(t))for(const e of t.v_)yield e(!0)}),_D.apply(this,arguments)}function hh(t){return yD.apply(this,arguments)}function yD(){return yD=(0,Z.Z)(function*(t){for(const e of t.v_)yield e(!1)}),yD.apply(this,arguments)}function IE(t,e){const n=oe(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),ID(n)?ED(n):ph(n).Ho()&&vD(n,e))}function Ug(t,e){const n=oe(t),r=ph(n);n.D_.delete(e),r.Ho()&&R2(n,e),0===n.D_.size&&(r.Ho()?r.Zo():eu(n)&&n.M_.set("Unknown"))}function vD(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ph(t).u_(e)}function R2(t,e){t.x_.Oe(e),ph(t).c_(e)}function ED(t){t.x_=new wQ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ph(t).start(),t.M_.g_()}function ID(t){return eu(t)&&!ph(t).jo()&&t.D_.size>0}function eu(t){return 0===oe(t).C_.size}function P2(t){t.x_=void 0}function TY(t){return wD.apply(this,arguments)}function wD(){return wD=(0,Z.Z)(function*(t){t.D_.forEach((e,n)=>{vD(t,e)})}),wD.apply(this,arguments)}function CY(t,e){return TD.apply(this,arguments)}function TD(){return TD=(0,Z.Z)(function*(t,e){P2(t),ID(t)?(t.M_.w_(e),ED(t)):t.M_.set("Unknown")}),TD.apply(this,arguments)}function bY(t,e,n){return CD.apply(this,arguments)}function CD(){return CD=(0,Z.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof CF&&2===e.state&&e.cause)try{yield(r=(0,Z.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.D_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.D_.delete(u),s.x_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wE(t,r)}else if(e instanceof sE?t.x_.$e(e):e instanceof TF?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(De.min()))try{const r=yield y2(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.D_.get(d);f&&s.D_.set(d,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const f=s.D_.get(u);if(!f)return;s.D_.set(u,f.withResumeToken(Xn.EMPTY_BYTE_STRING,f.snapshotVersion)),R2(s,u);const g=new Qo(f.target,u,d,f.sequenceNumber);vD(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){re("RemoteStore","Failed to raise snapshot:",r),yield wE(t,r)}var r}),CD.apply(this,arguments)}function wE(t,e,n){return bD.apply(this,arguments)}function bD(){return bD=(0,Z.Z)(function*(t,e,n){if(!$a(e))throw e;t.C_.add(1),yield hh(t),t.M_.set("Offline"),n||(n=()=>y2(t.localStore)),t.asyncQueue.enqueueRetryable((0,Z.Z)(function*(){re("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Fg(t)}))}),bD.apply(this,arguments)}function x2(t,e){return e().catch(n=>wE(t,n,e))}function fh(t){return DD.apply(this,arguments)}function DD(){return DD=(0,Z.Z)(function*(t){const e=oe(t),n=tu(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;DY(e);)try{const i=yield lY(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,AY(e,i)}catch(i){yield wE(e,i)}M2(e)&&N2(e)}),DD.apply(this,arguments)}function DY(t){return eu(t)&&t.b_.length<10}function AY(t,e){t.b_.push(e);const n=tu(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function M2(t){return eu(t)&&!tu(t).jo()&&t.b_.length>0}function N2(t){tu(t).start()}function SY(t){return AD.apply(this,arguments)}function AD(){return AD=(0,Z.Z)(function*(t){tu(t).E_()}),AD.apply(this,arguments)}function RY(t){return SD.apply(this,arguments)}function SD(){return SD=(0,Z.Z)(function*(t){const e=tu(t);for(const n of t.b_)e.P_(n.mutations)}),SD.apply(this,arguments)}function PY(t,e,n){return RD.apply(this,arguments)}function RD(){return RD=(0,Z.Z)(function*(t,e,n){const r=t.b_.shift(),i=Ub.from(r,e,n);yield x2(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield fh(t)}),RD.apply(this,arguments)}function xY(t,e){return PD.apply(this,arguments)}function PD(){return PD=(0,Z.Z)(function*(t,e){var n;e&&tu(t).h_&&(yield(n=(0,Z.Z)(function*(i,s){if(yF(a=s.code)&&a!==L.ABORTED){const o=i.b_.shift();tu(i).Yo(),yield x2(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield fh(i)}var a}),function r(i,s){return n.apply(this,arguments)})(t,e)),M2(t)&&N2(t)}),PD.apply(this,arguments)}function O2(t,e){return xD.apply(this,arguments)}function xD(){return xD=(0,Z.Z)(function*(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const r=eu(n);n.C_.add(3),yield hh(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Fg(n)}),xD.apply(this,arguments)}function MD(t,e){return ND.apply(this,arguments)}function ND(){return ND=(0,Z.Z)(function*(t,e){const n=oe(t);e?(n.C_.delete(2),yield Fg(n)):e||(n.C_.add(2),yield hh(n),n.M_.set("Unknown"))}),ND.apply(this,arguments)}function ph(t){return t.O_||(t.O_=function(n,r,i){const s=oe(n);return s.A_(),new _Y(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:TY.bind(null,t),Io:CY.bind(null,t),a_:bY.bind(null,t)}),t.v_.push(function(){var e=(0,Z.Z)(function*(n){n?(t.O_.Yo(),ID(t)?ED(t):t.M_.set("Unknown")):(yield t.O_.stop(),P2(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function tu(t){return t.N_||(t.N_=function(n,r,i){const s=oe(n);return s.A_(),new yY(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:SY.bind(null,t),Io:xY.bind(null,t),T_:RY.bind(null,t),I_:PY.bind(null,t)}),t.v_.push(function(){var e=(0,Z.Z)(function*(n){n?(t.N_.Yo(),yield fh(t)):(yield t.N_.stop(),t.b_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class OD{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new OD(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ee(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gh(t,e){if(Sn("AsyncQueue",`${e}: ${t}`),$a(t))return new ee(L.UNAVAILABLE,`${e}: ${t}`);throw t}class mh{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ue.comparator(n.key,r.key):(n,r)=>ue.comparator(n.key,r.key),this.keyedMap=Eg(),this.sortedSet=new Gt(this.comparator)}static emptySet(e){return new mh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new mh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class k2{constructor(){this.B_=new Gt(ue.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):me():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class _h{constructor(e,n,r,i,s,o,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new _h(e,n,mh.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class MY{constructor(){this.k_=void 0,this.listeners=[]}}class NY{constructor(){this.queries=new Zo(e=>XL(e),yg),this.onlineState="Unknown",this.q_=new Set}}function kD(t,e){return VD.apply(this,arguments)}function VD(){return VD=(0,Z.Z)(function*(t,e){const n=oe(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new MY),i)try{s.k_=yield n.onListen(r)}catch(o){const a=gh(o,`Initialization of query '${Xd(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&UD(n)}),VD.apply(this,arguments)}function LD(t,e){return FD.apply(this,arguments)}function FD(){return FD=(0,Z.Z)(function*(t,e){const n=oe(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),FD.apply(this,arguments)}function OY(t,e){const n=oe(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&UD(n)}function kY(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function UD(t){t.q_.forEach(e=>{e.next()})}class BD{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new _h(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=_h.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class VY{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class V2{constructor(e){this.serializer=e}hs(e){return po(this.serializer,e)}Ps(e){return e.metadata.exists?NF(this.serializer,e.document,!1):en.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Rn(e)}}class LY{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=L2(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=pt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new V2(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.hs(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||We()).add(s);n.set(o,a)}}return n}complete(){var e=this;return(0,Z.Z)(function*(){const n=yield function dY(t,e,n,r){return uD.apply(this,arguments)}(e.localStore,new V2(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield hY(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function L2(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class F2{constructor(e){this.key=e}}class U2{constructor(e){this.key=e}}class B2{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=We(),this.mutatedKeys=We(),this._a=tF(e),this.aa=new mh(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new k2,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{const _=i.get(f),y=vg(this.query,g)?g:null,E=!!_&&this.mutatedKeys.has(_.key),w=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let b=!1;_&&y?_.data.isEqual(y.data)?E!==w&&(r.track({type:3,doc:y}),b=!0):this.ha(_,y)||(r.track({type:2,doc:y}),b=!0,(u&&this._a(y,u)>0||d&&this._a(y,d)<0)&&(a=!0)):!_&&y?(r.track({type:0,doc:y}),b=!0):_&&!y&&(r.track({type:1,doc:_}),b=!0,(u||d)&&(a=!0)),b&&(y?(o=o.add(y),s=w?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort((d,f)=>function(_,y){const E=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me()}};return E(_)-E(y)}(d.type,f.type)||this._a(d.doc,f.doc)),this.Pa(r);const o=n?this.Ia():[],a=0===this.oa.size&&this.current?1:0,u=a!==this.sa;return this.sa=a,0!==s.length||u?{snapshot:new _h(this.query,e.aa,i,s,e.mutatedKeys,0===a,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new k2,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=We(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new U2(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new F2(r))}),n}da(e){this.ia=e.ls,this.oa=We();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return _h.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class FY{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class UY{constructor(e){this.key=e,this.Ra=!1}}class BY{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Zo(a=>XL(a),yg),this.fa=new Map,this.ga=new Set,this.pa=new Gt(ue.comparator),this.ya=new Map,this.wa=new eD,this.Sa={},this.ba=new Map,this.Da=Nc.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function jY(t,e){return jD.apply(this,arguments)}function jD(){return jD=(0,Z.Z)(function*(t,e){const n=lA(t);let r,i;const s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=yield lh(n.localStore,ei(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield $D(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&IE(n.remoteStore,o)}return i}),jD.apply(this,arguments)}function $D(t,e,n,r,i){return HD.apply(this,arguments)}function HD(){return HD=(0,Z.Z)(function*(t,e,n,r,i){t.va=(g,_,y)=>{return(E=(0,Z.Z)(function*(b,M,R,k){let U=M.view.ca(R);U.Zi&&(U=yield mE(b.localStore,M.query,!1).then(({documents:Se})=>M.view.ca(Se,U)));const te=k&&k.targetChanges.get(M.targetId),de=M.view.applyChanges(U,b.isPrimaryClient,te);return XD(b,M.targetId,de.Ta),de.snapshot}),function w(b,M,R,k){return E.apply(this,arguments)})(t,g,_,y);var E};const s=yield mE(t.localStore,e,!0),o=new B2(e,s.ls),a=o.ca(s.documents),u=Dg.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),d=o.applyChanges(a,t.isPrimaryClient,u);XD(t,n,d.Ta);const f=new FY(e,n,o);return t.ma.set(e,f),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),d.snapshot}),HD.apply(this,arguments)}function $Y(t,e){return zD.apply(this,arguments)}function zD(){return zD=(0,Z.Z)(function*(t,e){const n=oe(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!yg(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield dh(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Ug(n.remoteStore,r.targetId),yh(n,r.targetId)}).catch(ja))):(yh(n,r.targetId),yield dh(n.localStore,r.targetId,!0))}),zD.apply(this,arguments)}function GD(){return GD=(0,Z.Z)(function*(t,e,n){const r=dA(t);try{const i=yield function(o,a){const u=oe(o),d=an.now(),f=a.reduce((y,E)=>y.add(E.key),We());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=gi(),w=We();return u.ss.getEntries(y,f).next(b=>{E=b,E.forEach((M,R)=>{R.isValidDocument()||(w=w.add(M))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,E)).next(b=>{g=b;const M=[];for(const R of a){const k=yQ(R,g.get(R.key).overlayedDocument);null!=k&&M.push(new Ko(R.key,k,FL(k.value.mapValue),un.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,M,a)}).next(b=>{_=b;const M=b.applyToLocalDocumentSet(g,w);return u.documentOverlayCache.saveOverlays(y,b.batchId,M)})}).then(()=>({batchId:_.batchId,changes:rF(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.Sa[o.currentUser.toKey()];d||(d=new Gt(Le)),d=d.insert(a,u),o.Sa[o.currentUser.toKey()]=d}(r,i.batchId,n),yield Yo(r,i.changes),yield fh(r.remoteStore)}catch(i){const s=gh(i,"Failed to persist write");n.reject(s)}}),GD.apply(this,arguments)}function j2(t,e){return qD.apply(this,arguments)}function qD(){return qD=(0,Z.Z)(function*(t,e){const n=oe(t);try{const r=yield function cY(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((f,g)=>{const _=i.get(g);if(!_)return;a.push(n.qr.removeMatchingKeys(s,f.removedDocuments,g).next(()=>n.qr.addMatchingKeys(s,f.addedDocuments,g)));let y=_.withSequenceNumber(s.currentSequenceNumber);var w,b,M;null!==e.targetMismatches.get(g)?y=y.withResumeToken(Xn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(g,y),b=y,M=f,(0===(w=_).resumeToken.approximateByteSize()||b.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8||M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(s,y))});let u=gi(),d=We();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(v2(s,o,e.documentUpdates).next(f=>{u=f.us,d=f.cs})),!r.isEqual(De.min())){const f=n.qr.getLastRemoteSnapshotVersion(s).next(g=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return N.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.ts=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?be(o.Ra):i.removedDocuments.size>0&&(be(o.Ra),o.Ra=!1))}),yield Yo(n,r,e)}catch(r){yield ja(r)}}),qD.apply(this,arguments)}function $2(t,e,n){const r=oe(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=oe(o);u.onlineState=a;let d=!1;u.queries.forEach((f,g)=>{for(const _ of g.listeners)_.Q_(a)&&(d=!0)}),d&&UD(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zY(t,e,n){return WD.apply(this,arguments)}function WD(){return WD=(0,Z.Z)(function*(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new Gt(ue.comparator);o=o.insert(s,en.newNoDocument(s,De.min()));const a=We().add(s),u=new bg(De.min(),new Map,new Gt(Le),o,a);yield j2(r,u),r.pa=r.pa.remove(s),r.ya.delete(e),eA(r)}else yield dh(r.localStore,e,!1).then(()=>yh(r,e,n)).catch(ja)}),WD.apply(this,arguments)}function GY(t,e){return ZD.apply(this,arguments)}function ZD(){return ZD=(0,Z.Z)(function*(t,e){const n=oe(t),r=e.batch.batchId;try{const i=yield function uY(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,d,f){const g=d.batch,_=g.keys();let y=N.resolve();return _.forEach(E=>{y=y.next(()=>f.getEntry(u,E)).next(w=>{const b=d.docVersions.get(E);be(null!==b),w.version.compareTo(b)<0&&(g.applyToRemoteDocument(w,d),w.isValidDocument()&&(w.setReadTime(d.commitVersion),f.addEntry(w)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=We();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);JD(n,r,null),YD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Yo(n,i)}catch(i){yield ja(i)}}),ZD.apply(this,arguments)}function qY(t,e,n){return KD.apply(this,arguments)}function KD(){return KD=(0,Z.Z)(function*(t,e,n){const r=oe(t);try{const i=yield function(o,a){const u=oe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,a).next(g=>(be(null!==g),f=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);JD(r,e,n),YD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Yo(r,i)}catch(i){yield ja(i)}}),KD.apply(this,arguments)}function QD(){return QD=(0,Z.Z)(function*(t,e){const n=oe(t);eu(n.remoteStore)||re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=oe(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=gh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),QD.apply(this,arguments)}function YD(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function JD(t,e,n){const r=oe(t);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function yh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||H2(t,r)})}function H2(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(Ug(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),eA(t))}function XD(t,e,n){for(const r of n)r instanceof F2?(t.wa.addReference(r.key,e),ZY(t,r)):r instanceof U2?(re("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||H2(t,r.key)):me()}function ZY(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(re("SyncEngine","New document in limbo: "+n),t.ga.add(r),eA(t))}function eA(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new ue(pt.fromString(e)),r=t.Da.next();t.ya.set(r,new UY(n)),t.pa=t.pa.insert(n,r),IE(t.remoteStore,new Qo(ei(Yd(n.path)),r,"TargetPurposeLimboResolution",Pi._e))}}function Yo(t,e,n){return tA.apply(this,arguments)}function tA(){return tA=(0,Z.Z)(function*(t,e,n){const r=oe(t),i=[],s=[],o=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,u)=>{o.push(r.va(u,e,n).then(d=>{if((d||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,d?.fromCache?"not-current":"current"),d){i.push(d);const f=sD.Qi(u.targetId,d);s.push(f)}}))}),yield Promise.all(o),r.Va.a_(i),yield(a=(0,Z.Z)(function*(d,f){const g=oe(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>N.forEach(f,y=>N.forEach(y.ki,E=>g.persistence.referenceDelegate.addReference(_,y.targetId,E)).next(()=>N.forEach(y.qi,E=>g.persistence.referenceDelegate.removeReference(_,y.targetId,E)))))}catch(_){if(!$a(_))throw _;re("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of f){const y=_.targetId;if(!_.fromCache){const E=g.ts.get(y),b=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);g.ts=g.ts.insert(y,b)}}}),function u(d,f){return a.apply(this,arguments)})(r.localStore,s))}),tA.apply(this,arguments)}function KY(t,e){return nA.apply(this,arguments)}function nA(){return nA=(0,Z.Z)(function*(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const r=yield _2(n.localStore,e);n.currentUser=e,(s=n).ba.forEach(a=>{a.forEach(u=>{u.reject(new ee(L.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Yo(n,r._s)}var s}),nA.apply(this,arguments)}function QY(t,e){const n=oe(t),r=n.ya.get(e);if(r&&r.Ra)return We().add(r.key);{let i=We();const s=n.fa.get(e);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function YY(t,e){return rA.apply(this,arguments)}function rA(){return rA=(0,Z.Z)(function*(t,e){const n=oe(t),r=yield mE(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&XD(n,e.targetId,i.Ta),i}),rA.apply(this,arguments)}function JY(t,e){return iA.apply(this,arguments)}function iA(){return iA=(0,Z.Z)(function*(t,e){const n=oe(t);return I2(n.localStore,e).then(r=>Yo(n,r))}),iA.apply(this,arguments)}function XY(t,e,n,r){return sA.apply(this,arguments)}function sA(){return sA=(0,Z.Z)(function*(t,e,n,r){const i=oe(t),s=yield function(a,u){const d=oe(a),f=oe(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>f.Cn(g,u).next(_=>_?d.localDocuments.getDocuments(g,_):N.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===n?yield fh(i.remoteStore):"acknowledged"===n||"rejected"===n?(JD(i,e,r||null),YD(i,e),u=e,oe(oe(i.localStore).mutationQueue).Fn(u)):me(),yield Yo(i,s)):re("SyncEngine","Cannot apply mutation batch with id: "+e)}),sA.apply(this,arguments)}function oA(){return oA=(0,Z.Z)(function*(t,e){const n=oe(t);if(lA(n),dA(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield z2(n,r.toArray());n.Ca=!0,yield MD(n.remoteStore,!0);for(const s of i)IE(n.remoteStore,s)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(yh(n,o),dh(n.localStore,o,!0))),Ug(n.remoteStore,o)}),yield i,yield z2(n,r),function(o){const a=oe(o);a.ya.forEach((u,d)=>{Ug(a.remoteStore,d)}),a.wa.Vr(),a.ya=new Map,a.pa=new Gt(ue.comparator)}(n),n.Ca=!1,yield MD(n.remoteStore,!1)}}),oA.apply(this,arguments)}function z2(t,e,n){return aA.apply(this,arguments)}function aA(){return aA=(0,Z.Z)(function*(t,e,n){const r=oe(t),i=[],s=[];for(const o of e){let a;const u=r.fa.get(o);if(u&&0!==u.length){a=yield lh(r.localStore,ei(u[0]));for(const d of u){const f=r.ma.get(d),g=yield YY(r,f);g.snapshot&&s.push(g.snapshot)}}else{const d=yield E2(r.localStore,o);a=yield lh(r.localStore,d),yield $D(r,G2(d),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i}),aA.apply(this,arguments)}function G2(t){return QL(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function tJ(t){return n=oe(t).localStore,oe(oe(n).persistence).Bi();var n}function nJ(t,e,n,r){return uA.apply(this,arguments)}function uA(){return uA=(0,Z.Z)(function*(t,e,n,r){const i=oe(t);if(i.Ca)return void re("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield I2(i.localStore,eF(s[0])),a=bg.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Xn.EMPTY_BYTE_STRING);yield Yo(i,o,a);break}case"rejected":yield dh(i.localStore,e,!0),yh(i,e,r);break;default:me()}}),uA.apply(this,arguments)}function rJ(t,e,n){return cA.apply(this,arguments)}function cA(){return cA=(0,Z.Z)(function*(t,e,n){const r=lA(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){re("SyncEngine","Adding an already active target "+i);continue}const s=yield E2(r.localStore,i),o=yield lh(r.localStore,s);yield $D(r,G2(s),o.targetId,!1,o.resumeToken),IE(r.remoteStore,o)}for(const i of n)r.fa.has(i)&&(yield dh(r.localStore,i,!1).then(()=>{Ug(r.remoteStore,i),yh(r,i)}).catch(ja))}}),cA.apply(this,arguments)}function lA(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=j2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zY.bind(null,e),e.Va.a_=OY.bind(null,e.eventManager),e.Va.Fa=kY.bind(null,e.eventManager),e}function dA(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qY.bind(null,e),e}class Bg{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Z.Z)(function*(){n.serializer=Lg(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return m2(this.persistence,new g2,e.initialUser,this.serializer)}createPersistence(e){return new tD(fE.jr,this.serializer)}createSharedClientState(e){return new b2}terminate(){var e=this;return(0,Z.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class hA extends Bg{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,Z.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield dA(r.xa.syncEngine),yield fh(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return m2(this.persistence,new g2,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new o2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new PK(n,this.persistence);return new RK(e.asyncQueue,r)}createPersistence(e){const n=iD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Vr.withCacheSize(this.cacheSizeBytes):Vr.DEFAULT;return new rD(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,A2(),EE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new b2}}class q2 extends hA{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,Z.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof fD&&(r.sharedClientState.syncEngine={Ys:XY.bind(null,i),Zs:nJ.bind(null,i),Xs:rJ.bind(null,i),Bi:tJ.bind(null,i),Js:JY.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var s=(0,Z.Z)(function*(o){yield function eJ(t,e){return oA.apply(this,arguments)}(r.xa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const n=A2();if(!fD.D(n))throw new ee(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=iD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fD(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class vh{initialize(e,n){var r=this;return(0,Z.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>$2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=KY.bind(null,r.syncEngine),yield MD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new NY}createDatastore(e){const n=Lg(e.databaseInfo.databaseId),r=new mY(e.databaseInfo);return new vY(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>$2(this.syncEngine,n,0),a=D2.D()?new D2:new fY,new wY(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,d,f){const g=new BY(i,s,o,a,u,d);return f&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,Z.Z)(function*(r){const i=oe(r);re("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield hh(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function W2(t,e=10240){let n=0;return{read:()=>(0,Z.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,Z.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class TE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Sn("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class oJ{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Jn,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,Z.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,Z.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,Z.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const s=yield e.Ka(i);return new VY(JSON.parse(s),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,Z.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,Z.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,Z.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class aJ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Z.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new ee(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Z.Z)(function*(o,a){const u=oe(o),d=Sg(u.serializer)+"/documents",f={documents:a.map(E=>Ag(u.serializer,E))},g=yield u.Co("BatchGetDocuments",d,f,a.length),_=new Map;g.forEach(E=>{const w=function SQ(t,e){return"found"in e?function(r,i){be(!!i.found);const s=po(r,i.found.name),o=Rn(i.found.updateTime),a=i.found.createTime?Rn(i.found.createTime):De.min(),u=new vr({mapValue:{fields:i.found.fields}});return en.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){be(!!i.missing),be(!!i.readTime);const s=po(r,i.missing),o=Rn(i.readTime);return en.newNoDocument(s,o)}(t,e):me()}(u.serializer,E);_.set(w.key.toString(),w)});const y=[];return a.forEach(E=>{const w=_.get(E.toString());be(!!w),y.push(w)}),y}),function s(o,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new rh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Z.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=ue.fromPath(i);e.mutations.push(new Lb(s,e.precondition(s)))}),yield(r=(0,Z.Z)(function*(s,o){const a=oe(s),u=Sg(a.serializer)+"/documents",d={writes:o.map(f=>Rg(a.serializer,f))};yield a.wo("Commit",u,d)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw me();n=De.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ee(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(De.min())?un.exists(!1):un.updateTime(n):un.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(De.min()))throw new ee(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return un.updateTime(n)}return un.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class uJ{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new gD(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,Z.Z)(function*(){const n=new aJ(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.ja(s)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!lg(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!yF(n)}return!1}}class cJ{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=sr.UNAUTHENTICATED,this.clientId=pL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,Z.Z)(function*(a){re("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(re("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,Z.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ee(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Z.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=gh(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function CE(t,e){return fA.apply(this,arguments)}function fA(){return fA=(0,Z.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,Z.Z)(function*(s){r.isEqual(s)||(yield _2(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),fA.apply(this,arguments)}function pA(t,e){return gA.apply(this,arguments)}function gA(){return gA=(0,Z.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield mA(t);re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>O2(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>O2(e.remoteStore,s)),t._onlineComponents=e}),gA.apply(this,arguments)}function Z2(t){return"FirebaseError"===t.name?t.code===L.FAILED_PRECONDITION||t.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function mA(t){return _A.apply(this,arguments)}function _A(){return _A=(0,Z.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{yield CE(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Z2(n))throw n;fi("Error using user provided cache. Falling back to memory cache: "+n),yield CE(t,new Bg)}}else re("FirestoreClient","Using default OfflineComponentProvider"),yield CE(t,new Bg);return t._offlineComponents}),_A.apply(this,arguments)}function bE(t){return yA.apply(this,arguments)}function yA(){return yA=(0,Z.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),yield pA(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),yield pA(t,new vh))),t._onlineComponents}),yA.apply(this,arguments)}function K2(t){return mA(t).then(e=>e.persistence)}function Eh(t){return mA(t).then(e=>e.localStore)}function Q2(t){return bE(t).then(e=>e.remoteStore)}function vA(t){return bE(t).then(e=>e.syncEngine)}function Ih(t){return EA.apply(this,arguments)}function EA(){return EA=(0,Z.Z)(function*(t){const e=yield bE(t),n=e.eventManager;return n.onListen=jY.bind(null,e.syncEngine),n.onUnlisten=$Y.bind(null,e.syncEngine),n}),EA.apply(this,arguments)}function J2(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function(s,o,a,u,d){const f=new TE({next:_=>{o.enqueueAndForget(()=>LD(s,g));const y=_.docs.has(a);!y&&_.fromCache?d.reject(new ee(L.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&_.fromCache&&u&&"server"===u.source?d.reject(new ee(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new BD(Yd(a.path),f,{includeMetadataChanges:!0,J_:!0});return kD(s,g)}(yield Ih(t),t.asyncQueue,e,n,r)})),r.promise}function X2(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function(s,o,a,u,d){const f=new TE({next:_=>{o.enqueueAndForget(()=>LD(s,g)),_.fromCache&&"server"===u.source?d.reject(new ee(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new BD(a,f,{includeMetadataChanges:!0,J_:!0});return kD(s,g)}(yield Ih(t),t.asyncQueue,e,n,r)})),r.promise}function eU(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const tU=new Map;function IA(t,e,n){if(!n)throw new ee(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nU(t,e,n,r){if(!0===e&&!0===r)throw new ee(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rU(t){if(!ue.isDocumentKey(t))throw new ee(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function iU(t){if(ue.isDocumentKey(t))throw new ee(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function DE(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":me()}function it(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=DE(t);throw new ee(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function sU(t,e){if(e<=0)throw new ee(L.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class oU{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ee(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ee(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=eU(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new ee(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ee(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ee(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oU(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new _K;switch(r.type){case"firstParty":return new IK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=tU.get(n);r&&(re("ComponentProvider","Removing Datastore"),tU.delete(n),r.terminate())}(this),Promise.resolve()}}class Er{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Er(this.firestore,e,this._query)}}class tn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tn(this.firestore,e,this._key)}}class go extends Er{constructor(e,n,r){super(e,n,Yd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new ue(e))}withConverter(e){return new go(this.firestore,e,this._path)}}function uU(t,e,...n){if(t=(0,Ft.m9)(t),IA("collection","path",e),t instanceof jg){const r=pt.fromString(e,...n);return iU(r),new go(t,null,r)}{if(!(t instanceof tn||t instanceof go))throw new ee(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pt.fromString(e,...n));return iU(r),new go(t.firestore,null,r)}}function AE(t,e,...n){if(t=(0,Ft.m9)(t),1===arguments.length&&(e=pL.newId()),IA("doc","path",e),t instanceof jg){const r=pt.fromString(e,...n);return rU(r),new tn(t,null,new ue(r))}{if(!(t instanceof tn||t instanceof go))throw new ee(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pt.fromString(e,...n));return rU(r),new tn(t.firestore,t instanceof go?t.converter:null,new ue(r))}}function cU(t,e){return t=(0,Ft.m9)(t),e=(0,Ft.m9)(e),(t instanceof tn||t instanceof go)&&(e instanceof tn||e instanceof go)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function wA(t,e){return t=(0,Ft.m9)(t),e=(0,Ft.m9)(e),t instanceof Er&&e instanceof Er&&t.firestore===e.firestore&&yg(t._query,e._query)&&t.converter===e.converter}class IJ{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new gD(this,"async_queue_retry"),this.iu=()=>{const n=EE();n&&re("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=EE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=EE();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Jn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Z.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!$a(n))throw n;re("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,Sn("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=OD.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&me()}verifyOperationInProgress(){}uu(){var e=this;return(0,Z.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function TA(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class wJ{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class qt extends jg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new IJ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||lU(this),this._firestoreClient.terminate()}}function In(t){return t._firestoreClient||lU(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function lU(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new YK(t._databaseId,u,t._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,eU(f.experimentalLongPollingOptions),f.useFetchStreams));var u,f;t._firestoreClient=new cJ(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function dU(t,e,n){const r=new Jn;return t.asyncQueue.enqueue((0,Z.Z)(function*(){try{yield CE(t,n),yield pA(t,e),r.resolve()}catch(i){const s=i;if(!Z2(s))throw s;fi("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function hU(t){if(t._initialized||t._terminated)throw new ee(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class mo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mo(Xn.fromBase64String(e))}catch(n){throw new ee(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mo(Xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Jo{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new ee(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class kc{constructor(e){this._methodName=e}}class SE{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}const NJ=/^__.*__$/;class OJ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Ko(e,this.data,this.fieldMask,n,this.fieldTransforms):new nh(e,this.data,n,this.fieldTransforms)}}class fU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ko(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pU(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me()}}class RE{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new RE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return ME(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(pU(this.Iu)&&NJ.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class kJ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lg(e)}pu(e,n,r,i=!1){return new RE({Iu:e,methodName:n,gu:r,path:Xt.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vc(t){const e=t._freezeSettings(),n=Lg(t._databaseId);return new kJ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PE(t,e,n,r,i,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);AA("Data must be an object, but it was:",o,r);const a=_U(r,o);let u,d;if(s.merge)u=new pi(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const g of s.mergeFields){const _=zg(e,g,n);if(!o.contains(_))throw new ee(L.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);vU(f,_)||f.push(_)}u=new pi(f),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new OJ(new vr(a),u,d)}class Hg extends kc{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hg}}function gU(t,e,n){return new RE({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class CA extends kc{_toFieldTransform(e){return new wg(e.path,new eh)}isEqual(e){return e instanceof CA}}class VJ extends kc{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=gU(this,e,!0),r=this.yu.map(s=>Lc(s,n)),i=new Dc(r);return new wg(e.path,i)}isEqual(e){return this===e}}class LJ extends kc{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=gU(this,e,!0),r=this.yu.map(s=>Lc(s,n)),i=new Ac(r);return new wg(e.path,i)}isEqual(e){return this===e}}class FJ extends kc{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new th(e.serializer,aF(e.serializer,this.wu));return new wg(e.path,n)}isEqual(e){return this===e}}function bA(t,e,n,r){const i=t.pu(1,e,n);AA("Data must be an object, but it was:",i,r);const s=[],o=vr.empty();Ha(r,(u,d)=>{const f=xE(e,u,n);d=(0,Ft.m9)(d);const g=i.Ru(f);if(d instanceof Hg)s.push(f);else{const _=Lc(d,g);null!=_&&(s.push(f),o.set(f,_))}});const a=new pi(s);return new fU(o,a,i.fieldTransforms)}function DA(t,e,n,r,i,s){const o=t.pu(1,e,n),a=[zg(e,r,n)],u=[i];if(s.length%2!=0)throw new ee(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(zg(e,s[_])),u.push(s[_+1]);const d=[],f=vr.empty();for(let _=a.length-1;_>=0;--_)if(!vU(d,a[_])){const y=a[_];let E=u[_];E=(0,Ft.m9)(E);const w=o.Ru(y);if(E instanceof Hg)d.push(y);else{const b=Lc(E,w);null!=b&&(d.push(y),f.set(y,b))}}const g=new pi(d);return new fU(f,g,o.fieldTransforms)}function mU(t,e,n,r=!1){return Lc(n,t.pu(r?4:3,e))}function Lc(t,e){if(yU(t=(0,Ft.m9)(t)))return AA("Unsupported field value:",e,t),_U(t,e);if(t instanceof kc)return function(r,i){if(!pU(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Lc(a,i.Vu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if(null===(r=(0,Ft.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return aF(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=an.fromDate(r);return{timestampValue:ih(i.serializer,s)}}if(r instanceof an){const s=new an(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ih(i.serializer,s)}}if(r instanceof SE)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mo)return{bytesValue:SF(i.serializer,r._byteString)};if(r instanceof tn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Hb(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${DE(r)}`)}(t,e)}function _U(t,e){const n={};return RL(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ha(t,(r,i)=>{const s=Lc(i,e.Eu(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function yU(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof an||t instanceof SE||t instanceof mo||t instanceof tn||t instanceof kc)}function AA(t,e,n){if(!yU(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=DE(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function zg(t,e,n){if((e=(0,Ft.m9)(e))instanceof Jo)return e._internalPath;if("string"==typeof e)return xE(t,e);throw ME("Field path arguments must be of type string or ",t,!1,void 0,n)}const UJ=new RegExp("[~\\*/\\[\\]]");function xE(t,e,n){if(e.search(UJ)>=0)throw ME(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jo(...e.split("."))._internalPath}catch{throw ME(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ME(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ee(L.INVALID_ARGUMENT,a+t+u)}function vU(t,e){return t.some(n=>n.isEqual(e))}class Gg{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new BJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(NE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class BJ extends Gg{data(){return super.data()}}function NE(t,e){return"string"==typeof e?xE(t,e):e instanceof Jo?e._internalPath:e._delegate._internalPath}function EU(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new ee(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class SA{}class qg extends SA{}function nu(t,e,...n){let r=[];e instanceof SA&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof wh).length,a=s.filter(u=>u instanceof Wg).length;if(o>1||o>0&&a>0)throw new ee(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Wg extends qg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wg(e,n,r)}_apply(e){const n=this._parse(e);return CU(e._query,n),new Er(e.firestore,e.converter,kb(e._query,n))}_parse(e){const n=Vc(e.firestore);return function(s,o,a,u,d,f,g){let _;if(d.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new ee(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){TU(g,f);const y=[];for(const E of g)y.push(wU(u,s,E));_={arrayValue:{values:y}}}else _=wU(u,s,g)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||TU(g,f),_=mU(a,"where",g,"in"===f||"not-in"===f);return ot.create(d,f,_)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class wh extends SA{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Pt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)CU(o,u),o=kb(o,u)}(e._query,n),new Er(e.firestore,e.converter,kb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class RA extends qg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new RA(e,n)}_apply(e){const n=function(i,s,o){if(null!==i.startAt)throw new ee(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ee(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mg(s,o)}(e._query,this._field,this._direction);return new Er(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Wo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class OE extends qg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new OE(e,n,r)}_apply(e){return new Er(e.firestore,e.converter,eE(e._query,this._limit,this._limitType))}}class kE extends qg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new kE(e,n,r)}_apply(e){const n=IU(e,this.type,this._docOrFields,this._inclusive);return new Er(e.firestore,e.converter,(s=n,new Wo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class VE extends qg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new VE(e,n,r)}_apply(e){const n=IU(e,this.type,this._docOrFields,this._inclusive);return new Er(e.firestore,e.converter,(s=n,new Wo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function IU(t,e,n,r){if(n[0]=(0,Ft.m9)(n[0]),n[0]instanceof Gg)return function(s,o,a,u,d){if(!u)throw new ee(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const g of Jd(s))if(g.field.isKeyField())f.push(Cc(o,u.key));else{const _=u.data.field(g.field);if(Wv(_))throw new ee(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const y=g.field.canonicalString();throw new ee(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(_)}return new Ka(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Vc(t.firestore);return function(o,a,u,d,f,g){const _=o.explicitOrderBy;if(f.length>_.length)throw new ee(L.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let E=0;E<f.length;E++){const w=f[E];if(_[E].field.isKeyField()){if("string"!=typeof w)throw new ee(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof w}`);if(!Ob(o)&&-1!==w.indexOf("/"))throw new ee(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${w}' contains a slash.`);const b=o.path.child(pt.fromString(w));if(!ue.isDocumentKey(b))throw new ee(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const M=new ue(b);y.push(Cc(a,M))}else{const b=mU(u,d,w);y.push(b)}}return new Ka(y,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function wU(t,e,n){if("string"==typeof(n=(0,Ft.m9)(n))){if(""===n)throw new ee(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ob(e)&&-1!==n.indexOf("/"))throw new ee(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pt.fromString(n));if(!ue.isDocumentKey(r))throw new ee(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cc(t,new ue(r))}if(n instanceof tn)return Cc(t,n._key);throw new ee(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${DE(n)}.`)}function TU(t,e){if(!Array.isArray(t)||0===t.length)throw new ee(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CU(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new ee(L.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class PA{convertValue(e,n="none"){switch(Wa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return En(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw me()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ha(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new SE(En(e.latitude),En(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zv(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hg(e));default:return null}}convertTimestamp(e){const n=za(e);return new an(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pt.fromString(e);be(FF(r));const i=new Ga(r.get(1),r.get(3)),s=new ue(r.popFirst(5));return i.isEqual(n)||Sn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function LE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class KJ extends PA{constructor(e){super(),this.firestore=e}convertBytes(e){return new mo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,n)}}class Fc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xo extends Gg{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(NE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Zg extends Xo{data(e={}){return super.data(e)}}class ru{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Zg(this._firestore,this._userDataWriter,r.key,r,new Fc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Zg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new Zg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:YJ(a.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function YJ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me()}}function DU(t,e){return t instanceof Xo&&e instanceof Xo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ru&&e instanceof ru&&t._firestore===e._firestore&&wA(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class iu extends PA{constructor(e){super(),this.firestore=e}convertBytes(e){return new mo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,n)}}function AU(t,e,n){t=it(t,tn);const r=it(t.firestore,qt),i=LE(t.converter,e,n);return Th(r,[PE(Vc(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,un.none())])}function SU(t,e,n,...r){t=it(t,tn);const i=it(t.firestore,qt),s=Vc(i);let o;return o="string"==typeof(e=(0,Ft.m9)(e))||e instanceof Jo?DA(s,"updateDoc",t._key,e,n,r):bA(s,"updateDoc",t._key,e),Th(i,[o.toMutation(t._key,un.exists(!0))])}function RU(t,...e){var n,r,i;t=(0,Ft.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||TA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(TA(e[o])){const g=e[o];e[o]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,d,f;if(t instanceof tn)d=it(t.firestore,qt),f=Yd(t._key.path),u={next:g=>{e[o]&&e[o](xA(d,t,g))},error:e[o+1],complete:e[o+2]};else{const g=it(t,Er);d=it(g.firestore,qt),f=g._query;const _=new iu(d);u={next:y=>{e[o]&&e[o](new ru(d,_,g,y))},error:e[o+1],complete:e[o+2]},EU(t._query)}return function(_,y,E,w){const b=new TE(w),M=new BD(y,b,E);return _.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return kD(yield Ih(_),M)})),()=>{b.Na(),_.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return LD(yield Ih(_),M)}))}}(In(d),f,a,u)}function Th(t,e){return function(r,i){const s=new Jn;return r.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function HY(t,e,n){return GD.apply(this,arguments)}(yield vA(r),i,s)})),s.promise}(In(t),e)}function xA(t,e,n){const r=n.docs.get(e._key),i=new iu(t);return new Xo(t,i,e._key,r,new Fc(n.hasPendingWrites,n.fromCache),e.converter)}const gX={maxAttempts:5};class PU{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Vc(e)}set(e,n,r){this._verifyNotCommitted();const i=su(e,this._firestore),s=LE(i.converter,n,r),o=PE(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,un.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=su(e,this._firestore);let o;return o="string"==typeof(n=(0,Ft.m9)(n))||n instanceof Jo?DA(this._dataReader,"WriteBatch.update",s._key,n,r,i):bA(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,un.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=su(e,this._firestore);return this._mutations=this._mutations.concat(new rh(n._key,un.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ee(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function su(t,e){if((t=(0,Ft.m9)(t)).firestore!==e)throw new ee(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class mX extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Vc(n)}get(n){const r=su(n,this._firestore),i=new KJ(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return me();const o=s[0];if(o.isFoundDocument())return new Gg(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Gg(this._firestore,i,r._key,null,r.converter);throw me()})}set(n,r,i){const s=su(n,this._firestore),o=LE(s.converter,r,i),a=PE(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=su(n,this._firestore);let a;return a="string"==typeof(r=(0,Ft.m9)(r))||r instanceof Jo?DA(this._dataReader,"Transaction.update",o._key,r,i,s):bA(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=su(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=su(e,this._firestore),r=new iu(this._firestore);return super.get(e).then(i=>new Xo(this._firestore,r,n._key,i._document,new Fc(!1,!1),n.converter))}}function NA(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ee("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function OU(){if(typeof Uint8Array>"u")throw new ee("unimplemented","Uint8Arrays are not available in this environment.")}function kU(){if(!function KK(){return typeof atob<"u"}())throw new ee("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Hd=Nd.SDK_VERSION,(0,Nd._registerComponent)(new Z1.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new qt(new vK(r.getProvider("auth-internal")),new wK(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ee(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ga(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Nd.registerVersion)(dL,"4.3.2",e),(0,Nd.registerVersion)(dL,"4.3.2","esm2017")}();class Kg{constructor(e){this._delegate=e}static fromBase64String(e){return kU(),new Kg(mo.fromBase64String(e))}static fromUint8Array(e){return OU(),new Kg(mo.fromUint8Array(e))}toBase64(){return kU(),this._delegate.toBase64()}toUint8Array(){return OU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function OA(t){return function DX(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class AX{enableIndexedDbPersistence(e,n){return function CJ(t,e){hU(t=it(t,qt));const n=In(t);if(n._uninitializedComponentsProvider)throw new ee(L.FAILED_PRECONDITION,"SDK cache is already specified.");fi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new vh;return dU(n,i,new hA(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function bJ(t){hU(t=it(t,qt));const e=In(t);if(e._uninitializedComponentsProvider)throw new ee(L.FAILED_PRECONDITION,"SDK cache is already specified.");fi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new vh;return dU(e,r,new q2(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function DJ(t){if(t._initialized&&!t._terminated)throw new ee(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Jn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,Z.Z)(function*(){try{yield(n=(0,Z.Z)(function*(i){if(!Rs.D())return Promise.resolve();const s=i+"main";yield Rs.delete(s)}),function r(i){return n.apply(this,arguments)})(iD(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class VU{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ga||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&fi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function aU(t,e,n,r={}){var i;const s=(t=it(t,jg))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&fi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=sr.MOCK_USER;else{a=(0,Ft.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ee(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new sr(d)}t._authCredentials=new yK(new hL(a,u))}}(this._delegate,e,n,r)}enableNetwork(){return function SJ(t){return function lJ(t){return t.asyncQueue.enqueue((0,Z.Z)(function*(){const e=yield K2(t),n=yield Q2(t);return e.setNetworkEnabled(!0),function(i){const s=oe(i);return s.C_.delete(0),Fg(s)}(n)}))}(In(t=it(t,qt)))}(this._delegate)}disableNetwork(){return function RJ(t){return function dJ(t){return t.asyncQueue.enqueue((0,Z.Z)(function*(){const e=yield K2(t),n=yield Q2(t);return e.setNetworkEnabled(!1),(r=(0,Z.Z)(function*(s){const o=oe(s);o.C_.add(0),yield hh(o),o.M_.set("Offline")}),function i(s){return r.apply(this,arguments)})(n);var r}))}(In(t=it(t,qt)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,nU("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function AJ(t){return function(n){const r=new Jn;return n.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function WY(t,e){return QD.apply(this,arguments)}(yield vA(n),r)})),r.promise}(In(t=it(t,qt)))}(this._delegate)}onSnapshotsInSync(e){return function oX(t,e){return function pJ(t,e){const n=new TE(e);return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return i=yield Ih(t),s=n,oe(i).q_.add(s),void s.next();var i,s})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return i=yield Ih(t),s=n,void oe(i).q_.delete(s);var i,s}))}}(In(t=it(t,qt)),TA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ee("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ch(this,uU(this._delegate,e))}catch(n){throw ti(n,"collection()","Firestore.collection()")}}doc(e){try{return new rs(this,AE(this._delegate,e))}catch(n){throw ti(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ni(this,function EJ(t,e){if(t=it(t,jg),IA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ee(L.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Er(t,null,(r=e,new Wo(pt.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw ti(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function _X(t,e,n){t=it(t,qt);const r=Object.assign(Object.assign({},gX),n);return function(s){if(s.maxAttempts<1)throw new ee(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new Jn;return s.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){const d=yield function Y2(t){return bE(t).then(e=>e.datastore)}(s);new uJ(s.asyncQueue,d,a,o,u).run()})),u.promise}(In(t),i=>e(new mX(t,i)),r)}(this._delegate,n=>e(new LU(this,n)))}batch(){return In(this._delegate),new FU(new PU(this._delegate,e=>Th(this._delegate,e)))}loadBundle(e){return function PJ(t,e){const n=In(t=it(t,qt)),r=new wJ;return function gJ(t,e,n,r){const i=function(o,a){let u;return u="string"==typeof o?EF().encode(o):o,f=function(f,g){if(f instanceof Uint8Array)return W2(f,g);if(f instanceof ArrayBuffer)return W2(new Uint8Array(f),g);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new oJ(f,a);var f}(n,Lg(e));t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){!function iJ(t,e,n){const r=oe(t);var i;(i=(0,Z.Z)(function*(o,a,u){try{const d=yield a.getMetadata();if(yield function(E,w){const b=oe(E),M=Rn(w.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",R=>b.Kr.getBundleMetadata(R,w.id)).then(R=>!!R&&R.createTime.compareTo(M)>=0)}(o.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(E=d).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);u._updateProgress(L2(d));const f=new LY(d,o.localStore,a.serializer);let g=yield a.Ma();for(;g;){const y=yield f.ea(g);y&&u._updateProgress(y),g=yield a.Ma()}const _=yield f.complete();return yield Yo(o,_.ra,void 0),yield function(E,w){const b=oe(E);return b.persistence.runTransaction("Save bundle","readwrite",M=>b.Kr.saveBundleMetadata(M,w))}(o.localStore,d),u._completeWith(_.progress),Promise.resolve(_.na)}catch(d){return fi("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var E}),function s(o,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield vA(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function xJ(t,e){return function mJ(t,e){return t.asyncQueue.enqueue((0,Z.Z)(function*(){return function(r,i){const s=oe(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield Eh(t),e)}))}(In(t=it(t,qt)),e).then(n=>n?new Er(t,null,n.query):null)}(this._delegate,e).then(n=>n?new ni(this,n):null)}}class UE extends PA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kg(new mo(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return rs.forKey(n,this.firestore,null)}}class LU{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new UE(e)}get(e){const n=Bc(e);return this._delegate.get(n).then(r=>new Qg(this._firestore,new Xo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Bc(e);return r?(NA("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Bc(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Bc(e);return this._delegate.delete(n),this}}class FU{constructor(e){this._delegate=e}set(e,n,r){const i=Bc(e);return r?(NA("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Bc(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Bc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Uc{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Zg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Yg(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Uc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Uc(e,new UE(e),n),i.set(n,s)),s}}Uc.INSTANCES=new WeakMap;class rs{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new UE(e)}static forPath(e,n,r){if(e.length%2!=0)throw new ee("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new rs(n,new tn(n._delegate,r,new ue(e)))}static forKey(e,n,r){return new rs(n,new tn(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ch(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ch(this.firestore,uU(this._delegate,e))}catch(n){throw ti(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ft.m9)(e))instanceof tn&&cU(this._delegate,e)}set(e,n){n=NA("DocumentReference.set",n);try{return n?AU(this._delegate,e,n):AU(this._delegate,e)}catch(r){throw ti(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?SU(this._delegate,e):SU(this._delegate,e,n,...r)}catch(i){throw ti(i,"updateDoc()","DocumentReference.update()")}}delete(){return function iX(t){return Th(it(t.firestore,qt),[new rh(t._key,un.none())])}(this._delegate)}onSnapshot(...e){const n=UU(e),r=BU(e,i=>new Qg(this.firestore,new Xo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return RU(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function XJ(t){t=it(t,tn);const e=it(t.firestore,qt),n=In(e),r=new iu(e);return function hJ(t,e){const n=new Jn;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return(r=(0,Z.Z)(function*(s,o,a){try{const u=yield function(f,g){const _=oe(f);return _.persistence.runTransaction("read document","readonly",y=>_.localDocuments.getDocument(y,g))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ee(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=gh(u,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Eh(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Xo(e,r,t._key,i,new Fc(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function eX(t){t=it(t,tn);const e=it(t.firestore,qt);return J2(In(e),t._key,{source:"server"}).then(n=>xA(e,t,n))}(this._delegate):function JJ(t){t=it(t,tn);const e=it(t.firestore,qt);return J2(In(e),t._key).then(n=>xA(e,t,n))}(this._delegate),n.then(r=>new Qg(this.firestore,new Xo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new rs(this.firestore,this._delegate.withConverter(e?Uc.getInstance(this.firestore,e):null))}}function ti(t,e,n){return t.message=t.message.replace(e,n),t}function UU(t){for(const e of t)if("object"==typeof e&&!OA(e))return e;return{}}function BU(t,e){var n,r;let i;return i=OA(t[0])?t[0]:OA(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Qg{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new rs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return DU(this._delegate,e._delegate)}}class Yg extends Qg{data(e){const n=this._delegate.data(e);return this._delegate._converter||function mK(t,e){t||me()}(void 0!==n),n}}class ni{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new UE(e)}where(e,n,r){try{return new ni(this.firestore,nu(this._delegate,function jJ(t,e,n){const r=e,i=NE("where",t);return Wg._create(i,r,n)}(e,n,r)))}catch(i){throw ti(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new ni(this.firestore,nu(this._delegate,function $J(t,e="asc"){const n=e,r=NE("orderBy",t);return RA._create(r,n)}(e,n)))}catch(r){throw ti(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ni(this.firestore,nu(this._delegate,function HJ(t){return sU("limit",t),OE._create("limit",t,"F")}(e)))}catch(n){throw ti(n,"limit()","Query.limit()")}}limitToLast(e){try{return new ni(this.firestore,nu(this._delegate,function zJ(t){return sU("limitToLast",t),OE._create("limitToLast",t,"L")}(e)))}catch(n){throw ti(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ni(this.firestore,nu(this._delegate,function GJ(...t){return kE._create("startAt",t,!0)}(...e)))}catch(n){throw ti(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ni(this.firestore,nu(this._delegate,function qJ(...t){return kE._create("startAfter",t,!1)}(...e)))}catch(n){throw ti(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ni(this.firestore,nu(this._delegate,function WJ(...t){return VE._create("endBefore",t,!1)}(...e)))}catch(n){throw ti(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ni(this.firestore,nu(this._delegate,function ZJ(...t){return VE._create("endAt",t,!0)}(...e)))}catch(n){throw ti(n,"endAt()","Query.endAt()")}}isEqual(e){return wA(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function nX(t){t=it(t,Er);const e=it(t.firestore,qt),n=In(e),r=new iu(e);return function fJ(t,e){const n=new Jn;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return(r=(0,Z.Z)(function*(s,o,a){try{const u=yield mE(s,o,!0),d=new B2(o,u.ls),f=d.ca(u.documents),g=d.applyChanges(f,!1);a.resolve(g.snapshot)}catch(u){const d=gh(u,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Eh(t),e,n);var r})),n.promise}(n,t._query).then(i=>new ru(e,r,t,i))}(this._delegate):"server"===e?.source?function rX(t){t=it(t,Er);const e=it(t.firestore,qt),n=In(e),r=new iu(e);return X2(n,t._query,{source:"server"}).then(i=>new ru(e,r,t,i))}(this._delegate):function tX(t){t=it(t,Er);const e=it(t.firestore,qt),n=In(e),r=new iu(e);return EU(t._query),X2(n,t._query).then(i=>new ru(e,r,t,i))}(this._delegate),n.then(r=>new kA(this.firestore,new ru(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=UU(e),r=BU(e,i=>new kA(this.firestore,new ru(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return RU(this._delegate,n,r)}withConverter(e){return new ni(this.firestore,this._delegate.withConverter(e?Uc.getInstance(this.firestore,e):null))}}class RX{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Yg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kA{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new ni(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Yg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new RX(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Yg(this._firestore,r))})}isEqual(e){return DU(this._delegate,e._delegate)}}class Ch extends ni{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new rs(this.firestore,e):null}doc(e){try{return new rs(this.firestore,void 0===e?AE(this._delegate):AE(this._delegate,e))}catch(n){throw ti(n,"doc()","CollectionReference.doc()")}}add(e){return function sX(t,e){const n=it(t.firestore,qt),r=AE(t),i=LE(t.converter,e);return Th(n,[PE(Vc(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,un.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new rs(this.firestore,n))}isEqual(e){return cU(this._delegate,e._delegate)}withConverter(e){return new Ch(this.firestore,this._delegate.withConverter(e?Uc.getInstance(this.firestore,e):null))}}function Bc(t){return it(t,tn)}class VA{constructor(...e){this._delegate=new Jo(...e)}static documentId(){return new VA(Xt.keyField().canonicalString())}isEqual(e){return(e=(0,Ft.m9)(e))instanceof Jo&&this._delegate._internalPath.isEqual(e._internalPath)}}class jc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function vX(){return new CA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new jc(e)}static delete(){const e=function yX(){return new Hg("deleteField")}();return e._methodName="FieldValue.delete",new jc(e)}static arrayUnion(...e){const n=function EX(...t){return new VJ("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new jc(n)}static arrayRemove(...e){const n=function IX(...t){return new LJ("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new jc(n)}static increment(e){const n=function wX(t){return new FJ("increment",t)}(e);return n._methodName="FieldValue.increment",new jc(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const PX={Firestore:VU,GeoPoint:SE,Timestamp:an,Blob:Kg,Transaction:LU,WriteBatch:FU,DocumentReference:rs,DocumentSnapshot:Qg,Query:ni,QueryDocumentSnapshot:Yg,QuerySnapshot:kA,CollectionReference:Ch,FieldPath:VA,FieldValue:jc,setLogLevel:function SX(t){!function gK(t){Ba.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function jU(t,e){return function NX(t,e=M1){return new st(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function LA(t,e){return jU(t,e).pipe(_e(n=>({payload:n,type:"query"})))}!function MX(t){(function xX(t,e){t.INTERNAL.registerComponent(new Z1.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},PX)))})(t,(e,n)=>new VU(e,n,new AX)),t.registerVersion("@firebase/firestore-compat","0.3.22")}(so.Z);class $U{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=ZU(r,n);return new GU(i,s,this.afs)}snapshotChanges(){return function OX(t,e){return jU(t,e).pipe(Ky(void 0),NC(),_e(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ai)}valueChanges(e={}){return this.snapshotChanges().pipe(_e(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return A(this.ref.get(e)).pipe(Ai)}}function BE(t,e){return LA(t,e).pipe(Ky(void 0),NC(),_e(n=>{const[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=s.find(g=>g.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function HU(t,e,n){return BE(t,n).pipe(Yy((r,i)=>function kX(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function VX(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return FA(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return FA(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FA(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),Qt(),_e(r=>r.map(i=>({type:i.type,payload:i}))))}function FA(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function zU(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class GU{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=BE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(_e(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Ky(void 0),NC(),bs(([r,i])=>i.length>0||!r),_e(([,r])=>r),Ai)}auditTrail(e){return this.stateChanges(e).pipe(Yy((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=zU(e);return HU(this.query,n,this.afs.schedulers.outsideAngular).pipe(Ai)}valueChanges(e={}){return LA(this.query,this.afs.schedulers.outsideAngular).pipe(_e(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ai)}get(e){return A(this.query.get(e)).pipe(Ai)}add(e){return this.ref.add(e)}doc(e){return new $U(this.ref.doc(e),this.afs)}}class LX{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?BE(this.query,this.afs.schedulers.outsideAngular).pipe(_e(n=>n.filter(r=>e.indexOf(r.type)>-1)),bs(n=>n.length>0),Ai):BE(this.query,this.afs.schedulers.outsideAngular).pipe(Ai)}auditTrail(e){return this.stateChanges(e).pipe(Yy((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=zU(e);return HU(this.query,n,this.afs.schedulers.outsideAngular).pipe(Ai)}valueChanges(e={}){return LA(this.query,this.afs.schedulers.outsideAngular).pipe(_e(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ai)}get(e){return A(this.query.get(e)).pipe(Ai)}}const qU=new ce("angularfire2.enableFirestorePersistence"),WU=new ce("angularfire2.firestore.persistenceSettings"),FX=new ce("angularfire2.firestore.settings"),UX=new ce("angularfire2.firestore.use-emulator");function ZU(t,e=(n=>n)){return{query:e(t),ref:t}}let jE=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,d,f,g,_,y,E,w,b,M,R){this.schedulers=u;const k=xC(n,a,r),U=f;g&&W1(k,a,_,E,w,b,y,M),[this.firestore,this.persistenceEnabled$]=L1(`${k.name}.firestore`,"AngularFirestore",k.name,()=>{const te=a.runOutsideAngular(()=>k.firestore());if(s&&te.settings(s),U&&te.useEmulator(...U),i&&!Hy(o)){const de=()=>{try{return A(te.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(Se){return typeof console<"u"&&console.warn(Se),G(!1)}};return[te,a.runOutsideAngular(de)]}return[te,G(!1)]},[s,U,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=ZU(i,r),a=this.schedulers.ngZone.run(()=>s);return new GU(a,o,this)}collectionGroup(n,r){const i=r||(o=>o),s=this.firestore.collectionGroup(n);return new LX(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new $U(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(se(gv),se(mv,8),se(qU,8),se(FX,8),se(No),se(Ct),se(k1),se(WU,8),se(UX,8),se(MC,8),se(j1,8),se($1,8),se(H1,8),se(z1,8),se(G1,8),se(q1,8),se(N1,8))};static \u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),KU=(()=>{class t{constructor(){so.Z.registerVersion("angularfire",PC.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:qU,useValue:!0},{provide:WU,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Rr({type:t});static \u0275inj=Dr({providers:[jE]})}return t})(),Jg=(()=>{class t{constructor(n,r){this.afAuth=n,this.firestore=r,this.currentUserSubject=new P(null),this.currentUser$=this.currentUserSubject.asObservable(),this.initializeUserFromLocalStorage()}mapFirebaseUserToCustomUser(n){return{uid:n.uid,name:n.displayName||"Nan"}}initializeUserFromLocalStorage(){const n=localStorage.getItem("userUid"),r=localStorage.getItem("userName");n&&r?this.getUserByUid(n).subscribe(i=>{i&&this.currentUserSubject.next(i)}):this.currentUserSubject.next(null)}isLoggedIn(){return this.currentUser$.pipe(_e(n=>!!n))}signInAnonymously(n){var r=this;return(0,Z.Z)(function*(){try{const i=yield r.afAuth.signInAnonymously();i.user?(localStorage.setItem("userUid",i.user.uid),localStorage.setItem("userName",n),r.currentUserSubject.next(r.mapFirebaseUserToCustomUser(i.user)),r.updateUserData(i.user,n)):console.error("Failed to sign in anonymously")}catch(i){throw console.error("Error during anonymous sign-in:",i),new Error("Error during anonymous sign-in")}})()}getUserByUid(n){return this.firestore.collection("users").doc(n).valueChanges().pipe(_e(r=>{if(r)return{uid:r.uid,name:r.name};throw new Error("User Not Found By UID")}))}updateUserData(n,r){n&&this.firestore.collection("users").doc(n.uid).set({uid:n.uid,name:r},{merge:!0})}static#e=this.\u0275fac=function(r){return new(r||t)(se(MC),se(jE))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),UA=(()=>{class t{constructor(){}isValidInput(n){return!(!n||0===n.length||n.length>20||/[^a-zA-Z0-9\-_ \u0104\u0105\u0106\u0107\u0118\u0119\u0141\u0142\u0143\u0144\xd3\xf3\u015a\u015b\u0179\u017a\u017b\u017c]/.test(n))}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),QU=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(J(Oo),J(Ti))};static#t=this.\u0275dir=Pe({type:t})}return t})(),$c=(()=>{class t extends QU{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Kn(t)))(i||t)}}();static#t=this.\u0275dir=Pe({type:t,features:[At]})}return t})();const _o=new ce("NgValueAccessor"),$X={provide:_o,useExisting:O(()=>bh),multi:!0},zX=new ce("CompositionEventMode");let bh=(()=>{class t extends QU{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function HX(){const t=Ma()?Ma().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(J(Oo),J(Ti),J(zX,8))};static#t=this.\u0275dir=Pe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&ct("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[on([$X]),At]})}return t})();const Fr=new ce("NgValidators"),au=new ce("NgAsyncValidators");function tB(t){return function ou(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}(t.value)?{required:!0}:null}function $E(t){return null}function aB(t){return null!=t}function uB(t){return sp(t)?A(t):t}function cB(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function lB(t,e){return e.map(n=>n(t))}function dB(t){return t.map(e=>function qX(t){return!t.validate}(e)?e:n=>e.validate(n))}function BA(t){return null!=t?function hB(t){if(!t)return null;const e=t.filter(aB);return 0==e.length?null:function(n){return cB(lB(n,e))}}(dB(t)):null}function jA(t){return null!=t?function fB(t){if(!t)return null;const e=t.filter(aB);return 0==e.length?null:function(n){return function BX(...t){const e=ra(t),{args:n,keys:r}=Ik(t),i=new st(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,d=o;for(let f=0;f<o;f++){let g=!1;Tn(n[f]).subscribe(pe(s,_=>{g||(g=!0,d--),a[f]=_},()=>u--,void 0,()=>{(!u||!g)&&(d||s.next(r?Tk(r,a):a),s.complete())}))}});return e?i.pipe(wk(e)):i}(lB(n,e).map(uB)).pipe(_e(cB))}}(dB(t)):null}function pB(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function $A(t){return t?Array.isArray(t)?t:[t]:[]}function HE(t,e){return Array.isArray(t)?t.includes(e):t===e}function _B(t,e){const n=$A(e);return $A(t).forEach(i=>{HE(n,i)||n.push(i)}),n}function yB(t,e){return $A(e).filter(n=>!HE(t,n))}class vB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=BA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class ri extends vB{get formDirective(){return null}get path(){return null}}class uu extends vB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class EB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let zE=(()=>{class t extends EB{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(J(uu,2))};static#t=this.\u0275dir=Pe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&op("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[At]})}return t})(),IB=(()=>{class t extends EB{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(J(ri,10))};static#t=this.\u0275dir=Pe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&op("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[At]})}return t})();const Xg="VALID",qE="INVALID",Dh="PENDING",em="DISABLED";function GA(t){return(WE(t)?t.validators:t)||null}function qA(t,e){return(WE(e)?e.asyncValidators:t)||null}function WE(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class bB{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Xg}get invalid(){return this.status===qE}get pending(){return this.status==Dh}get disabled(){return this.status===em}get enabled(){return this.status!==em}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(_B(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_B(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(yB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(yB(e,this._rawAsyncValidators))}hasValidator(e){return HE(this._rawValidators,e)}hasAsyncValidator(e){return HE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Dh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=em,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Xg,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xg||this.status===Dh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?em:Xg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Dh,this._hasOwnPendingAsyncValidator=!0;const n=uB(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new _n,this.statusChanges=new _n}_calculateStatus(){return this._allControlsDisabled()?em:this.errors?qE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Dh)?Dh:this._anyControlsHaveStatus(qE)?qE:Xg}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){WE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function QX(t){return Array.isArray(t)?BA(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function YX(t){return Array.isArray(t)?jA(t):t||null}(this._rawAsyncValidators)}}class WA extends bB{constructor(e,n,r){super(GA(n),qA(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function CB(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new $(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function TB(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[n])throw new $(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Ah=new ce("CallSetDisabledState",{providedIn:"root",factory:()=>ZE}),ZE="always";function tm(t,e,n=ZE){ZA(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function eee(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&DB(t,e)})}(t,e),function nee(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function tee(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&DB(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function XX(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function YE(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function ZA(t,e){const n=function gB(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(pB(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function mB(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(pB(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();YE(e._rawValidators,i),YE(e._rawAsyncValidators,i)}function DB(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const aee={provide:ri,useExisting:O(()=>XE)},nm=(()=>Promise.resolve())();let XE=(()=>{class t extends ri{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new _n,this.form=new WA({},BA(n),jA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){nm.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),tm(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){nm.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){nm.then(()=>{const r=this._findContainer(n.path),i=new WA({});(function AB(t,e){ZA(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){nm.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){nm.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function SB(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(r){return new(r||t)(J(Fr,10),J(au,10),J(Ah,8))};static#t=this.\u0275dir=Pe({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&ct("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[on([aee]),At]})}return t})();function RB(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function PB(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const xB=class extends bB{constructor(e=null,n,r){super(GA(n),qA(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),WE(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=PB(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){RB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){RB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){PB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},lee={provide:uu,useExisting:O(()=>rm)},OB=(()=>Promise.resolve())();let rm=(()=>{class t extends uu{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new xB,this._registered=!1,this.name="",this.update=new _n,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function YA(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===bh?n=s:function see(t){return Object.getPrototypeOf(t.constructor)===$c}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function QA(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){tm(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){OB.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&wd(r);OB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function KE(t,e){return[...e.path,t]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||t)(J(ri,9),J(Fr,10),J(au,10),J(_o,10),J(Dy,8),J(Ah,8))};static#t=this.\u0275dir=Pe({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[on([lee]),At,Gr]})}return t})(),kB=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Pe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})();const dee={provide:_o,useExisting:O(()=>JA),multi:!0};let JA=(()=>{class t extends $c{writeValue(n){this.setProperty("value",n??"")}registerOnChange(n){this.onChange=r=>{n(""==r?null:parseFloat(r))}}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Kn(t)))(i||t)}}();static#t=this.\u0275dir=Pe({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&ct("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[on([dee]),At]})}return t})(),VB=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Rr({type:t});static#n=this.\u0275inj=Dr({})}return t})(),Hc=(()=>{class t{constructor(){this._validator=$E}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):$E,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Pe({type:t,features:[Gr]})}return t})();const See={provide:Fr,useExisting:O(()=>eI),multi:!0};let eI=(()=>{class t extends Hc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=wd,this.createValidator=n=>tB}enabled(n){return n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Kn(t)))(i||t)}}();static#t=this.\u0275dir=Pe({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&eo("required",i._enabled?"":null)},inputs:{required:"required"},features:[on([See]),At]})}return t})(),Oee=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Rr({type:t});static#n=this.\u0275inj=Dr({imports:[VB]})}return t})(),Vee=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Ah,useValue:n.callSetDisabledState??ZE}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Rr({type:t});static#n=this.\u0275inj=Dr({imports:[Oee]})}return t})(),Lee=(()=>{class t{constructor(n,r,i){this.loginService=n,this.validator=r,this.router=i,this.userName="",this.loginService.currentUser$.subscribe(s=>{s&&this.router.navigate(["/home"])})}signIn(n){if(!this.validator.isValidInput(n))throw new Error("Invalid Input Data");this.loginService.signInAnonymously(n).then(()=>{this.router.navigate(["/home"])}).catch(r=>{throw console.error(r),new Error("Error Occurred While Signing In")})}static#e=this.\u0275fac=function(r){return new(r||t)(J(Jg),J(UA),J(gr))};static#t=this.\u0275cmp=Bi({type:t,selectors:[["app-login"]],decls:7,vars:1,consts:[[1,"bg-gray-800","h-screen","flex","flex-col"],[1,"text-white","text-4xl","font-bold","mt-20","mb-4","text-center"],[1,"flex","flex-col","items-center","justify-center","flex-grow","mt-4"],["type","text","placeholder","Enter your name",1,"mb-4","p-2","rounded-full","shadow-lg","text-lg",3,"ngModel","ngModelChange"],[1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded-full","shadow-lg","text-lg","transition","duration-300","ease-in-out","transform","hover:-translate-y-1","hover:scale-110",3,"click"]],template:function(r,i){1&r&&($e(0,"div",0)(1,"h1",1),bt(2," Shared Shopping List "),Qe(),$e(3,"div",2)(4,"input",3),ct("ngModelChange",function(o){return i.userName=o}),Qe(),$e(5,"button",4),ct("click",function(){return i.signIn(i.userName)}),bt(6," Sign In "),Qe()()()),2&r&&(Vt(4),Dn("ngModel",i.userName))},dependencies:[bh,zE,rm]})}return t})(),ej=(()=>{class t{constructor(n,r){this.firestore=n,this.firestoreModule=r,this.userGroupsSubject=new P([]),this.userGroups$=this.userGroupsSubject.asObservable(),this.selectedGroupSubject=new P(null),this.selectedGroup$=this.selectedGroupSubject.asObservable(),this.groupUsersSubject=new P([]),this.groupUsers$=this.groupUsersSubject.asObservable()}fetchUserGroups(n){this.firestore.collection("groups",r=>r.where("users","array-contains",n)).snapshotChanges().pipe(_e(r=>r.map(i=>{const s=i.payload.doc.data();return{uid:i.payload.doc.id,...s}}))).subscribe(r=>{this.userGroupsSubject.next(r)})}selectGroup(n){this.selectedGroupSubject.next(n),this.fetchGroupUsers(n.users)}fetchGroupUsers(n){const r=[];n.forEach(i=>{this.firestore.collection("users").doc(i).valueChanges().subscribe(s=>{s&&r.push(s),this.groupUsersSubject.next(r)})})}createNewGroup(n,r){return new Promise((i,s)=>{const o={name:n,inviteCode:Math.floor(1e5+9e5*Math.random()).toString(),users:[r]};this.firestore.collection("groups").add(o).then(a=>{const u=a.id;this.fetchUserGroups(r),i(u)}).catch(a=>{s(a)})})}removeUserFromGroup(n,r){this.firestore.collection("groups").doc(n).update({users:so.Z.firestore.FieldValue.arrayRemove(r)}).then(()=>{this.groupUsers$.pipe(hc(1)).subscribe(i=>{1===i.length&&this.firestore.collection("groups").doc(n).delete().catch(s=>{throw console.error("Error deleting group:",s),new Error("Error deleting group")})}),this.fetchUserGroups(r)}).catch(i=>{throw console.error("Error removing user from group:",i),new Error("Error removing user from group")})}joinGroup(n,r,i){n=n.trim(),r=r.trim(),this.firestore.collection("groups",s=>s.where("inviteCode","==",r).where("name","==",n)).get().subscribe(s=>{s.empty?console.log("No matching group found"):s.docs[0].ref.update({users:so.Z.firestore.FieldValue.arrayUnion(i)}).then(()=>{console.log("User added to group successfully")}).catch(a=>{throw console.error("Error adding user to group: ",a),new Error("Error adding user to group")})})}static#e=this.\u0275fac=function(r){return new(r||t)(se(jE),se(KU))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),tj=(()=>{class t{constructor(n,r){this.loginService=n,this.router=r,this.localStorage=localStorage}navigateToHome(){this.router.navigate(["/home"])}static#e=this.\u0275fac=function(r){return new(r||t)(J(Jg),J(gr))};static#t=this.\u0275cmp=Bi({type:t,selectors:[["app-header"]],decls:8,vars:1,consts:[[1,"bg-gray-900","shadow-md","fixed","top-0","left-0","w-full","z-10"],[1,"container","mx-auto","px-6","py-3","flex","justify-between","items-center"],[1,"bg-purple-800","hover:bg-purple-700","text-gray-200","font-bold","py-2","px-4","rounded",3,"click"],[1,"flex-grow","text-center"],[1,"text-gray-200","font-bold","text-lg"]],template:function(r,i){1&r&&($e(0,"header",0)(1,"nav",1)(2,"div")(3,"button",2),ct("click",function(){return i.navigateToHome()}),bt(4," Home "),Qe()(),$e(5,"div",3)(6,"p",4),bt(7),Qe()()()()),2&r&&(Vt(7),Is("Welcome, ",i.localStorage.getItem("userName"),""))}})}return t})();function Fee(t,e){if(1&t){const n=ys();$e(0,"button",9),ct("click",function(){const s=gn(n).$implicit;return mn(vt(2).selectGroup(s))}),bt(1),Qe()}if(2&t){const n=e.$implicit;Vt(1),Is(" ",n.name," ")}}function Uee(t,e){if(1&t&&($e(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),Kr(4,Fee,2,1,"button",8),uc(5,"async"),Qe()()()()),2&t){const n=vt();Vt(4),Dn("ngForOf",cc(5,1,n.groupService.userGroups$))}}function Bee(t,e){if(1&t){const n=ys();$e(0,"div",10)(1,"div",11)(2,"button",12),ct("click",function(){return gn(n),mn(vt().showForm="CREATE")}),bt(3," Create Group "),Qe(),$e(4,"button",13),ct("click",function(){return gn(n),mn(vt().showForm="JOIN")}),bt(5," Join Group "),Qe()()()}}function jee(t,e){if(1&t){const n=ys();$e(0,"input",21),ct("ngModelChange",function(i){return gn(n),mn(vt(2).inviteCode=i)}),Qe()}if(2&t){const n=vt(2);Dn("ngModel",n.inviteCode)("autofocus","JOIN"===n.showForm)}}function $ee(t,e){if(1&t){const n=ys();$e(0,"div",14)(1,"div",15)(2,"input",16),ct("ngModelChange",function(i){return gn(n),mn(vt().newGroupName=i)}),Qe(),Kr(3,jee,1,2,"input",17),$e(4,"div",18)(5,"button",19),ct("click",function(){return gn(n),mn(vt().showForm="NO")}),bt(6,"BACK "),Qe(),$e(7,"button",20),ct("click",function(){gn(n);const i=vt();return mn("CREATE"===i.showForm?i.createNewGroup(i.newGroupName):i.joinGroup(i.newGroupName,i.inviteCode))}),bt(8," OK "),Qe()()()()}if(2&t){const n=vt();Vt(2),Dn("ngModel",n.newGroupName),Vt(1),Dn("ngIf","JOIN"===n.showForm)}}let Hee=(()=>{class t{constructor(n,r,i,s){this.groupService=n,this.loginService=r,this.validator=i,this.router=s,this.newGroupName="",this.inviteCode="",this.currentUser=null,this.showForm="NO",this.loginService.currentUser$.subscribe(o=>{if(!o||!o.uid)throw new Error("No User UID Data!");this.currentUser=o,this.groupService.fetchUserGroups(o.uid)})}selectGroup(n){this.groupService.selectGroup(n),this.router.navigate(["/group",n.uid])}joinGroup(n,r){if(!this.validator.isValidInput(n)||!this.validator.isValidInput(r))throw new Error("Invalid Input Data");this.showForm="NO";const i=this.currentUser?.uid;if(!i)throw console.error("Current user ID is undefined."),new Error("Current user ID is undefined");this.groupService.joinGroup(n,r,i)}createNewGroup(n){if(!this.validator.isValidInput(n))throw new Error("Invalid Input Data");this.showForm="NO",this.groupService.createNewGroup(n,this.currentUser?.uid)}static#e=this.\u0275fac=function(r){return new(r||t)(J(ej),J(Jg),J(UA),J(gr))};static#t=this.\u0275cmp=Bi({type:t,selectors:[["app-home"]],decls:5,vars:3,consts:[[1,"flex","flex-col","min-h-screen"],["class","overflow-auto pt-[6rem] flex-grow",4,"ngIf"],["class","sticky bottom-10 p-4",4,"ngIf"],["class","fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center z-50",4,"ngIf"],[1,"overflow-auto","pt-[6rem]","flex-grow"],[1,"flex","justify-center","w-full"],[1,"w-full","max-w-md","p-4"],[1,"space-y-2"],["class","bg-purple-800 hover:bg-purple-900 text-white font-bold py-3 px-6 rounded-lg w-full transition ease-in-out duration-150",3,"click",4,"ngFor","ngForOf"],[1,"bg-purple-800","hover:bg-purple-900","text-white","font-bold","py-3","px-6","rounded-lg","w-full","transition","ease-in-out","duration-150",3,"click"],[1,"sticky","bottom-10","p-4"],[1,"flex","items-center","justify-center"],[1,"bg-gray-900","hover:bg-gray-700","text-white","font-bold","py-2","px-4","rounded-lg","transition","ease-in-out","duration-150","mr-2",3,"click"],[1,"bg-gray-900","hover:bg-gray-700","text-white","font-bold","py-2","px-4","rounded-lg","transition","ease-in-out","duration-150",3,"click"],[1,"fixed","inset-0","bg-gray-800","bg-opacity-50","flex","justify-center","items-center","z-50"],[1,"bg-gray-900","p-8","rounded-lg","shadow-lg","max-w-sm","mx-auto"],["type","text","placeholder","Group Name","autofocus","",1,"form-input","block","w-full","border","py-2","px-3","shadow-sm","border-gray-300","rounded-md","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","text-center",3,"ngModel","ngModelChange"],["type","text","placeholder","Invite Code","class","form-input block w-full border py-2 px-3 mt-4 shadow-sm border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-center",3,"ngModel","autofocus","ngModelChange",4,"ngIf"],[1,"flex","justify-center","space-x-4","mt-6"],["type","button",1,"bg-gray-950","hover:bg-gray-700","text-white","font-bold","py-2","px-4","rounded-lg","transition","ease-in-out","duration-150",3,"click"],["type","button",1,"bg-purple-800","hover:bg-purple-900","text-white","font-bold","py-2","px-4","rounded-lg","transition","ease-in-out","duration-150",3,"click"],["type","text","placeholder","Invite Code",1,"form-input","block","w-full","border","py-2","px-3","mt-4","shadow-sm","border-gray-300","rounded-md","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","text-center",3,"ngModel","autofocus","ngModelChange"]],template:function(r,i){1&r&&(gd(0,"app-header"),$e(1,"div",0),Kr(2,Uee,6,3,"div",1),Kr(3,Bee,6,0,"div",2),Kr(4,$ee,9,2,"div",3),Qe()),2&r&&(Vt(2),Dn("ngIf","NO"===i.showForm),Vt(1),Dn("ngIf","NO"===i.showForm),Vt(1),Dn("ngIf","JOIN"===i.showForm||"CREATE"===i.showForm))},dependencies:[$T,jy,bh,zE,rm,tj,$y]})}return t})();const nj=(t,e)=>{const n=he(Jg),r=he(gr);return n.isLoggedIn().pipe(_e(i=>!!i||(r.navigate(["/login"]),!1)),ka(()=>(r.navigate(["/login"]),G(!1))))};let zee=(()=>{class t{constructor(n){this.firestore=n}addProduct(n){return this.firestore.collection("products").add(n)}getProductsByUserAndGroup(n,r){return this.firestore.collection("products",i=>i.where("user","==",n).where("group","==",r)).snapshotChanges().pipe(_e(i=>i.map(s=>{const o=s.payload.doc.data();return{uid:s.payload.doc.id,...o}})))}removeProduct(n){return this.firestore.collection("products").doc(n).delete()}updateProduct(n){return this.firestore.collection("products").doc(n.uid).update({bought:n.bought})}static#e=this.\u0275fac=function(r){return new(r||t)(se(jE))};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Gee(t,e){if(1&t&&($e(0,"span"),bt(1),Qe()),2&t){const n=vt().$implicit;Vt(1),Is("- ",n.count,"")}}function qee(t,e){if(1&t){const n=ys();$e(0,"li",22),ct("click",function(){const s=gn(n).$implicit;return mn(vt(4).toggleProductBought(s))}),$e(1,"span"),bt(2),Kr(3,Gee,2,1,"span",23),Qe()()}if(2&t){const n=e.$implicit;op("line-through",n.bought),Vt(2),Is(" ",n.name," "),Vt(1),Dn("ngIf",n.count>0)}}function Wee(t,e){if(1&t&&($e(0,"tr",18)(1,"td",19)(2,"ul",20),Kr(3,qee,4,4,"li",21),uc(4,"async"),Qe()()()),2&t){const n=vt().$implicit,r=vt(2);let i;Vt(3),Dn("ngForOf",null==(i=cc(4,1,r.usersProducts$))?null:i.get(n.uid))}}function Zee(t,e){if(1&t){const n=ys();hy(0),$e(1,"tr",13),ct("click",function(){const s=gn(n).$implicit;return mn(vt(2).toggleProductsVisibility(s.uid))}),$e(2,"td",14),bt(3),Qe(),$e(4,"td",15),bt(5),Qe(),$e(6,"td",16)(7,"button",9),ct("click",function(i){const o=gn(n).$implicit;return vt(2).clearBoughtProducts(o.uid),mn(i.stopPropagation())}),bt(8," Clear "),Qe()()(),Kr(9,Wee,5,3,"tr",17),fy()}if(2&t){const n=e.$implicit,r=vt(2);Vt(3),Is(" ",n.name," "),Vt(2),Is(" Total Products: ",r.getTotalProductCount(n.uid)," "),Vt(4),Dn("ngIf",r.isProductsVisible(n.uid))}}function Kee(t,e){if(1&t){const n=ys();$e(0,"div",6)(1,"div",7)(2,"button",8),ct("click",function(){return gn(n),mn(vt().showInviteModal=!0)}),bt(3," Invite "),Qe(),$e(4,"span"),bt(5),Qe(),$e(6,"button",9),ct("click",function(){return gn(n),mn(vt().showModal=!0)}),bt(7," Leave "),Qe()(),$e(8,"div",10)(9,"table",11)(10,"tbody"),Kr(11,Zee,10,3,"ng-container",12),uc(12,"async"),Qe()()()()}if(2&t){const n=e.ngIf,r=vt();Vt(5),z0(n.name),Vt(6),Dn("ngForOf",cc(12,2,r.groupService.groupUsers$))}}function Qee(t,e){if(1&t){const n=ys();$e(0,"div",24)(1,"div",25)(2,"form",26,27),ct("ngSubmit",function(){return gn(n),mn(vt().addProduct())}),$e(4,"input",28),ct("ngModelChange",function(i){return gn(n),mn(vt().productData.name=i)}),Qe(),$e(5,"input",29),ct("ngModelChange",function(i){return gn(n),mn(vt().productData.count=i)}),Qe(),$e(6,"button",30),bt(7," Add Product "),Qe()(),$e(8,"button",31),ct("click",function(){return gn(n),mn(vt().showProductForm=!1)}),bt(9," Cancel "),Qe()()()}if(2&t){const n=vt();Vt(4),Dn("ngModel",n.productData.name),Vt(1),Dn("ngModel",n.productData.count)}}function Yee(t,e){if(1&t){const n=ys();$e(0,"div",32)(1,"div",33)(2,"h2",34),bt(3,"Leave Group Confirmation"),Qe(),$e(4,"p",35),bt(5,"Are you sure you want to leave this group?"),Qe(),$e(6,"div",36)(7,"button",37),ct("click",function(){gn(n);const i=vt();return i.leaveGroup(),mn(i.showModal=!1)}),bt(8,"Yes, Leave"),Qe(),$e(9,"button",38),ct("click",function(){return gn(n),mn(vt().showModal=!1)}),bt(10,"No, Stay"),Qe()()()()}}function Jee(t,e){if(1&t){const n=ys();$e(0,"div",32)(1,"div",33)(2,"h2",34),bt(3,"Invite to Group"),Qe(),$e(4,"p",35),bt(5,"Invite someone to join this group."),Qe(),$e(6,"p",39),bt(7),Qe(),$e(8,"div",40)(9,"button",38),ct("click",function(){return gn(n),mn(vt().showInviteModal=!1)}),bt(10,"OK"),Qe()()()()}if(2&t){const n=vt();Vt(7),Is("Invite Code: ",null==n.currentGroup?null:n.currentGroup.inviteCode,"")}}const Xee=[{path:"",pathMatch:"full",component:Hee,canActivate:[nj]},{path:"login",component:Lee},{path:"group/:groupId",component:(()=>{class t{constructor(n,r,i,s,o){this.validator=n,this.productService=r,this.loginService=i,this.groupService=s,this.router=o,this.usersProducts$=new P(new Map),this.visibleProductsMap=new Map,this.productData={name:"",count:0,bought:!1,user:"",group:""},this.showProductForm=!1,this.showInviteModal=!1,this.showModal=!1,this.loginService.currentUser$.subscribe(a=>{this.currentUser=a}),this.groupService.selectedGroup$.subscribe(a=>{this.currentGroup=a}),this.groupService.groupUsers$.pipe(ft(a=>a.length?Wy(a.map(u=>this.productService.getProductsByUserAndGroup(u.uid,this.currentGroup?.uid).pipe(_e(d=>({userId:u.uid,products:d}))))):[])).subscribe(a=>{const u=new Map(this.usersProducts$.getValue());a.forEach(({userId:d,products:f})=>{u.set(d,f)}),this.usersProducts$.next(u)})}addProduct(){if(!this.currentUser||!this.currentGroup)throw console.error("User or group data is not available."),new Error("User or group data is not available");if(this.productData.user=this.currentUser.uid||"NaN",this.productData.group=this.currentGroup.uid||"NaN",!this.validator.isValidInput(this.productData.name))throw new Error("Invalid Input Data");if(!this.productData.name)throw console.error("Product name is not defined."),new Error("Product name is not defined");this.productService.addProduct(this.productData).then(()=>{this.showProductForm=!1,this.productData={name:"",count:0,bought:!1,user:"",group:""}}).catch(n=>{throw console.error("Error adding product:",n),new Error("Error adding product")})}toggleProductsVisibility(n){const r=this.visibleProductsMap.get(n)||!1;this.visibleProductsMap.set(n,!r)}isProductsVisible(n){return!!this.visibleProductsMap.get(n)}getTotalProductCount(n){return(this.usersProducts$.getValue().get(n)||[]).length}toggleProductBought(n){n.bought=!n.bought,this.productService.updateProduct(n).catch(r=>{throw console.error("Error updating product:",r),new Error("Error updating product")})}clearBoughtProducts(n){(this.usersProducts$.getValue().get(n)||[]).filter(s=>s.bought).forEach(s=>{s.uid&&this.productService.removeProduct(s.uid).catch(o=>{throw console.error("Error removing product:",o),new Error("Error removing product")})})}leaveGroup(){this.currentUser&&this.currentGroup&&(this.groupService.removeUserFromGroup(this.currentGroup.uid,this.currentUser.uid),this.router.navigate(["/home"]))}static#e=this.\u0275fac=function(r){return new(r||t)(J(UA),J(zee),J(Jg),J(ej),J(gr))};static#t=this.\u0275cmp=Bi({type:t,selectors:[["app-group"]],decls:10,vars:6,consts:[["class","pt-[6rem] flex flex-col items-center mx-4 lg:mx-8",4,"ngIf"],[1,"fixed","bottom-10","left-0","right-0","p-4"],[1,"flex","items-center","justify-center"],[1,"bg-gray-900","hover:bg-gray-700","text-white","font-bold","text-4xl","py-4","px-8","rounded-lg","transition","ease-in-out","duration-150",3,"click"],["class","fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center bg-gray-900 bg-opacity-90",4,"ngIf"],["class","fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center z-50",4,"ngIf"],[1,"pt-[6rem]","flex","flex-col","items-center","mx-4","lg:mx-8"],[1,"bg-gray-900","text-white","text-lg","font-bold","text-center","p-5","w-full","max-w-md","mx-auto","rounded-lg","flex","justify-between","items-center"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-1","px-2","rounded",3,"click"],[1,"bg-red-500","hover:bg-red-700","text-white","font-bold","py-1","px-2","rounded",3,"click"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg","w-full","min-w-max","max-w-6xl","mt-4"],[1,"w-full","text-sm","text-left","text-gray-400","bg-gray-800","border-2","border-gray-950"],[4,"ngFor","ngForOf"],[1,"bg-gray-900","cursor-pointer",3,"click"],[1,"px-6","py-4","text-gray-200","font-bold"],[1,"px-6","py-4","text-gray-200","font-bold","text-right"],[1,"px-6","py-4","text-right"],["class","bg-gray-800",4,"ngIf"],[1,"bg-gray-800"],["colspan","3",1,"px-6","py-4"],[1,"mr-auto"],["class","odd:bg-gray-700 text-lg leading-loose border-b border-gray-600 cursor-pointer",3,"line-through","click",4,"ngFor","ngForOf"],[1,"odd:bg-gray-700","text-lg","leading-loose","border-b","border-gray-600","cursor-pointer",3,"click"],[4,"ngIf"],[1,"fixed","top-0","left-0","right-0","bottom-0","flex","items-center","justify-center","bg-gray-900","bg-opacity-90"],[1,"bg-gray-950","p-8","rounded-lg","shadow-lg","w-full","sm:max-w-md","mx-auto"],[3,"ngSubmit"],["productForm","ngForm"],["type","text","name","name","placeholder","Product Name","required","","autofocus","",1,"text-center","w-full","px-3","py-2","mt-4","placeholder-gray-500","border","border-gray-300","rounded-md","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","focus:outline-none","focus:ring-2","focus:ring-offset-2",3,"ngModel","ngModelChange"],["type","number","name","count","placeholder","Product Count","required","",1,"text-center","w-full","px-3","py-2","mt-4","placeholder-gray-500","border","border-gray-300","rounded-md","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","focus:outline-none","focus:ring-2","focus:ring-offset-2",3,"ngModel","ngModelChange"],["type","submit",1,"w-full","mt-6","bg-indigo-600","hover:bg-indigo-700","text-white","font-bold","py-2","px-4","rounded-lg","transition","ease-in-out","duration-150","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500"],[1,"w-full","mt-6","bg-gray-300","hover:bg-gray-400","text-gray-700","font-bold","py-2","px-4","rounded-lg","transition","ease-in-out","duration-150","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"],[1,"fixed","inset-0","bg-gray-800","bg-opacity-50","flex","justify-center","items-center","z-50"],[1,"bg-gray-950","p-6","rounded-lg","shadow-lg","text-center"],[1,"text-lg","text-gray-200","font-bold","mb-4"],[1,"text-gray-200"],[1,"flex","justify-around","mt-4"],[1,"bg-red-500","hover:bg-red-700","text-white","font-bold","py-2","px-4","rounded",3,"click"],[1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded",3,"click"],[1,"text-gray-200","font-bold"],[1,"flex","justify-center","mt-4"]],template:function(r,i){1&r&&(gd(0,"app-header"),Kr(1,Kee,13,4,"div",0),uc(2,"async"),$e(3,"div",1)(4,"div",2)(5,"button",3),ct("click",function(){return i.showProductForm=!0}),bt(6," + "),Qe()()(),Kr(7,Qee,10,2,"div",4),Kr(8,Yee,11,0,"div",5),Kr(9,Jee,11,1,"div",5)),2&r&&(Vt(1),Dn("ngIf",cc(2,4,i.groupService.selectedGroup$)),Vt(6),Dn("ngIf",i.showProductForm),Vt(1),Dn("ngIf",i.showModal),Vt(1),Dn("ngIf",i.showInviteModal))},dependencies:[$T,jy,kB,bh,JA,zE,IB,eI,rm,XE,tj,$y]})}return t})(),canActivate:[nj]},{path:"**",redirectTo:""}];let ete=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Rr({type:t});static#n=this.\u0275inj=Dr({imports:[S1.forRoot(Xee),S1]})}return t})();var tte=function(){function t(e,n){void 0===n&&(n=[]),this._eventType=e,this._eventFunctions=n}return t.prototype.init=function(){var e=this;this._eventFunctions.forEach(function(n){typeof window<"u"&&window.addEventListener(e._eventType,n)})},t}();const nte=tte;var rte=function(){function t(){this._instances={Accordion:{},Carousel:{},Collapse:{},Dial:{},Dismiss:{},Drawer:{},Dropdown:{},Modal:{},Popover:{},Tabs:{},Tooltip:{}}}return t.prototype.addInstance=function(e,n,r,i){if(void 0===i&&(i=!1),!this._instances[e])return console.warn("Flowbite: Component ".concat(e," does not exist.")),!1;!this._instances[e][r]||i?(i&&this._instances[e][r]&&this._instances[e][r].destroyAndRemoveInstance(),this._instances[e][r||this._generateRandomId()]=n):console.warn("Flowbite: Instance with ID ".concat(r," already exists."))},t.prototype.getAllInstances=function(){return this._instances},t.prototype.getInstances=function(e){return this._instances[e]?this._instances[e]:(console.warn("Flowbite: Component ".concat(e," does not exist.")),!1)},t.prototype.getInstance=function(e,n){if(this._componentAndInstanceCheck(e,n))return this._instances[e][n]?this._instances[e][n]:void console.warn("Flowbite: Instance with ID ".concat(n," does not exist."))},t.prototype.destroyAndRemoveInstance=function(e,n){this._componentAndInstanceCheck(e,n)&&(this.destroyInstanceObject(e,n),this.removeInstance(e,n))},t.prototype.removeInstance=function(e,n){this._componentAndInstanceCheck(e,n)&&delete this._instances[e][n]},t.prototype.destroyInstanceObject=function(e,n){this._componentAndInstanceCheck(e,n)&&this._instances[e][n].destroy()},t.prototype.instanceExists=function(e,n){return!(!this._instances[e]||!this._instances[e][n])},t.prototype._generateRandomId=function(){return Math.random().toString(36).substr(2,9)},t.prototype._componentAndInstanceCheck=function(e,n){return this._instances[e]?!!this._instances[e][n]||(console.warn("Flowbite: Instance with ID ".concat(n," does not exist.")),!1):(console.warn("Flowbite: Component ".concat(e," does not exist.")),!1)},t}(),rj=new rte;const wt=rj;typeof window<"u"&&(window.FlowbiteInstances=rj);var tI=function(){return tI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},tI.apply(this,arguments)},nI={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},ite={id:null,override:!0},ij=function(){function t(e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=nI),void 0===i&&(i=ite),this._instanceId=i.id?i.id:e.id,this._accordionEl=e,this._items=n,this._options=tI(tI({},nI),r),this._initialized=!1,this.init(),wt.addInstance("Accordion",this,this._instanceId,i.override)}return t.prototype.init=function(){var e=this;this._items.length&&!this._initialized&&(this._items.forEach(function(n){n.active&&e.open(n.id);var r=function(){e.toggle(n.id)};n.triggerEl.addEventListener("click",r),n.clickHandler=r}),this._initialized=!0)},t.prototype.destroy=function(){this._items.length&&this._initialized&&(this._items.forEach(function(e){e.triggerEl.removeEventListener("click",e.clickHandler),delete e.clickHandler}),this._initialized=!1)},t.prototype.removeInstance=function(){wt.removeInstance("Accordion",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getItem=function(e){return this._items.filter(function(n){return n.id===e})[0]},t.prototype.open=function(e){var n,r,i=this,s=this.getItem(e);this._options.alwaysOpen||this._items.map(function(o){var a,u;o!==s&&((a=o.triggerEl.classList).remove.apply(a,i._options.activeClasses.split(" ")),(u=o.triggerEl.classList).add.apply(u,i._options.inactiveClasses.split(" ")),o.targetEl.classList.add("hidden"),o.triggerEl.setAttribute("aria-expanded","false"),o.active=!1,o.iconEl&&o.iconEl.classList.remove("rotate-180"))}),(n=s.triggerEl.classList).add.apply(n,this._options.activeClasses.split(" ")),(r=s.triggerEl.classList).remove.apply(r,this._options.inactiveClasses.split(" ")),s.triggerEl.setAttribute("aria-expanded","true"),s.targetEl.classList.remove("hidden"),s.active=!0,s.iconEl&&s.iconEl.classList.add("rotate-180"),this._options.onOpen(this,s)},t.prototype.toggle=function(e){var n=this.getItem(e);n.active?this.close(e):this.open(e),this._options.onToggle(this,n)},t.prototype.close=function(e){var n,r,i=this.getItem(e);(n=i.triggerEl.classList).remove.apply(n,this._options.activeClasses.split(" ")),(r=i.triggerEl.classList).add.apply(r,this._options.inactiveClasses.split(" ")),i.targetEl.classList.add("hidden"),i.triggerEl.setAttribute("aria-expanded","false"),i.active=!1,i.iconEl&&i.iconEl.classList.remove("rotate-180"),this._options.onClose(this,i)},t}();function iS(){document.querySelectorAll("[data-accordion]").forEach(function(t){var e=t.getAttribute("data-accordion"),n=t.getAttribute("data-active-classes"),r=t.getAttribute("data-inactive-classes"),i=[];t.querySelectorAll("[data-accordion-target]").forEach(function(s){if(s.closest("[data-accordion]")===t){var o={id:s.getAttribute("data-accordion-target"),triggerEl:s,targetEl:document.querySelector(s.getAttribute("data-accordion-target")),iconEl:s.querySelector("[data-accordion-icon]"),active:"true"===s.getAttribute("aria-expanded")};i.push(o)}}),new ij(t,i,{alwaysOpen:"open"===e,activeClasses:n||nI.activeClasses,inactiveClasses:r||nI.inactiveClasses})})}typeof window<"u"&&(window.Accordion=ij,window.initAccordions=iS);var rI=function(){return rI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},rI.apply(this,arguments)},sj={onCollapse:function(){},onExpand:function(){},onToggle:function(){}},ste={id:null,override:!0},sS=function(){function t(e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=sj),void 0===i&&(i=ste),this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._triggerEl=n,this._options=rI(rI({},sj),r),this._visible=!1,this._initialized=!1,this.init(),wt.addInstance("Collapse",this,this._instanceId,i.override)}return t.prototype.init=function(){var e=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._visible=this._triggerEl.hasAttribute("aria-expanded")?"true"===this._triggerEl.getAttribute("aria-expanded"):!this._targetEl.classList.contains("hidden"),this._clickHandler=function(){e.toggle()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},t.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},t.prototype.removeInstance=function(){wt.removeInstance("Collapse",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.collapse=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)},t.prototype.expand=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)},t.prototype.toggle=function(){this._visible?this.collapse():this.expand(),this._options.onToggle(this)},t}();function oS(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(t){var e=t.getAttribute("data-collapse-toggle"),n=document.getElementById(e);n?wt.instanceExists("Collapse",n.getAttribute("id"))?new sS(n,t,{},{id:n.getAttribute("id")+"_"+wt._generateRandomId()}):new sS(n,t):console.error('The target element with id "'.concat(e,'" does not exist. Please check the data-collapse-toggle attribute.'))})}typeof window<"u"&&(window.Collapse=sS,window.initCollapses=oS);var zc=function(){return zc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},zc.apply(this,arguments)},iI={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},ote={id:null,override:!0},oj=function(){function t(e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=iI),void 0===i&&(i=ote),this._instanceId=i.id?i.id:e.id,this._carouselEl=e,this._items=n,this._options=zc(zc(zc({},iI),r),{indicators:zc(zc({},iI.indicators),r.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._initialized=!1,this.init(),wt.addInstance("Carousel",this,this._instanceId,i.override)}return t.prototype.init=function(){var e=this;this._items.length&&!this._initialized&&(this._items.map(function(n){n.el.classList.add("absolute","inset-0","transition-transform","transform")}),this._getActiveItem()?this.slideTo(this._getActiveItem().position):this.slideTo(0),this._indicators.map(function(n,r){n.el.addEventListener("click",function(){e.slideTo(r)})}),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},t.prototype.removeInstance=function(){wt.removeInstance("Carousel",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getItem=function(e){return this._items[e]},t.prototype.slideTo=function(e){var n=this._items[e];this._rotate({left:0===n.position?this._items[this._items.length-1]:this._items[n.position-1],middle:n,right:n.position===this._items.length-1?this._items[0]:this._items[n.position+1]}),this._setActiveItem(n),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)},t.prototype.next=function(){var e=this._getActiveItem();this.slideTo((e.position===this._items.length-1?this._items[0]:this._items[e.position+1]).position),this._options.onNext(this)},t.prototype.prev=function(){var e=this._getActiveItem();this.slideTo((0===e.position?this._items[this._items.length-1]:this._items[e.position-1]).position),this._options.onPrev(this)},t.prototype._rotate=function(e){this._items.map(function(n){n.el.classList.add("hidden")}),e.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),e.left.el.classList.add("-translate-x-full","z-10"),e.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),e.middle.el.classList.add("translate-x-0","z-20"),e.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),e.right.el.classList.add("translate-x-full","z-10")},t.prototype.cycle=function(){var e=this;typeof window<"u"&&(this._intervalInstance=window.setInterval(function(){e.next()},this._intervalDuration))},t.prototype.pause=function(){clearInterval(this._intervalInstance)},t.prototype._getActiveItem=function(){return this._activeItem},t.prototype._setActiveItem=function(e){var n,r,i=this;this._activeItem=e;var s=e.position;this._indicators.length&&(this._indicators.map(function(o){var a,u;o.el.setAttribute("aria-current","false"),(a=o.el.classList).remove.apply(a,i._options.indicators.activeClasses.split(" ")),(u=o.el.classList).add.apply(u,i._options.indicators.inactiveClasses.split(" "))}),(n=this._indicators[s].el.classList).add.apply(n,this._options.indicators.activeClasses.split(" ")),(r=this._indicators[s].el.classList).remove.apply(r,this._options.indicators.inactiveClasses.split(" ")),this._indicators[s].el.setAttribute("aria-current","true"))},t}();function aS(){document.querySelectorAll("[data-carousel]").forEach(function(t){var e=t.getAttribute("data-carousel-interval"),n="slide"===t.getAttribute("data-carousel"),r=[],i=0;t.querySelectorAll("[data-carousel-item]").length&&Array.from(t.querySelectorAll("[data-carousel-item]")).map(function(d,f){r.push({position:f,el:d}),"active"===d.getAttribute("data-carousel-item")&&(i=f)});var s=[];t.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(t.querySelectorAll("[data-carousel-slide-to]")).map(function(d){s.push({position:parseInt(d.getAttribute("data-carousel-slide-to")),el:d})});var o=new oj(t,r,{defaultPosition:i,indicators:{items:s},interval:e||iI.interval});n&&o.cycle();var a=t.querySelector("[data-carousel-next]"),u=t.querySelector("[data-carousel-prev]");a&&a.addEventListener("click",function(){o.next()}),u&&u.addEventListener("click",function(){o.prev()})})}typeof window<"u"&&(window.Carousel=oj,window.initCarousels=aS);var sI=function(){return sI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},sI.apply(this,arguments)},aj={transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},ate={id:null,override:!0},uj=function(){function t(e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=aj),void 0===i&&(i=ate),this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._triggerEl=n,this._options=sI(sI({},aj),r),this._initialized=!1,this.init(),wt.addInstance("Dismiss",this,this._instanceId,i.override)}return t.prototype.init=function(){var e=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._clickHandler=function(){e.hide()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},t.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},t.prototype.removeInstance=function(){wt.removeInstance("Dismiss",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.hide=function(){var e=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){e._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)},t}();function uS(){document.querySelectorAll("[data-dismiss-target]").forEach(function(t){var e=t.getAttribute("data-dismiss-target"),n=document.querySelector(e);n?new uj(n,t):console.error('The dismiss element with id "'.concat(e,'" does not exist. Please check the data-dismiss-target attribute.'))})}function xi(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Gc(t){return t instanceof xi(t).Element||t instanceof Element}function is(t){return t instanceof xi(t).HTMLElement||t instanceof HTMLElement}function cS(t){return!(typeof ShadowRoot>"u")&&(t instanceof xi(t).ShadowRoot||t instanceof ShadowRoot)}typeof window<"u"&&(window.Dismiss=uj,window.initDismisses=uS);var qc=Math.max,oI=Math.min,Sh=Math.round;function lS(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function cj(){return!/^((?!chrome|android).)*safari/i.test(lS())}function Rh(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&is(t)&&(i=t.offsetWidth>0&&Sh(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Sh(r.height)/t.offsetHeight||1);var a=(Gc(t)?xi(t):window).visualViewport,u=!cj()&&n,d=(r.left+(u&&a?a.offsetLeft:0))/i,f=(r.top+(u&&a?a.offsetTop:0))/s,g=r.width/i,_=r.height/s;return{width:g,height:_,top:f,right:d+g,bottom:f+_,left:d,x:d,y:f}}function dS(t){var e=xi(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function yo(t){return t?(t.nodeName||"").toLowerCase():null}function cu(t){return((Gc(t)?t.ownerDocument:t.document)||window.document).documentElement}function hS(t){return Rh(cu(t)).left+dS(t).scrollLeft}function ea(t){return xi(t).getComputedStyle(t)}function fS(t){var e=ea(t);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function dte(t,e,n){void 0===n&&(n=!1);var r=is(e),i=is(e)&&function lte(t){var e=t.getBoundingClientRect(),n=Sh(e.width)/t.offsetWidth||1,r=Sh(e.height)/t.offsetHeight||1;return 1!==n||1!==r}(e),s=cu(e),o=Rh(t,i,n),a={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&(("body"!==yo(e)||fS(s))&&(a=function cte(t){return t!==xi(t)&&is(t)?function ute(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}(t):dS(t)}(e)),is(e)?((u=Rh(e,!0)).x+=e.clientLeft,u.y+=e.clientTop):s&&(u.x=hS(s))),{x:o.left+a.scrollLeft-u.x,y:o.top+a.scrollTop-u.y,width:o.width,height:o.height}}function pS(t){var e=Rh(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function aI(t){return"html"===yo(t)?t:t.assignedSlot||t.parentNode||(cS(t)?t.host:null)||cu(t)}function lj(t){return["html","body","#document"].indexOf(yo(t))>=0?t.ownerDocument.body:is(t)&&fS(t)?t:lj(aI(t))}function im(t,e){var n;void 0===e&&(e=[]);var r=lj(t),i=r===(null==(n=t.ownerDocument)?void 0:n.body),s=xi(r),o=i?[s].concat(s.visualViewport||[],fS(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(im(aI(o)))}function hte(t){return["table","td","th"].indexOf(yo(t))>=0}function dj(t){return is(t)&&"fixed"!==ea(t).position?t.offsetParent:null}function sm(t){for(var e=xi(t),n=dj(t);n&&hte(n)&&"static"===ea(n).position;)n=dj(n);return n&&("html"===yo(n)||"body"===yo(n)&&"static"===ea(n).position)?e:n||function fte(t){var e=/firefox/i.test(lS());if(/Trident/i.test(lS())&&is(t)&&"fixed"===ea(t).position)return null;var i=aI(t);for(cS(i)&&(i=i.host);is(i)&&["html","body"].indexOf(yo(i))<0;){var s=ea(i);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||e&&"filter"===s.willChange||e&&s.filter&&"none"!==s.filter)return i;i=i.parentNode}return null}(t)||e}var mi="top",ss="bottom",os="right",_i="left",gS="auto",om=[mi,ss,os,_i],Ph="start",am="end",hj="viewport",um="popper",fj=om.reduce(function(t,e){return t.concat([e+"-"+Ph,e+"-"+am])},[]),pj=[].concat(om,[gS]).reduce(function(t,e){return t.concat([e,e+"-"+Ph,e+"-"+am])},[]),bte=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Dte(t){var e=new Map,n=new Set,r=[];function i(s){n.add(s.name),[].concat(s.requires||[],s.requiresIfExists||[]).forEach(function(a){if(!n.has(a)){var u=e.get(a);u&&i(u)}}),r.push(s)}return t.forEach(function(s){e.set(s.name,s)}),t.forEach(function(s){n.has(s.name)||i(s)}),r}function Ste(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}var gj={placement:"bottom",modifiers:[],strategy:"absolute"};function mj(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&"function"==typeof r.getBoundingClientRect)})}function Pte(t){void 0===t&&(t={});var n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,s=void 0===i?gj:i;return function(a,u,d){void 0===d&&(d=s);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},gj,s),modifiersData:{},elements:{reference:a,popper:u},attributes:{},styles:{}},g=[],_=!1,y={state:f,setOptions:function(M){var R="function"==typeof M?M(f.options):M;w(),f.options=Object.assign({},s,f.options,R),f.scrollParents={reference:Gc(a)?im(a):a.contextElement?im(a.contextElement):[],popper:im(u)};var k=function Ate(t){var e=Dte(t);return bte.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}(function Rte(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}([].concat(r,f.options.modifiers)));return f.orderedModifiers=k.filter(function(U){return U.enabled}),function E(){f.orderedModifiers.forEach(function(b){var R=b.options,U=b.effect;if("function"==typeof U){var te=U({state:f,name:b.name,instance:y,options:void 0===R?{}:R});g.push(te||function(){})}})}(),y.update()},forceUpdate:function(){if(!_){var M=f.elements,R=M.reference,k=M.popper;if(mj(R,k)){f.rects={reference:dte(R,sm(k),"fixed"===f.options.strategy),popper:pS(k)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(ln){return f.modifiersData[ln.name]=Object.assign({},ln.data)});for(var U=0;U<f.orderedModifiers.length;U++)if(!0!==f.reset){var te=f.orderedModifiers[U],de=te.fn,Se=te.options;"function"==typeof de&&(f=de({state:f,options:void 0===Se?{}:Se,name:te.name,instance:y})||f)}else f.reset=!1,U=-1}}},update:Ste(function(){return new Promise(function(b){y.forceUpdate(),b(f)})}),destroy:function(){w(),_=!0}};if(!mj(a,u))return y;function w(){g.forEach(function(b){return b()}),g=[]}return y.setOptions(d).then(function(b){!_&&d.onFirstUpdate&&d.onFirstUpdate(b)}),y}}var uI={passive:!0};const Mte={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function xte(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=void 0===i||i,o=r.resize,a=void 0===o||o,u=xi(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&d.forEach(function(f){f.addEventListener("scroll",n.update,uI)}),a&&u.addEventListener("resize",n.update,uI),function(){s&&d.forEach(function(f){f.removeEventListener("scroll",n.update,uI)}),a&&u.removeEventListener("resize",n.update,uI)}},data:{}};function vo(t){return t.split("-")[0]}function xh(t){return t.split("-")[1]}function mS(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function _j(t){var u,e=t.reference,n=t.element,r=t.placement,i=r?vo(r):null,s=r?xh(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2;switch(i){case mi:u={x:o,y:e.y-n.height};break;case ss:u={x:o,y:e.y+e.height};break;case os:u={x:e.x+e.width,y:a};break;case _i:u={x:e.x-n.width,y:a};break;default:u={x:e.x,y:e.y}}var d=i?mS(i):null;if(null!=d){var f="y"===d?"height":"width";switch(s){case Ph:u[d]=u[d]-(e[f]/2-n[f]/2);break;case am:u[d]=u[d]+(e[f]/2-n[f]/2)}}return u}const Ote={name:"popperOffsets",enabled:!0,phase:"read",fn:function Nte(t){var e=t.state;e.modifiersData[t.name]=_j({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};var kte={top:"auto",right:"auto",bottom:"auto",left:"auto"};function yj(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,u=t.gpuAcceleration,d=t.adaptive,f=t.roundOffsets,g=t.isFixed,_=o.x,y=void 0===_?0:_,E=o.y,w=void 0===E?0:E,b="function"==typeof f?f({x:y,y:w}):{x:y,y:w};y=b.x,w=b.y;var M=o.hasOwnProperty("x"),R=o.hasOwnProperty("y"),k=_i,U=mi,te=window;if(d){var de=sm(n),Se="clientHeight",lt="clientWidth";de===xi(n)&&"static"!==ea(de=cu(n)).position&&"absolute"===a&&(Se="scrollHeight",lt="scrollWidth"),(i===mi||(i===_i||i===os)&&s===am)&&(U=ss,w-=(g&&de===te&&te.visualViewport?te.visualViewport.height:de[Se])-r.height,w*=u?1:-1),i!==_i&&(i!==mi&&i!==ss||s!==am)||(k=os,y-=(g&&de===te&&te.visualViewport?te.visualViewport.width:de[lt])-r.width,y*=u?1:-1)}var ii,ur=Object.assign({position:a},d&&kte),Ps=!0===f?function Vte(t,e){var r=t.y,i=e.devicePixelRatio||1;return{x:Sh(t.x*i)/i||0,y:Sh(r*i)/i||0}}({x:y,y:w},xi(n)):{x:y,y:w};return y=Ps.x,w=Ps.y,Object.assign({},ur,u?((ii={})[U]=R?"0":"",ii[k]=M?"0":"",ii.transform=(te.devicePixelRatio||1)<=1?"translate("+y+"px, "+w+"px)":"translate3d("+y+"px, "+w+"px, 0)",ii):((e={})[U]=R?w+"px":"",e[k]=M?y+"px":"",e.transform="",e))}const Fte={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function Lte(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,u=void 0===a||a,d={placement:vo(e.placement),variation:xh(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,yj(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:u})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,yj(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},jte={name:"applyStyles",enabled:!0,phase:"write",fn:function Ute(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!is(s)||!yo(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];!1===a?s.removeAttribute(o):s.setAttribute(o,!0===a?"":a)}))})},effect:function Bte(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]).reduce(function(u,d){return u[d]="",u},{});!is(i)||!yo(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(u){i.removeAttribute(u)}))})}},requires:["computeStyles"]},zte={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function Hte(t){var e=t.state,r=t.name,i=t.options.offset,s=void 0===i?[0,0]:i,o=pj.reduce(function(f,g){return f[g]=function $te(t,e,n){var r=vo(t),i=[_i,mi].indexOf(r)>=0?-1:1,s="function"==typeof n?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[_i,os].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}(g,e.rects,s),f},{}),a=o[e.placement],d=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=a.x,e.modifiersData.popperOffsets.y+=d),e.modifiersData[r]=o}};var Gte={left:"right",right:"left",bottom:"top",top:"bottom"};function cI(t){return t.replace(/left|right|bottom|top/g,function(e){return Gte[e]})}var qte={start:"end",end:"start"};function vj(t){return t.replace(/start|end/g,function(e){return qte[e]})}function Ej(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&cS(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function _S(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Ij(t,e,n){return e===hj?_S(function Wte(t,e){var n=xi(t),r=cu(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;var d=cj();(d||!d&&"fixed"===e)&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a+hS(t),y:u}}(t,n)):Gc(e)?function Kte(t,e){var n=Rh(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):_S(function Zte(t){var e,n=cu(t),r=dS(t),i=null==(e=t.ownerDocument)?void 0:e.body,s=qc(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=qc(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+hS(t),u=-r.scrollTop;return"rtl"===ea(i||n).direction&&(a+=qc(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:u}}(cu(t)))}function Tj(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Cj(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}function cm(t,e){void 0===e&&(e={});var r=e.placement,i=void 0===r?t.placement:r,s=e.strategy,o=void 0===s?t.strategy:s,a=e.boundary,u=void 0===a?"clippingParents":a,d=e.rootBoundary,f=void 0===d?hj:d,g=e.elementContext,_=void 0===g?um:g,y=e.altBoundary,E=void 0!==y&&y,w=e.padding,b=void 0===w?0:w,M=Tj("number"!=typeof b?b:Cj(b,om)),k=t.rects.popper,U=t.elements[E?_===um?"reference":um:_],te=function Yte(t,e,n,r){var i="clippingParents"===e?function Qte(t){var e=im(aI(t)),r=["absolute","fixed"].indexOf(ea(t).position)>=0&&is(t)?sm(t):t;return Gc(r)?e.filter(function(i){return Gc(i)&&Ej(i,r)&&"body"!==yo(i)}):[]}(t):[].concat(e),s=[].concat(i,[n]),a=s.reduce(function(u,d){var f=Ij(t,d,r);return u.top=qc(f.top,u.top),u.right=oI(f.right,u.right),u.bottom=oI(f.bottom,u.bottom),u.left=qc(f.left,u.left),u},Ij(t,s[0],r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(Gc(U)?U:U.contextElement||cu(t.elements.popper),u,f,o),de=Rh(t.elements.reference),Se=_j({reference:de,element:k,strategy:"absolute",placement:i}),lt=_S(Object.assign({},k,Se)),cn=_===um?lt:de,ln={top:te.top-cn.top+M.top,bottom:cn.bottom-te.bottom+M.bottom,left:te.left-cn.left+M.left,right:cn.right-te.right+M.right},ur=t.modifiersData.offset;if(_===um&&ur){var Ps=ur[i];Object.keys(ln).forEach(function(ii){var Zc=[os,ss].indexOf(ii)>=0?1:-1,Kc=[mi,ss].indexOf(ii)>=0?"y":"x";ln[ii]+=Ps[Kc]*Zc})}return ln}const tne={name:"flip",enabled:!0,phase:"main",fn:function ene(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0===o||o,u=n.fallbackPlacements,d=n.padding,f=n.boundary,g=n.rootBoundary,_=n.altBoundary,y=n.flipVariations,E=void 0===y||y,w=n.allowedAutoPlacements,b=e.options.placement,M=vo(b),k=u||(M!==b&&E?function Xte(t){if(vo(t)===gS)return[];var e=cI(t);return[vj(t),e,vj(e)]}(b):[cI(b)]),U=[b].concat(k).reduce(function(Mh,pu){return Mh.concat(vo(pu)===gS?function Jte(t,e){void 0===e&&(e={});var i=e.boundary,s=e.rootBoundary,o=e.padding,a=e.flipVariations,u=e.allowedAutoPlacements,d=void 0===u?pj:u,f=xh(e.placement),g=f?a?fj:fj.filter(function(E){return xh(E)===f}):om,_=g.filter(function(E){return d.indexOf(E)>=0});0===_.length&&(_=g);var y=_.reduce(function(E,w){return E[w]=cm(t,{placement:w,boundary:i,rootBoundary:s,padding:o})[vo(w)],E},{});return Object.keys(y).sort(function(E,w){return y[E]-y[w]})}(e,{placement:pu,boundary:f,rootBoundary:g,padding:d,flipVariations:E,allowedAutoPlacements:w}):pu)},[]),te=e.rects.reference,de=e.rects.popper,Se=new Map,lt=!0,cn=U[0],ln=0;ln<U.length;ln++){var ur=U[ln],Ps=vo(ur),ii=xh(ur)===Ph,Zc=[mi,ss].indexOf(Ps)>=0,Kc=Zc?"width":"height",Mi=cm(e,{placement:ur,boundary:f,rootBoundary:g,altBoundary:_,padding:d}),xs=Zc?ii?os:_i:ii?ss:mi;te[Kc]>de[Kc]&&(xs=cI(xs));var vI=cI(xs),Qc=[];if(s&&Qc.push(Mi[Ps]<=0),a&&Qc.push(Mi[xs]<=0,Mi[vI]<=0),Qc.every(function(Mh){return Mh})){cn=ur,lt=!1;break}Se.set(ur,Qc)}if(lt)for(var AS=function(pu){var fm=U.find(function(wI){var Yc=Se.get(wI);if(Yc)return Yc.slice(0,pu).every(function(SS){return SS})});if(fm)return cn=fm,"break"},hm=E?3:1;hm>0&&"break"!==AS(hm);hm--);e.placement!==cn&&(e.modifiersData[r]._skip=!0,e.placement=cn,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function lm(t,e,n){return qc(t,oI(e,n))}const sne={name:"preventOverflow",enabled:!0,phase:"main",fn:function ine(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0!==o&&o,_=n.tether,y=void 0===_||_,E=n.tetherOffset,w=void 0===E?0:E,b=cm(e,{boundary:n.boundary,rootBoundary:n.rootBoundary,padding:n.padding,altBoundary:n.altBoundary}),M=vo(e.placement),R=xh(e.placement),k=!R,U=mS(M),te=function nne(t){return"x"===t?"y":"x"}(U),de=e.modifiersData.popperOffsets,Se=e.rects.reference,lt=e.rects.popper,cn="function"==typeof w?w(Object.assign({},e.rects,{placement:e.placement})):w,ln="number"==typeof cn?{mainAxis:cn,altAxis:cn}:Object.assign({mainAxis:0,altAxis:0},cn),ur=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Ps={x:0,y:0};if(de){if(s){var ii,Zc="y"===U?mi:_i,Kc="y"===U?ss:os,Mi="y"===U?"height":"width",xs=de[U],vI=xs+b[Zc],Qc=xs-b[Kc],EI=y?-lt[Mi]/2:0,AS=R===Ph?Se[Mi]:lt[Mi],hm=R===Ph?-lt[Mi]:-Se[Mi],II=e.elements.arrow,Mh=y&&II?pS(II):{width:0,height:0},pu=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},fm=pu[Zc],wI=pu[Kc],Yc=lm(0,Se[Mi],Mh[Mi]),SS=k?Se[Mi]/2-EI-Yc-fm-ln.mainAxis:AS-Yc-fm-ln.mainAxis,Dne=k?-Se[Mi]/2+EI+Yc+wI+ln.mainAxis:hm+Yc+wI+ln.mainAxis,RS=e.elements.arrow&&sm(e.elements.arrow),Ane=RS?"y"===U?RS.clientTop||0:RS.clientLeft||0:0,Vj=null!=(ii=ur?.[U])?ii:0,Rne=xs+Dne-Vj,Lj=lm(y?oI(vI,xs+SS-Vj-Ane):vI,xs,y?qc(Qc,Rne):Qc);de[U]=Lj,Ps[U]=Lj-xs}if(a){var Fj,Jc=de[te],TI="y"===te?"height":"width",Uj=Jc+b["x"===U?mi:_i],Bj=Jc-b["x"===U?ss:os],PS=-1!==[mi,_i].indexOf(M),jj=null!=(Fj=ur?.[te])?Fj:0,$j=PS?Uj:Jc-Se[TI]-lt[TI]-jj+ln.altAxis,Hj=PS?Jc+Se[TI]+lt[TI]-jj-ln.altAxis:Bj,zj=y&&PS?function rne(t,e,n){var r=lm(t,e,n);return r>n?n:r}($j,Jc,Hj):lm(y?$j:Uj,Jc,y?Hj:Bj);de[te]=zj,Ps[te]=zj-Jc}e.modifiersData[r]=Ps}},requiresIfExists:["offset"]},cne={name:"arrow",enabled:!0,phase:"main",fn:function ane(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=vo(n.placement),u=mS(a),f=[_i,os].indexOf(a)>=0?"height":"width";if(s&&o){var g=function(e,n){return Tj("number"!=typeof(e="function"==typeof e?e(Object.assign({},n.rects,{placement:n.placement})):e)?e:Cj(e,om))}(i.padding,n),_=pS(s),y="y"===u?mi:_i,E="y"===u?ss:os,w=n.rects.reference[f]+n.rects.reference[u]-o[u]-n.rects.popper[f],b=o[u]-n.rects.reference[u],M=sm(s),R=M?"y"===u?M.clientHeight||0:M.clientWidth||0:0,de=R/2-_[f]/2+(w/2-b/2),Se=lm(g[y],de,R-_[f]-g[E]);n.modifiersData[r]=((e={})[u]=Se,e.centerOffset=Se-de,e)}},effect:function une(t){var e=t.state,r=t.options.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"==typeof i&&!(i=e.elements.popper.querySelector(i))||Ej(e.elements.popper,i)&&(e.elements.arrow=i))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function bj(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Dj(t){return[mi,os,ss,_i].some(function(e){return t[e]>=0})}var dne=[Mte,Ote,Fte,jte,zte,tne,sne,cne,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function lne(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=cm(e,{elementContext:"reference"}),a=cm(e,{altBoundary:!0}),u=bj(o,r),d=bj(a,i,s),f=Dj(u),g=Dj(d);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:d,isReferenceHidden:f,hasPopperEscaped:g},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":g})}}],yS=Pte({defaultModifiers:dne}),lu=function(){return lu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},lu.apply(this,arguments)},lI=function(t,e,n){if(n||2===arguments.length)for(var s,r=0,i=e.length;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},du={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1,onShow:function(){},onHide:function(){},onToggle:function(){}},hne={id:null,override:!0},Aj=function(){function t(e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=du),void 0===i&&(i=hne),this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._triggerEl=n,this._options=lu(lu({},du),r),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),wt.addInstance("Dropdown",this,this._instanceId,i.override)}return t.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._popperInstance=this._createPopperInstance(),this._setupEventListeners(),this._initialized=!0)},t.prototype.destroy=function(){var e=this,n=this._getTriggerEvents();"click"===this._options.triggerType&&n.showEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._clickHandler)}),"hover"===this._options.triggerType&&(n.showEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._hoverShowTriggerElHandler),e._targetEl.removeEventListener(r,e._hoverShowTargetElHandler)}),n.hideEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._hoverHideHandler),e._targetEl.removeEventListener(r,e._hoverHideHandler)})),this._popperInstance.destroy(),this._initialized=!1},t.prototype.removeInstance=function(){wt.removeInstance("Dropdown",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._setupEventListeners=function(){var e=this,n=this._getTriggerEvents();this._clickHandler=function(){e.toggle()},"click"===this._options.triggerType&&n.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._clickHandler)}),this._hoverShowTriggerElHandler=function(r){"click"===r.type?e.toggle():setTimeout(function(){e.show()},e._options.delay)},this._hoverShowTargetElHandler=function(){e.show()},this._hoverHideHandler=function(){setTimeout(function(){e._targetEl.matches(":hover")||e.hide()},e._options.delay)},"hover"===this._options.triggerType&&(n.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._hoverShowTriggerElHandler),e._targetEl.addEventListener(r,e._hoverShowTargetElHandler)}),n.hideEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._hoverHideHandler),e._targetEl.addEventListener(r,e._hoverHideHandler)}))},t.prototype._createPopperInstance=function(){return yS(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[this._options.offsetSkidding,this._options.offsetDistance]}}]})},t.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(n){e._handleClickOutside(n,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._handleClickOutside=function(e,n){var r=e.target,i=this._options.ignoreClickOutsideClass,s=!1;i&&document.querySelectorAll(".".concat(i)).forEach(function(a){a.contains(r)&&(s=!0)}),r!==n&&!n.contains(r)&&!this._triggerEl.contains(r)&&!s&&this.isVisible()&&this.hide()},t.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","click"],hideEvents:["mouseleave"]};case"click":default:return{showEvents:["click"],hideEvents:[]};case"none":return{showEvents:[],hideEvents:[]}}},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},t.prototype.isVisible=function(){return this._visible},t.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._popperInstance.setOptions(function(e){return lu(lu({},e),{modifiers:lI(lI([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},t.prototype.hide=function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._popperInstance.setOptions(function(e){return lu(lu({},e),{modifiers:lI(lI([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._visible=!1,this._removeClickOutsideListener(),this._options.onHide(this)},t}();function vS(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(t){var e=t.getAttribute("data-dropdown-toggle"),n=document.getElementById(e);if(n){var r=t.getAttribute("data-dropdown-placement"),i=t.getAttribute("data-dropdown-offset-skidding"),s=t.getAttribute("data-dropdown-offset-distance"),o=t.getAttribute("data-dropdown-trigger"),a=t.getAttribute("data-dropdown-delay"),u=t.getAttribute("data-dropdown-ignore-click-outside-class");new Aj(n,t,{placement:r||du.placement,triggerType:o||du.triggerType,offsetSkidding:i?parseInt(i):du.offsetSkidding,offsetDistance:s?parseInt(s):du.offsetDistance,delay:a?parseInt(a):du.delay,ignoreClickOutsideClass:u||du.ignoreClickOutsideClass})}else console.error('The dropdown element with id "'.concat(e,'" does not exist. Please check the data-dropdown-toggle attribute.'))})}typeof window<"u"&&(window.Dropdown=Aj,window.initDropdowns=vS);var dI=function(){return dI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},dI.apply(this,arguments)},hI={placement:"center",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40",backdrop:"dynamic",closable:!0,onHide:function(){},onShow:function(){},onToggle:function(){}},fne={id:null,override:!0},Sj=function(){function t(e,n,r){void 0===e&&(e=null),void 0===n&&(n=hI),void 0===r&&(r=fne),this._eventListenerInstances=[],this._instanceId=r.id?r.id:e.id,this._targetEl=e,this._options=dI(dI({},hI),n),this._isHidden=!0,this._backdropEl=null,this._initialized=!1,this.init(),wt.addInstance("Modal",this,this._instanceId,r.override)}return t.prototype.init=function(){var e=this;this._targetEl&&!this._initialized&&(this._getPlacementClasses().map(function(n){e._targetEl.classList.add(n)}),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),this._initialized=!1)},t.prototype.removeInstance=function(){wt.removeInstance("Modal",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._createBackdrop=function(){var e;if(this._isHidden){var n=document.createElement("div");n.setAttribute("modal-backdrop",""),(e=n.classList).add.apply(e,this._options.backdropClasses.split(" ")),document.querySelector("body").append(n),this._backdropEl=n}},t.prototype._destroyBackdropEl=function(){this._isHidden||document.querySelector("[modal-backdrop]").remove()},t.prototype._setupModalCloseEventListeners=function(){var e=this;"dynamic"===this._options.backdrop&&(this._clickOutsideEventListener=function(n){e._handleOutsideClick(n.target)},this._targetEl.addEventListener("click",this._clickOutsideEventListener,!0)),this._keydownEventListener=function(n){"Escape"===n.key&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},t.prototype._removeModalCloseEventListeners=function(){"dynamic"===this._options.backdrop&&this._targetEl.removeEventListener("click",this._clickOutsideEventListener,!0),document.body.removeEventListener("keydown",this._keydownEventListener,!0)},t.prototype._handleOutsideClick=function(e){(e===this._targetEl||e===this._backdropEl&&this.isVisible())&&this.hide()},t.prototype._getPlacementClasses=function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":default:return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"]}},t.prototype.toggle=function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)},t.prototype.show=function(){this.isHidden&&(this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,this._options.closable&&this._setupModalCloseEventListeners(),document.body.classList.add("overflow-hidden"),this._options.onShow(this))},t.prototype.hide=function(){this.isVisible&&(this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.closable&&this._removeModalCloseEventListeners(),this._options.onHide(this))},t.prototype.isVisible=function(){return!this._isHidden},t.prototype.isHidden=function(){return this._isHidden},t.prototype.addEventListenerInstance=function(e,n,r){this._eventListenerInstances.push({element:e,type:n,handler:r})},t.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(e){e.element.removeEventListener(e.type,e.handler)}),this._eventListenerInstances=[]},t.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},t}();function ES(){document.querySelectorAll("[data-modal-target]").forEach(function(t){var e=t.getAttribute("data-modal-target"),n=document.getElementById(e);if(n){var r=n.getAttribute("data-modal-placement"),i=n.getAttribute("data-modal-backdrop");new Sj(n,{placement:r||hI.placement,backdrop:i||hI.backdrop})}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-target attribute points to the correct modal id?."))}),document.querySelectorAll("[data-modal-toggle]").forEach(function(t){var e=t.getAttribute("data-modal-toggle");if(document.getElementById(e)){var r=wt.getInstance("Modal",e);if(r){var i=function(){r.toggle()};t.addEventListener("click",i),r.addEventListenerInstance(t,"click",i)}else console.error("Modal with id ".concat(e," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-toggle attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-show]").forEach(function(t){var e=t.getAttribute("data-modal-show");if(document.getElementById(e)){var r=wt.getInstance("Modal",e);if(r){var i=function(){r.show()};t.addEventListener("click",i),r.addEventListenerInstance(t,"click",i)}else console.error("Modal with id ".concat(e," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-show attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-hide]").forEach(function(t){var e=t.getAttribute("data-modal-hide");if(document.getElementById(e)){var r=wt.getInstance("Modal",e);if(r){var i=function(){r.hide()};t.addEventListener("click",i),r.addEventListenerInstance(t,"click",i)}else console.error("Modal with id ".concat(e," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-hide attribute points to the correct modal id?"))})}typeof window<"u"&&(window.Modal=Sj,window.initModals=ES);var fI=function(){return fI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},fI.apply(this,arguments)},Wc={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},pne={id:null,override:!0},Rj=function(){function t(e,n,r){void 0===e&&(e=null),void 0===n&&(n=Wc),void 0===r&&(r=pne),this._eventListenerInstances=[],this._instanceId=r.id?r.id:e.id,this._targetEl=e,this._options=fI(fI({},Wc),n),this._visible=!1,this._initialized=!1,this.init(),wt.addInstance("Drawer",this,this._instanceId,r.override)}return t.prototype.init=function(){var e=this;this._targetEl&&!this._initialized&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform"),this._getPlacementClasses(this._options.placement).base.map(function(n){e._targetEl.classList.add(n)}),this._handleEscapeKey=function(n){"Escape"===n.key&&e.isVisible()&&e.hide()},document.addEventListener("keydown",this._handleEscapeKey),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),document.removeEventListener("keydown",this._handleEscapeKey),this._initialized=!1)},t.prototype.removeInstance=function(){wt.removeInstance("Drawer",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.hide=function(){var e=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(n){e._targetEl.classList.remove(n)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(n){e._targetEl.classList.add(n)})):(this._getPlacementClasses(this._options.placement).active.map(function(n){e._targetEl.classList.remove(n)}),this._getPlacementClasses(this._options.placement).inactive.map(function(n){e._targetEl.classList.add(n)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)},t.prototype.show=function(){var e=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(n){e._targetEl.classList.add(n)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(n){e._targetEl.classList.remove(n)})):(this._getPlacementClasses(this._options.placement).active.map(function(n){e._targetEl.classList.add(n)}),this._getPlacementClasses(this._options.placement).inactive.map(function(n){e._targetEl.classList.remove(n)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},t.prototype._createBackdrop=function(){var e,n=this;if(!this._visible){var r=document.createElement("div");r.setAttribute("drawer-backdrop",""),(e=r.classList).add.apply(e,this._options.backdropClasses.split(" ")),document.querySelector("body").append(r),r.addEventListener("click",function(){n.hide()})}},t.prototype._destroyBackdropEl=function(){this._visible&&document.querySelector("[drawer-backdrop]").remove()},t.prototype._getPlacementClasses=function(e){switch(e){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]}}},t.prototype.isHidden=function(){return!this._visible},t.prototype.isVisible=function(){return this._visible},t.prototype.addEventListenerInstance=function(e,n,r){this._eventListenerInstances.push({element:e,type:n,handler:r})},t.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(e){e.element.removeEventListener(e.type,e.handler)}),this._eventListenerInstances=[]},t.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},t}();function IS(){document.querySelectorAll("[data-drawer-target]").forEach(function(t){var e=t.getAttribute("data-drawer-target"),n=document.getElementById(e);if(n){var r=t.getAttribute("data-drawer-placement"),i=t.getAttribute("data-drawer-body-scrolling"),s=t.getAttribute("data-drawer-backdrop"),o=t.getAttribute("data-drawer-edge"),a=t.getAttribute("data-drawer-edge-offset");new Rj(n,{placement:r||Wc.placement,bodyScrolling:i?"true"===i:Wc.bodyScrolling,backdrop:s?"true"===s:Wc.backdrop,edge:o?"true"===o:Wc.edge,edgeOffset:a||Wc.edgeOffset})}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(t){var e=t.getAttribute("data-drawer-toggle");if(document.getElementById(e)){var r=wt.getInstance("Drawer",e);if(r){var i=function(){r.toggle()};t.addEventListener("click",i),r.addEventListenerInstance(t,"click",i)}else console.error("Drawer with id ".concat(e," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-dismiss], [data-drawer-hide]").forEach(function(t){var e=t.getAttribute("data-drawer-dismiss")?t.getAttribute("data-drawer-dismiss"):t.getAttribute("data-drawer-hide");if(document.getElementById(e)){var r=wt.getInstance("Drawer",e);if(r){var i=function(){r.hide()};t.addEventListener("click",i),r.addEventListenerInstance(t,"click",i)}else console.error("Drawer with id ".concat(e," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id"))}),document.querySelectorAll("[data-drawer-show]").forEach(function(t){var e=t.getAttribute("data-drawer-show");if(document.getElementById(e)){var r=wt.getInstance("Drawer",e);if(r){var i=function(){r.show()};t.addEventListener("click",i),r.addEventListenerInstance(t,"click",i)}else console.error("Drawer with id ".concat(e," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))})}typeof window<"u"&&(window.Drawer=Rj,window.initDrawers=IS);var pI=function(){return pI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},pI.apply(this,arguments)},Pj={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},gne={id:null,override:!0},xj=function(){function t(e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=Pj),void 0===i&&(i=gne),this._instanceId=i.id?i.id:e.id,this._tabsEl=e,this._items=n,this._activeTab=r?this.getTab(r.defaultTabId):null,this._options=pI(pI({},Pj),r),this._initialized=!1,this.init(),wt.addInstance("Tabs",this,this._tabsEl.id,!0),wt.addInstance("Tabs",this,this._instanceId,i.override)}return t.prototype.init=function(){var e=this;this._items.length&&!this._initialized&&(this._activeTab||this.setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(n){n.triggerEl.addEventListener("click",function(){e.show(n.id)})}))},t.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},t.prototype.removeInstance=function(){this.destroy(),wt.removeInstance("Tabs",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getActiveTab=function(){return this._activeTab},t.prototype.setActiveTab=function(e){this._activeTab=e},t.prototype.getTab=function(e){return this._items.filter(function(n){return n.id===e})[0]},t.prototype.show=function(e,n){var r,i,s=this;void 0===n&&(n=!1);var o=this.getTab(e);o===this._activeTab&&!n||(this._items.map(function(a){var u,d;a!==o&&((u=a.triggerEl.classList).remove.apply(u,s._options.activeClasses.split(" ")),(d=a.triggerEl.classList).add.apply(d,s._options.inactiveClasses.split(" ")),a.targetEl.classList.add("hidden"),a.triggerEl.setAttribute("aria-selected","false"))}),(r=o.triggerEl.classList).add.apply(r,this._options.activeClasses.split(" ")),(i=o.triggerEl.classList).remove.apply(i,this._options.inactiveClasses.split(" ")),o.triggerEl.setAttribute("aria-selected","true"),o.targetEl.classList.remove("hidden"),this.setActiveTab(o),this._options.onShow(this,o))},t}();function wS(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(t){var e=[],n=null;t.querySelectorAll('[role="tab"]').forEach(function(r){var i="true"===r.getAttribute("aria-selected"),s={id:r.getAttribute("data-tabs-target"),triggerEl:r,targetEl:document.querySelector(r.getAttribute("data-tabs-target"))};e.push(s),i&&(n=s.id)}),new xj(t,e,{defaultTabId:n})})}typeof window<"u"&&(window.Tabs=xj,window.initTabs=wS);var hu=function(){return hu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},hu.apply(this,arguments)},gI=function(t,e,n){if(n||2===arguments.length)for(var s,r=0,i=e.length;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},mI={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},mne={id:null,override:!0},Mj=function(){function t(e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=mI),void 0===i&&(i=mne),this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._triggerEl=n,this._options=hu(hu({},mI),r),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),wt.addInstance("Tooltip",this,this._instanceId,i.override)}return t.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},t.prototype.destroy=function(){var e=this;if(this._initialized){var n=this._getTriggerEvents();n.showEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._showHandler)}),n.hideEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},t.prototype.removeInstance=function(){wt.removeInstance("Tooltip",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._setupEventListeners=function(){var e=this,n=this._getTriggerEvents();this._showHandler=function(){e.show()},this._hideHandler=function(){e.hide()},n.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._showHandler)}),n.hideEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._hideHandler)})},t.prototype._createPopperInstance=function(){return yS(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},t.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},t.prototype._setupKeydownListener=function(){var e=this;this._keydownEventListener=function(n){"Escape"===n.key&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},t.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},t.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(n){e._handleClickOutside(n,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._handleClickOutside=function(e,n){var r=e.target;r!==n&&!n.contains(r)&&!this._triggerEl.contains(r)&&this.isVisible()&&this.hide()},t.prototype.isVisible=function(){return this._visible},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},t.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(e){return hu(hu({},e),{modifiers:gI(gI([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},t.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(e){return hu(hu({},e),{modifiers:gI(gI([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},t}();function TS(){document.querySelectorAll("[data-tooltip-target]").forEach(function(t){var e=t.getAttribute("data-tooltip-target"),n=document.getElementById(e);if(n){var r=t.getAttribute("data-tooltip-trigger"),i=t.getAttribute("data-tooltip-placement");new Mj(n,t,{placement:i||mI.placement,triggerType:r||mI.triggerType})}else console.error('The tooltip element with id "'.concat(e,'" does not exist. Please check the data-tooltip-target attribute.'))})}typeof window<"u"&&(window.Tooltip=Mj,window.initTooltips=TS);var fu=function(){return fu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},fu.apply(this,arguments)},_I=function(t,e,n){if(n||2===arguments.length)for(var s,r=0,i=e.length;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},dm={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},_ne={id:null,override:!0},Nj=function(){function t(e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=dm),void 0===i&&(i=_ne),this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._triggerEl=n,this._options=fu(fu({},dm),r),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),wt.addInstance("Popover",this,i.id?i.id:this._targetEl.id,i.override)}return t.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},t.prototype.destroy=function(){var e=this;if(this._initialized){var n=this._getTriggerEvents();n.showEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._showHandler),e._targetEl.removeEventListener(r,e._showHandler)}),n.hideEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._hideHandler),e._targetEl.removeEventListener(r,e._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},t.prototype.removeInstance=function(){wt.removeInstance("Popover",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._setupEventListeners=function(){var e=this,n=this._getTriggerEvents();this._showHandler=function(){e.show()},this._hideHandler=function(){setTimeout(function(){e._targetEl.matches(":hover")||e.hide()},100)},n.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._showHandler),e._targetEl.addEventListener(r,e._showHandler)}),n.hideEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._hideHandler),e._targetEl.addEventListener(r,e._hideHandler)})},t.prototype._createPopperInstance=function(){return yS(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})},t.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},t.prototype._setupKeydownListener=function(){var e=this;this._keydownEventListener=function(n){"Escape"===n.key&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},t.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},t.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(n){e._handleClickOutside(n,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._handleClickOutside=function(e,n){var r=e.target;r!==n&&!n.contains(r)&&!this._triggerEl.contains(r)&&this.isVisible()&&this.hide()},t.prototype.isVisible=function(){return this._visible},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},t.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(e){return fu(fu({},e),{modifiers:_I(_I([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},t.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(e){return fu(fu({},e),{modifiers:_I(_I([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},t}();function CS(){document.querySelectorAll("[data-popover-target]").forEach(function(t){var e=t.getAttribute("data-popover-target"),n=document.getElementById(e);if(n){var r=t.getAttribute("data-popover-trigger"),i=t.getAttribute("data-popover-placement"),s=t.getAttribute("data-popover-offset");new Nj(n,t,{placement:i||dm.placement,offset:s?parseInt(s):dm.offset,triggerType:r||dm.triggerType})}else console.error('The popover element with id "'.concat(e,'" does not exist. Please check the data-popover-target attribute.'))})}typeof window<"u"&&(window.Popover=Nj,window.initPopovers=CS);var yI=function(){return yI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},yI.apply(this,arguments)},bS={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},yne={id:null,override:!0},Oj=function(){function t(e,n,r,i,s){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=bS),void 0===s&&(s=yne),this._instanceId=s.id?s.id:r.id,this._parentEl=e,this._triggerEl=n,this._targetEl=r,this._options=yI(yI({},bS),i),this._visible=!1,this._initialized=!1,this.init(),wt.addInstance("Dial",this,this._instanceId,s.override)}return t.prototype.init=function(){var e=this;if(this._triggerEl&&this._targetEl&&!this._initialized){var n=this._getTriggerEventTypes(this._options.triggerType);this._showEventHandler=function(){e.show()},n.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._showEventHandler),e._targetEl.addEventListener(r,e._showEventHandler)}),this._hideEventHandler=function(){e._parentEl.matches(":hover")||e.hide()},n.hideEvents.forEach(function(r){e._parentEl.addEventListener(r,e._hideEventHandler)}),this._initialized=!0}},t.prototype.destroy=function(){var e=this;if(this._initialized){var n=this._getTriggerEventTypes(this._options.triggerType);n.showEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._showEventHandler),e._targetEl.removeEventListener(r,e._showEventHandler)}),n.hideEvents.forEach(function(r){e._parentEl.removeEventListener(r,e._hideEventHandler)}),this._initialized=!1}},t.prototype.removeInstance=function(){wt.removeInstance("Dial",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.hide=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)},t.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)},t.prototype.toggle=function(){this._visible?this.hide():this.show()},t.prototype.isHidden=function(){return!this._visible},t.prototype.isVisible=function(){return this._visible},t.prototype._getTriggerEventTypes=function(e){switch(e){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},t}();function DS(){document.querySelectorAll("[data-dial-init]").forEach(function(t){var e=t.querySelector("[data-dial-toggle]");if(e){var n=e.getAttribute("data-dial-toggle"),r=document.getElementById(n);if(r){var i=e.getAttribute("data-dial-trigger");new Oj(t,e,r,{triggerType:i||bS.triggerType})}else console.error("Dial with id ".concat(n," does not exist. Are you sure that the data-dial-toggle attribute points to the correct modal id?"))}else console.error("Dial with id ".concat(t.id," does not have a trigger element. Are you sure that the data-dial-toggle attribute exists?"))})}function kj(){iS(),oS(),aS(),uS(),vS(),ES(),IS(),wS(),TS(),CS(),DS()}function Ene(t,e){if(1&t&&($e(0,"div",1)(1,"div",2)(2,"div",3),bt(3),uc(4,"async"),Qe()()()),2&t){const n=vt();let r;Vt(3),Is(" ",null==(r=cc(4,1,n.myErrorHandler.error$))?null:r.message," ")}}typeof window<"u"&&(window.Dial=Oj,window.initDials=DS),typeof window<"u"&&(window.initFlowbite=kj),new nte("load",[iS,oS,aS,uS,vS,ES,IS,wS,TS,CS,DS]).init();let Ine=(()=>{class t{get myErrorHandler(){return this.errorHandler}constructor(n){this.errorHandler=n,this.errorVisible=!1,this.myErrorHandler.error$.subscribe(r=>{r&&(this.errorVisible=!0,setTimeout(()=>this.errorVisible=!1,2e3))})}static#e=this.\u0275fac=function(r){return new(r||t)(J(_s))};static#t=this.\u0275cmp=Bi({type:t,selectors:[["app-error-popup"]],decls:2,vars:3,consts:[["class","fixed top-20 right-10 z-50",4,"ngIf"],[1,"fixed","top-20","right-10","z-50"],[1,"bg-red-800","text-white","py-5","px-10","rounded","shadow-md",2,"font-size","10em"],[1,"text-sm","md:text-lg","text-gray-200"]],template:function(r,i){if(1&r&&(Kr(0,Ene,5,3,"div",0),uc(1,"async")),2&r){let s;Dn("ngIf",i.errorVisible&&!(null==(s=cc(1,1,i.myErrorHandler.error$))||!s.message))}},dependencies:[jy,$y],styles:[".hidden[_ngcontent-%COMP%]{display:none}"]})}return t})(),wne=(()=>{class t{constructor(){kj()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Bi({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(r,i){1&r&&gd(0,"app-error-popup")(1,"router-outlet")},dependencies:[vC,Ine]})}return t})();const Tne_firebaseConfig={apiKey:"AIzaSyCmxBk7v-Xmu3lDbO3ATSeIR6CouNXmQ5M",authDomain:"sharedshoppinglist-e4962.firebaseapp.com",projectId:"sharedshoppinglist-e4962",storageBucket:"sharedshoppinglist-e4962.appspot.com",messagingSenderId:"372226477733",appId:"1:372226477733:web:2e74fc78479fce35c4474c",measurementId:"G-34V9RTT3CM"};let Cne=(()=>{class t{constructor(){this.errorSubject=new P(null),this.error$=this.errorSubject.asObservable()}handleError(n){this.errorSubject.next(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})(),bne=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Rr({type:t,bootstrap:[wne]});static#n=this.\u0275inj=Dr({providers:[{provide:_s,useClass:Cne}],imports:[tW,rZ.initializeApp(Tne_firebaseConfig),KU,ete,Vee]})}return t})();X5().bootstrapModule(bne).catch(t=>console.error(t))},106:(as,Fn,Fe)=>{Fe.d(Fn,{Z:()=>Bn});var I=Fe(58),xe=Fe(537),j=Fe(534),Me=Fe(879);class dt{constructor(ke,He){this._delegate=ke,this.firebase=He,(0,j._addComponent)(ke,new xe.wA("app-compat",()=>this,"PUBLIC")),this.container=ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ke){this._delegate.automaticDataCollectionEnabled=ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ke=>{this._delegate.checkDestroyed(),ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(ke,He=j._DEFAULT_ENTRY_NAME){var jn;this._delegate.checkDestroyed();const $n=this._delegate.container.getProvider(ke);return!$n.isInitialized()&&"EXPLICIT"===(null===(jn=$n.getComponent())||void 0===jn?void 0:jn.instantiationMode)&&$n.initialize(),$n.getImmediate({identifier:He})}_removeServiceInstance(ke,He=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ke).clearInstance(He)}_addComponent(ke){(0,j._addComponent)(this._delegate,ke)}_addOrOverwriteComponent(ke){(0,j._addOrOverwriteComponent)(this._delegate,ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const nn=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function Je(){const mt=function Un(mt){const ke={},He={__esModule:!0,initializeApp:function Ut(ze,Pn={}){const K=j.initializeApp(ze,Pn);if((0,I.r3)(ke,K.name))return ke[K.name];const Zt=new mt(K,He);return ke[K.name]=Zt,Zt},app:$n,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function xt(ze){const Pn=ze.name,K=Pn.replace("-compat","");if(j._registerComponent(ze)&&"PUBLIC"===ze.type){const Zt=(Bt=$n())=>{if("function"!=typeof Bt[K])throw nn.create("invalid-app-argument",{appName:Pn});return Bt[K]()};void 0!==ze.serviceProps&&(0,I.ZB)(Zt,ze.serviceProps),He[K]=Zt,mt.prototype[K]=function(...Bt){return this._getService.bind(this,Pn).apply(this,ze.multipleInstances?Bt:[])}}return"PUBLIC"===ze.type?He[K]:null},removeApp:function jn(ze){delete ke[ze]},useAsService:function Ir(ze,Pn){return"serverAuth"===Pn?null:Pn},modularAPIs:j}};function $n(ze){if(!(0,I.r3)(ke,ze=ze||j._DEFAULT_ENTRY_NAME))throw nn.create("no-app",{appName:ze});return ke[ze]}return He.default=He,Object.defineProperty(He,"apps",{get:function _t(){return Object.keys(ke).map(ze=>ke[ze])}}),$n.App=mt,He}(dt);return mt.INTERNAL=Object.assign(Object.assign({},mt.INTERNAL),{createFirebaseNamespace:Je,extendNamespace:function ke(He){(0,I.ZB)(mt,He)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),mt}(),ie=new Me.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const mt=self.firebase.SDK_VERSION;mt&&mt.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Bn=Q;!function ht(mt){(0,j.registerVersion)("@firebase/app-compat","0.2.23",mt)}()},534:(as,Fn,Fe)=>{Fe.r(Fn),Fe.d(Fn,{FirebaseError:()=>Me.ZR,SDK_VERSION:()=>Ns,_DEFAULT_ENTRY_NAME:()=>yi,_addComponent:()=>Ms,_addOrOverwriteComponent:()=>tr,_apps:()=>Tr,_clearComponents:()=>Mn,_components:()=>cs,_getProvider:()=>jt,_registerComponent:()=>Io,_removeServiceInstance:()=>vi,deleteApp:()=>lr,getApp:()=>Os,getApps:()=>ia,initializeApp:()=>ra,onLog:()=>sa,registerVersion:()=>ks,setLogLevel:()=>Xc});var I=Fe(861),xe=Fe(537),j=Fe(879),Me=Fe(58);const dt=(O,S)=>S.some(ne=>O instanceof ne);let Wt,nn;const Q=new WeakMap,ie=new WeakMap,Ie=new WeakMap,Ye=new WeakMap,ht=new WeakMap;let ke={get(O,S,ne){if(O instanceof IDBTransaction){if("done"===S)return ie.get(O);if("objectStoreNames"===S)return O.objectStoreNames||Ie.get(O);if("store"===S)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return Ut(O[S])},set:(O,S,ne)=>(O[S]=ne,!0),has:(O,S)=>O instanceof IDBTransaction&&("done"===S||"store"===S)||S in O};function $n(O){return"function"==typeof O?function jn(O){return O!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Je(){return nn||(nn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(O)?function(...S){return O.apply(_t(this),S),Ut(Q.get(this))}:function(...S){return Ut(O.apply(_t(this),S))}:function(S,...ne){const Te=O.call(_t(this),S,...ne);return Ie.set(Te,S.sort?S.sort():[S]),Ut(Te)}}(O):(O instanceof IDBTransaction&&function mt(O){if(ie.has(O))return;const S=new Promise((ne,Te)=>{const Ve=()=>{O.removeEventListener("complete",Ze),O.removeEventListener("error",$),O.removeEventListener("abort",$)},Ze=()=>{ne(),Ve()},$=()=>{Te(O.error||new DOMException("AbortError","AbortError")),Ve()};O.addEventListener("complete",Ze),O.addEventListener("error",$),O.addEventListener("abort",$)});ie.set(O,S)}(O),dt(O,function Un(){return Wt||(Wt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(O,ke):O)}function Ut(O){if(O instanceof IDBRequest)return function Bn(O){const S=new Promise((ne,Te)=>{const Ve=()=>{O.removeEventListener("success",Ze),O.removeEventListener("error",$)},Ze=()=>{ne(Ut(O.result)),Ve()},$=()=>{Te(O.error),Ve()};O.addEventListener("success",Ze),O.addEventListener("error",$)});return S.then(ne=>{ne instanceof IDBCursor&&Q.set(ne,O)}).catch(()=>{}),ht.set(S,O),S}(O);if(Ye.has(O))return Ye.get(O);const S=$n(O);return S!==O&&(Ye.set(O,S),ht.set(S,O)),S}const _t=O=>ht.get(O),ze=["get","getKey","getAll","getAllKeys","count"],Pn=["put","add","delete","clear"],K=new Map;function Zt(O,S){if(!(O instanceof IDBDatabase)||S in O||"string"!=typeof S)return;if(K.get(S))return K.get(S);const ne=S.replace(/FromIndex$/,""),Te=S!==ne,Ve=Pn.includes(ne);if(!(ne in(Te?IDBIndex:IDBObjectStore).prototype)||!Ve&&!ze.includes(ne))return;const Ze=function(){var $=(0,I.Z)(function*(pn,...Ee){const Xe=this.transaction(pn,Ve?"readwrite":"readonly");let aa=Xe.store;return Te&&(aa=aa.index(Ee.shift())),(yield Promise.all([aa[ne](...Ee),Ve&&Xe.done]))[0]});return function(Ee){return $.apply(this,arguments)}}();return K.set(S,Ze),Ze}!function He(O){ke=O(ke)}(O=>({...O,get:(S,ne,Te)=>Zt(S,ne)||O.get(S,ne,Te),has:(S,ne)=>!!Zt(S,ne)||O.has(S,ne)}));class Bt{constructor(S){this.container=S}getPlatformInfoString(){return this.container.getProviders().map(ne=>{if(function wn(O){const S=O.getComponent();return"VERSION"===S?.type}(ne)){const Te=ne.getImmediate();return`${Te.library}/${Te.version}`}return null}).filter(ne=>ne).join(" ")}}const Ni="@firebase/app",st=new j.Yd("@firebase/app"),yi="[DEFAULT]",_u={[Ni]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Tr=new Map,cs=new Map;function Ms(O,S){try{O.container.addComponent(S)}catch(ne){st.debug(`Component ${S.name} failed to register with FirebaseApp ${O.name}`,ne)}}function tr(O,S){O.container.addOrOverwriteComponent(S)}function Io(O){const S=O.name;if(cs.has(S))return st.debug(`There were multiple attempts to register component ${S}.`),!1;cs.set(S,O);for(const ne of Tr.values())Ms(ne,O);return!0}function jt(O,S){const ne=O.container.getProvider("heartbeat").getImmediate({optional:!0});return ne&&ne.triggerHeartbeat(),O.container.getProvider(S)}function vi(O,S,ne=yi){jt(O,S).clearInstance(ne)}function Mn(){cs.clear()}const si=new Me.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class oi{constructor(S,ne,Te){this._isDeleted=!1,this._options=Object.assign({},S),this._config=Object.assign({},ne),this._name=ne.name,this._automaticDataCollectionEnabled=ne.automaticDataCollectionEnabled,this._container=Te,this.container.addComponent(new xe.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(S){this.checkDestroyed(),this._automaticDataCollectionEnabled=S}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(S){this._isDeleted=S}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}}const Ns="10.6.0";function ra(O,S={}){let ne=O;"object"!=typeof S&&(S={name:S});const Te=Object.assign({name:yi,automaticDataCollectionEnabled:!1},S),Ve=Te.name;if("string"!=typeof Ve||!Ve)throw si.create("bad-app-name",{appName:String(Ve)});if(ne||(ne=(0,Me.aH)()),!ne)throw si.create("no-options");const Ze=Tr.get(Ve);if(Ze){if((0,Me.vZ)(ne,Ze.options)&&(0,Me.vZ)(Te,Ze.config))return Ze;throw si.create("duplicate-app",{appName:Ve})}const $=new xe.H0(Ve);for(const Ee of cs.values())$.addComponent(Ee);const pn=new oi(ne,Te,$);return Tr.set(Ve,pn),pn}function Os(O=yi){const S=Tr.get(O);if(!S&&O===yi&&(0,Me.aH)())return ra();if(!S)throw si.create("no-app",{appName:O});return S}function ia(){return Array.from(Tr.values())}function lr(O){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,I.Z)(function*(O){const S=O.name;Tr.has(S)&&(Tr.delete(S),yield Promise.all(O.container.getProviders().map(ne=>ne.delete())),O.isDeleted=!0)})).apply(this,arguments)}function ks(O,S,ne){var Te;let Ve=null!==(Te=_u[O])&&void 0!==Te?Te:O;ne&&(Ve+=`-${ne}`);const Ze=Ve.match(/\s|\//),$=S.match(/\s|\//);if(Ze||$){const pn=[`Unable to register library "${Ve}" with version "${S}":`];return Ze&&pn.push(`library name "${Ve}" contains illegal characters (whitespace or "/")`),Ze&&$&&pn.push("and"),$&&pn.push(`version name "${S}" contains illegal characters (whitespace or "/")`),void st.warn(pn.join(" "))}Io(new xe.wA(`${Ve}-version`,()=>({library:Ve,version:S}),"VERSION"))}function sa(O,S){if(null!==O&&"function"!=typeof O)throw si.create("invalid-log-argument");(0,j.Am)(O,S)}function Xc(O){(0,j.Ub)(O)}const yu="firebase-heartbeat-database",oa=1,D="firebase-heartbeat-store";let C=null;function A(){return C||(C=function xt(O,S,{blocked:ne,upgrade:Te,blocking:Ve,terminated:Ze}={}){const $=indexedDB.open(O,S),pn=Ut($);return Te&&$.addEventListener("upgradeneeded",Ee=>{Te(Ut($.result),Ee.oldVersion,Ee.newVersion,Ut($.transaction),Ee)}),ne&&$.addEventListener("blocked",Ee=>ne(Ee.oldVersion,Ee.newVersion,Ee)),pn.then(Ee=>{Ze&&Ee.addEventListener("close",()=>Ze()),Ve&&Ee.addEventListener("versionchange",Xe=>Ve(Xe.oldVersion,Xe.newVersion,Xe))}).catch(()=>{}),pn}(yu,oa,{upgrade:(O,S)=>{0===S&&O.createObjectStore(D)}}).catch(O=>{throw si.create("idb-open",{originalErrorMessage:O.message})})),C}function P(){return(P=(0,I.Z)(function*(O){try{return yield(yield A()).transaction(D).objectStore(D).get(Ge(O))}catch(S){if(S instanceof Me.ZR)st.warn(S.message);else{const ne=si.create("idb-get",{originalErrorMessage:S?.message});st.warn(ne.message)}}})).apply(this,arguments)}function G(O,S){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,I.Z)(function*(O,S){try{const Te=(yield A()).transaction(D,"readwrite");yield Te.objectStore(D).put(S,Ge(O)),yield Te.done}catch(ne){if(ne instanceof Me.ZR)st.warn(ne.message);else{const Te=si.create("idb-set",{originalErrorMessage:ne?.message});st.warn(Te.message)}}})).apply(this,arguments)}function Ge(O){return`${O.name}!${O.options.appId}`}class Nn{constructor(S){this.container=S,this._heartbeatsCache=null;const ne=this.container.getProvider("app").getImmediate();this._storage=new Dt(ne),this._heartbeatsCachePromise=this._storage.read().then(Te=>(this._heartbeatsCache=Te,Te))}triggerHeartbeat(){var S=this;return(0,I.Z)(function*(){var ne;const Ve=S.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ze=ye();if(null==(null===(ne=S._heartbeatsCache)||void 0===ne?void 0:ne.heartbeats)&&(S._heartbeatsCache=yield S._heartbeatsCachePromise),S._heartbeatsCache.lastSentHeartbeatDate!==Ze&&!S._heartbeatsCache.heartbeats.some($=>$.date===Ze))return S._heartbeatsCache.heartbeats.push({date:Ze,agent:Ve}),S._heartbeatsCache.heartbeats=S._heartbeatsCache.heartbeats.filter($=>{const pn=new Date($.date).valueOf();return Date.now()-pn<=2592e6}),S._storage.overwrite(S._heartbeatsCache)})()}getHeartbeatsHeader(){var S=this;return(0,I.Z)(function*(){var ne;if(null===S._heartbeatsCache&&(yield S._heartbeatsCachePromise),null==(null===(ne=S._heartbeatsCache)||void 0===ne?void 0:ne.heartbeats)||0===S._heartbeatsCache.heartbeats.length)return"";const Te=ye(),{heartbeatsToSend:Ve,unsentEntries:Ze}=function Hn(O,S=1024){const ne=[];let Te=O.slice();for(const Ve of O){const Ze=ne.find($=>$.agent===Ve.agent);if(Ze){if(Ze.dates.push(Ve.date),Vi(ne)>S){Ze.dates.pop();break}}else if(ne.push({agent:Ve.agent,dates:[Ve.date]}),Vi(ne)>S){ne.pop();break}Te=Te.slice(1)}return{heartbeatsToSend:ne,unsentEntries:Te}}(S._heartbeatsCache.heartbeats),$=(0,Me.L)(JSON.stringify({version:2,heartbeats:Ve}));return S._heartbeatsCache.lastSentHeartbeatDate=Te,Ze.length>0?(S._heartbeatsCache.heartbeats=Ze,yield S._storage.overwrite(S._heartbeatsCache)):(S._heartbeatsCache.heartbeats=[],S._storage.overwrite(S._heartbeatsCache)),$})()}}function ye(){return(new Date).toISOString().substring(0,10)}class Dt{constructor(S){this.app=S,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,Me.hl)()&&(0,Me.eu)().then(()=>!0).catch(()=>!1)})()}read(){var S=this;return(0,I.Z)(function*(){return(yield S._canUseIndexedDBPromise)&&(yield function W(O){return P.apply(this,arguments)}(S.app))||{heartbeats:[]}})()}overwrite(S){var ne=this;return(0,I.Z)(function*(){var Te;if(yield ne._canUseIndexedDBPromise){const Ze=yield ne.read();return G(ne.app,{lastSentHeartbeatDate:null!==(Te=S.lastSentHeartbeatDate)&&void 0!==Te?Te:Ze.lastSentHeartbeatDate,heartbeats:S.heartbeats})}})()}add(S){var ne=this;return(0,I.Z)(function*(){var Te;if(yield ne._canUseIndexedDBPromise){const Ze=yield ne.read();return G(ne.app,{lastSentHeartbeatDate:null!==(Te=S.lastSentHeartbeatDate)&&void 0!==Te?Te:Ze.lastSentHeartbeatDate,heartbeats:[...Ze.heartbeats,...S.heartbeats]})}})()}}function Vi(O){return(0,Me.L)(JSON.stringify({version:2,heartbeats:O})).length}!function el(O){Io(new xe.wA("platform-logger",S=>new Bt(S),"PRIVATE")),Io(new xe.wA("heartbeat",S=>new Nn(S),"PRIVATE")),ks(Ni,"0.9.23",O),ks(Ni,"0.9.23","esm2017"),ks("fire-js","")}("")},537:(as,Fn,Fe)=>{Fe.d(Fn,{H0:()=>Un,wA:()=>j});var I=Fe(861),xe=Fe(58);class j{constructor(Q,ie,Ie){this.name=Q,this.instanceFactory=ie,this.type=Ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const Me="[DEFAULT]";class dt{constructor(Q,ie){this.name=Q,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const ie=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(ie)){const Ie=new xe.BH;if(this.instancesDeferred.set(ie,Ie),this.isInitialized(ie)||this.shouldAutoInitialize())try{const Ye=this.getOrInitializeService({instanceIdentifier:ie});Ye&&Ie.resolve(Ye)}catch{}}return this.instancesDeferred.get(ie).promise}getImmediate(Q){var ie;const Ie=this.normalizeInstanceIdentifier(Q?.identifier),Ye=null!==(ie=Q?.optional)&&void 0!==ie&&ie;if(!this.isInitialized(Ie)&&!this.shouldAutoInitialize()){if(Ye)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ie})}catch(ht){if(Ye)return null;throw ht}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if(function nn(Je){return"EAGER"===Je.instantiationMode}(Q))try{this.getOrInitializeService({instanceIdentifier:Me})}catch{}for(const[ie,Ie]of this.instancesDeferred.entries()){const Ye=this.normalizeInstanceIdentifier(ie);try{const ht=this.getOrInitializeService({instanceIdentifier:Ye});Ie.resolve(ht)}catch{}}}}clearInstance(Q=Me){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,I.Z)(function*(){const ie=Array.from(Q.instances.values());yield Promise.all([...ie.filter(Ie=>"INTERNAL"in Ie).map(Ie=>Ie.INTERNAL.delete()),...ie.filter(Ie=>"_delete"in Ie).map(Ie=>Ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=Me){return this.instances.has(Q)}getOptions(Q=Me){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:ie={}}=Q,Ie=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(Ie))throw Error(`${this.name}(${Ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ye=this.getOrInitializeService({instanceIdentifier:Ie,options:ie});for(const[ht,Bn]of this.instancesDeferred.entries())Ie===this.normalizeInstanceIdentifier(ht)&&Bn.resolve(Ye);return Ye}onInit(Q,ie){var Ie;const Ye=this.normalizeInstanceIdentifier(ie),ht=null!==(Ie=this.onInitCallbacks.get(Ye))&&void 0!==Ie?Ie:new Set;ht.add(Q),this.onInitCallbacks.set(Ye,ht);const Bn=this.instances.get(Ye);return Bn&&Q(Bn,Ye),()=>{ht.delete(Q)}}invokeOnInitCallbacks(Q,ie){const Ie=this.onInitCallbacks.get(ie);if(Ie)for(const Ye of Ie)try{Ye(Q,ie)}catch{}}getOrInitializeService({instanceIdentifier:Q,options:ie={}}){let Ie=this.instances.get(Q);if(!Ie&&this.component&&(Ie=this.component.instanceFactory(this.container,{instanceIdentifier:(Je=Q,Je===Me?void 0:Je),options:ie}),this.instances.set(Q,Ie),this.instancesOptions.set(Q,ie),this.invokeOnInitCallbacks(Ie,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,Ie)}catch{}var Je;return Ie||null}normalizeInstanceIdentifier(Q=Me){return this.component?this.component.multipleInstances?Q:Me:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Un{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const ie=this.getProvider(Q.name);if(ie.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);ie.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const ie=new dt(Q,this);return this.providers.set(Q,ie),ie}getProviders(){return Array.from(this.providers.values())}}},879:(as,Fn,Fe)=>{Fe.d(Fn,{Am:()=>Je,Ub:()=>Un,Yd:()=>nn,in:()=>xe});const I=[];var xe=function(Q){return Q[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",Q}(xe||{});const j={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},Me=xe.INFO,dt={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},Wt=(Q,ie,...Ie)=>{if(ie<Q.logLevel)return;const Ye=(new Date).toISOString(),ht=dt[ie];if(!ht)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[ht](`[${Ye}]  ${Q.name}:`,...Ie)};class nn{constructor(ie){this.name=ie,this._logLevel=Me,this._logHandler=Wt,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in xe))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?j[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...ie),this._logHandler(this,xe.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...ie),this._logHandler(this,xe.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...ie),this._logHandler(this,xe.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...ie),this._logHandler(this,xe.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...ie),this._logHandler(this,xe.ERROR,...ie)}}function Un(Q){I.forEach(ie=>{ie.setLogLevel(Q)})}function Je(Q,ie){for(const Ie of I){let Ye=null;ie&&ie.level&&(Ye=j[ie.level]),Ie.userLogHandler=null===Q?null:(ht,Bn,...mt)=>{const ke=mt.map(He=>{if(null==He)return null;if("string"==typeof He)return He;if("number"==typeof He||"boolean"==typeof He)return He.toString();if(He instanceof Error)return He.message;try{return JSON.stringify(He)}catch{return null}}).filter(He=>He).join(" ");Bn>=(Ye??ht.logLevel)&&Q({level:xe[Bn].toLowerCase(),message:ke,args:mt,type:ht.name})}}}},956:(as,Fn,Fe)=>{Fe.r(Fn);var I=Fe(861),xe=Fe(106),j=Fe(58),Me=Fe(534),dt=Fe(879),Wt=Fe(582),nn=Fe(537);const Je={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Bn=function Ye(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},mt=function ht(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ke=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),jn=new dt.Yd("@firebase/auth");function Ut(h,...c){jn.logLevel<=dt.in.ERROR&&jn.error(`Auth (${Me.SDK_VERSION}): ${h}`,...c)}function _t(h,...c){throw Pn(h,...c)}function xt(h,...c){return Pn(h,...c)}function Ir(h,c,l){const p=Object.assign(Object.assign({},mt()),{[c]:l});return new j.LL("auth","Firebase",p).create(c,{appName:h.name})}function ze(h,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&_t(h,"argument-error"),Ir(h,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pn(h,...c){if("string"!=typeof h){const l=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=h.name),h._errorFactory.create(l,...p)}return ke.create(h,...c)}function K(h,c,...l){if(!h)throw Pn(c,...l)}function Zt(h){const c="INTERNAL ASSERTION FAILED: "+h;throw Ut(c),new Error(c)}function Bt(h,c){h||Zt(c)}function wn(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function Ni(){return"http:"===Oi()||"https:"===Oi()}function Oi(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}class ki{constructor(c,l){this.shortDelay=c,this.longDelay=l,Bt(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function st(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ni()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function V(h,c){Bt(h.emulator,"Emulator should always be set here");const{url:l}=h.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class F{static initialize(c,l,p){this.fetchImpl=c,l&&(this.headersImpl=l),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const H={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},z=new ki(3e4,6e4);function Y(h,c){return h.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:h.tenantId}):c}function B(h,c,l,p){return pe.apply(this,arguments)}function pe(){return(pe=(0,I.Z)(function*(h,c,l,p,m={}){return rt(h,m,(0,I.Z)(function*(){let v={},T={};p&&("GET"===c?T=p:v={body:JSON.stringify(p)});const x=(0,j.xO)(Object.assign({key:h.config.apiKey},T)).slice(1),q=yield h._getAdditionalHeaders();return q["Content-Type"]="application/json",h.languageCode&&(q["X-Firebase-Locale"]=h.languageCode),F.fetch()(Kt(h,h.config.apiHost,l,x),Object.assign({method:c,headers:q,referrerPolicy:"no-referrer"},v))}))})).apply(this,arguments)}function rt(h,c,l){return _e.apply(this,arguments)}function _e(){return(_e=(0,I.Z)(function*(h,c,l){h._canInitEmulator=!1;const p=Object.assign(Object.assign({},H),c);try{const m=new er(h),v=yield Promise.race([l(),m.promise]);m.clearNetworkTimeout();const T=yield v.json();if("needConfirmation"in T)throw xn(h,"account-exists-with-different-credential",T);if(v.ok&&!("errorMessage"in T))return T;{const x=v.ok?T.errorMessage:T.error.message,[q,ae]=x.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===q)throw xn(h,"credential-already-in-use",T);if("EMAIL_EXISTS"===q)throw xn(h,"email-already-in-use",T);if("USER_DISABLED"===q)throw xn(h,"user-disabled",T);const ge=p[q]||q.toLowerCase().replace(/[_\s]+/g,"-");if(ae)throw Ir(h,ge,ae);_t(h,ge)}}catch(m){if(m instanceof j.ZR)throw m;_t(h,"network-request-failed",{message:String(m)})}})).apply(this,arguments)}function we(h,c,l,p){return at.apply(this,arguments)}function at(){return(at=(0,I.Z)(function*(h,c,l,p,m={}){const v=yield B(h,c,l,p,m);return"mfaPendingCredential"in v&&_t(h,"multi-factor-auth-required",{_serverResponse:v}),v})).apply(this,arguments)}function Kt(h,c,l,p){const m=`${c}${l}?${p}`;return h.config.emulator?V(h.config,m):`${h.config.apiScheme}://${m}`}function Ot(h){switch(h){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class er{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,p)=>{this.timer=setTimeout(()=>p(xt(this.auth,"network-request-failed")),z.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xn(h,c,l){const p={appName:h.name};l.email&&(p.email=l.email),l.phoneNumber&&(p.phoneNumber=l.phoneNumber);const m=xt(h,c,p);return m.customData._tokenResponse=l,m}function cr(h){return void 0!==h&&void 0!==h.getResponse}function wr(h){return void 0!==h&&void 0!==h.enterprise}class Ur{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return Ot(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function us(){return(us=(0,I.Z)(function*(h){return(yield B(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Tn(h,c){return ta.apply(this,arguments)}function ta(){return(ta=(0,I.Z)(function*(h,c){return B(h,"GET","/v2/recaptchaConfig",Y(h,c))})).apply(this,arguments)}function yi(){return(yi=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Tr(){return(Tr=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ms(){return(Ms=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function tr(h){if(h)try{const c=new Date(Number(h));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function vi(){return(vi=(0,I.Z)(function*(h,c=!1){const l=(0,j.m9)(h),p=yield l.getIdToken(c),m=na(p);K(m&&m.exp&&m.auth_time&&m.iat,l.auth,"internal-error");const v="object"==typeof m.firebase?m.firebase:void 0,T=v?.sign_in_provider;return{claims:m,token:p,authTime:tr(Mn(m.auth_time)),issuedAtTime:tr(Mn(m.iat)),expirationTime:tr(Mn(m.exp)),signInProvider:T||null,signInSecondFactor:v?.sign_in_second_factor||null}})).apply(this,arguments)}function Mn(h){return 1e3*Number(h)}function na(h){const[c,l,p]=h.split(".");if(void 0===c||void 0===l||void 0===p)return Ut("JWT malformed, contained fewer than 3 sections"),null;try{const m=(0,j.tV)(l);return m?JSON.parse(m):(Ut("Failed to decode base64 JWT payload"),null)}catch(m){return Ut("Caught error parsing JWT payload as JSON",m?.toString()),null}}function oi(h,c){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,I.Z)(function*(h,c,l=!1){if(l)return c;try{return yield c}catch(p){throw p instanceof j.ZR&&function ra({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(p)&&h.auth.currentUser===h&&(yield h.auth.signOut()),p}})).apply(this,arguments)}class Os{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const m=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,m)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,I.Z)(function*(){yield l.iteration()}),p)}iteration(){var c=this;return(0,I.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class ia{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=tr(this.lastLoginAt),this.creationTime=tr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function lr(h){return Cr.apply(this,arguments)}function Cr(){return Cr=(0,I.Z)(function*(h){var c;const l=h.auth,p=yield h.getIdToken(),m=yield oi(h,function cs(h,c){return Ms.apply(this,arguments)}(l,{idToken:p}));K(m?.users.length,l,"internal-error");const v=m.users[0];h._notifyReloadListener(v);const T=null!==(c=v.providerUserInfo)&&void 0!==c&&c.length?function yu(h){return h.map(c=>{var{providerId:l}=c,p=(0,Wt._T)(c,["providerId"]);return{providerId:l,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(v.providerUserInfo):[],x=function Xc(h,c){return[...h.filter(p=>!c.some(m=>m.providerId===p.providerId)),...c]}(h.providerData,T),ge=!!h.isAnonymous&&!(h.email&&v.passwordHash||x?.length),ve={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:x,metadata:new ia(v.createdAt,v.lastLoginAt),isAnonymous:ge};Object.assign(h,ve)}),Cr.apply(this,arguments)}function sa(){return(sa=(0,I.Z)(function*(h){const c=(0,j.m9)(h);yield lr(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function D(){return(D=(0,I.Z)(function*(h,c){const l=yield rt(h,{},(0,I.Z)(function*(){const p=(0,j.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:m,apiKey:v}=h.config,T=Kt(h,m,"/v1/token",`key=${v}`),x=yield h._getAdditionalHeaders();return x["Content-Type"]="application/x-www-form-urlencoded",F.fetch()(T,{method:"POST",headers:x,body:p})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function A(){return(A=(0,I.Z)(function*(h,c){return B(h,"POST","/v2/accounts:revokeToken",Y(h,c))})).apply(this,arguments)}class W{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){K(c.idToken,"internal-error"),K(typeof c.idToken<"u","internal-error"),K(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function si(h){const c=na(h);return K(c,"internal-error"),K(typeof c.exp<"u","internal-error"),K(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}getToken(c,l=!1){var p=this;return(0,I.Z)(function*(){return K(!p.accessToken||p.refreshToken,c,"user-token-expired"),l||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var p=this;return(0,I.Z)(function*(){const{accessToken:m,refreshToken:v,expiresIn:T}=yield function oa(h,c){return D.apply(this,arguments)}(c,l);p.updateTokensAndExpiration(m,v,Number(T))})()}updateTokensAndExpiration(c,l,p){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,l){const{refreshToken:p,accessToken:m,expirationTime:v}=l,T=new W;return p&&(K("string"==typeof p,"internal-error",{appName:c}),T.refreshToken=p),m&&(K("string"==typeof m,"internal-error",{appName:c}),T.accessToken=m),v&&(K("number"==typeof v,"internal-error",{appName:c}),T.expirationTime=v),T}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new W,this.toJSON())}_performRefresh(){return Zt("not implemented")}}function P(h,c){K("string"==typeof h||typeof h>"u","internal-error",{appName:c})}class G{constructor(c){var{uid:l,auth:p,stsTokenManager:m}=c,v=(0,Wt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Os(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=p,this.stsTokenManager=m,this.accessToken=m.accessToken,this.displayName=v.displayName||null,this.email=v.email||null,this.emailVerified=v.emailVerified||!1,this.phoneNumber=v.phoneNumber||null,this.photoURL=v.photoURL||null,this.isAnonymous=v.isAnonymous||!1,this.tenantId=v.tenantId||null,this.providerData=v.providerData?[...v.providerData]:[],this.metadata=new ia(v.createdAt||void 0,v.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,I.Z)(function*(){const p=yield oi(l,l.stsTokenManager.getToken(l.auth,c));return K(p,l.auth,"internal-error"),l.accessToken!==p&&(l.accessToken=p,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),p})()}getIdTokenResult(c){return function jt(h){return vi.apply(this,arguments)}(this,c)}reload(){return function ks(h){return sa.apply(this,arguments)}(this)}_assign(c){this!==c&&(K(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new G(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var p=this;return(0,I.Z)(function*(){let m=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),m=!0),l&&(yield lr(p)),yield p.auth._persistUserIfCurrent(p),m&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,I.Z)(function*(){const l=yield c.getIdToken();return yield oi(c,function mu(h,c){return yi.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var p,m,v,T,x,q,ae,ge;const ve=null!==(p=l.displayName)&&void 0!==p?p:void 0,sn=null!==(m=l.email)&&void 0!==m?m:void 0,wi=null!==(v=l.phoneNumber)&&void 0!==v?v:void 0,zl=null!==(T=l.photoURL)&&void 0!==T?T:void 0,A_=null!==(x=l.tenantId)&&void 0!==x?x:void 0,Aa=null!==(q=l._redirectEventId)&&void 0!==q?q:void 0,Ff=null!==(ae=l.createdAt)&&void 0!==ae?ae:void 0,S_=null!==(ge=l.lastLoginAt)&&void 0!==ge?ge:void 0,{uid:Gl,emailVerified:Aw,isAnonymous:Uf,providerData:R_,stsTokenManager:P_}=l;K(Gl&&P_,c,"internal-error");const Sw=W.fromJSON(this.name,P_);K("string"==typeof Gl,c,"internal-error"),P(ve,c.name),P(sn,c.name),K("boolean"==typeof Aw,c,"internal-error"),K("boolean"==typeof Uf,c,"internal-error"),P(wi,c.name),P(zl,c.name),P(A_,c.name),P(Aa,c.name),P(Ff,c.name),P(S_,c.name);const tc=new G({uid:Gl,auth:c,email:sn,emailVerified:Aw,displayName:ve,isAnonymous:Uf,photoURL:zl,phoneNumber:wi,tenantId:A_,stsTokenManager:Sw,createdAt:Ff,lastLoginAt:S_});return R_&&Array.isArray(R_)&&(tc.providerData=R_.map(pR=>Object.assign({},pR))),Aa&&(tc._redirectEventId=Aa),tc}static _fromIdTokenResponse(c,l,p=!1){return(0,I.Z)(function*(){const m=new W;m.updateFromServerResponse(l);const v=new G({uid:l.localId,auth:c,stsTokenManager:m,isAnonymous:p});return yield lr(v),v})()}}const Ne=new Map;function Ge(h){Bt(h instanceof Function,"Expected a class definition");let c=Ne.get(h);return c?(Bt(c instanceof h,"Instance stored in cache mismatched with class"),c):(c=new h,Ne.set(h,c),c)}const Qt=(()=>{class h{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(l,p){var m=this;return(0,I.Z)(function*(){m.storage[l]=p})()}_get(l){var p=this;return(0,I.Z)(function*(){const m=p.storage[l];return void 0===m?null:m})()}_remove(l){var p=this;return(0,I.Z)(function*(){delete p.storage[l]})()}_addListener(l,p){}_removeListener(l,p){}}return h.type="NONE",h})();function Nn(h,c,l){return`firebase:${h}:${c}:${l}`}class ye{constructor(c,l,p){this.persistence=c,this.auth=l,this.userKey=p;const{config:m,name:v}=this.auth;this.fullUserKey=Nn(this.userKey,m.apiKey,v),this.fullPersistenceKey=Nn("persistence",m.apiKey,v),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,I.Z)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?G._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,I.Z)(function*(){if(l.persistence===c)return;const p=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,p?l.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,p="authUser"){return(0,I.Z)(function*(){if(!l.length)return new ye(Ge(Qt),c,p);const m=(yield Promise.all(l.map(function(){var ae=(0,I.Z)(function*(ge){if(yield ge._isAvailable())return ge});return function(ge){return ae.apply(this,arguments)}}()))).filter(ae=>ae);let v=m[0]||Ge(Qt);const T=Nn(p,c.config.apiKey,c.name);let x=null;for(const ae of l)try{const ge=yield ae._get(T);if(ge){const ve=G._fromJSON(c,ge);ae!==v&&(x=ve),v=ae;break}}catch{}const q=m.filter(ae=>ae._shouldAllowMigration);return v._shouldAllowMigration&&q.length?(v=q[0],x&&(yield v._set(T,x.toJSON())),yield Promise.all(l.map(function(){var ae=(0,I.Z)(function*(ge){if(ge!==v)try{yield ge._remove(T)}catch{}});return function(ge){return ae.apply(this,arguments)}}())),new ye(v,c,p)):new ye(v,c,p)})()}}function Hn(h){const c=h.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(O(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Dt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ne(c))return"Blackberry";if(Te(c))return"Webos";if(Vi(c))return"Safari";if((c.includes("chrome/")||el(c))&&!c.includes("edge/"))return"Chrome";if(S(c))return"Android";{const p=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Dt(h=(0,j.z$)()){return/firefox\//i.test(h)}function Vi(h=(0,j.z$)()){const c=h.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function el(h=(0,j.z$)()){return/crios\//i.test(h)}function O(h=(0,j.z$)()){return/iemobile/i.test(h)}function S(h=(0,j.z$)()){return/android/i.test(h)}function ne(h=(0,j.z$)()){return/blackberry/i.test(h)}function Te(h=(0,j.z$)()){return/webos/i.test(h)}function Ve(h=(0,j.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function Ee(h=(0,j.z$)()){return Ve(h)||S(h)||Te(h)||ne(h)||/windows phone/i.test(h)||O(h)}function aa(h,c=[]){let l;switch(h){case"Browser":l=Hn((0,j.z$)());break;case"Worker":l=`${Hn((0,j.z$)())}-${h}`;break;default:l=h}const p=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Me.SDK_VERSION}/${p}`}class xS{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const p=v=>new Promise((T,x)=>{try{T(c(v))}catch(q){x(q)}});p.onAbort=l,this.queue.push(p);const m=this.queue.length-1;return()=>{this.queue[m]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,I.Z)(function*(){if(l.auth.currentUser===c)return;const p=[];try{for(const m of l.queue)yield m(c),m.onAbort&&p.push(m.onAbort)}catch(m){p.reverse();for(const v of p)try{v()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:m?.message})}})()}}function vu(){return(vu=(0,I.Z)(function*(h,c={}){return B(h,"GET","/v2/passwordPolicy",Y(h,c))})).apply(this,arguments)}class MS{constructor(c){var l,p,m,v;const T=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=T.minPasswordLength)&&void 0!==l?l:6,T.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=T.maxPasswordLength),void 0!==T.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=T.containsLowercaseCharacter),void 0!==T.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=T.containsUppercaseCharacter),void 0!==T.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=T.containsNumericCharacter),void 0!==T.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=T.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(m=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==m?m:"",this.forceUpgradeOnSignin=null!==(v=c.forceUpgradeOnSignin)&&void 0!==v&&v,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,p,m,v,T,x;const q={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,q),this.validatePasswordCharacterOptions(c,q),q.isValid&&(q.isValid=null===(l=q.meetsMinPasswordLength)||void 0===l||l),q.isValid&&(q.isValid=null===(p=q.meetsMaxPasswordLength)||void 0===p||p),q.isValid&&(q.isValid=null===(m=q.containsLowercaseLetter)||void 0===m||m),q.isValid&&(q.isValid=null===(v=q.containsUppercaseLetter)||void 0===v||v),q.isValid&&(q.isValid=null===(T=q.containsNumericCharacter)||void 0===T||T),q.isValid&&(q.isValid=null===(x=q.containsNonAlphanumericCharacter)||void 0===x||x),q}validatePasswordLengthOptions(c,l){const p=this.customStrengthOptions.minPasswordLength,m=this.customStrengthOptions.maxPasswordLength;p&&(l.meetsMinPasswordLength=c.length>=p),m&&(l.meetsMaxPasswordLength=c.length<=m)}validatePasswordCharacterOptions(c,l){let p;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let m=0;m<c.length;m++)p=c.charAt(m),this.updatePasswordCharacterOptionsStatuses(l,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,l,p,m,v){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=m)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=v))}}class bI{constructor(c,l,p,m){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=p,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vs(this),this.idTokenSubscription=new Vs(this),this.beforeStateQueue=new xS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ke,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(c,l){var p=this;return l&&(this._popupRedirectResolver=Ge(l)),this._initializationPromise=this.queue((0,I.Z)(function*(){var m,v;if(!p._deleted&&(p.persistenceManager=yield ye.create(p,c),!p._deleted)){if(null!==(m=p._popupRedirectResolver)&&void 0!==m&&m._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(l),p.lastNotifiedUid=(null===(v=p.currentUser)||void 0===v?void 0:v.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,I.Z)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUser(c){var l=this;return(0,I.Z)(function*(){var p;const m=yield l.assertedPersistence.getCurrentUser();let v=m,T=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const x=null===(p=l.redirectUser)||void 0===p?void 0:p._redirectEventId,q=v?._redirectEventId,ae=yield l.tryRedirectSignIn(c);(!x||x===q)&&ae?.user&&(v=ae.user,T=!0)}if(!v)return l.directlySetCurrentUser(null);if(!v._redirectEventId){if(T)try{yield l.beforeStateQueue.runMiddleware(v)}catch(x){v=m,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(x))}return v?l.reloadAndSetCurrentUserOrClear(v):l.directlySetCurrentUser(null)}return K(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===v._redirectEventId?l.directlySetCurrentUser(v):l.reloadAndSetCurrentUserOrClear(v)})()}tryRedirectSignIn(c){var l=this;return(0,I.Z)(function*(){let p=null;try{p=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,I.Z)(function*(){try{yield lr(c)}catch(p){if("auth/network-request-failed"!==p?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Eo(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}()}_delete(){var c=this;return(0,I.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,I.Z)(function*(){const p=c?(0,j.m9)(c):null;return p&&K(p.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(p&&p._clone(l))})()}_updateCurrentUser(c,l=!1){var p=this;return(0,I.Z)(function*(){if(!p._deleted)return c&&K(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),l||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,I.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,I.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var l=this;return this.queue((0,I.Z)(function*(){yield l.assertedPersistence.setPersistence(Ge(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,I.Z)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const p=l._getPasswordPolicyInternal();return p.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,I.Z)(function*(){const l=yield function CI(h){return vu.apply(this,arguments)}(c),p=new MS(l);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new j.LL("auth","Firebase",c())}onAuthStateChanged(c,l,p){return this.registerStateListener(this.authStateSubscription,c,l,p)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,p){return this.registerStateListener(this.idTokenSubscription,c,l,p)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,I.Z)(function*(){if(l.currentUser){const p=yield l.currentUser.getIdToken(),m={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=l.tenantId&&(m.tenantId=l.tenantId),yield function C(h,c){return A.apply(this,arguments)}(l,m)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var p=this;return(0,I.Z)(function*(){const m=yield p.getOrInitRedirectPersistenceManager(l);return null===c?m.removeCurrentUser():m.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,I.Z)(function*(){if(!l.redirectPersistenceManager){const p=c&&Ge(c)||l._popupRedirectResolver;K(p,l,"argument-error"),l.redirectPersistenceManager=yield ye.create(l,[Ge(p._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,I.Z)(function*(){var p,m;return l._isInitialized&&(yield l.queue((0,I.Z)(function*(){}))),(null===(p=l._currentUser)||void 0===p?void 0:p._redirectEventId)===c?l._currentUser:(null===(m=l.redirectUser)||void 0===m?void 0:m._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,I.Z)(function*(){if(c===l.currentUser)return l.queue((0,I.Z)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,p,m){if(this._deleted)return()=>{};const v="function"==typeof l?l:l.next.bind(l);let T=!1;const x=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(x,this,"internal-error"),x.then(()=>{T||v(this.currentUser)}),"function"==typeof l){const q=c.addObserver(l,p,m);return()=>{T=!0,q()}}{const q=c.addObserver(l);return()=>{T=!0,q()}}}directlySetCurrentUser(c){var l=this;return(0,I.Z)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=aa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,I.Z)(function*(){var l;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const m=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();m&&(p["X-Firebase-Client"]=m);const v=yield c._getAppCheckToken();return v&&(p["X-Firebase-AppCheck"]=v),p})()}_getAppCheckToken(){var c=this;return(0,I.Z)(function*(){var l;const p=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return p?.error&&function $n(h,...c){jn.logLevel<=dt.in.WARN&&jn.warn(`Auth (${Me.SDK_VERSION}): ${h}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function $t(h){return(0,j.m9)(h)}class Vs{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,j.ne)(l=>this.observer=l)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function pm(h){return new Promise((c,l)=>{const p=document.createElement("script");p.setAttribute("src",h),p.onload=c,p.onerror=m=>{const v=xt("internal-error");v.customData=m,l(v)},p.type="text/javascript",p.charset="UTF-8",function NS(){var h,c;return null!==(c=null===(h=document.getElementsByTagName("head"))||void 0===h?void 0:h[0])&&void 0!==c?c:document}().appendChild(p)})}function DI(h){return`__${h}${Math.floor(1e6*Math.random())}`}class gm{constructor(c){this.type="recaptcha-enterprise",this.auth=$t(c)}verify(c="verify",l=!1){var p=this;return(0,I.Z)(function*(){function v(){return v=(0,I.Z)(function*(x){if(!l){if(null==x.tenantId&&null!=x._agentRecaptchaConfig)return x._agentRecaptchaConfig.siteKey;if(null!=x.tenantId&&void 0!==x._tenantRecaptchaConfigs[x.tenantId])return x._tenantRecaptchaConfigs[x.tenantId].siteKey}return new Promise(function(){var q=(0,I.Z)(function*(ae,ge){Tn(x,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ve=>{if(void 0!==ve.recaptchaKey){const sn=new Ur(ve);return null==x.tenantId?x._agentRecaptchaConfig=sn:x._tenantRecaptchaConfigs[x.tenantId]=sn,ae(sn.siteKey)}ge(new Error("recaptcha Enterprise site key undefined"))}).catch(ve=>{ge(ve)})});return function(ae,ge){return q.apply(this,arguments)}}())}),v.apply(this,arguments)}function T(x,q,ae){const ge=window.grecaptcha;wr(ge)?ge.enterprise.ready(()=>{ge.enterprise.execute(x,{action:c}).then(ve=>{q(ve)}).catch(()=>{q("NO_RECAPTCHA")})}):ae(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((x,q)=>{(function m(x){return v.apply(this,arguments)})(p.auth).then(ae=>{if(!l&&wr(window.grecaptcha))T(ae,x,q);else{if(typeof window>"u")return void q(new Error("RecaptchaVerifier is only supported in browser"));pm("https://www.google.com/recaptcha/enterprise.js?render="+ae).then(()=>{T(ae,x,q)}).catch(ge=>{q(ge)})}}).catch(ae=>{q(ae)})})})()}}function SI(h,c,l){return br.apply(this,arguments)}function br(){return(br=(0,I.Z)(function*(h,c,l,p=!1){const m=new gm(h);let v;try{v=yield m.verify(l)}catch{v=yield m.verify(l,!0)}const T=Object.assign({},c);return Object.assign(T,p?{captchaResp:v}:{captchaResponse:v}),Object.assign(T,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(T,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),T})).apply(this,arguments)}function Ae(h,c,l,p){return mm.apply(this,arguments)}function mm(){return mm=(0,I.Z)(function*(h,c,l,p){var m;if(null!==(m=h._getRecaptchaConfig())&&void 0!==m&&m.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const v=yield SI(h,c,l,"getOobCode"===l);return p(h,v)}return p(h,c).catch(function(){var v=(0,I.Z)(function*(T){if("auth/missing-recaptcha-token"===T.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const x=yield SI(h,c,l,"getOobCode"===l);return p(h,x)}return Promise.reject(T)});return function(T){return v.apply(this,arguments)}}())}),mm.apply(this,arguments)}function Eu(h){const c=h.indexOf(":");return c<0?"":h.substr(0,c+1)}function Nh(h){if(!h)return null;const c=Number(h);return isNaN(c)?null:c}class ls{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return Zt("not implemented")}_getIdTokenResponse(c){return Zt("not implemented")}_linkToIdToken(c,l){return Zt("not implemented")}_getReauthenticationResolver(c){return Zt("not implemented")}}function Iu(h,c){return wu.apply(this,arguments)}function wu(){return(wu=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:resetPassword",Y(h,c))})).apply(this,arguments)}function Oh(){return(Oh=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function et(h,c){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function nr(){return(nr=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:update",Y(h,c))})).apply(this,arguments)}function Em(h,c){return Im.apply(this,arguments)}function Im(){return(Im=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithPassword",Y(h,c))})).apply(this,arguments)}function yt(h,c){return wm.apply(this,arguments)}function wm(){return(wm=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:sendOobCode",Y(h,c))})).apply(this,arguments)}function ce(){return(ce=(0,I.Z)(function*(h,c){return yt(h,c)})).apply(this,arguments)}function kh(h,c){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,I.Z)(function*(h,c){return yt(h,c)})).apply(this,arguments)}function Tm(h,c){return bu.apply(this,arguments)}function bu(){return(bu=(0,I.Z)(function*(h,c){return yt(h,c)})).apply(this,arguments)}function Du(){return(Du=(0,I.Z)(function*(h,c){return yt(h,c)})).apply(this,arguments)}function Cm(){return(Cm=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithEmailLink",Y(h,c))})).apply(this,arguments)}function bm(){return(bm=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithEmailLink",Y(h,c))})).apply(this,arguments)}class tl extends ls{constructor(c,l,p,m=null){super("password",p),this._email=c,this._password=l,this._tenantId=m}static _fromEmailAndPassword(c,l){return new tl(c,l,"password")}static _fromEmailAndCode(c,l,p=null){return new tl(c,l,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,I.Z)(function*(){switch(l.signInMethod){case"password":return Ae(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Em);case"emailLink":return function US(h,c){return Cm.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:_t(c,"internal-error")}})()}_linkToIdToken(c,l){var p=this;return(0,I.Z)(function*(){switch(p.signInMethod){case"password":return Ae(c,{idToken:l,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",et);case"emailLink":return function BS(h,c){return bm.apply(this,arguments)}(c,{idToken:l,email:p._email,oobCode:p._password});default:_t(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function jr(h,c){return Au.apply(this,arguments)}function Au(){return(Au=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithIdp",Y(h,c))})).apply(this,arguments)}class Li extends ls{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new Li(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):_t("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:m}=l,v=(0,Wt._T)(l,["providerId","signInMethod"]);if(!p||!m)return null;const T=new Li(p,m);return T.idToken=v.idToken||void 0,T.accessToken=v.accessToken||void 0,T.secret=v.secret,T.nonce=v.nonce,T.pendingToken=v.pendingToken||null,T}_getIdTokenResponse(c){return jr(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,jr(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,jr(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,j.xO)(l)}return c}}function Vh(){return(Vh=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:sendVerificationCode",Y(h,c))})).apply(this,arguments)}function Ls(){return(Ls=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,c))})).apply(this,arguments)}function Fi(){return(Fi=(0,I.Z)(function*(h,c){const l=yield we(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,c));if(l.temporaryProof)throw xn(h,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const OI={USER_NOT_FOUND:"user-not-found"};function rl(){return(rl=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,Object.assign(Object.assign({},c),{operation:"REAUTH"})),OI)})).apply(this,arguments)}class he extends ls{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new he({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new he({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function Dm(h,c){return Ls.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function NI(h,c){return Fi.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function se(h,c){return rl.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:p,verificationCode:m}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:p,code:m}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:p,phoneNumber:m,temporaryProof:v}=c;return p||l||m||v?new he({verificationId:l,verificationCode:p,phoneNumber:m,temporaryProof:v}):null}}class ds{constructor(c){var l,p,m,v,T,x;const q=(0,j.zd)((0,j.pd)(c)),ae=null!==(l=q.apiKey)&&void 0!==l?l:null,ge=null!==(p=q.oobCode)&&void 0!==p?p:null,ve=function il(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(m=q.mode)&&void 0!==m?m:null);K(ae&&ge&&ve,"argument-error"),this.apiKey=ae,this.operation=ve,this.code=ge,this.continueUrl=null!==(v=q.continueUrl)&&void 0!==v?v:null,this.languageCode=null!==(T=q.languageCode)&&void 0!==T?T:null,this.tenantId=null!==(x=q.tenantId)&&void 0!==x?x:null}static parseLink(c){const l=function Lh(h){const c=(0,j.zd)((0,j.pd)(h)).link,l=c?(0,j.zd)((0,j.pd)(c)).deep_link_id:null,p=(0,j.zd)((0,j.pd)(h)).deep_link_id;return(p?(0,j.zd)((0,j.pd)(p)).link:null)||p||l||c||h}(c);try{return new ds(l)}catch{return null}}}let Fh=(()=>{class h{constructor(){this.providerId=h.PROVIDER_ID}static credential(l,p){return tl._fromEmailAndPassword(l,p)}static credentialWithLink(l,p){const m=ds.parseLink(p);return K(m,"argument-error"),tl._fromEmailAndCode(l,m.code,m.tenantId)}}return h.PROVIDER_ID="password",h.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h.EMAIL_LINK_SIGN_IN_METHOD="emailLink",h})();class hs{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Ar extends hs{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class fs extends Ar{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return K("providerId"in l&&"signInMethod"in l,"argument-error"),Li._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return K(c.idToken||c.accessToken,"argument-error"),Li._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return fs.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return fs.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:p,oauthTokenSecret:m,pendingToken:v,nonce:T,providerId:x}=c;if(!p&&!m&&!l&&!v||!x)return null;try{return new fs(x)._credential({idToken:l,accessToken:p,nonce:T,pendingToken:v})}catch{return null}}}let ai=(()=>{class h extends Ar{constructor(){super("facebook.com")}static credential(l){return Li._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.FACEBOOK_SIGN_IN_METHOD="facebook.com",h.PROVIDER_ID="facebook.com",h})(),Ei=(()=>{class h extends Ar{constructor(){super("google.com"),this.addScope("profile")}static credential(l,p){return Li._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:p})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:p,oauthAccessToken:m}=l;if(!p&&!m)return null;try{return h.credential(p,m)}catch{return null}}}return h.GOOGLE_SIGN_IN_METHOD="google.com",h.PROVIDER_ID="google.com",h})(),ut=(()=>{class h extends Ar{constructor(){super("github.com")}static credential(l){return Li._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.GITHUB_SIGN_IN_METHOD="github.com",h.PROVIDER_ID="github.com",h})();class Fs extends ls{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return jr(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,jr(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,jr(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:m,pendingToken:v}=l;return p&&m&&v&&p===m?new Fs(p,v):null}static _create(c,l){return new Fs(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Su extends hs{constructor(c){K(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Su.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Su.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=Fs.fromJSON(c);return K(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:p}=c;if(!l||!p)return null;try{return Fs._create(p,l)}catch{return null}}}let Ui=(()=>{class h extends Ar{constructor(){super("twitter.com")}static credential(l,p){return Li._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:p})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:p,oauthTokenSecret:m}=l;if(!p||!m)return null;try{return h.credential(p,m)}catch{return null}}}return h.TWITTER_SIGN_IN_METHOD="twitter.com",h.PROVIDER_ID="twitter.com",h})();function ua(h,c){return ol.apply(this,arguments)}function ol(){return(ol=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signUp",Y(h,c))})).apply(this,arguments)}class $r{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,p,m=!1){return(0,I.Z)(function*(){const v=yield G._fromIdTokenResponse(c,p,m),T=al(p);return new $r({user:v,providerId:T,_tokenResponse:p,operationType:l})})()}static _forOperation(c,l,p){return(0,I.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const m=al(p);return new $r({user:c,providerId:m,_tokenResponse:p,operationType:l})})()}}function al(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}function ul(){return(ul=(0,I.Z)(function*(h){var c;const l=$t(h);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new $r({user:l.currentUser,providerId:null,operationType:"signIn"});const p=yield ua(l,{returnSecureToken:!0}),m=yield $r._fromIdTokenResponse(l,"signIn",p,!0);return yield l._updateCurrentUser(m.user),m})).apply(this,arguments)}class Us extends j.ZR{constructor(c,l,p,m){var v;super(l.code,l.message),this.operationType=p,this.user=m,Object.setPrototypeOf(this,Us.prototype),this.customData={appName:c.name,tenantId:null!==(v=c.tenantId)&&void 0!==v?v:void 0,_serverResponse:l.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,l,p,m){return new Us(c,l,p,m)}}function Bh(h,c,l,p){return("reauthenticate"===c?l._getReauthenticationResolver(h):l._getIdTokenResponse(h)).catch(v=>{throw"auth/multi-factor-auth-required"===v.code?Us._fromErrorAndOperation(h,v,c,p):v})}function jh(h){return new Set(h.map(({providerId:c})=>c).filter(c=>!!c))}function cl(){return cl=(0,I.Z)(function*(h,c){const l=(0,j.m9)(h);yield Sr(!0,l,c);const{providerUserInfo:p}=yield function _u(h,c){return Tr.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),m=jh(p||[]);return l.providerData=l.providerData.filter(v=>m.has(v.providerId)),m.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),cl.apply(this,arguments)}function $h(h,c){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,I.Z)(function*(h,c,l=!1){const p=yield oi(h,c._linkToIdToken(h.auth,yield h.getIdToken()),l);return $r._forOperation(h,"link",p)})).apply(this,arguments)}function Sr(h,c,l){return zh.apply(this,arguments)}function zh(){return(zh=(0,I.Z)(function*(h,c,l){yield lr(c);const m=!1===h?"provider-already-linked":"no-such-provider";K(jh(c.providerData).has(l)===h,c.auth,m)})).apply(this,arguments)}function Gh(h,c){return qh.apply(this,arguments)}function qh(){return(qh=(0,I.Z)(function*(h,c,l=!1){const{auth:p}=h,m="reauthenticate";try{const v=yield oi(h,Bh(p,m,c,h),l);K(v.idToken,p,"internal-error");const T=na(v.idToken);K(T,p,"internal-error");const{sub:x}=T;return K(h.uid===x,p,"user-mismatch"),$r._forOperation(h,m,v)}catch(v){throw"auth/user-not-found"===v?.code&&_t(p,"user-mismatch"),v}})).apply(this,arguments)}function Sm(h,c){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,I.Z)(function*(h,c,l=!1){const p="signIn",m=yield Bh(h,p,c),v=yield $r._fromIdTokenResponse(h,p,m);return l||(yield h._updateCurrentUser(v.user)),v})).apply(this,arguments)}function ll(h,c){return dl.apply(this,arguments)}function dl(){return(dl=(0,I.Z)(function*(h,c){return Sm($t(h),c)})).apply(this,arguments)}function Rm(h,c){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,I.Z)(function*(h,c){const l=(0,j.m9)(h);return yield Sr(!1,l,c.providerId),$h(l,c)})).apply(this,arguments)}function Pm(h,c){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,I.Z)(function*(h,c){return Gh((0,j.m9)(h),c)})).apply(this,arguments)}function Kh(){return(Kh=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithCustomToken",Y(h,c))})).apply(this,arguments)}function Rr(){return Rr=(0,I.Z)(function*(h,c){const l=$t(h),p=yield function VI(h,c){return Kh.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),m=yield $r._fromIdTokenResponse(l,"signIn",p);return yield l._updateCurrentUser(m.user),m}),Rr.apply(this,arguments)}class Ru{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?hl._fromServerResponse(c,l):"totpInfo"in l?Pe._fromServerResponse(c,l):_t(c,"internal-error")}}class hl extends Ru{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new hl(l)}}class Pe extends Ru{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new Pe(l)}}function zn(h,c,l){var p;K((null===(p=l.url)||void 0===p?void 0:p.length)>0,h,"invalid-continue-uri"),K(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,h,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(K(l.iOS.bundleId.length>0,h,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(K(l.android.packageName.length>0,h,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function tt(h){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,I.Z)(function*(h){const c=$t(h);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function Bs(){return(Bs=(0,I.Z)(function*(h,c,l){const p=$t(h),m={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&zn(p,m,l),yield Ae(p,m,"getOobCode",kh)})).apply(this,arguments)}function fl(){return fl=(0,I.Z)(function*(h,c,l){yield Iu((0,j.m9)(h),{oobCode:c,newPassword:l}).catch(function(){var p=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&tt(h),m});return function(m){return p.apply(this,arguments)}}())}),fl.apply(this,arguments)}function ca(){return ca=(0,I.Z)(function*(h,c){yield function vm(h,c){return nr.apply(this,arguments)}((0,j.m9)(h),{oobCode:c})}),ca.apply(this,arguments)}function Mm(h,c){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,I.Z)(function*(h,c){const l=(0,j.m9)(h),p=yield Iu(l,{oobCode:c}),m=p.requestType;switch(K(m,l,"internal-error"),m){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":K(p.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":K(p.mfaInfo,l,"internal-error");default:K(p.email,l,"internal-error")}let v=null;return p.mfaInfo&&(v=Ru._fromServerResponse($t(l),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:v},operation:m}})).apply(this,arguments)}function le(){return(le=(0,I.Z)(function*(h,c){const{data:l}=yield Mm((0,j.m9)(h),c);return l.email})).apply(this,arguments)}function Mt(){return(Mt=(0,I.Z)(function*(h,c,l){const p=$t(h),T=yield Ae(p,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ua).catch(q=>{throw"auth/password-does-not-meet-requirements"===q.code&&tt(h),q}),x=yield $r._fromIdTokenResponse(p,"signIn",T);return yield p._updateCurrentUser(x.user),x})).apply(this,arguments)}function On(){return(On=(0,I.Z)(function*(h,c,l){const p=$t(h),m={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function v(T,x){K(x.handleCodeInApp,p,"argument-error"),x&&zn(p,T,x)})(m,l),yield Ae(p,m,"getOobCode",Tm)})).apply(this,arguments)}function ji(){return(ji=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h),m=Fh.credentialWithLink(c,l||wn());return K(m._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),ll(p,m)})).apply(this,arguments)}function Oe(){return(Oe=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:createAuthUri",Y(h,c))})).apply(this,arguments)}function pl(){return pl=(0,I.Z)(function*(h,c){const p={identifier:c,continueUri:Ni()?wn():"http://localhost"},{signinMethods:m}=yield function da(h,c){return Oe.apply(this,arguments)}((0,j.m9)(h),p);return m||[]}),pl.apply(this,arguments)}function Yt(){return Yt=(0,I.Z)(function*(h,c){const l=(0,j.m9)(h),m={requestType:"VERIFY_EMAIL",idToken:yield h.getIdToken()};c&&zn(l.auth,m,c);const{email:v}=yield function FS(h,c){return ce.apply(this,arguments)}(l.auth,m);v!==h.email&&(yield h.reload())}),Yt.apply(this,arguments)}function js(){return js=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h),v={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield h.getIdToken(),newEmail:c};l&&zn(p.auth,v,l);const{email:T}=yield function xI(h,c){return Du.apply(this,arguments)}(p.auth,v);T!==h.email&&(yield h.reload())}),js.apply(this,arguments)}function wo(){return(wo=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Hi(){return Hi=(0,I.Z)(function*(h,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const p=(0,j.m9)(h),v={idToken:yield p.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},T=yield oi(p,function $i(h,c){return wo.apply(this,arguments)}(p.auth,v));p.displayName=T.displayName||null,p.photoURL=T.photoUrl||null;const x=p.providerData.find(({providerId:q})=>"password"===q);x&&(x.displayName=p.displayName,x.photoURL=p.photoURL),yield p._updateTokensIfNecessary(T)}),Hi.apply(this,arguments)}function fa(h,c,l){return Ke.apply(this,arguments)}function Ke(){return Ke=(0,I.Z)(function*(h,c,l){const{auth:p}=h,v={idToken:yield h.getIdToken(),returnSecureToken:!0};c&&(v.email=c),l&&(v.password=l);const T=yield oi(h,function ym(h,c){return Oh.apply(this,arguments)}(p,v));yield h._updateTokensIfNecessary(T,!0)}),Ke.apply(this,arguments)}class $s{constructor(c,l,p={}){this.isNewUser=c,this.providerId=l,this.profile=p}}class Yh extends $s{constructor(c,l,p,m){super(c,l,p),this.username=m}}class zi extends $s{constructor(c,l){super(c,"facebook.com",l)}}class gl extends Yh{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class pa extends $s{constructor(c,l){super(c,"google.com",l)}}class Ou extends Yh{constructor(c,l,p){super(c,"twitter.com",l,p)}}function Gn(h){const{user:c,_tokenResponse:l}=h;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function $S(h){var c,l;if(!h)return null;const{providerId:p}=h,m=h.rawUserInfo?JSON.parse(h.rawUserInfo):{},v=h.isNewUser||"identitytoolkit#SignupNewUserResponse"===h.kind;if(!p&&h?.idToken){const T=null===(l=null===(c=na(h.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(T)return new $s(v,"anonymous"!==T&&"custom"!==T?T:null)}if(!p)return null;switch(p){case"facebook.com":return new zi(v,m);case"github.com":return new gl(v,m);case"google.com":return new pa(v,m);case"twitter.com":return new Ou(v,m,h.screenName||null);case"custom":case"anonymous":return new $s(v,null);default:return new $s(v,p,m)}}(l)}class ga{constructor(c,l,p){this.type=c,this.credential=l,this.user=p}static _fromIdtoken(c,l){return new ga("enroll",c,l)}static _fromMfaPendingCredential(c){return new ga("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,p;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return ga._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return ga._fromIdtoken(c.multiFactorSession.idToken)}return null}}class km{constructor(c,l,p){this.session=c,this.hints=l,this.signInResolver=p}static _fromError(c,l){const p=$t(c),m=l.customData._serverResponse,v=(m.mfaInfo||[]).map(x=>Ru._fromServerResponse(p,x));K(m.mfaPendingCredential,p,"internal-error");const T=ga._fromMfaPendingCredential(m.mfaPendingCredential);return new km(T,v,function(){var x=(0,I.Z)(function*(q){const ae=yield q._process(p,T);delete m.mfaInfo,delete m.mfaPendingCredential;const ge=Object.assign(Object.assign({},m),{idToken:ae.idToken,refreshToken:ae.refreshToken});switch(l.operationType){case"signIn":const ve=yield $r._fromIdTokenResponse(p,l.operationType,ge);return yield p._updateCurrentUser(ve.user),ve;case"reauthenticate":return K(l.user,p,"internal-error"),$r._forOperation(l.user,l.operationType,ge);default:_t(p,"internal-error")}});return function(q){return x.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,I.Z)(function*(){return l.signInResolver(c)})()}}class Vm{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(p=>Ru._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new Vm(c)}getSession(){var c=this;return(0,I.Z)(function*(){return ga._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var p=this;return(0,I.Z)(function*(){const m=c,v=yield p.getSession(),T=yield oi(p.user,m._process(p.user.auth,v,l));return yield p.user._updateTokensIfNecessary(T),p.user.reload()})()}unenroll(c){var l=this;return(0,I.Z)(function*(){const p="string"==typeof c?c:c.uid,m=yield l.user.getIdToken();try{const v=yield oi(l.user,function QS(h,c){return B(h,"POST","/v2/accounts/mfaEnrollment:withdraw",Y(h,c))}(l.user.auth,{idToken:m,mfaEnrollmentId:p}));l.enrolledFactors=l.enrolledFactors.filter(({uid:T})=>T!==p),yield l.user._updateTokensIfNecessary(v),yield l.user.reload()}catch(v){throw v}})()}}const Lm=new WeakMap,Xh="__sak";class ef{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(Xh,"1"),this.storage.removeItem(Xh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const qi=(()=>{class h extends ef{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,p)=>this.onStorageEvent(l,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Fm(){const h=(0,j.z$)();return Vi(h)||Ve(h)}()&&function Xe(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ee(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const p of Object.keys(this.listeners)){const m=this.storage.getItem(p),v=this.localCache[p];m!==v&&l(p,v,m)}}onStorageEvent(l,p=!1){if(!l.key)return void this.forAllChangedKeys((x,q,ae)=>{this.notifyListeners(x,ae)});const m=l.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const x=this.storage.getItem(m);if(l.newValue!==x)null!==l.newValue?this.storage.setItem(m,l.newValue):this.storage.removeItem(m);else if(this.localCache[m]===l.newValue&&!p)return}const v=()=>{const x=this.storage.getItem(m);!p&&this.localCache[m]===x||this.notifyListeners(m,x)},T=this.storage.getItem(m);!function pn(){return(0,j.w1)()&&10===document.documentMode}()||T===l.newValue||l.newValue===l.oldValue?v():setTimeout(v,10)}notifyListeners(l,p){this.localCache[l]=p;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,p,m)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:p,newValue:m}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,p){var m=()=>super._set,v=this;return(0,I.Z)(function*(){yield m().call(v,l,p),v.localCache[l]=JSON.stringify(p)})()}_get(l){var p=()=>super._get,m=this;return(0,I.Z)(function*(){const v=yield p().call(m,l);return m.localCache[l]=JSON.stringify(v),v})()}_remove(l){var p=()=>super._remove,m=this;return(0,I.Z)(function*(){yield p().call(m,l),delete m.localCache[l]})()}}return h.type="LOCAL",h})(),bo=(()=>{class h extends ef{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,p){}_removeListener(l,p){}}return h.type="SESSION",h})();let qn=(()=>{class h{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const p=this.receivers.find(v=>v.isListeningto(l));if(p)return p;const m=new h(l);return this.receivers.push(m),m}isListeningto(l){return this.eventTarget===l}handleEvent(l){var p=this;return(0,I.Z)(function*(){const m=l,{eventId:v,eventType:T,data:x}=m.data,q=p.handlersMap[T];if(!q?.size)return;m.ports[0].postMessage({status:"ack",eventId:v,eventType:T});const ae=Array.from(q).map(function(){var ve=(0,I.Z)(function*(sn){return sn(m.origin,x)});return function(sn){return ve.apply(this,arguments)}}()),ge=yield function eR(h){return Promise.all(h.map(function(){var c=(0,I.Z)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(p){return{fulfilled:!1,reason:p}}});return function(l){return c.apply(this,arguments)}}()))}(ae);m.ports[0].postMessage({status:"done",eventId:v,eventType:T,response:ge})})()}_subscribe(l,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(p)}_unsubscribe(l,p){this.handlersMap[l]&&p&&this.handlersMap[l].delete(p),(!p||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return h.receivers=[],h})();function Hs(h="",c=10){let l="";for(let p=0;p<c;p++)l+=Math.floor(10*Math.random());return h+l}class ui{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,p=50){var m=this;return(0,I.Z)(function*(){const v=typeof MessageChannel<"u"?new MessageChannel:null;if(!v)throw new Error("connection_unavailable");let T,x;return new Promise((q,ae)=>{const ge=Hs("",20);v.port1.start();const ve=setTimeout(()=>{ae(new Error("unsupported_event"))},p);x={messageChannel:v,onMessage(sn){const wi=sn;if(wi.data.eventId===ge)switch(wi.data.status){case"ack":clearTimeout(ve),T=setTimeout(()=>{ae(new Error("timeout"))},3e3);break;case"done":clearTimeout(T),q(wi.data.response);break;default:clearTimeout(ve),clearTimeout(T),ae(new Error("invalid_response"))}}},m.handlers.add(x),v.port1.addEventListener("message",x.onMessage),m.target.postMessage({eventType:c,eventId:ge,data:l},[v.port2])}).finally(()=>{x&&m.removeMessageHandler(x)})})()}}function hn(){return window}function _l(){return typeof hn().WorkerGlobalScope<"u"&&"function"==typeof hn().importScripts}function Vu(){return(Vu=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const yl="firebaseLocalStorageDb",Lu="firebaseLocalStorage",nf="fbase_key";class zs{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function Gs(h,c){return h.transaction([Lu],c?"readwrite":"readonly").objectStore(Lu)}function vl(){const h=indexedDB.open(yl,1);return new Promise((c,l)=>{h.addEventListener("error",()=>{l(h.error)}),h.addEventListener("upgradeneeded",()=>{const p=h.result;try{p.createObjectStore(Lu,{keyPath:nf})}catch(m){l(m)}}),h.addEventListener("success",(0,I.Z)(function*(){const p=h.result;p.objectStoreNames.contains(Lu)?c(p):(p.close(),yield function ma(){const h=indexedDB.deleteDatabase(yl);return new zs(h).toPromise()}(),c(yield vl()))}))})}function FI(h,c,l){return Hm.apply(this,arguments)}function Hm(){return(Hm=(0,I.Z)(function*(h,c,l){const p=Gs(h,!0).put({[nf]:c,value:l});return new zs(p).toPromise()})).apply(this,arguments)}function rf(){return(rf=(0,I.Z)(function*(h,c){const l=Gs(h,!1).get(c),p=yield new zs(l).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function zm(h,c){const l=Gs(h,!0).delete(c);return new zs(l).toPromise()}const _a=(()=>{class h{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,I.Z)(function*(){return l.db||(l.db=yield vl()),l.db})()}_withRetries(l){var p=this;return(0,I.Z)(function*(){let m=0;for(;;)try{const v=yield p._openDb();return yield l(v)}catch(v){if(m++>3)throw v;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,I.Z)(function*(){return _l()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,I.Z)(function*(){l.receiver=qn._getInstance(function tf(){return _l()?self:null}()),l.receiver._subscribe("keyChanged",function(){var p=(0,I.Z)(function*(m,v){return{keyProcessed:(yield l._poll()).includes(v.key)}});return function(m,v){return p.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var p=(0,I.Z)(function*(m,v){return["keyChanged"]});return function(m,v){return p.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,I.Z)(function*(){var p,m;if(l.activeServiceWorker=yield function Bm(){return Vu.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new ui(l.activeServiceWorker);const v=yield l.sender._send("ping",{},800);v&&null!==(p=v[0])&&void 0!==p&&p.fulfilled&&null!==(m=v[0])&&void 0!==m&&m.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var p=this;return(0,I.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function jm(){var h;return(null===(h=navigator?.serviceWorker)||void 0===h?void 0:h.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:l},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const l=yield vl();return yield FI(l,Xh,"1"),yield zm(l,Xh),!0}catch{}return!1})()}_withPendingWrite(l){var p=this;return(0,I.Z)(function*(){p.pendingWrites++;try{yield l()}finally{p.pendingWrites--}})()}_set(l,p){var m=this;return(0,I.Z)(function*(){return m._withPendingWrite((0,I.Z)(function*(){return yield m._withRetries(v=>FI(v,l,p)),m.localCache[l]=p,m.notifyServiceWorker(l)}))})()}_get(l){var p=this;return(0,I.Z)(function*(){const m=yield p._withRetries(v=>function tR(h,c){return rf.apply(this,arguments)}(v,l));return p.localCache[l]=m,m})()}_remove(l){var p=this;return(0,I.Z)(function*(){return p._withPendingWrite((0,I.Z)(function*(){return yield p._withRetries(m=>zm(m,l)),delete p.localCache[l],p.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,I.Z)(function*(){const p=yield l._withRetries(T=>{const x=Gs(T,!1).getAll();return new zs(x).toPromise()});if(!p)return[];if(0!==l.pendingWrites)return[];const m=[],v=new Set;for(const{fbase_key:T,value:x}of p)v.add(T),JSON.stringify(l.localCache[T])!==JSON.stringify(x)&&(l.notifyListeners(T,x),m.push(T));for(const T of Object.keys(l.localCache))l.localCache[T]&&!v.has(T)&&(l.notifyListeners(T,null),m.push(T));return m})()}notifyListeners(l,p){this.localCache[l]=p;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(p)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return h.type="LOCAL",h})(),Fu=1e12;class BI{constructor(c){this.auth=c,this.counter=Fu,this._widgets=new Map}render(c,l){const p=this.counter;return this._widgets.set(p,new jI(c,this.auth.name,l||{})),this.counter++,p}reset(c){var l;const p=c||Fu;null===(l=this._widgets.get(p))||void 0===l||l.delete(),this._widgets.delete(p)}getResponse(c){var l;return(null===(l=this._widgets.get(c||Fu))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,I.Z)(function*(){var p;return null===(p=l._widgets.get(c||Fu))||void 0===p||p.execute(),""})()}}class jI{constructor(c,l,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const m="string"==typeof c?document.getElementById(c):c;K(m,"argument-error",{appName:l}),this.container=m,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function $I(h){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<h;p++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const El=DI("rcb"),HI=new ki(3e4,6e4);class zI{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=hn().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return K(function sR(h){return h.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(h)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&cr(hn().grecaptcha)?Promise.resolve(hn().grecaptcha):new Promise((p,m)=>{const v=hn().setTimeout(()=>{m(xt(c,"network-request-failed"))},HI.get());hn()[El]=()=>{hn().clearTimeout(v),delete hn()[El];const x=hn().grecaptcha;if(!x||!cr(x))return void m(xt(c,"internal-error"));const q=x.render;x.render=(ae,ge)=>{const ve=q(ae,ge);return this.counter++,ve},this.hostLanguage=l,p(x)},pm(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:El,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(v),m(xt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=hn().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class GI{load(c){return(0,I.Z)(function*(){return new BI(c)})()}clearedOneInstance(){}}const Gr="recaptcha",Km={theme:"light",type:"image"};class qI{constructor(c,l,p=Object.assign({},Km)){this.parameters=p,this.type=Gr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$t(c),this.isInvisible="invisible"===this.parameters.size,K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const m="string"==typeof l?document.getElementById(l):l;K(m,this.auth,"argument-error"),this.container=m,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new GI:new zI,this.validateStartingState()}verify(){var c=this;return(0,I.Z)(function*(){c.assertNotDestroyed();const l=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(l)||new Promise(v=>{const T=x=>{x&&(c.tokenChangeListeners.delete(T),v(x))};c.tokenChangeListeners.add(T),c.isInvisible&&p.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){K(!this.parameters.sitekey,this.auth,"argument-error"),K(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(p=>p(l)),"function"==typeof c)c(l);else if("string"==typeof c){const p=hn()[c];"function"==typeof p&&p(l)}}}assertNotDestroyed(){K(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,I.Z)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const p=document.createElement("div");l.appendChild(p),l=p}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,I.Z)(function*(){K(Ni()&&!_l(),c.auth,"internal-error"),yield function WI(){let h=null;return new Promise(c=>{"complete"!==document.readyState?(h=()=>c(),window.addEventListener("load",h)):c()}).catch(c=>{throw h&&window.removeEventListener("load",h),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function gu(h){return us.apply(this,arguments)}(c.auth);K(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return K(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Il{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=he._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function af(){return(af=(0,I.Z)(function*(h,c,l){const p=$t(h),m=yield Uu(p,c,(0,j.m9)(l));return new Il(m,v=>ll(p,v))})).apply(this,arguments)}function cf(){return(cf=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);yield Sr(!1,p,"phone");const m=yield Uu(p.auth,c,(0,j.m9)(l));return new Il(m,v=>Rm(p,v))})).apply(this,arguments)}function wl(){return(wl=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h),m=yield Uu(p.auth,c,(0,j.m9)(l));return new Il(m,v=>Pm(p,v))})).apply(this,arguments)}function Uu(h,c,l){return Tt.apply(this,arguments)}function Tt(){return Tt=(0,I.Z)(function*(h,c,l){var p;const m=yield l.verify();try{let v;if(K("string"==typeof m,h,"argument-error"),K(l.type===Gr,h,"argument-error"),v="string"==typeof c?{phoneNumber:c}:c,"session"in v){const T=v.session;if("phoneNumber"in v)return K("enroll"===T.type,h,"internal-error"),(yield function WS(h,c){return B(h,"POST","/v2/accounts/mfaEnrollment:start",Y(h,c))}(h,{idToken:T.credential,phoneEnrollmentInfo:{phoneNumber:v.phoneNumber,recaptchaToken:m}})).phoneSessionInfo.sessionInfo;{K("signin"===T.type,h,"internal-error");const x=(null===(p=v.multiFactorHint)||void 0===p?void 0:p.uid)||v.multiFactorUid;return K(x,h,"missing-multi-factor-info"),(yield function sf(h,c){return B(h,"POST","/v2/accounts/mfaSignIn:start",Y(h,c))}(h,{mfaPendingCredential:T.credential,mfaEnrollmentId:x,phoneSignInInfo:{recaptchaToken:m}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:T}=yield function MI(h,c){return Vh.apply(this,arguments)}(h,{phoneNumber:v.phoneNumber,recaptchaToken:m});return T}}finally{l._reset()}}),Tt.apply(this,arguments)}function ya(){return(ya=(0,I.Z)(function*(h,c){yield $h((0,j.m9)(h),c)})).apply(this,arguments)}let kn=(()=>{class h{constructor(l){this.providerId=h.PROVIDER_ID,this.auth=$t(l)}verifyPhoneNumber(l,p){return Uu(this.auth,l,(0,j.m9)(p))}static credential(l,p){return he._fromVerification(l,p)}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:p,temporaryProof:m}=l;return p&&m?he._fromTokenResponse(p,m):null}}return h.PROVIDER_ID="phone",h.PHONE_SIGN_IN_METHOD="phone",h})();function Do(h,c){return c?Ge(c):(K(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}class Tl extends ls{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return jr(c,this._buildIdpRequest())}_linkToIdToken(c,l){return jr(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return jr(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function va(h){return Sm(h.auth,new Tl(h),h.bypassAuthState)}function qr(h){const{auth:c,user:l}=h;return K(l,c,"internal-error"),Gh(l,new Tl(h),h.bypassAuthState)}function ZI(h){return df.apply(this,arguments)}function df(){return(df=(0,I.Z)(function*(h){const{auth:c,user:l}=h;return K(l,c,"internal-error"),$h(l,new Tl(h),h.bypassAuthState)})).apply(this,arguments)}class Ym{constructor(c,l,p,m,v=!1){this.auth=c,this.resolver=p,this.user=m,this.bypassAuthState=v,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,I.Z)(function*(p,m){c.pendingPromise={resolve:p,reject:m};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(v){c.reject(v)}});return function(p,m){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,I.Z)(function*(){const{urlResponse:p,sessionId:m,postBody:v,tenantId:T,error:x,type:q}=c;if(x)return void l.reject(x);const ae={auth:l.auth,requestUri:p,sessionId:m,tenantId:T||void 0,postBody:v||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(q)(ae))}catch(ge){l.reject(ge)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return va;case"linkViaPopup":case"linkViaRedirect":return ZI;case"reauthViaPopup":case"reauthViaRedirect":return qr;default:_t(this.auth,"internal-error")}}resolve(c){Bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qs=new ki(2e3,1e4);function hf(){return(hf=(0,I.Z)(function*(h,c,l){const p=$t(h);ze(h,c,hs);const m=Do(p,l);return new Re(p,"signInViaPopup",c,m).executeNotNull()})).apply(this,arguments)}function Cl(){return(Cl=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);ze(p.auth,c,hs);const m=Do(p.auth,l);return new Re(p.auth,"reauthViaPopup",c,m,p).executeNotNull()})).apply(this,arguments)}function ff(){return(ff=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);ze(p.auth,c,hs);const m=Do(p.auth,l);return new Re(p.auth,"linkViaPopup",c,m,p).executeNotNull()})).apply(this,arguments)}let Re=(()=>{class h extends Ym{constructor(l,p,m,v,T){super(l,p,v,T),this.provider=m,this.authWindow=null,this.pollId=null,h.currentPopupAction&&h.currentPopupAction.cancel(),h.currentPopupAction=this}executeNotNull(){var l=this;return(0,I.Z)(function*(){const p=yield l.execute();return K(p,l.auth,"internal-error"),p})()}onExecution(){var l=this;return(0,I.Z)(function*(){Bt(1===l.filter.length,"Popup operations only handle one event");const p=Hs();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],p),l.authWindow.associatedEvent=p,l.resolver._originValidation(l.auth).catch(m=>{l.reject(m)}),l.resolver._isIframeWebStorageSupported(l.auth,m=>{m||l.reject(xt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h.currentPopupAction=null}pollUserCancellation(){const l=()=>{var p,m;this.pollId=null!==(m=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==m&&m.closed?window.setTimeout(()=>{this.pollId=null,this.reject(xt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,qs.get())};l()}}return h.currentPopupAction=null,h})();const t_="pendingRedirect",bl=new Map;class KI extends Ym{constructor(c,l,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,I.Z)(function*(){let p=bl.get(l.auth._key());if(!p){try{const v=(yield function QI(h,c){return pf.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;p=()=>Promise.resolve(v)}catch(m){p=()=>Promise.reject(m)}bl.set(l.auth._key(),p)}return l.bypassAuthState||bl.set(l.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,p=this;return(0,I.Z)(function*(){if("signInViaRedirect"===c.type)return l().call(p,c);if("unknown"!==c.type){if(c.eventId){const m=yield p.auth._redirectUserForId(c.eventId);if(m)return p.user=m,l().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function pf(){return(pf=(0,I.Z)(function*(h,c){const l=r_(c),p=n_(h);if(!(yield p._isAvailable()))return!1;const m="true"===(yield p._get(l));return yield p._remove(l),m})).apply(this,arguments)}function Dl(h,c){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,I.Z)(function*(h,c){return n_(h)._set(r_(c),"true")})).apply(this,arguments)}function gf(h,c){bl.set(h._key(),c)}function n_(h){return Ge(h._redirectPersistence)}function r_(h){return Nn(t_,h.config.apiKey,h.name)}function JI(h,c,l){return function X(h,c,l){return nt.apply(this,arguments)}(h,c,l)}function nt(){return(nt=(0,I.Z)(function*(h,c,l){const p=$t(h);ze(h,c,hs),yield p._initializationPromise;const m=Do(p,l);return yield Dl(m,p),m._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function gn(h,c,l){return function mn(h,c,l){return bn.apply(this,arguments)}(h,c,l)}function bn(){return(bn=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);ze(p.auth,c,hs),yield p.auth._initializationPromise;const m=Do(p.auth,l);yield Dl(m,p.auth);const v=yield _f(p);return m._openRedirect(p.auth,c,"reauthViaRedirect",v)})).apply(this,arguments)}function i_(h,c,l){return function Bu(h,c,l){return ci.apply(this,arguments)}(h,c,l)}function ci(){return(ci=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);ze(p.auth,c,hs),yield p.auth._initializationPromise;const m=Do(p.auth,l);yield Sr(!1,p,c.providerId),yield Dl(m,p.auth);const v=yield _f(p);return m._openRedirect(p.auth,c,"linkViaRedirect",v)})).apply(this,arguments)}function ju(){return(ju=(0,I.Z)(function*(h,c){return yield $t(h)._initializationPromise,Al(h,c,!1)})).apply(this,arguments)}function Al(h,c){return s_.apply(this,arguments)}function s_(){return(s_=(0,I.Z)(function*(h,c,l=!1){const p=$t(h),m=Do(p,c),T=yield new KI(p,m,l).execute();return T&&!l&&(delete T.user._redirectEventId,yield p._persistUserIfCurrent(T.user),yield p._setRedirectUser(null,c)),T})).apply(this,arguments)}function _f(h){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,I.Z)(function*(h){const c=Hs(`${h.uid}:::`);return h._redirectEventId=c,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),c})).apply(this,arguments)}class yf{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(l=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function XI(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zi(h);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var p;if(c.error&&!Zi(c)){const m=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";l.onError(xt(this.auth,m))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const p=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ao(c))}saveEventToCache(c){this.cachedEventUids.add(Ao(c)),this.lastProcessedEventTime=Date.now()}}function Ao(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(c=>c).join("-")}function Zi({type:h,error:c}){return"unknown"===h&&"auth/no-auth-event"===c?.code}function vf(h){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,I.Z)(function*(h,c={}){return B(h,"GET","/v1/projects",c)})).apply(this,arguments)}const ew=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,If=/^https?/;function Sl(){return(Sl=(0,I.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:c}=yield vf(h);for(const l of c)try{if(Tf(l))return}catch{}_t(h,"unauthorized-domain")})).apply(this,arguments)}function Tf(h){const c=wn(),{protocol:l,hostname:p}=new URL(c);if(h.startsWith("chrome-extension://")){const T=new URL(h);return""===T.hostname&&""===p?"chrome-extension:"===l&&h.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&T.hostname===p}if(!If.test(l))return!1;if(ew.test(h))return p===h;const m=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+m+"|"+m+")$","i").test(p)}const tw=new ki(3e4,6e4);function Cf(){const h=hn().___jsl;if(h?.H)for(const c of Object.keys(h.H))if(h.H[c].r=h.H[c].r||[],h.H[c].L=h.H[c].L||[],h.H[c].r=[...h.H[c].L],h.CP)for(let l=0;l<h.CP.length;l++)h.CP[l]=null}let $u=null;const a_=new ki(5e3,15e3),u_="__/auth/iframe",Df="emulator/auth/iframe",nw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hr(h){const c=h.config;K(c.authDomain,h,"auth-domain-config-required");const l=c.emulator?V(c,Df):`https://${h.config.authDomain}/${u_}`,p={apiKey:c.apiKey,appName:h.name,v:Me.SDK_VERSION},m=rw.get(h.config.apiHost);m&&(p.eid=m);const v=h._getFrameworks();return v.length&&(p.fw=v.join(",")),`${l}?${(0,j.xO)(p).slice(1)}`}function kt(){return kt=(0,I.Z)(function*(h){const c=yield function o_(h){return $u=$u||function bf(h){return new Promise((c,l)=>{var p,m,v;function T(){Cf(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Cf(),l(xt(h,"network-request-failed"))},timeout:tw.get()})}if(null!==(m=null===(p=hn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==m&&m.Iframe)c(gapi.iframes.getContext());else{if(null===(v=hn().gapi)||void 0===v||!v.load){const x=DI("iframefcb");return hn()[x]=()=>{gapi.load?T():l(xt(h,"network-request-failed"))},pm(`https://apis.google.com/js/api.js?onload=${x}`).catch(q=>l(q))}T()}}).catch(c=>{throw $u=null,c})}(h),$u}(h),l=hn().gapi;return K(l,h,"internal-error"),c.open({where:document.body,url:hr(h),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nw,dontclear:!0},p=>new Promise(function(){var m=(0,I.Z)(function*(v,T){yield p.restyle({setHideOnLeave:!1});const x=xt(h,"network-request-failed"),q=hn().setTimeout(()=>{T(x)},a_.get());function ae(){hn().clearTimeout(q),v(p)}p.ping(ae).then(ae,()=>{T(x)})});return function(v,T){return m.apply(this,arguments)}}()))}),kt.apply(this,arguments)}const iw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Af{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const uw="__/auth/handler",Pl="emulator/auth/handler",xl=encodeURIComponent("fac");function Ea(h,c,l,p,m,v){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,I.Z)(function*(h,c,l,p,m,v){K(h.config.authDomain,h,"auth-domain-config-required"),K(h.config.apiKey,h,"invalid-api-key");const T={apiKey:h.config.apiKey,appName:h.name,authType:l,redirectUrl:p,v:Me.SDK_VERSION,eventId:m};if(c instanceof hs){c.setDefaultLanguage(h.languageCode),T.providerId=c.providerId||"",(0,j.xb)(c.getCustomParameters())||(T.customParameters=JSON.stringify(c.getCustomParameters()));for(const[ge,ve]of Object.entries(v||{}))T[ge]=ve}if(c instanceof Ar){const ge=c.getScopes().filter(ve=>""!==ve);ge.length>0&&(T.scopes=ge.join(","))}h.tenantId&&(T.tid=h.tenantId);const x=T;for(const ge of Object.keys(x))void 0===x[ge]&&delete x[ge];const q=yield h._getAppCheckToken(),ae=q?`#${xl}=${encodeURIComponent(q)}`:"";return`${function l_({config:h}){return h.emulator?V(h,Pl):`https://${h.authDomain}/${uw}`}(h)}?${(0,j.xO)(x).slice(1)}${ae}`})).apply(this,arguments)}const Ml="webStorageSupport",Ro=class cw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bo,this._completeRedirectFn=Al,this._overrideRedirectResult=gf}_openPopup(c,l,p,m){var v=this;return(0,I.Z)(function*(){var T;Bt(null===(T=v.eventManagers[c._key()])||void 0===T?void 0:T.manager,"_initialize() not called before _openPopup()");const x=yield Ea(c,l,p,wn(),m);return function Rl(h,c,l,p=500,m=600){const v=Math.max((window.screen.availHeight-m)/2,0).toString(),T=Math.max((window.screen.availWidth-p)/2,0).toString();let x="";const q=Object.assign(Object.assign({},iw),{width:p.toString(),height:m.toString(),top:v,left:T}),ae=(0,j.z$)().toLowerCase();l&&(x=el(ae)?"_blank":l),Dt(ae)&&(c=c||"http://localhost",q.scrollbars="yes");const ge=Object.entries(q).reduce((sn,[wi,zl])=>`${sn}${wi}=${zl},`,"");if(function $(h=(0,j.z$)()){var c;return Ve(h)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(ae)&&"_self"!==x)return function Zs(h,c){const l=document.createElement("a");l.href=h,l.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(p)}(c||"",x),new Af(null);const ve=window.open(c||"",x,ge);K(ve,h,"popup-blocked");try{ve.focus()}catch{}return new Af(ve)}(c,x,Hs())})()}_openRedirect(c,l,p,m){var v=this;return(0,I.Z)(function*(){return yield v._originValidation(c),function Um(h){hn().location.href=h}(yield Ea(c,l,p,wn(),m)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:m,promise:v}=this.eventManagers[l];return m?Promise.resolve(m):(Bt(v,"If manager is not set, promise should be"),v)}const p=this.initAndGetManager(c);return this.eventManagers[l]={promise:p},p.catch(()=>{delete this.eventManagers[l]}),p}initAndGetManager(c){var l=this;return(0,I.Z)(function*(){const p=yield function So(h){return kt.apply(this,arguments)}(c),m=new yf(c);return p.register("authEvent",v=>(K(v?.authEvent,c,"invalid-auth-event"),{status:m.onEvent(v.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:m},l.iframes[c._key()]=p,m})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(Ml,{type:Ml},m=>{var v;const T=null===(v=m?.[0])||void 0===v?void 0:v[Ml];void 0!==T&&l(!!T),_t(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function wf(h){return Sl.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return Ee()||Vi()||Ve()}};class zu{constructor(c){this.factorId=c}_process(c,l,p){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,p);case"signin":return this._finalizeSignIn(c,l.credential);default:return Zt("unexpected MultiFactorSessionType")}}}class Sf extends zu{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Sf(c)}_finalizeEnroll(c,l,p){return function ZS(h,c){return B(h,"POST","/v2/accounts/mfaEnrollment:finalize",Y(h,c))}(c,{idToken:l,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function rR(h,c){return B(h,"POST","/v2/accounts/mfaSignIn:finalize",Y(h,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let oR=(()=>{class h{constructor(){}static assertion(l){return Sf._fromCredential(l)}}return h.FACTOR_ID="phone",h})();var lw="@firebase/auth";class Rf{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,I.Z)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ks(){return window}(0,j.Pz)("authIdTokenMaxAge"),function hw(h){(0,Me._registerComponent)(new nn.wA("auth",(c,{options:l})=>{const p=c.getProvider("app").getImmediate(),m=c.getProvider("heartbeat"),v=c.getProvider("app-check-internal"),{apiKey:T,authDomain:x}=p.options;K(T&&!T.includes(":"),"invalid-api-key",{appName:p.name});const q={apiKey:T,authDomain:x,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aa(h)},ae=new bI(p,m,v,q);return function LS(h,c){const l=c?.persistence||[],p=(Array.isArray(l)?l:[l]).map(Ge);c?.errorMap&&h._updateErrorMap(c.errorMap),h._initializeWithPersistence(p,c?.popupRedirectResolver)}(ae,l),ae},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,p)=>{c.getProvider("auth-internal").initialize()})),(0,Me._registerComponent)(new nn.wA("auth-internal",c=>{const l=$t(c.getProvider("auth").getImmediate());return new Rf(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Me.registerVersion)(lw,"1.4.0",function Gu(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(h)),(0,Me.registerVersion)(lw,"1.4.0","esm2017")}("Browser");function xf(){return xf=(0,I.Z)(function*(h,c,l){var p;const{BuildInfo:m}=Ks();Bt(c.sessionId,"AuthEvent did not contain a session ID");const v=yield function g_(h){return Vl.apply(this,arguments)}(c.sessionId),T={};return Ve()?T.ibi=m.packageName:S()?T.apn=m.packageName:_t(h,"operation-not-supported-in-this-environment"),m.displayName&&(T.appDisplayName=m.displayName),T.sessionId=v,Ea(h,l,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,T)}),xf.apply(this,arguments)}function Zu(){return(Zu=(0,I.Z)(function*(h){const{BuildInfo:c}=Ks(),l={};Ve()?l.iosBundleId=c.packageName:S()?l.androidPackageName=c.packageName:_t(h,"operation-not-supported-in-this-environment"),yield vf(h,l)})).apply(this,arguments)}function Ku(){return(Ku=(0,I.Z)(function*(h,c,l){const{cordova:p}=Ks();let m=()=>{};try{yield new Promise((v,T)=>{let x=null;function q(){var ve;v();const sn=null===(ve=p.plugins.browsertab)||void 0===ve?void 0:ve.close;"function"==typeof sn&&sn(),"function"==typeof l?.close&&l.close()}function ae(){x||(x=window.setTimeout(()=>{T(xt(h,"redirect-cancelled-by-user"))},2e3))}function ge(){"visible"===document?.visibilityState&&ae()}c.addPassiveListener(q),document.addEventListener("resume",ae,!1),S()&&document.addEventListener("visibilitychange",ge,!1),m=()=>{c.removePassiveListener(q),document.removeEventListener("resume",ae,!1),document.removeEventListener("visibilitychange",ge,!1),x&&window.clearTimeout(x)}})}finally{m()}})).apply(this,arguments)}function Vl(){return(Vl=(0,I.Z)(function*(h){const c=function m_(h){if(Bt(/[0-9a-zA-Z]+/.test(h),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(h);const c=new ArrayBuffer(h.length),l=new Uint8Array(c);for(let p=0;p<h.length;p++)l[p]=h.charCodeAt(p);return l}(h),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(m=>m.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class mw extends yf{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,I.Z)(function*(){yield c.initPromise})()}}function y_(h){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,I.Z)(function*(h){const c=yield Mf()._get(Zn(h));return c&&(yield Mf()._remove(Zn(h))),c})).apply(this,arguments)}function Qu(){const h=[];for(let l=0;l<20;l++){const p=Math.floor(62*Math.random());h.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return h.join("")}function Mf(){return Ge(qi)}function Zn(h){return Nn("authEvent",h.config.apiKey,h.name)}function Ia(h){if(!h?.includes("?"))return{};const[c,...l]=h.split("?");return(0,j.zd)(l.join("?"))}const Ul=class E_{constructor(){this._redirectPersistence=bo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Al,this._overrideRedirectResult=gf}_initialize(c){var l=this;return(0,I.Z)(function*(){const p=c._key();let m=l.eventManagers.get(p);return m||(m=new mw(c),l.eventManagers.set(p,m),l.attachCallbackListeners(c,m)),m})()}_openPopup(c){_t(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,p,m){var v=this;return(0,I.Z)(function*(){!function gw(h){var c,l,p,m,v,T,x,q,ae,ge;const ve=Ks();K("function"==typeof(null===(c=ve?.universalLinks)||void 0===c?void 0:c.subscribe),h,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),K(typeof(null===(l=ve?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),K("function"==typeof(null===(v=null===(m=null===(p=ve?.cordova)||void 0===p?void 0:p.plugins)||void 0===m?void 0:m.browsertab)||void 0===v?void 0:v.openUrl),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(q=null===(x=null===(T=ve?.cordova)||void 0===T?void 0:T.plugins)||void 0===x?void 0:x.browsertab)||void 0===q?void 0:q.isAvailable),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(ge=null===(ae=ve?.cordova)||void 0===ae?void 0:ae.InAppBrowser)||void 0===ge?void 0:ge.open),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const T=yield v._initialize(c);yield T.initialized(),T.resetRedirect(),function YI(){bl.clear()}(),yield v._originValidation(c);const x=function Ll(h,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:Qu(),postBody:null,tenantId:h.tenantId,error:xt(h,"no-auth-event")}}(c,p,m);yield function Po(h,c){return Mf()._set(Zn(h),c)}(c,x);const q=yield function Ki(h,c,l){return xf.apply(this,arguments)}(c,x,l),ae=yield function p_(h){const{cordova:c}=Ks();return new Promise(l=>{c.plugins.browsertab.isAvailable(p=>{let m=null;p?c.plugins.browsertab.openUrl(h):m=c.InAppBrowser.open(h,function Ze(h=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(h)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(h)}()?"_blank":"_system","location=yes"),l(m)})})}(q);return function kl(h,c,l){return Ku.apply(this,arguments)}(c,T,ae)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Ol(h){return Zu.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:p,handleOpenURL:m,BuildInfo:v}=Ks(),T=setTimeout((0,I.Z)(function*(){yield y_(c),l.onEvent(xo())}),500),x=function(){var ge=(0,I.Z)(function*(ve){clearTimeout(T);const sn=yield y_(c);let wi=null;sn&&ve?.url&&(wi=function v_(h,c){var l,p;const m=function Kn(h){const c=Ia(h),l=c.link?decodeURIComponent(c.link):void 0,p=Ia(l).link,m=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Ia(m).link||m||p||l||h}(c);if(m.includes("/__/auth/callback")){const v=Ia(m),T=v.firebaseError?function _w(h){try{return JSON.parse(h)}catch{return null}}(decodeURIComponent(v.firebaseError)):null,x=null===(p=null===(l=T?.code)||void 0===l?void 0:l.split("auth/"))||void 0===p?void 0:p[1],q=x?xt(x):null;return q?{type:h.type,eventId:h.eventId,tenantId:h.tenantId,error:q,urlResponse:null,sessionId:null,postBody:null}:{type:h.type,eventId:h.eventId,tenantId:h.tenantId,sessionId:h.sessionId,urlResponse:m,postBody:null}}return null}(sn,ve.url)),l.onEvent(wi||xo())});return function(sn){return ge.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,x);const q=m,ae=`${v.packageName.toLowerCase()}://`;Ks().handleOpenURL=function(){var ge=(0,I.Z)(function*(ve){if(ve.toLowerCase().startsWith(ae)&&x({url:ve}),"function"==typeof q)try{q(ve)}catch(sn){console.error(sn)}});return function(ve){return ge.apply(this,arguments)}}()}};function xo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:xt("no-auth-event")}}function Qi(){var h;return(null===(h=self?.location)||void 0===h?void 0:h.protocol)||null}function w_(h=(0,j.z$)()){return!("file:"!==Qi()&&"ionic:"!==Qi()&&"capacitor:"!==Qi()||!h.toLowerCase().match(/iphone|ipad|ipod|android/))}function vw(){try{const h=self.localStorage,c=Hs();if(h)return h.setItem(c,"1"),h.removeItem(c),!function hR(h=(0,j.z$)()){return function lR(){return(0,j.w1)()&&11===document?.documentMode}()||function dR(h=(0,j.z$)()){return/Edge\/\d+/.test(h)}(h)}()||(0,j.hl)()}catch{return T_()&&(0,j.hl)()}return!1}function T_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qs(){return(function uR(){return"http:"===Qi()||"https:"===Qi()}()||(0,j.ru)()||w_())&&!function cR(){return(0,j.b$)()||(0,j.UG)()}()&&vw()&&!T_()}function C_(){return w_()&&typeof document<"u"}function fn(){return(fn=(0,I.Z)(function*(){return!!C_()&&new Promise(h=>{const c=setTimeout(()=>{h(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),h(!0)})})})).apply(this,arguments)}const Qn={LOCAL:"local",NONE:"none",SESSION:"session"},Yu=K,Wr="persistence";function Bl(h){return ba.apply(this,arguments)}function ba(){return(ba=(0,I.Z)(function*(h){yield h._initializationPromise;const c=b_(),l=Nn(Wr,h.config.apiKey,h.name);c&&c.setItem(l,h._getPersistence())})).apply(this,arguments)}function b_(){var h;try{return(null===(h=function Iw(){return typeof window<"u"?window:null}())||void 0===h?void 0:h.sessionStorage)||null}catch{return null}}const fR=K;class Ys{constructor(){this.browserResolver=Ge(Ro),this.cordovaResolver=Ge(Ul),this.underlyingResolver=null,this._redirectPersistence=bo,this._completeRedirectFn=Al,this._overrideRedirectResult=gf}_initialize(c){var l=this;return(0,I.Z)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,p,m){var v=this;return(0,I.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openPopup(c,l,p,m)})()}_openRedirect(c,l,p,m){var v=this;return(0,I.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openRedirect(c,l,p,m)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return C_()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return fR(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,I.Z)(function*(){if(c.underlyingResolver)return;const l=yield function Ew(){return fn.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function ww(h){return h.unwrap()}function Of(h){return Tw(h)}function Tw(h){const{_tokenResponse:c}=h instanceof j.ZR?h.customData:h;if(!c)return null;if(!(h instanceof j.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return kn.credentialFromResult(h);const l=c.providerId;if(!l||l===Je.PASSWORD)return null;let p;switch(l){case Je.GOOGLE:p=Ei;break;case Je.FACEBOOK:p=ai;break;case Je.GITHUB:p=ut;break;case Je.TWITTER:p=Ui;break;default:const{oauthIdToken:m,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:x,nonce:q}=c;return v||T||m||x?x?l.startsWith("saml.")?Fs._create(l,x):Li._fromParams({providerId:l,signInMethod:l,pendingToken:x,idToken:m,accessToken:v}):new fs(l).credential({idToken:m,accessToken:v,rawNonce:q}):null}return h instanceof j.ZR?p.credentialFromError(h):p.credentialFromResult(h)}function fr(h,c){return c.catch(l=>{throw l instanceof j.ZR&&function Da(h,c){var l;const p=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new Cw(h,function qS(h,c){var l;const p=(0,j.m9)(h),m=c;return K(c.customData.operationType,p,"argument-error"),K(null===(l=m.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,p,"argument-error"),km._fromError(p,m)}(h,c));else if(p){const m=Tw(c),v=c;m&&(v.credential=m,v.tenantId=p.tenantId||void 0,v.email=p.email||void 0,v.phoneNumber=p.phoneNumber||void 0)}}(h,l),l}).then(l=>{const m=l.user;return{operationType:l.operationType,credential:Of(l),additionalUserInfo:Gn(l),user:ms.getOrCreate(m)}})}function kf(h,c){return Vf.apply(this,arguments)}function Vf(){return(Vf=(0,I.Z)(function*(h,c){const l=yield c;return{verificationId:l.verificationId,confirm:p=>fr(h,l.confirm(p))}})).apply(this,arguments)}class Cw{constructor(c,l){this.resolver=l,this.auth=function Zr(h){return h.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return fr(ww(this.auth),this.resolver.resolveSignIn(c))}}class ms{constructor(c){this._delegate=c,this.multiFactor=function YS(h){const c=(0,j.m9)(h);return Lm.has(c)||Lm.set(c,Vm._fromUser(c)),Lm.get(c)}(c)}static getOrCreate(c){return ms.USER_MAP.has(c)||ms.USER_MAP.set(c,new ms(c)),ms.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,I.Z)(function*(){return fr(l.auth,Rm(l._delegate,c))})()}linkWithPhoneNumber(c,l){var p=this;return(0,I.Z)(function*(){return kf(p.auth,function uf(h,c,l){return cf.apply(this,arguments)}(p._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,I.Z)(function*(){return fr(l.auth,function e_(h,c,l){return ff.apply(this,arguments)}(l._delegate,c,Ys))})()}linkWithRedirect(c){var l=this;return(0,I.Z)(function*(){return yield Bl($t(l.auth)),i_(l._delegate,c,Ys)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,I.Z)(function*(){return fr(l.auth,Pm(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return kf(this.auth,function Wi(h,c,l){return wl.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return fr(this.auth,function Xm(h,c,l){return Cl.apply(this,arguments)}(this._delegate,c,Ys))}reauthenticateWithRedirect(c){var l=this;return(0,I.Z)(function*(){return yield Bl($t(l.auth)),gn(l._delegate,c,Ys)})()}sendEmailVerification(c){return function ha(h,c){return Yt.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,I.Z)(function*(){return yield function kI(h,c){return cl.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function ps(h,c){return fa((0,j.m9)(h),c,null)}(this._delegate,c)}updatePassword(c){return function Nu(h,c){return fa((0,j.m9)(h),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function lf(h,c){return ya.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Nm(h,c){return Hi.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function Mu(h,c,l){return js.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ms.USER_MAP=new WeakMap;const Xu=K;let D_=(()=>{class h{constructor(l,p){if(this.app=l,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:m}=l.options;Xu(m,"invalid-api-key",{appName:l.name}),Xu(m,"invalid-api-key",{appName:l.name});const v=typeof window<"u"?Ys:void 0;this._delegate=p.initialize({options:{persistence:$l(m,l.name),popupRedirectResolver:v}}),this._delegate._updateErrorMap(Bn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ms.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,p){!function Dr(h,c,l){const p=$t(h);K(p._canInitEmulator,p,"emulator-config-failed"),K(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const m=!!l?.disableWarnings,v=Eu(c),{host:T,port:x}=function RI(h){const c=Eu(h),l=/(\/\/)?([^?#/]+)/.exec(h.substr(c.length));if(!l)return{host:"",port:null};const p=l[2].split("@").pop()||"",m=/^(\[[^\]]+\])(:|$)/.exec(p);if(m){const v=m[1];return{host:v,port:Nh(p.substr(v.length+1))}}{const[v,T]=p.split(":");return{host:v,port:Nh(T)}}}(c);p.config.emulator={url:`${v}//${T}${null===x?"":`:${x}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:T,port:x,protocol:v.replace(":",""),options:Object.freeze({disableWarnings:m})}),m||function PI(){function h(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h())}()}(this._delegate,l,p)}applyActionCode(l){return function xm(h,c){return ca.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return Mm(this._delegate,l)}confirmPasswordReset(l,p){return function Hr(h,c,l){return fl.apply(this,arguments)}(this._delegate,l,p)}createUserWithEmailAndPassword(l,p){var m=this;return(0,I.Z)(function*(){return fr(m._delegate,function Ue(h,c,l){return Mt.apply(this,arguments)}(m._delegate,l,p))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function xu(h,c){return pl.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function la(h,c){const l=ds.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,I.Z)(function*(){Xu(Qs(),l._delegate,"operation-not-supported-in-this-environment");const p=yield function mf(h,c){return ju.apply(this,arguments)}(l._delegate,Ys);return p?fr(l._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function wa(h,c){$t(h)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,p,m){const{next:v,error:T,complete:x}=jl(l,p,m);return this._delegate.onAuthStateChanged(v,T,x)}onIdTokenChanged(l,p,m){const{next:v,error:T,complete:x}=jl(l,p,m);return this._delegate.onIdTokenChanged(v,T,x)}sendSignInLinkToEmail(l,p){return function Pu(h,c,l){return On.apply(this,arguments)}(this._delegate,l,p)}sendPasswordResetEmail(l,p){return function dr(h,c,l){return Bs.apply(this,arguments)}(this._delegate,l,p||void 0)}setPersistence(l){var p=this;return(0,I.Z)(function*(){let m;switch(function Ca(h,c){Yu(Object.values(Qn).includes(c),h,"invalid-persistence-type"),(0,j.b$)()?Yu(c!==Qn.SESSION,h,"unsupported-persistence-type"):(0,j.UG)()?Yu(c===Qn.NONE,h,"unsupported-persistence-type"):T_()?Yu(c===Qn.NONE||c===Qn.LOCAL&&(0,j.hl)(),h,"unsupported-persistence-type"):Yu(c===Qn.NONE||vw(),h,"unsupported-persistence-type")}(p._delegate,l),l){case Qn.SESSION:m=bo;break;case Qn.LOCAL:m=(yield Ge(_a)._isAvailable())?_a:qi;break;case Qn.NONE:m=Qt;break;default:return _t("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(m)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return fr(this._delegate,function Am(h){return ul.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return fr(this._delegate,ll(this._delegate,l))}signInWithCustomToken(l){return fr(this._delegate,function LI(h,c){return Rr.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,p){return fr(this._delegate,function Ii(h,c,l){return ll((0,j.m9)(h),Fh.credential(c,l)).catch(function(){var p=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&tt(h),m});return function(m){return p.apply(this,arguments)}}())}(this._delegate,l,p))}signInWithEmailLink(l,p){return fr(this._delegate,function dn(h,c,l){return ji.apply(this,arguments)}(this._delegate,l,p))}signInWithPhoneNumber(l,p){return kf(this._delegate,function Qm(h,c,l){return af.apply(this,arguments)}(this._delegate,l,p))}signInWithPopup(l){var p=this;return(0,I.Z)(function*(){return Xu(Qs(),p._delegate,"operation-not-supported-in-this-environment"),fr(p._delegate,function Jm(h,c,l){return hf.apply(this,arguments)}(p._delegate,l,Ys))})()}signInWithRedirect(l){var p=this;return(0,I.Z)(function*(){return Xu(Qs(),p._delegate,"operation-not-supported-in-this-environment"),yield Bl(p._delegate),JI(p._delegate,l,Ys)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function rn(h,c){return le.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return h.Persistence=Qn,h})();function jl(h,c,l){let p=h;"function"!=typeof h&&({next:p,error:c,complete:l}=h);const m=p;return{next:T=>m(T&&ms.getOrCreate(T)),error:c,complete:l}}function $l(h,c){const l=function Ju(h,c){const l=b_();if(!l)return[];const p=Nn(Wr,h,c);switch(l.getItem(p)){case Qn.NONE:return[Qt];case Qn.LOCAL:return[_a,bo];case Qn.SESSION:return[bo];default:return[]}}(h,c);if(typeof self<"u"&&!l.includes(_a)&&l.push(_a),typeof window<"u")for(const p of[qi,bo])l.includes(p)||l.push(p);return l.includes(Qt)||l.push(Qt),l}class Lf{constructor(){this.providerId="phone",this._delegate=new kn(ww(xe.Z.auth()))}static credential(c,l){return kn.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}Lf.PHONE_SIGN_IN_METHOD=kn.PHONE_SIGN_IN_METHOD,Lf.PROVIDER_ID=kn.PROVIDER_ID;const ec=K;class bw{constructor(c,l,p=xe.Z.app()){var m;ec(null===(m=p.options)||void 0===m?void 0:m.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new qI(p.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Dw(h){h.INTERNAL.registerComponent(new nn.wA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new D_(l,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Fh,FacebookAuthProvider:ai,GithubAuthProvider:ut,GoogleAuthProvider:Ei,OAuthProvider:fs,SAMLAuthProvider:Su,PhoneAuthProvider:Lf,PhoneMultiFactorGenerator:oR,RecaptchaVerifier:bw,TwitterAuthProvider:Ui,Auth:D_,AuthCredential:ls,Error:j.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),h.registerVersion("@firebase/auth-compat","0.4.9")}(xe.Z)},861:(as,Fn,Fe)=>{function I(j,Me,dt,Wt,nn,Un,Je){try{var Q=j[Un](Je),ie=Q.value}catch(Ie){return void dt(Ie)}Q.done?Me(ie):Promise.resolve(ie).then(Wt,nn)}function xe(j){return function(){var Me=this,dt=arguments;return new Promise(function(Wt,nn){var Un=j.apply(Me,dt);function Je(ie){I(Un,Wt,nn,Je,Q,"next",ie)}function Q(ie){I(Un,Wt,nn,Je,Q,"throw",ie)}Je(void 0)})}}Fe.d(Fn,{Z:()=>xe})},582:(as,Fn,Fe)=>{function Me(V,F){var H={};for(var z in V)Object.prototype.hasOwnProperty.call(V,z)&&F.indexOf(z)<0&&(H[z]=V[z]);if(null!=V&&"function"==typeof Object.getOwnPropertySymbols){var Y=0;for(z=Object.getOwnPropertySymbols(V);Y<z.length;Y++)F.indexOf(z[Y])<0&&Object.prototype.propertyIsEnumerable.call(V,z[Y])&&(H[z[Y]]=V[z[Y]])}return H}function Ie(V,F,H,z){return new(H||(H=Promise))(function(B,pe){function rt(at){try{we(z.next(at))}catch(Kt){pe(Kt)}}function _e(at){try{we(z.throw(at))}catch(Kt){pe(Kt)}}function we(at){at.done?B(at.value):function Y(B){return B instanceof H?B:new H(function(pe){pe(B)})}(at.value).then(rt,_e)}we((z=z.apply(V,F||[])).next())})}function Ut(V){return this instanceof Ut?(this.v=V,this):new Ut(V)}function _t(V,F,H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y,z=H.apply(V,F||[]),B=[];return Y={},pe("next"),pe("throw"),pe("return"),Y[Symbol.asyncIterator]=function(){return this},Y;function pe(Ot){z[Ot]&&(Y[Ot]=function(er){return new Promise(function(xn,cr){B.push([Ot,er,xn,cr])>1||rt(Ot,er)})})}function rt(Ot,er){try{!function _e(Ot){Ot.value instanceof Ut?Promise.resolve(Ot.value.v).then(we,at):Kt(B[0][2],Ot)}(z[Ot](er))}catch(xn){Kt(B[0][3],xn)}}function we(Ot){rt("next",Ot)}function at(Ot){rt("throw",Ot)}function Kt(Ot,er){Ot(er),B.shift(),B.length&&rt(B[0][0],B[0][1])}}function Ir(V){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H,F=V[Symbol.asyncIterator];return F?F.call(V):(V=function mt(V){var F="function"==typeof Symbol&&Symbol.iterator,H=F&&V[F],z=0;if(H)return H.call(V);if(V&&"number"==typeof V.length)return{next:function(){return V&&z>=V.length&&(V=void 0),{value:V&&V[z++],done:!V}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}(V),H={},z("next"),z("throw"),z("return"),H[Symbol.asyncIterator]=function(){return this},H);function z(B){H[B]=V[B]&&function(pe){return new Promise(function(rt,_e){!function Y(B,pe,rt,_e){Promise.resolve(_e).then(function(we){B({value:we,done:rt})},pe)}(rt,_e,(pe=V[B](pe)).done,pe.value)})}}}Fe.d(Fn,{FC:()=>_t,KL:()=>Ir,_T:()=>Me,mG:()=>Ie,qq:()=>Ut}),"function"==typeof SuppressedError&&SuppressedError}},as=>{as(as.s=401)}]);